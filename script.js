(()=>{"use strict";const e=THREE,t=window.innerWidth<768,o={startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)},r=t?o.startMobile:o.startDesktop,c=t?o.mobileLookAt:o.desktopLookAt,n=(new e.Vector3(.45175,.5,.55675),"https://c-am.b-cdn.net/CAM/matcap24.png"),p="https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",s=(new e.Vector3(.65725,.55,.75325),new e.Vector3(.9085,.55,.8035),new e.Vector3(.75775,.55,1.05475),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.15475,.55,1.15525),new e.Scene),a=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),i=document.querySelector(".el--home-maze.el");i||console.error("Container .el--home-maze.el not found!");const u=new e.Clock;function y(){const e=Math.min(window.devicePixelRatio,t?2:3);a.setPixelRatio(e),a.setSize(i.clientWidth,i.clientHeight)}document.querySelector("canvas");const l=document.querySelector(".sc--final.sc"),w=(l?.querySelector(".cr--final.cr"),document.querySelectorAll(".cmp--pov.cmp"),new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3));w.quaternion.clone();const v=(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0));window.setCamera=function(t){if("string"==typeof t){const[o,r,c]=t.split(",").map(Number);t=new e.Vector3(o,r,c)}w.lookAt(t),w.updateProjectionMatrix(),w.updateMatrix(),w.updateMatrixWorld()};const h=(new e.TextureLoader).load(n),V=new e.MeshMatcapMaterial({matcap:h}),g=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),m=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),d=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),A={blue:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new e.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},T={CAM_Pacman_Backframe:A.blue,"CAM-Pacman_Bitcoin_1":A.white,"CAM-Pacman_Bitcoin_2":A.white,"CAM-Pacman_Bottom":A.blue,"CAM-Pacman_Top":A.blue,"CAM-Pacman_Eye":A.white,CAM_Pacman_Logo_1:A.white,CAM_Pacman_Logo_2:A.white,"CAM-Pacman_Shell_Boolean":A.blue,"CAM-Pacman_Shell":A.blue,"CAM-Pacman_Bottom_electronic":A.white,"CAM-Pacman_Top_electronic":A.white,"CAM-Pacman_Bottom_Text":A.white,"CAM-Pacman_Top_Text":A.white,default:A.blue},P=(Array(5).fill(m),new e.GLTFLoader);let f;const M=new e.Group;s.add(M);const x={pacman:M,ghost1:new e.Mesh(new e.BufferGeometry,m),ghost2:new e.Mesh(new e.BufferGeometry,m),ghost3:new e.Mesh(new e.BufferGeometry,m),ghost4:new e.Mesh(new e.BufferGeometry,m),ghost5:new e.Mesh(new e.BufferGeometry,m)},O={Ghost_EUR:x.ghost1,Ghost_CHF:x.ghost2,Ghost_YEN:x.ghost3,Ghost_USD:x.ghost4,Ghost_GBP:x.ghost5};Object.values(x).forEach((e=>s.add(e)));const b=[{pos:new e.Vector3(.25525,.55,.6025),type:"straight"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"straight"},{pos:new e.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new e.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,.6025),type:"straight"}],C=[{pos:new e.Vector3(-.44825,.55,.502),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,.8035),type:"straight"},{pos:new e.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.703),type:"straight"},{pos:new e.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new e.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.502),type:"straight"}],S=[{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new e.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.502),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new e.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"}],z=[{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.703),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.2005),type:"straight"},{pos:new e.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.301),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"straight"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"straight"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"upperArc"}],_=[{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new e.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.8035),type:"straight"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"straight"},{pos:new e.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.1),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"}],L=[{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new e.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new e.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],I=[{pos:new e.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],E=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],$=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],k=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],q=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],F=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}],D=t?o.startMobile:o.startDesktop,H=t?o.secondMobile:o.secondDesktop,R=(new e.CubicBezierCurve3(D,H,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175)),{pacmanHomePath:{points:b,color:16776960},ghost1HomePath:{points:C,color:16711680},ghost2HomePath:{points:S,color:16753920},ghost3HomePath:{points:z,color:16738740},ghost4HomePath:{points:_,color:3329330},ghost5HomePath:{points:L,color:16767673},cameraPOVPath:{points:I,color:16777215},ghost1POVPath:{points:E,color:16711680},ghost2POVPath:{points:$,color:16753920},ghost3POVPath:{points:k,color:16738740},ghost4POVPath:{points:q,color:3329330},ghost5POVPath:{points:F,color:16767673}}),B={};Object.entries(R).forEach((([t,o])=>{B[t]=function(t){const o=new e.CurvePath;for(let r=0;r<t.length-1;r++){const c=t[r],n=t[r+1];if("straight"===c.type){const t=new e.LineCurve3(c.pos,n.pos);o.add(t)}else if("curve"===c.type){let t;t="upperArc"===c.curveType?new e.Vector3(c.pos.x,c.pos.y,n.pos.z):"lowerArc"===c.curveType?new e.Vector3(n.pos.x,c.pos.y,c.pos.z):"forwardDownArc"===c.curveType?new e.Vector3(c.pos.x,n.pos.y,c.pos.z):new e.Vector3(c.pos.x,c.pos.y,n.pos.z);const r=new e.QuadraticBezierCurve3(c.pos,t,n.pos);o.add(r)}}return o}(o.points)}));const G={pacman:B.pacmanHomePath,ghost1:B.ghost1HomePath,ghost2:B.ghost2HomePath,ghost3:B.ghost3HomePath,ghost4:B.ghost4HomePath,ghost5:B.ghost5HomePath};let j="HOME";const N=new e.Vector3(.55675,.5,.45175),Q={},W={},U={};let Y,Z=0,J=0,K=0,X=new e.Vector3,ee=new e.Vector3,te=new e.Quaternion,oe=Date.now();function re(){j="HOME",oe=Date.now(),Z=0,J=0,console.log(`🔄 Animation timing reset - home animation will continue from progress: ${K.toFixed(3)}`),w.position.copy(X),w.quaternion.copy(te),Object.keys(x).forEach((t=>{if(Q[t]&&W[t]&&x[t]){console.log(`Resetting ${t} to captured position:`,Q[t]),x[t].position.copy(Q[t]),x[t].rotation.copy(W[t]);const o=x[t];o instanceof e.Mesh&&o.material?Array.isArray(o.material)?o.material.forEach((e=>{"opacity"in e&&(e.opacity=1)})):"opacity"in o.material&&(o.material.opacity=1):o instanceof e.Group&&o.traverse((t=>{t instanceof e.Mesh&&t.material&&(Array.isArray(t.material)?t.material.forEach((e=>{"opacity"in e&&(e.opacity=1)})):"opacity"in t.material&&(t.material.opacity=1))}))}})),window.animationDebugInfo&&(window.animationDebugInfo.state=j,window.animationDebugInfo.scrollProgress=0)}function ce(){const t=document.querySelector(".sc--home");if(!t)return void console.warn(".sc--home element not found");const o=t.getBoundingClientRect(),r=window.innerHeight,c=o.top<=r&&o.bottom>-r;let n=0;if(o.top<=0&&o.bottom>=0){const e=o.height,t=Math.abs(o.top);n=Math.min(1,t/e)}else o.bottom<0&&(n=1);if(console.log(`Scroll Debug: rect.top=${o.top}, rect.bottom=${o.bottom}, sectionHeight=${o.height}, scrollProgress=${n}, animationRange=${o.top<=0&&o.bottom>=0?o.height:"outside"}`),c)if(n>0){if("HOME"===j){const t=Date.now();K=(K+(t-oe-Z)/1e3*.1)%1,console.log(`💾 Saved home animation progress: ${K.toFixed(3)}`),j="SCROLL_ANIMATION",console.log("Switched to SCROLL_ANIMATION state"),Object.keys(x).forEach((e=>{x[e]&&(Q[e]=x[e].position.clone(),W[e]=x[e].rotation.clone(),console.log(`Captured ${e} at position:`,x[e].position,"rotation:",x[e].rotation))})),console.log("All ghost positions captured:",Q),console.log("All ghost rotations captured:",W),Object.keys(Q).forEach((t=>{const o=Q[t].clone(),r=N.clone(),c=new e.Vector3((o.x+r.x)/2,2,(o.z+r.z)/2);U[t]=new e.QuadraticBezierCurve3(o,c,r),console.log(`Created bezier curve for ${t}:`,{start:o,control:c,end:r})})),function(){const t=w.position.clone();X.copy(w.position),te.copy(w.quaternion);const o=new e.Vector3(0,0,-1);o.applyQuaternion(w.quaternion),ee=w.position.clone().add(o.multiplyScalar(5));const r=window.innerWidth<768,c=new e.Vector3(.5,2.5,2),n=new e.Vector3(-1.5,3,2),p=r?c:n,s=(new e.Vector3).lerpVectors(t,p,.3);Y=new e.CubicBezierCurve3(t,s,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175)),console.log("Camera path created starting from current position:",`${t.x.toFixed(2)}, ${t.y.toFixed(2)}, ${t.z.toFixed(2)}`,"to maze center (0.55675, 0.5, 0.45175)")}()}console.log(`Animating with scrollProgress: ${n}`),Object.keys(x).forEach((t=>{U[t]&&function(t,o){if(!(U[t]&&x[t]&&Q[t]&&W[t]))return;const r=x[t],c=U[t].getPoint(o);r.position.copy(c);const n=W[t],p=new e.Euler(Math.PI/-2,0,0),s=new e.Euler(n.x+(p.x-n.x)*o,n.y+(p.y-n.y)*o,n.z+(p.z-n.z)*o);r.rotation.copy(s),o>.9&&("ghost1"===t||"pacman"===t)&&console.log(`${t} at ${o.toFixed(2)}: original=(${(180*n.x/Math.PI).toFixed(1)}°, ${(180*n.y/Math.PI).toFixed(1)}°, ${(180*n.z/Math.PI).toFixed(1)}°) current=(${(180*s.x/Math.PI).toFixed(1)}°, ${(180*s.y/Math.PI).toFixed(1)}°, ${(180*s.z/Math.PI).toFixed(1)}°)`);let a=1;o>=.8&&(a=1-(o-.8)/(1-.8),a=Math.max(0,a)),r instanceof e.Mesh&&r.material?Array.isArray(r.material)?r.material.forEach((e=>{"opacity"in e&&(e.opacity=a)})):"opacity"in r.material&&(r.material.opacity=a):r instanceof e.Group&&r.traverse((t=>{t instanceof e.Mesh&&t.material&&(Array.isArray(t.material)?t.material.forEach((e=>{"opacity"in e&&(e.opacity=a)})):"opacity"in t.material&&(t.material.opacity=a))}))}(t,Math.min(n/.8,1))})),function(t){if(!Y)return void console.warn("Camera path not created yet");w.fov=50,w.updateProjectionMatrix();const o=Y.getPointAt(t);if(w.position.copy(o),new e.Vector3(.55675,.5,.45175).clone(),0===t)w.quaternion.copy(te);else{const o=new e.Quaternion;o.slerpQuaternions(te,v,t),w.quaternion.copy(o)}console.log(`Camera at progress ${t.toFixed(2)}: position=${o.x.toFixed(2)}, ${o.y.toFixed(2)}, ${o.z.toFixed(2)}`)}(n),window.animationDebugInfo&&(window.animationDebugInfo.scrollProgress=n)}else 0===n&&"HOME"!==j&&(console.log("Scroll progress at 0, resetting to home state"),re());else window.scrollY<=10&&(console.log("At top of page - resetting to HOME"),re())}function ne(){const e=document.querySelector(".sc--intro");if(!e)return;const t=e.getBoundingClientRect(),o=window.innerHeight,r=t.top,c=t.bottom,n=t.height;if(r<=o&&c>=0){const e=Math.max(0,-r),t=Math.min(1,e/n);!function(e){const t=document.querySelector(".sc_h--intro");if(!t)return;t.style.display="block";let o=0,r=0;if(e<=.5){const t=Math.min(1,2*e);if(t<=.3){const e=t/.3;o=.8*e,r=e}else if(t<=.7)o=.8+(t-.3)/.4*.4,r=1;else{const e=(t-.7)/.3;o=1.2+.3*e,r=1-e}}else o=1.5,r=0;t.style.transform=`scale(${o})`,t.style.opacity=r.toString()}(t),function(e){const t=document.querySelector(".sc_b--intro");if(!t)return;t.style.display="block";let o=.5,r=0;if(e>=.5){const t=Math.min(1,(e-.5)/.5);if(t<=.3){const e=t/.3;o=.5+.3*e,r=e}else if(t<=.7)o=.8+(t-.3)/.4*.4,r=1;else{const e=(t-.7)/.3;o=1.2+.3*e,r=1-e}}else o=.5,r=0;t.style.transform=`scale(${o})`,t.style.opacity=r.toString()}(t)}else{const e=document.querySelector(".sc_h--intro"),t=document.querySelector(".sc_b--intro");e&&(e.style.display="none"),t&&(t.style.display="none")}}function pe(){if(function(){if(!w)return;let e=50;switch(j){case"HOME":case"SCROLL_ANIMATION":default:e=50;break;case"POV_ANIMATION":e=80}w.fov!==e&&(w.fov=e,w.updateProjectionMatrix(),console.log(`🎯 FOV changed instantly to: ${e}`))}(),f){const e=u.getDelta();f.update(e)}!function(){if("HOME"!==j)return;const t=Date.now(),o=(K+(t-oe-Z)/1e3*.1)%1;Object.entries(x).forEach((([t,r])=>{if(G[t])if("pacman"===t){const e=G[t].getPointAt(o);r.position.copy(e);const c=G[t].getTangentAt(o).normalize();r.lookAt(e.clone().add(c));const n=Math.atan2(c.x,c.z);void 0===r.previousZRotation&&(r.previousZRotation=n);let p=n-r.previousZRotation;p>Math.PI?p-=2*Math.PI:p<-Math.PI&&(p+=2*Math.PI);const s=.1,a=r.previousZRotation+p*s;r.previousZRotation=a,r.rotation.set(Math.PI/2,Math.PI,a+Math.PI/2)}else{const c=G[t].getPointAt(o);r.position.copy(c);const n=G[t].getTangentAt(o).normalize();r.lookAt(c.clone().add(n)),r instanceof e.Mesh&&r.material&&"opacity"in r.material&&(r.material.opacity=1)}}))}(),a.render(s,w),requestAnimationFrame(pe)}function se(){console.log("Initializing animation system..."),X=w.position.clone(),te=w.quaternion.clone();const t=new e.Vector3(0,0,-1);t.applyQuaternion(w.quaternion),ee=w.position.clone().add(t.multiplyScalar(5)),console.log("Captured initial camera position:",X),console.log("Captured initial camera quaternion:",te),console.log("Captured initial camera look-at target:",ee),window.animationDebugInfo={state:j,capturedPositions:Q,bezierCurves:U,povAnimationActive:!1},Object.keys(x).forEach((t=>{if(x[t]){x[t].visible=!0,console.log(`Ghost ${t} set to visible:`,x[t].visible);const o=x[t];o instanceof e.Mesh&&o.material&&"opacity"in o.material?o.material.opacity=1:o instanceof e.Group&&o.traverse((t=>{t instanceof e.Mesh&&t.material&&"opacity"in t.material&&(t.material.opacity=1)}))}})),console.log("Available paths:",Object.keys(G)),console.log("Ghosts:",Object.keys(x)),function(){console.log("Setting up intro animations...");const e=document.querySelector(".sc_h--intro");e?(e.style.transform="scale(0)",e.style.opacity="0",e.style.display="none",console.log("✅ Intro header element found and initialized")):console.warn("❌ Intro header element (.sc_h--intro) not found in DOM");const t=document.querySelector(".sc_b--intro");t?(t.style.transform="scale(0.5)",t.style.opacity="0",t.style.display="none",console.log("✅ Intro body element found and initialized")):console.warn("❌ Intro body element (.sc_b--intro) not found in DOM");const o=document.querySelectorAll('[class*="intro"]');console.log(`Found ${o.length} elements with 'intro' in class name:`,Array.from(o).map((e=>e.className)))}(),window.addEventListener("scroll",ce),window.addEventListener("scroll",ne),window.addEventListener("scroll",Me),console.log("Scroll triggers setup complete"),pe(),console.log("🎭 Initializing POV Animation System..."),he.cameraPOVPath=ve(ae),he.ghostPOVPaths={ghost1:ve(ie),ghost2:ve(ue),ghost3:ve(ye),ghost4:ve(le),ghost5:ve(we)},console.log("🎭 Created ghost POV paths:",Object.keys(he.ghostPOVPaths)),console.log("🎭 Ghost path lengths:",{ghost1:he.ghostPOVPaths.ghost1?.getLength()||0,ghost2:he.ghostPOVPaths.ghost2?.getLength()||0,ghost3:he.ghostPOVPaths.ghost3?.getLength()||0,ghost4:he.ghostPOVPaths.ghost4?.getLength()||0,ghost5:he.ghostPOVPaths.ghost5?.getLength()||0}),he.triggerPositions={ghost1:{triggerPos:new e.Vector3(.65725,.55,.75325),ghostTextPos:new e.Vector3(.7075,.55,.8035),camTextPos:new e.Vector3(.75775,.55,.8035),endPosition:new e.Vector3(.85825,.55,.8035),parent:Te[0],active:!1},ghost2:{triggerPos:new e.Vector3(.9085,.55,.8035),ghostTextPos:new e.Vector3(.95875,.55,.85375),camTextPos:new e.Vector3(.95875,.55,.904),endPosition:new e.Vector3(.95875,.55,1.0045),parent:Te[1],active:!1},ghost3:{triggerPos:new e.Vector3(.75775,.55,1.05475),ghostTextPos:new e.Vector3(.7075,.55,1.0045),camTextPos:new e.Vector3(.65725,.55,1.0045),endPosition:new e.Vector3(.55675,.55,1.0045),parent:Te[2],active:!1},ghost4:{triggerPos:new e.Vector3(.65725,.55,1.0045),ghostTextPos:new e.Vector3(.5065,.55,1.0045),camTextPos:new e.Vector3(.45625,.55,1.0045),endPosition:new e.Vector3(.35575,.55,1.0045),parent:Te[3],active:!1},ghost5:{triggerPos:new e.Vector3(.15475,.55,1.15525),ghostTextPos:new e.Vector3(.205,.55,1.2055),camTextPos:new e.Vector3(.25525,.55,1.2055),endPosition:new e.Vector3(.35575,.55,1.2055),parent:Te[4],active:!1}},console.log("✅ POV Animation System initialized"),console.log("Animation system initialized")}const ae=[{pos:new e.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],ie=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],ue=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],ye=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],le=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],we=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}];function ve(t){const o=new e.CurvePath;for(let r=0;r<t.length-1;r++){const c=t[r],n=t[r+1];if("straight"===c.type){const t=new e.LineCurve3(c.pos,n.pos);o.add(t)}else if("curve"===c.type){let t;t="upperArc"===c.curveType?new e.Vector3(c.pos.x,c.pos.y,n.pos.z):"lowerArc"===c.curveType?new e.Vector3(n.pos.x,c.pos.y,c.pos.z):"forwardDownArc"===c.curveType?new e.Vector3(c.pos.x,n.pos.y,c.pos.z):new e.Vector3((c.pos.x+n.pos.x)/2,(c.pos.y+n.pos.y)/2,(c.pos.z+n.pos.z)/2);const r=new e.QuadraticBezierCurve3(c.pos,t,n.pos);o.add(r)}}return o}const he={isActive:!1,cameraPOVPath:null,ghostPOVPaths:{},triggerPositions:{},previousCameraPosition:null,startRotationPoint:new e.Vector3(.55675,.55,1.306),endRotationPoint:new e.Vector3(-.14675,1,1.8085),targetLookAt:new e.Vector3(.55675,.6,1.306),finalLookAt:new e.Vector3(-.14675,0,1.8085),rotationStarted:!1,cachedStartYAngle:null};let Ve=null;const ge=.15,me=Math.PI/6,de=.02,Ae=.8,Te=document.querySelectorAll(".cmp--pov.cmp");function Pe(t){if(!w)return;const o=new e.Matrix4;o.lookAt(w.position,t,w.up);const r=(new e.Quaternion).setFromRotationMatrix(o);if(!Ve)return w.quaternion.copy(r),void(Ve=r.clone());const c=w.quaternion.angleTo(r);if(c>me){const t=new e.Quaternion,o=me/c;t.slerpQuaternions(w.quaternion,r,o),w.quaternion.copy(t)}else{const t=new e.Quaternion;t.slerpQuaternions(w.quaternion,r,ge),w.quaternion.copy(t)}Ve.copy(w.quaternion)}function fe(e,t=2e3){if(!he.cameraPOVPath)return 0;let o=0,r=1/0;for(let c=0;c<=t;c++){const n=c/t,p=he.cameraPOVPath.getPointAt(n).distanceTo(e);p<r&&(r=p,o=n)}return o}function Me(){const t=document.querySelector(".sc--pov");if(!t)return;const o=t.getBoundingClientRect(),r=window.innerHeight,c=o.top,n=o.height,p=.3*r,s=n+p;if(c<=r&&c+n>=-p){const t=Math.max(0,-c),o=Math.min(1,t/s);!he.isActive&&o>0&&("SCROLL_ANIMATION"===j||"HOME"===j)&&(console.log("🎭 POV Animation Started (Scroll)"),he.isActive=!0,console.log("🎭 POV Animation Start Handler Called!"),console.log("🎭 Available ghost paths:",Object.keys(he.ghostPOVPaths)),console.log("🎭 Available ghosts:",Object.keys(x)),j="POV_ANIMATION",he.cameraPOVPath&&(he.previousCameraPosition=he.cameraPOVPath.getPointAt(0)),he.rotationStarted=!1,he.cachedStartYAngle=null,Ve=null,x.pacman&&(x.pacman.visible=!0),Object.entries(x).forEach((([e,t])=>{"pacman"!==e&&(t.visible=!0,console.log(`🎭 Made ghost ${e} visible for POV animation`))})),window.animationDebugInfo&&(window.animationDebugInfo.povAnimationActive=!0),console.log("🎭 POV Animation Start Handler Complete!")),he.isActive&&function(t){he.cameraPOVPath&&he.isActive&&(function(t){if(!he.cameraPOVPath||!w)return;const o=he.cameraPOVPath.getPointAt(t);w.position.copy(o);const r=.973;if(t>=r&&!he.rotationStarted){he.rotationStarted=!0;const t=function(){if(!w)return new e.Vector3;const t=new e.Vector3(0,0,-1);t.applyQuaternion(w.quaternion);const o=new e.Vector3;return o.copy(w.position).add(t.multiplyScalar(10)),o}();he.cachedStartYAngle=Math.atan2(t.x-w.position.x,t.z-w.position.z)}if(t<r){const o=function(t){if(!he.cameraPOVPath)return new e.Vector3(0,0,-1);const o=he.cameraPOVPath.getTangentAt(t).normalize(),r=Math.min(t+de,1),c=he.cameraPOVPath.getTangentAt(r).normalize(),n=Math.max(t-de,0),p=he.cameraPOVPath.getTangentAt(n).normalize(),s=(new e.Vector3).addVectors(p,o).add(c).divideScalar(3).normalize();return o.dot(c)<.3?(new e.Vector3).addVectors(o.multiplyScalar(.3),s.multiplyScalar(.7)).normalize():(new e.Vector3).addVectors(o.multiplyScalar(.7),s.multiplyScalar(.3)).normalize()}(t);Pe(w.position.clone().add(o))}else{const o=(c=(t-r)/.027000000000000024)*c*(3-2*c);Pe((new e.Vector3).lerpVectors(he.targetLookAt,he.finalLookAt,o))}var c;he.previousCameraPosition&&he.previousCameraPosition.copy(o)}(t),function(e){if(!he.cameraPOVPath)return;const t=he.cameraPOVPath.getPointAt(e);console.log(`🎭 POV Ghost Update - Progress: ${e.toFixed(3)}, Camera: ${t.x.toFixed(2)}, ${t.y.toFixed(2)}, ${t.z.toFixed(2)}`),console.log("🎭 Available ghost paths:",Object.keys(he.ghostPOVPaths)),Object.entries(x).forEach((([t,o])=>{if("pacman"!==t)if(he.ghostPOVPaths[t]){console.log(`🎭 Updating ghost ${t} with path`);const r=he.ghostPOVPaths[t],c=r.getPointAt(e);o.position.copy(c);const n=r.getTangentAt(e).normalize(),p=c.clone().add(n);o.lookAt(p),o.visible=!0,console.log(`🎭 Ghost ${t} positioned at: ${c.x.toFixed(2)}, ${c.y.toFixed(2)}, ${c.z.toFixed(2)}, visible: ${o.visible}`)}else console.log(`🎭 No path found for ghost ${t}`);else o.visible=!1}))}(t),function(e){if(!he.cameraPOVPath)return;const t=he.cameraPOVPath.getPointAt(e);Object.entries(he.triggerPositions).forEach((([e,o])=>{const r=fe(t);o.triggerCameraProgress||(o.triggerCameraProgress=fe(o.triggerPos),o.ghostTextCameraProgress=fe(o.ghostTextPos),o.camTextCameraProgress=fe(o.camTextPos),o.endCameraProgress=fe(o.endPosition));let c=0,n=0;if(r>=o.triggerCameraProgress){const e=o.camTextCameraProgress-o.ghostTextCameraProgress,t=Math.max(0,Math.min(1,(r-o.ghostTextCameraProgress)/e));if(c=t<Ae?1:1-(t-Ae)/(1-Ae),r>=o.camTextCameraProgress){const e=o.endCameraProgress-o.camTextCameraProgress,t=Math.max(0,Math.min(1,(r-o.camTextCameraProgress)/e));n=t<Ae?1:1-(t-Ae)/(1-Ae)}}c>o.ghostTextOpacity?o.ghostTextOpacity+=.2*(c-o.ghostTextOpacity):o.ghostTextOpacity+=.1*(c-o.ghostTextOpacity),n>o.camTextOpacity?o.camTextOpacity+=.2*(n-o.camTextOpacity):o.camTextOpacity+=.1*(n-o.camTextOpacity),function(e){if(!e.parent)return;const t=e.parent.querySelector(".cmp--pov-ghost"),o=e.parent.querySelector(".cmp--pov-cam");if(t){const o=Math.max(0,Math.min(1,e.ghostTextOpacity));o>.01?(t.classList.remove("hidden"),t.style.opacity=o.toString()):(t.classList.add("hidden"),t.style.opacity="0")}if(o){const t=Math.max(0,Math.min(1,e.camTextOpacity));t>.01?(o.classList.remove("hidden"),o.style.opacity=t.toString()):(o.classList.add("hidden"),o.style.opacity="0")}}(o)}))}(t))}(o)}else he.isActive&&(console.log("🎭 POV Animation Ended (Scroll)"),he.isActive=!1,j="SCROLL_ANIMATION",Object.values(he.triggerPositions).forEach((e=>{if(e.parent){e.parent.classList.add("hidden"),e.parent.style.opacity="0";const t=e.parent.querySelector(".cmp--pov-ghost"),o=e.parent.querySelector(".cmp--pov-cam");t&&(t.classList.add("hidden"),t.style.opacity="0"),o&&(o.classList.add("hidden"),o.style.opacity="0")}e.active=!1,e.ghostTextOpacity=0,e.camTextOpacity=0})),Object.entries(Q).forEach((([t,o])=>{const r=x[t];r&&o&&(r.position.copy(o.position),r.rotation.copy(o.rotation),r.visible=!0,r instanceof e.Mesh&&r.material&&"opacity"in r.material?r.material.opacity=1:r instanceof e.Group&&r.traverse((t=>{t instanceof e.Mesh&&t.material&&"opacity"in t.material&&(t.material.opacity=1)})))})),x.pacman&&(x.pacman.visible=!0),window.animationDebugInfo&&(window.animationDebugInfo.povAnimationActive=!1),Ve=null)}async function xe(){console.log("Starting CAM 3D Animation...");try{t?a.setPixelRatio(Math.min(window.devicePixelRatio,2)):a.setPixelRatio(window.devicePixelRatio),a.shadowMap.enabled=!0,a.shadowMap.type=e.PCFSoftShadowMap,a.shadowMap.enabled=!0,a.shadowMap.type=e.PCFSoftShadowMap,i?(a.setSize(i.clientWidth,i.clientHeight),i.appendChild(a.domElement)):(a.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(a.domElement)),console.log("Renderer initialized"),window.addEventListener("load",y),window.addEventListener("resize",y),console.log("Renderer initialized"),function(){const t=new e.AmbientLight(16777215);s.add(t);const o=new e.DirectionalLight(16777215,.8);s.add(o),o.position.set(-5,15,10),o.shadow.mapSize.width=4096,o.shadow.mapSize.height=4096,o.shadow.camera.left=-20,o.shadow.camera.right=20,o.shadow.camera.top=20,o.shadow.camera.bottom=-20,o.shadow.camera.near=.1,o.shadow.camera.far=50,o.shadow.bias=-.001,o.shadow.radius=3,o.castShadow=!0,console.log("Lighting setup complete")}(),console.log("Lighting setup complete"),console.log("Camera start position:",r),console.log("Camera look at position:",c),w.position.copy(r),w.lookAt(c),console.log("Camera initialized at position:",w.position),console.log("Camera looking at:",c),console.log("Camera initialized"),window.addEventListener("resize",(()=>{w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix()})),console.log("Camera resize setup complete"),console.log("Loading 3D model..."),await async function(){return new Promise(((t,o)=>{console.log("Loading model from:",p),P.load(p,(function(o){console.log("GLTF model loaded successfully");const r=o.scene;r.traverse((t=>{if("CAM-Pacman"===t.name){const r=[];t.traverse((e=>{if(e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name){const t=T[e.name]||T.default;e.material=t,r.push(e)}else"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1)})),r.forEach((e=>x.pacman.add(e))),x.pacman.scale.set(.05,.05,.05),x.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),f=new e.AnimationMixer(x.pacman);const c={};o.animations.forEach((e=>{const t=f.clipAction(e);c[e.name]=t,t.setEffectiveWeight(1),t.play()}))}else if(t.name&&O[t.name]){const o=O[t.name],r=new e.Group;t.rotation.z=Math.PI,t.rotation.x=Math.PI/2,t.scale.set(.75,.75,.75);const c=[];t.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=m:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),c.push(e))})),c.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),r.add(e)})),o.add(r)}if(t.isMesh)if("CAM-Arena_LowRes_Top"===t.name)console.log("Found maze top mesh:",t.name),t.material=g,t.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===t.name)console.log("Found maze bottom mesh:",t.name),t.material=V,t.castShadow=!0;else if("CAM-Floor"===t.name){const o=t.clone();t.position.y=-.1,t.position.x=0,t.position.z=0,t.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),t.receiveShadow=!1,t.castShadow=!0,t.scale.set(.5,.5,.5),o.material=d,o.position.y=-.5,o.receiveShadow=!0,s.add(o)}})),r.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),s.add(r),r.position.set(.5,.5,.5),console.log("Model added to scene with",s.children.length,"total children"),t()}),(function(e){console.log("Loading progress:",e)}),(function(e){console.error("Error loading 3D model:",e),o(e)}))}))}(),console.log("Model loading complete"),console.log("Initializing animation system..."),se(),console.log("Animation system initialized"),console.log("Scene children count:",s.children.length),s.children.forEach(((e,t)=>{console.log(`Child ${t}:`,e.type,e.name||"unnamed")}))}catch(e){console.error("Initialization error:",e)}}new e.Vector3(.65725,.55,.75325),new e.Vector3(.7075,.55,.8035),new e.Vector3(.75775,.55,.8035),new e.Vector3(.85825,.55,.8035),Te[0],new e.Vector3(.9085,.55,.8035),new e.Vector3(.95875,.55,.85375),new e.Vector3(.95875,.55,.904),new e.Vector3(.95875,.55,1.0045),Te[1],new e.Vector3(.75775,.55,1.05475),new e.Vector3(.7075,.55,1.0045),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.55675,.55,1.0045),Te[2],new e.Vector3(.65725,.55,1.0045),new e.Vector3(.5065,.55,1.0045),new e.Vector3(.45625,.55,1.0045),new e.Vector3(.35575,.55,1.0045),Te[3],new e.Vector3(.15475,.55,1.15525),new e.Vector3(.205,.55,1.2055),new e.Vector3(.25525,.55,1.2055),new e.Vector3(.35575,.55,1.2055),Te[4],"loading"===document.readyState?document.addEventListener("DOMContentLoaded",xe):xe()})();
//# sourceMappingURL=script.js.map