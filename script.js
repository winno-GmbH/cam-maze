(()=>{"use strict";const e=THREE,t=window.innerWidth<768,o={startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)},n=t?o.startMobile:o.startDesktop,a=t?o.mobileLookAt:o.desktopLookAt,i="\n    varying vec3 vPosition;\n    void main() {\n      vPosition = position;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",r="\n    varying vec3 vPosition;\n    uniform float mixValue;\n    void main() {\n      float factor = (vPosition.y + 1.0) / 2.0;\n      vec3 colorA = vec3(0.0, 0.0, 1.0);\n      vec3 colorB = vec3(0.0, 1.0, 1.0);\n      vec3 colorC = vec3(1.0, 0.0, 0.0);\n      vec3 colorD = vec3(1.0, 1.0, 0.0);\n      \n      vec3 gradientA = mix(colorA, colorB, factor);\n      vec3 gradientB = mix(colorC, colorD, factor);\n      \n      vec3 finalColor = mix(gradientA, gradientB, mixValue);\n      gl_FragColor = vec4(finalColor, 1.0);\n    }\n  ",c=(new e.Vector3(.55675,.5,.45175),new e.Vector3(.55675,-5,.45175),new e.Vector3(.55675,-2.5,.45175),new e.Vector3(.55675,.55,1.306),new e.Vector3(-.14675,1,1.8085),new e.Vector3(.55675,.1,1.306),new e.Vector3(-.14675,0,1.8085),new e.Vector3(7.395407041377711,.9578031302345096,-4.312450290270135),new e.Vector3(.65725,.55,.75325),new e.Vector3(.7075,.55,.8035),new e.Vector3(.75775,.55,.8035),new e.Vector3(.85825,.55,.8035),w[0],new e.Vector3(.9085,.55,.8035),new e.Vector3(.95875,.55,.85375),new e.Vector3(.95875,.55,.904),new e.Vector3(.95875,.55,1.0045),w[1],new e.Vector3(.75775,.55,1.05475),new e.Vector3(.7075,.55,1.0045),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.55675,.55,1.0045),w[2],new e.Vector3(.65725,.55,1.0045),new e.Vector3(.5065,.55,1.0045),new e.Vector3(.45625,.55,1.0045),new e.Vector3(.35575,.55,1.0045),w[3],new e.Vector3(.15475,.55,1.15525),new e.Vector3(.205,.55,1.2055),new e.Vector3(.25525,.55,1.2055),new e.Vector3(.35575,.55,1.2055),w[4],new e.Scene),s=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),l=document.querySelector(".el--home-maze.el");function d(){const e=Math.min(window.devicePixelRatio,t?2:3);s.setPixelRatio(e),s.setSize(l.clientWidth,l.clientHeight)}new e.Clock,document.querySelector("canvas");const h=document.querySelector(".sc--final.sc"),w=(h?.querySelector(".cr--final.cr"),document.querySelectorAll(".cmp--pov.cmp")),m=new e.PerspectiveCamera(50,l.clientWidth/l.clientHeight,.001,1e3);m.quaternion.clone(),(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0)),window.setCamera=function(t){if("string"==typeof t){const[o,n,a]=t.split(",").map(Number);t=new e.Vector3(o,n,a)}m.lookAt(t),m.updateProjectionMatrix(),m.updateMatrix(),m.updateMatrixWorld()};const p=(new e.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),M=new e.MeshMatcapMaterial({matcap:p}),u=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),f=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),v=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),g=(new e.ShaderMaterial({vertexShader:i,fragmentShader:r,uniforms:{mixValue:{value:0}}}),{blue:new e.MeshBasicMaterial({color:1337811}),white:new e.MeshBasicMaterial({color:16777215}),default:new e.MeshBasicMaterial({color:1337811})}),P={CAM_Pacman_Backframe:g.blue,"CAM-Pacman_Bitcoin_1":g.white,"CAM-Pacman_Bitcoin_2":g.white,"CAM-Pacman_Bottom":g.blue,"CAM-Pacman_Top":g.blue,"CAM-Pacman_Eye":g.white,CAM_Pacman_Logo_1:g.white,CAM_Pacman_Logo_2:g.white,"CAM-Pacman_Shell_Boolean":g.blue,"CAM-Pacman_Shell":g.blue,"CAM-Pacman_Bottom_electronic":g.white,"CAM-Pacman_Top_electronic":g.white,"CAM-Pacman_Bottom_Text":g.white,"CAM-Pacman_Top_Text":g.white,default:g.blue},A=(Array(5).fill(f),e.GLTFLoader?new e.GLTFLoader:null);let _;const C=new e.Group;c.add(C);const S={pacman:C,ghost1:new e.Mesh(new e.BufferGeometry,f),ghost2:new e.Mesh(new e.BufferGeometry,f),ghost3:new e.Mesh(new e.BufferGeometry,f),ghost4:new e.Mesh(new e.BufferGeometry,f),ghost5:new e.Mesh(new e.BufferGeometry,f)};Object.values(S).forEach((e=>c.add(e)));const V={Ghost_EUR:S.ghost1,Ghost_CHF:S.ghost2,Ghost_YEN:S.ghost3,Ghost_USD:S.ghost4,Ghost_GBP:S.ghost5};async function b(){console.log("Starting CAM 3D Animation..."),t?s.setPixelRatio(Math.min(window.devicePixelRatio,2)):s.setPixelRatio(window.devicePixelRatio),s.shadowMap.enabled=!0,s.shadowMap.type=e.PCFSoftShadowMap,s.shadowMap.enabled=!0,s.shadowMap.type=e.PCFSoftShadowMap,s.setSize(l.clientWidth,l.clientHeight),l.appendChild(s.domElement),window.addEventListener("load",d),window.addEventListener("resize",d),function(){const t=new e.AmbientLight(16777215);c.add(t);const o=new e.DirectionalLight(16777215,.8);c.add(o),o.position.set(-5,15,10),o.shadow.mapSize.width=4096,o.shadow.mapSize.height=4096,o.shadow.camera.left=-20,o.shadow.camera.right=20,o.shadow.camera.top=20,o.shadow.camera.bottom=-20,o.shadow.camera.near=.1,o.shadow.camera.far=50,o.shadow.bias=-.001,o.shadow.radius=3,o.castShadow=!0}(),m.position.copy(n),m.lookAt(a),window.addEventListener("resize",(()=>{m.aspect=window.innerWidth/window.innerHeight,m.updateProjectionMatrix()})),await new Promise(((t,o)=>{if(!A)return console.warn("GLTFLoader not available. Please include GLTFLoader script."),void t();A.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(o){const n=o.scene,a=[];n.traverse((i=>{if("CAM-Pacman"===i.name){const t=[];i.traverse((e=>{e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name?(e.material=P[e.name]||P.default,t.push(e)):"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1,e.morphTargetInfluences=[],e.userData.skipAnimation=!0),a.push(e.name)})),t.forEach((e=>S.pacman.add(e))),S.pacman.scale.set(.05,.05,.05),S.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),_=new e.AnimationMixer(S.pacman);const n={};o.animations.forEach((e=>{const t=_.clipAction(e);t.getMixer().addEventListener("loop",(function(e){e.action.getRoot().traverse((function(e){e.userData&&e.userData.skipAnimation&&(e.updateMorphTargets=function(){})}))})),n[e.name]=t,t.setEffectiveWeight(0),t.play()})),Object.values(n).forEach((e=>{e.setEffectiveWeight(1)}))}else if(V[i.name]){const t=V[i.name],o=new e.Group;i.rotation.z=Math.PI,i.rotation.x=Math.PI/2,i.scale.set(.75,.75,.75);const n=[];i.traverse((t=>{t.isMesh&&(t.name.startsWith("Ghost_Mesh")?t instanceof e.Mesh&&(t.material=f):["EUR","CHF","YEN","USD","GBP"].includes(t.name)&&(t.visible=!1),n.push(t))})),n.forEach((e=>{e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh")?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),(t instanceof e.Mesh||t instanceof e.Group)&&t.add(o)}if(i.isMesh)if("CAM-Arena_LowRes_Top"===i.name)i.material=u,i.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===i.name)i.material=M,i.castShadow=!0;else if("CAM-Floor"===i.name){const t=i.clone();i.position.y=-.1,i.position.x=0,i.position.z=0,i.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),i.receiveShadow=!1,i.castShadow=!0,i.scale.set(.5,.5,.5),t.material=v,t.position.y=-.5,t.receiveShadow=!0,c.add(t)}n.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),c.add(n),n.position.set(.5,.5,.5),t()}),void 0,(function(e){console.error("Fehler beim Laden des 3D-Modells:",e),console.warn("Continuing without 3D model..."),t()}))}))})),function e(){s.render(c,m),requestAnimationFrame(e)}()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",b):b()})();
//# sourceMappingURL=script.js.map