(()=>{"use strict";const e=THREE,r=window.innerWidth<768,t=(new e.Vector3(.45175,.5,.55675),new e.Vector3(.65725,.55,.75325),new e.Vector3(.9085,.55,.8035),new e.Vector3(.75775,.55,1.05475),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.15475,.55,1.15525),{startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)}),c=r?t.startMobile:t.startDesktop,o=r?t.secondMobile:t.secondDesktop,p=r?t.mobileLookAt:t.desktopLookAt,n={mazeContainer:document.querySelector(".el--home-maze.el"),canvas:document.querySelector("canvas"),homeSection:document.querySelector(".sc--home.sc"),introSection:document.querySelector(".sc--intro.sc"),povSection:document.querySelector(".sc--pov.sc"),finalSection:document.querySelector(".sc--final.sc"),finalContainer:document.querySelector(".cr--final.cr"),parentElements:document.querySelectorAll(".cmp--pov.cmp")},s=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3);s.quaternion.clone(),(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0));const u=new e.Scene,y=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),w=new e.Clock;function a(){const e=Math.min(window.devicePixelRatio,r?2:3);y.setPixelRatio(e),n.mazeContainer?y.setSize(n.mazeContainer.clientWidth,n.mazeContainer.clientHeight):y.setSize(window.innerWidth,window.innerHeight)}const v=(new e.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),i=new e.MeshMatcapMaterial({matcap:v}),V=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),h=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),l=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),A={blue:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new e.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},T={CAM_Pacman_Backframe:A.blue,"CAM-Pacman_Bitcoin_1":A.white,"CAM-Pacman_Bitcoin_2":A.white,"CAM-Pacman_Bottom":A.blue,"CAM-Pacman_Top":A.blue,"CAM-Pacman_Eye":A.white,CAM_Pacman_Logo_1:A.white,CAM_Pacman_Logo_2:A.white,"CAM-Pacman_Shell_Boolean":A.blue,"CAM-Pacman_Shell":A.blue,"CAM-Pacman_Bottom_electronic":A.white,"CAM-Pacman_Top_electronic":A.white,"CAM-Pacman_Bottom_Text":A.white,"CAM-Pacman_Top_Text":A.white,default:A.blue},g=(Array(5).fill(h),new e.GLTFLoader);let d;const m=new e.Group;u.add(m);const M={pacman:m,ghost1:new e.Mesh(new e.BufferGeometry,h),ghost2:new e.Mesh(new e.BufferGeometry,h),ghost3:new e.Mesh(new e.BufferGeometry,h),ghost4:new e.Mesh(new e.BufferGeometry,h),ghost5:new e.Mesh(new e.BufferGeometry,h)},f={Ghost_EUR:M.ghost1,Ghost_CHF:M.ghost2,Ghost_YEN:M.ghost3,Ghost_USD:M.ghost4,Ghost_GBP:M.ghost5};Object.values(M).forEach((e=>u.add(e)));const P=[{pos:new e.Vector3(.25525,.55,.6025),type:"straight"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"straight"},{pos:new e.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new e.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,.6025),type:"straight"}],C=[{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,.8035),type:"straight"},{pos:new e.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.703),type:"straight"},{pos:new e.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new e.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"}],S=[{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new e.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.502),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new e.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"straight"}],_=[{pos:new e.Vector3(.85825,.55,.75325),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.2005),type:"straight"},{pos:new e.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.301),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"straight"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"straight"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.75325),type:"straight"}],z=[{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new e.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.8035),type:"straight"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"straight"},{pos:new e.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.1),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"}],b=[{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new e.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new e.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],x=[{pos:new e.Vector3(.55675,-.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],E=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],L=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],B=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],H=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],k=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}],G=(new e.CubicBezierCurve3(c,o,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175)),{pacmanHome:I(P),ghost1Home:I(C),ghost2Home:I(S),ghost3Home:I(_),ghost4Home:I(z),ghost5Home:I(b),cameraPOV:I(x),ghost1POV:I(E),ghost2POV:I(L),ghost3POV:I(B),ghost4POV:I(H),ghost5POV:I(k)});function I(r){const t=new e.CurvePath;for(let c=0;c<r.length-1;c++){const o=r[c],p=r[c+1];if("straight"===o.type){const r=new e.LineCurve3(o.pos,p.pos);t.add(r)}else if("curve"===o.type){let n;const s=c>0&&"curve"===r[c-1].type,u=c<r.length-2&&"curve"===r[c+1].type;n=s||u?R(o,p,s,u):"upperArc"===o.curveType?new e.Vector3(o.pos.x,o.pos.y,p.pos.z):"lowerArc"===o.curveType?new e.Vector3(p.pos.x,o.pos.y,o.pos.z):"forwardDownArc"===o.curveType?new e.Vector3(o.pos.x,p.pos.y,o.pos.z):new e.Vector3(o.pos.x,o.pos.y,p.pos.z);const y=new e.QuadraticBezierCurve3(o.pos,n,p.pos);t.add(y)}}return t}function R(r,t,c,o,p,n){let s;s="upperArc"===r.curveType?new e.Vector3(r.pos.x,r.pos.y,t.pos.z):"lowerArc"===r.curveType?new e.Vector3(t.pos.x,r.pos.y,r.pos.z):"forwardDownArc"===r.curveType?new e.Vector3(r.pos.x,t.pos.y,r.pos.z):new e.Vector3(r.pos.x,r.pos.y,t.pos.z);const u=r.pos.clone().lerp(t.pos,.5);return c&&o?s.clone().lerp(u,.6):c||o?s.clone().lerp(u,.3):s}const D={pacman:"pacmanHome",ghost1:"ghost1Home",ghost2:"ghost2Home",ghost3:"ghost3Home",ghost4:"ghost4Home",ghost5:"ghost5Home"},W=100,q={};function O(e){return e.type&&e.type.includes("Quadratic")||e instanceof THREE.QuadraticBezierCurve3?"curve":"straight"}function F(e,r){const t=.8,c=r,o=[0];let p=0;for(let e=1;e<=c;e++){const r=(e-1)/c,n=e/c;p+=1/(.5*(t+(1-t)*(1-Math.cos(2*Math.PI*r))/2+(t+(1-t)*(1-Math.cos(2*Math.PI*n))/2)))/c,o.push(p)}for(let r=0;r<o.length;r++)o[r]=o[r]/p*e;const n=[];for(let r=0;r<=c;r++){const t=r/c*e;let p=0;for(;p<o.length-1&&o[p]<t;)p++;const s=(p-1)/c,u=p/c,y=o[p-1],w=o[p];let a;a=w===y?u:s+(t-y)/(w-y)*(u-s),n.push(Math.max(0,Math.min(1,a)))}return n}!async function(){try{s.position.copy(c),s.lookAt(p),await async function(){return new Promise(((r,t)=>{g.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(t){const c=t.scene;c.traverse((r=>{if("CAM-Pacman"===r.name){const c=[];r.traverse((e=>{if(e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name){const r=T[e.name]||T.default;e.material=r,c.push(e)}else"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1)})),c.forEach((e=>M.pacman.add(e))),M.pacman.scale.set(.05,.05,.05),M.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),d=new e.AnimationMixer(M.pacman);const o={};t.animations.forEach((e=>{const r=d.clipAction(e);o[e.name]=r,r.setEffectiveWeight(1),r.play()}))}else if(r.name&&f[r.name]){const t=f[r.name],c=new e.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const o=[];r.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=h:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),o.push(e))})),o.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),c.add(e)})),t.add(c)}if(r.isMesh)if("CAM-Arena_LowRes_Top"===r.name)r.material=V,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===r.name)r.material=i,r.castShadow=!0;else if("CAM-Floor"===r.name){const t=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),t.material=l,t.position.y=-.5,t.receiveShadow=!0,u.add(t)}})),c.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),u.add(c),c.position.set(.5,.5,.5),r()}),(function(e){}),(function(e){t(e)}))}))}(),function(){const r=new e.AmbientLight(16777215);u.add(r);const t=new e.DirectionalLight(16777215,.8);u.add(t),t.position.set(-5,15,10),t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,t.shadow.camera.left=-20,t.shadow.camera.right=20,t.shadow.camera.top=20,t.shadow.camera.bottom=-20,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.001,t.shadow.radius=3,t.castShadow=!0}(),r?y.setPixelRatio(Math.min(window.devicePixelRatio,2)):y.setPixelRatio(window.devicePixelRatio),y.shadowMap.enabled=!0,y.shadowMap.type=e.PCFSoftShadowMap,y.shadowMap.enabled=!0,y.shadowMap.type=e.PCFSoftShadowMap,n.mazeContainer?(y.setSize(n.mazeContainer.clientWidth,n.mazeContainer.clientHeight),n.mazeContainer.appendChild(y.domElement)):(y.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(y.domElement)),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a(),window.addEventListener("resize",a),y.render(u,s),Object.entries(D).forEach((([e,r])=>{const t=G[r];if(!t)return;const c=[];let o=0,p=0;for(let e=0;e<t.curves.length;e++){const r=t.curves[e],n=O(r),s=p,u=s+r.getLength()/t.getLength(),y=r.getLength(),w=("curve"===n?1.25:1)*y,a={type:n,startT:s,endT:u,length:y,duration:w,startTime:o,endTime:o+w};"curve"===n&&(a.tLookup=F(a.duration,W)),c.push(a),o+=w,p=u}const n=100/o;c.forEach((e=>{e.duration*=n}));let s=0;c.forEach((e=>{e.startTime=s,e.endTime=s+e.duration,s=e.endTime,"curve"===e.type&&(e.tLookup=F(e.duration,W))})),q[e]=c})),function(){const e=()=>{!function(){const e=performance.now()/1e3%100;Object.entries(M).forEach((([r,t])=>{const c=D[r],o=G[c],p=q[r];if(!o||!p)return;let n=p.findIndex((r=>e<r.endTime));-1===n&&(n=p.length-1);const s=p[n],u=Math.max(0,Math.min(e-s.startTime,s.duration));let y;if("curve"===s.type&&s.tLookup){let e=Math.floor(u/s.duration*W);e=Math.max(0,Math.min(e,W)),y=s.startT+(s.endT-s.startT)*s.tLookup[e]}else{const e=u/s.duration;y=s.startT+(s.endT-s.startT)*e}if(y=Math.max(0,Math.min(1,y)),isNaN(y))return void console.warn("NaN t in HomeLoop:",{key:r,seg:s,localTime:u,t:y});const w=o.getPointAt(y);if(!w)return void console.warn("getPointAt returned null for t:",y,"on path",o);const a=o.getTangentAt(y);if(!a||0===a.length())return void console.warn("Invalid tangent at t:",y,"for path",c);t.position.copy(w);const v=Math.atan2(a.x,a.z);"pacman"===r?t.rotation.set(Math.PI/2,Math.PI,v+Math.PI/2):t.rotation.set(0,v,0)}));const r=w.getDelta();d&&d.update(r)}(),y.render(u,s),requestAnimationFrame(e)};e()}(),console.log("🚀 Application initialized successfully")}catch(e){console.error("Initialization error:",e)}}()})();
//# sourceMappingURL=script.js.map