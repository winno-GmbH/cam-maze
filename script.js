(()=>{"use strict";const e=THREE,r=window.innerWidth<768,o={startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)},t=r?o.startMobile:o.startDesktop,c=r?o.mobileLookAt:o.desktopLookAt,p=new e.Vector3(.45175,.5,.55675),n="https://c-am.b-cdn.net/CAM/matcap24.png",s=(new e.Vector3(.65725,.55,.75325),new e.Vector3(.9085,.55,.8035),new e.Vector3(.75775,.55,1.05475),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.15475,.55,1.15525),{vertexShader:"\n    varying vec3 vPosition;\n    void main() {\n      vPosition = position;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    varying vec3 vPosition;\n    uniform float mixValue;\n    void main() {\n      float factor = (vPosition.y + 1.0) / 2.0;\n      vec3 colorA = vec3(0.0, 0.0, 1.0);\n      vec3 colorB = vec3(0.0, 1.0, 1.0);\n      vec3 colorC = vec3(1.0, 0.0, 0.0);\n      vec3 colorD = vec3(1.0, 1.0, 0.0);\n      \n      vec3 gradientA = mix(colorA, colorB, factor);\n      vec3 gradientB = mix(colorC, colorD, factor);\n      \n      vec3 finalColor = mix(gradientA, gradientB, mixValue);\n      gl_FragColor = vec4(finalColor, 1.0);\n    }\n  "}),a=new e.Scene,u=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),i=document.querySelector(".el--home-maze.el"),y=new e.Clock;function w(){const e=Math.min(window.devicePixelRatio,r?2:3);u.setPixelRatio(e),u.setSize(i.clientWidth,i.clientHeight)}document.querySelector("canvas");const v=document.querySelector(".sc--final.sc"),l=(v?.querySelector(".cr--final.cr"),document.querySelectorAll(".cmp--pov.cmp"),new e.PerspectiveCamera(50,i.clientWidth/i.clientHeight,.001,1e3));l.quaternion.clone(),(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0)),window.setCamera=function(r){if("string"==typeof r){const[o,t,c]=r.split(",").map(Number);r=new e.Vector3(o,t,c)}l.lookAt(r),l.updateProjectionMatrix(),l.updateMatrix(),l.updateMatrixWorld()};const V=new e.TextureLoader;console.log("Loading maze texture from:",n);const h=V.load(n,(e=>{console.log("Maze texture loaded successfully:",e)}),(e=>{console.log("Maze texture loading progress:",e)}),(e=>{console.error("Failed to load maze texture:",e)})),A=new e.MeshBasicMaterial({color:65280,map:h});new e.MeshBasicMaterial({color:65280,wireframe:!1}),console.log("Maze material created:",A);const d=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),T=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),g=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),m=(new e.ShaderMaterial({vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,uniforms:{mixValue:{value:0}}}),{blue:new e.MeshBasicMaterial({color:1337811}),white:new e.MeshBasicMaterial({color:16777215}),default:new e.MeshBasicMaterial({color:1337811})}),f={CAM_Pacman_Backframe:m.blue,"CAM-Pacman_Bitcoin_1":m.white,"CAM-Pacman_Bitcoin_2":m.white,"CAM-Pacman_Bottom":m.blue,"CAM-Pacman_Top":m.blue,"CAM-Pacman_Eye":m.white,CAM_Pacman_Logo_1:m.white,CAM_Pacman_Logo_2:m.white,"CAM-Pacman_Shell_Boolean":m.blue,"CAM-Pacman_Shell":m.blue,"CAM-Pacman_Bottom_electronic":m.white,"CAM-Pacman_Top_electronic":m.white,"CAM-Pacman_Bottom_Text":m.white,"CAM-Pacman_Top_Text":m.white,default:m.blue};Array(5).fill(T),console.log("Checking for GLTFLoader..."),console.log("THREE object:",typeof e),console.log("GLTFLoader available:",!!e.GLTFLoader);const M=e.GLTFLoader?new e.GLTFLoader:null;let P;M?console.log("GLTFLoader created successfully"):console.warn("GLTFLoader not available - model will not load");const C=new e.Group;a.add(C);const b={pacman:C,ghost1:new e.Mesh(new e.BufferGeometry,T),ghost2:new e.Mesh(new e.BufferGeometry,T),ghost3:new e.Mesh(new e.BufferGeometry,T),ghost4:new e.Mesh(new e.BufferGeometry,T),ghost5:new e.Mesh(new e.BufferGeometry,T)};Object.values(b).forEach((e=>a.add(e)));const L=new e.BoxGeometry(.5,.5,.5),S=new e.MeshBasicMaterial({color:16711680}),_=new e.Mesh(L,S);_.position.set(.5,1,.5),a.add(_),console.log("Test cube added to scene at position:",_.position);const E=new e.Mesh(new e.BoxGeometry(.2,.2,.2),new e.MeshBasicMaterial({color:255}));E.position.set(0,0,0),a.add(E),console.log("Blue test cube added at origin");const x={Ghost_EUR:b.ghost1,Ghost_CHF:b.ghost2,Ghost_YEN:b.ghost3,Ghost_USD:b.ghost4,Ghost_GBP:b.ghost5},B=[{pos:new e.Vector3(.25525,.55,.6025),type:"straight"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"straight"},{pos:new e.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new e.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,.6025),type:"straight"}],z=[{pos:new e.Vector3(-.44825,.55,.502),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,.8035),type:"straight"},{pos:new e.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.703),type:"straight"},{pos:new e.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new e.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.502),type:"straight"}],G=[{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new e.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.502),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new e.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"}],k=[{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.703),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.2005),type:"straight"},{pos:new e.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.301),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"straight"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"straight"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"upperArc"}],O=[{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new e.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.8035),type:"straight"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"straight"},{pos:new e.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.1),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"}],F=[{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new e.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new e.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],H=[{pos:new e.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],D=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],R=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],I=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],j=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],W=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}],N=r?o.startMobile:o.startDesktop,q=r?o.secondMobile:o.secondDesktop,U=(new e.CubicBezierCurve3(N,q,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175)),{pacmanHomePath:{points:B,color:16776960},ghost1HomePath:{points:z,color:16711680},ghost2HomePath:{points:G,color:16753920},ghost3HomePath:{points:k,color:16738740},ghost4HomePath:{points:O,color:3329330},ghost5HomePath:{points:F,color:16767673},cameraPOVPath:{points:H,color:16777215},ghost1POVPath:{points:D,color:16711680},ghost2POVPath:{points:R,color:16753920},ghost3POVPath:{points:I,color:16738740},ghost4POVPath:{points:j,color:3329330},ghost5POVPath:{points:W,color:16767673}}),Q={};Object.entries(U).forEach((([r,o])=>{Q[r]=function(r){const o=new e.CurvePath;for(let t=0;t<r.length-1;t++){const c=r[t],p=r[t+1];if("straight"===c.type){const r=new e.LineCurve3(c.pos,p.pos);o.add(r)}else if("curve"===c.type){let r;r="upperArc"===c.curveType?new e.Vector3(c.pos.x,c.pos.y,p.pos.z):"lowerArc"===c.curveType?new e.Vector3(p.pos.x,c.pos.y,c.pos.z):"forwardDownArc"===c.curveType?new e.Vector3(c.pos.x,p.pos.y,c.pos.z):new e.Vector3(c.pos.x,c.pos.y,p.pos.z);const t=new e.QuadraticBezierCurve3(c.pos,r,p.pos);o.add(t)}}return o}(o.points)}));const Y={pacman:Q.pacmanHomePath,ghost1:Q.ghost1HomePath,ghost2:Q.ghost2HomePath,ghost3:Q.ghost3HomePath,ghost4:Q.ghost4HomePath,ghost5:Q.ghost5HomePath};let $="HOME",J=!0;const K={},X={},Z={};function ee(r,o){if(!X[r]||!b[r])return;const t=X[r].curve.getPointAt(o);let c=1;o>.8&&(c=1-(o-.8)/.2),b[r].position.copy(t);const p=b[r];p instanceof e.Mesh&&p.material?Array.isArray(p.material)?p.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=c)})):void 0!==p.material.transparent&&(p.material.opacity=c):p instanceof e.Group&&p.traverse((r=>{r instanceof e.Mesh&&r.material&&(Array.isArray(r.material)?r.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=c)})):void 0!==r.material.transparent&&(r.material.opacity=c))}))}let re=0;function oe(){const r=y.getDelta();re+=r,"HOME"===$&&(P&&P.update(r),Object.keys(b).forEach((r=>{if("pacman"===r)return;const o=Y[r];if(o){const t=.1*re%1,c=o.getPointAt(t);if(c&&b[r]){b[r].position.copy(c);const o=b[r];o instanceof e.Mesh&&o.material?Array.isArray(o.material)?o.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==o.material.transparent&&(o.material.opacity=1):o instanceof e.Group&&o.traverse((r=>{r instanceof e.Mesh&&r.material&&(Array.isArray(r.material)?r.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==r.material.transparent&&(r.material.opacity=1))}))}}}))),requestAnimationFrame(oe)}function te(){console.log("Initializing animation system..."),Object.keys(b).forEach((e=>{"pacman"!==e&&b[e]&&(Z[e]=b[e].position.clone())})),function(){if("undefined"!=typeof window&&window.gsap){const r=window.gsap.ScrollTrigger;r.create({trigger:".sc--intro",start:"top bottom",end:"bottom top",onUpdate:r=>{if(J&&(console.log("First scroll detected - switching to scroll animation"),Object.keys(b).forEach((e=>{"pacman"!==e&&b[e]&&(K[e]=b[e].position.clone())})),console.log("Ghost positions captured:",K),Object.keys(K).forEach((r=>{const o=K[r],t=p.clone(),c=o.clone();X[r]={startPosition:o,midPosition:t,endPosition:c,curve:new e.QuadraticBezierCurve3(o,t,c)}})),console.log("Bezier curves created:",X),$="SCROLL_ANIMATION",J=!1),"SCROLL_ANIMATION"===$){const e=r.progress;Object.keys(X).forEach((r=>{ee(r,e)}))}}}),r.create({trigger:".sc--home",start:"top bottom",end:"bottom top",onUpdate:e=>{if("SCROLL_ANIMATION"===$){const r=1-e.progress;Object.keys(X).forEach((e=>{ee(e,r)}))}},onLeave:()=>{0===window.scrollY&&(console.log("Back to top - resetting to HOME state"),$="HOME",J=!0)}}),r.create({trigger:".sc--pov",start:"top bottom",end:"bottom top",onEnter:()=>{Object.keys(b).forEach((r=>{if("pacman"!==r&&b[r]){b[r].position.copy(p);const o=b[r];o instanceof e.Mesh&&o.material?Array.isArray(o.material)?o.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==o.material.transparent&&(o.material.opacity=1):o instanceof e.Group&&o.traverse((r=>{r instanceof e.Mesh&&r.material&&(Array.isArray(r.material)?r.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==r.material.transparent&&(r.material.opacity=1))}))}}))}})}}(),oe(),console.log("Animation system initialized")}async function ce(){console.log("Starting CAM 3D Animation...");try{function o(){u.render(a,l),requestAnimationFrame(o)}r?u.setPixelRatio(Math.min(window.devicePixelRatio,2)):u.setPixelRatio(window.devicePixelRatio),u.shadowMap.enabled=!0,u.shadowMap.type=e.PCFSoftShadowMap,u.shadowMap.enabled=!0,u.shadowMap.type=e.PCFSoftShadowMap,u.setSize(i.clientWidth,i.clientHeight),i.appendChild(u.domElement),window.addEventListener("load",w),window.addEventListener("resize",w),console.log("Renderer initialized"),function(){const r=new e.AmbientLight(16777215);a.add(r);const o=new e.DirectionalLight(16777215,.8);a.add(o),o.position.set(-5,15,10),o.shadow.mapSize.width=4096,o.shadow.mapSize.height=4096,o.shadow.camera.left=-20,o.shadow.camera.right=20,o.shadow.camera.top=20,o.shadow.camera.bottom=-20,o.shadow.camera.near=.1,o.shadow.camera.far=50,o.shadow.bias=-.001,o.shadow.radius=3,o.castShadow=!0}(),console.log("Lighting setup complete"),console.log("Camera start position:",t),console.log("Camera look at position:",c),l.position.copy(t),l.lookAt(c),console.log("Camera actual position:",l.position),console.log("Camera actual target:",c),l.position.set(2,2,2),l.lookAt(.5,.5,.5),console.log("Camera debug position set to:",l.position),console.log("Camera looking at maze center: (0.5, 0.5, 0.5)"),console.log("Camera initialized"),window.addEventListener("resize",(()=>{l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix()})),console.log("Camera resize setup complete"),console.log("Loading 3D model..."),await new Promise(((r,o)=>{if(!M)return console.warn("GLTFLoader not available. Please include GLTFLoader script."),void r();M.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(o){const t=o.scene,c=[];t.traverse((r=>{const t=r.name||"";if("CAM-Pacman"===t){const t=[];if(r.traverse((e=>{const r=e.name||"";e.isMesh&&"CAM-Pacman_Shell"!==r&&"CAM-Pacman_Shell_Boolean"!==r?(e.material=f[r]||f.default,t.push(e)):"CAM-Pacman_Shell"!==r&&"CAM-Pacman_Shell_Boolean"!==r||(e.visible=!1,e.morphTargetInfluences=[],e.userData.skipAnimation=!0),c.push(r)})),t.forEach((e=>b.pacman.add(e))),b.pacman.scale.set(.05,.05,.05),b.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),o.animations&&o.animations.length>0){P=new e.AnimationMixer(b.pacman);const r={};o.animations.forEach((e=>{const o=P.clipAction(e);o.getMixer().addEventListener("loop",(function(e){e.action.getRoot().traverse((function(e){e.userData&&e.userData.skipAnimation&&(e.updateMorphTargets=function(){})}))})),r[e.name]=o,o.setEffectiveWeight(0),o.play()})),Object.values(r).forEach((e=>{e.setEffectiveWeight(1)}))}}else if(x[t]){const o=x[t],c=new e.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const p=[];r.traverse((r=>{const o=r.name||"";r.isMesh&&(o.startsWith("Ghost_Mesh")?r instanceof e.Mesh&&(r.material=T):["EUR","CHF","YEN","USD","GBP"].includes(o)&&(r.visible=!1),p.push(r))})),p.forEach((e=>{const r=e.name||"";r.includes("EUR")||r.startsWith("Ghost_Mesh")?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),c.add(e)})),(o instanceof e.Mesh||o instanceof e.Group)&&o.add(c)}if(r.isMesh)if(console.log("Found mesh:",t,"Type:",r.type),"CAM-Arena_LowRes_Top"===t)console.log("Found maze top mesh:",t),r.material=d,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===t)console.log("Found maze bottom mesh:",t),r.material=A,r.castShadow=!0;else if("CAM-Floor"===t){const o=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),o.material=g,o.position.y=-.5,o.receiveShadow=!0,a.add(o)}})),t.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),a.add(t),t.position.set(.5,.5,.5),console.log("3D Model loaded successfully"),r()}),void 0,(function(e){console.error("Fehler beim Laden des 3D-Modells:",e),console.warn("Continuing without 3D model..."),r()}))})),console.log("Model loading complete"),console.log("Initializing animation system..."),te(),o(),console.log("Animation loop started"),console.log("Scene children count:",a.children.length),a.children.forEach(((e,r)=>{console.log(`Child ${r}:`,e.type,e.name||"unnamed")}))}catch(p){console.error("Initialization error:",p)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",ce):ce()})();
//# sourceMappingURL=script.js.map