(()=>{"use strict";const e=THREE,t=window.innerWidth<768,a=(new e.Vector3(.45175,.5,.55675),new e.Vector3(.65725,.55,.75325),new e.Vector3(.9085,.55,.8035),new e.Vector3(.75775,.55,1.05475),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.15475,.55,1.15525),{startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)}),n=t?a.startMobile:a.startDesktop,o=t?a.mobileLookAt:a.desktopLookAt,i={mazeContainer:document.querySelector(".el--home-maze.el"),canvas:document.querySelector("canvas"),finalSection:document.querySelector(".sc--final.sc"),finalContainer:document.querySelector(".cr--final.cr"),parentElements:document.querySelectorAll(".cmp--pov.cmp")},s=new e.Scene,r=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"});function c(){const e=Math.min(window.devicePixelRatio,t?2:3);r.setPixelRatio(e),i.mazeContainer?r.setSize(i.mazeContainer.clientWidth,i.mazeContainer.clientHeight):r.setSize(window.innerWidth,window.innerHeight)}new e.Clock;const h=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3);h.quaternion.clone(),(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0));const d=(new e.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),l=new e.MeshMatcapMaterial({matcap:d}),m=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),w=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),p=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),M={blue:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new e.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},u={CAM_Pacman_Backframe:M.blue,"CAM-Pacman_Bitcoin_1":M.white,"CAM-Pacman_Bitcoin_2":M.white,"CAM-Pacman_Bottom":M.blue,"CAM-Pacman_Top":M.blue,"CAM-Pacman_Eye":M.white,CAM_Pacman_Logo_1:M.white,CAM_Pacman_Logo_2:M.white,"CAM-Pacman_Shell_Boolean":M.blue,"CAM-Pacman_Shell":M.blue,"CAM-Pacman_Bottom_electronic":M.white,"CAM-Pacman_Top_electronic":M.white,"CAM-Pacman_Bottom_Text":M.white,"CAM-Pacman_Top_Text":M.white,default:M.blue},f=(Array(5).fill(w),new e.GLTFLoader);let _;const C=new e.Group;s.add(C);const P={pacman:C,ghost1:new e.Mesh(new e.BufferGeometry,w),ghost2:new e.Mesh(new e.BufferGeometry,w),ghost3:new e.Mesh(new e.BufferGeometry,w),ghost4:new e.Mesh(new e.BufferGeometry,w),ghost5:new e.Mesh(new e.BufferGeometry,w)},S={Ghost_EUR:P.ghost1,Ghost_CHF:P.ghost2,Ghost_YEN:P.ghost3,Ghost_USD:P.ghost4,Ghost_GBP:P.ghost5};Object.values(P).forEach((e=>s.add(e))),async function(){try{t?r.setPixelRatio(Math.min(window.devicePixelRatio,2)):r.setPixelRatio(window.devicePixelRatio),r.shadowMap.enabled=!0,r.shadowMap.type=e.PCFSoftShadowMap,r.shadowMap.enabled=!0,r.shadowMap.type=e.PCFSoftShadowMap,i.mazeContainer?(console.log("Found maze container, using it for renderer"),r.setSize(i.mazeContainer.clientWidth,i.mazeContainer.clientHeight),i.mazeContainer.appendChild(r.domElement)):(console.log("Maze container not found, using body for renderer"),r.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(r.domElement)),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c(),window.addEventListener("resize",c),function(){const t=new e.AmbientLight(16777215);s.add(t);const a=new e.DirectionalLight(16777215,.8);s.add(a),a.position.set(-5,15,10),a.shadow.mapSize.width=4096,a.shadow.mapSize.height=4096,a.shadow.camera.left=-20,a.shadow.camera.right=20,a.shadow.camera.top=20,a.shadow.camera.bottom=-20,a.shadow.camera.near=.1,a.shadow.camera.far=50,a.shadow.bias=-.001,a.shadow.radius=3,a.castShadow=!0}(),h.position.copy(n),h.lookAt(o),window.addEventListener("resize",(()=>{h.aspect=window.innerWidth/window.innerHeight,h.updateProjectionMatrix()})),await async function(){return new Promise(((t,a)=>{f.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(a){const n=a.scene;n.traverse((t=>{if("CAM-Pacman"===t.name){const n=[];t.traverse((e=>{if(e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name){const t=u[e.name]||u.default;e.material=t,n.push(e)}else"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1)})),n.forEach((e=>P.pacman.add(e))),P.pacman.scale.set(.05,.05,.05),P.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),_=new e.AnimationMixer(P.pacman);const o={};a.animations.forEach((e=>{const t=_.clipAction(e);o[e.name]=t,t.setEffectiveWeight(1),t.play()}))}else if(t.name&&S[t.name]){const a=S[t.name],n=new e.Group;t.rotation.z=Math.PI,t.rotation.x=Math.PI/2,t.scale.set(.75,.75,.75);const o=[];t.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=w:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),o.push(e))})),o.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),n.add(e)})),a.add(n)}if(t.isMesh)if("CAM-Arena_LowRes_Top"===t.name)t.material=m,t.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===t.name)t.material=l,t.castShadow=!0;else if("CAM-Floor"===t.name){const a=t.clone();t.position.y=-.1,t.position.x=0,t.position.z=0,t.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),t.receiveShadow=!1,t.castShadow=!0,t.scale.set(.5,.5,.5),a.material=p,a.position.y=-.5,a.receiveShadow=!0,s.add(a)}})),n.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),s.add(n),n.position.set(.5,.5,.5),t()}),(function(e){}),(function(e){a(e)}))}))}()}catch(e){console.error("Initialization error:",e)}}()})();
//# sourceMappingURL=script.js.map