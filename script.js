(()=>{"use strict";const e=THREE,r=window.innerWidth<768,t={startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)},o=r?t.startMobile:t.startDesktop,c=r?t.mobileLookAt:t.desktopLookAt,p=new e.Vector3(.45175,.5,.55675),n=(new e.Vector3(.65725,.55,.75325),new e.Vector3(.9085,.55,.8035),new e.Vector3(.75775,.55,1.05475),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.15475,.55,1.15525),{vertexShader:"\n    varying vec3 vPosition;\n    void main() {\n      vPosition = position;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    varying vec3 vPosition;\n    uniform float mixValue;\n    void main() {\n      float factor = (vPosition.y + 1.0) / 2.0;\n      vec3 colorA = vec3(0.0, 0.0, 1.0);\n      vec3 colorB = vec3(0.0, 1.0, 1.0);\n      vec3 colorC = vec3(1.0, 0.0, 0.0);\n      vec3 colorD = vec3(1.0, 1.0, 0.0);\n      \n      vec3 gradientA = mix(colorA, colorB, factor);\n      vec3 gradientB = mix(colorC, colorD, factor);\n      \n      vec3 finalColor = mix(gradientA, gradientB, mixValue);\n      gl_FragColor = vec4(finalColor, 1.0);\n    }\n  "}),s=new e.Scene,a=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),u=document.querySelector(".el--home-maze.el"),y=new e.Clock;function i(){const e=Math.min(window.devicePixelRatio,r?2:3);a.setPixelRatio(e),a.setSize(u.clientWidth,u.clientHeight)}document.querySelector("canvas");const w=document.querySelector(".sc--final.sc"),v=(w?.querySelector(".cr--final.cr"),document.querySelectorAll(".cmp--pov.cmp"),new e.PerspectiveCamera(50,u.clientWidth/u.clientHeight,.001,1e3));v.quaternion.clone(),(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0)),window.setCamera=function(r){if("string"==typeof r){const[t,o,c]=r.split(",").map(Number);r=new e.Vector3(t,o,c)}v.lookAt(r),v.updateProjectionMatrix(),v.updateMatrix(),v.updateMatrixWorld()};const l=(new e.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),V=new e.MeshMatcapMaterial({matcap:l}),h=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),A=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),T=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),d=(new e.ShaderMaterial({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:{mixValue:{value:0}}}),{blue:new e.MeshBasicMaterial({color:1337811}),white:new e.MeshBasicMaterial({color:16777215}),default:new e.MeshBasicMaterial({color:1337811})}),g={CAM_Pacman_Backframe:d.blue,"CAM-Pacman_Bitcoin_1":d.white,"CAM-Pacman_Bitcoin_2":d.white,"CAM-Pacman_Bottom":d.blue,"CAM-Pacman_Top":d.blue,"CAM-Pacman_Eye":d.white,CAM_Pacman_Logo_1:d.white,CAM_Pacman_Logo_2:d.white,"CAM-Pacman_Shell_Boolean":d.blue,"CAM-Pacman_Shell":d.blue,"CAM-Pacman_Bottom_electronic":d.white,"CAM-Pacman_Top_electronic":d.white,"CAM-Pacman_Bottom_Text":d.white,"CAM-Pacman_Top_Text":d.white,default:d.blue};Array(5).fill(A),console.log("Checking for GLTFLoader..."),console.log("THREE object:",typeof e),console.log("GLTFLoader available:",!!e.GLTFLoader);const m=e.GLTFLoader?new e.GLTFLoader:null;let f;m?console.log("GLTFLoader created successfully"):console.warn("GLTFLoader not available - model will not load");const M=new e.Group;s.add(M);const P={pacman:M,ghost1:new e.Mesh(new e.BufferGeometry,A),ghost2:new e.Mesh(new e.BufferGeometry,A),ghost3:new e.Mesh(new e.BufferGeometry,A),ghost4:new e.Mesh(new e.BufferGeometry,A),ghost5:new e.Mesh(new e.BufferGeometry,A)};Object.values(P).forEach((e=>s.add(e)));const C=new e.BoxGeometry(1,1,1),b=new e.MeshBasicMaterial({color:16711680}),S=new e.Mesh(C,b);S.position.set(0,0,0),s.add(S),console.log("Test cube added to scene");const _={Ghost_EUR:P.ghost1,Ghost_CHF:P.ghost2,Ghost_YEN:P.ghost3,Ghost_USD:P.ghost4,Ghost_GBP:P.ghost5},L=[{pos:new e.Vector3(.25525,.55,.6025),type:"straight"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"straight"},{pos:new e.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new e.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,.6025),type:"straight"}],E=[{pos:new e.Vector3(-.44825,.55,.502),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,.8035),type:"straight"},{pos:new e.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.703),type:"straight"},{pos:new e.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new e.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.502),type:"straight"}],x=[{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new e.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.502),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new e.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"}],B=[{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.703),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.2005),type:"straight"},{pos:new e.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.301),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"straight"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"straight"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"upperArc"}],G=[{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new e.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.8035),type:"straight"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"straight"},{pos:new e.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.1),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"}],O=[{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new e.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new e.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],k=[{pos:new e.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],z=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],H=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],D=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],F=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],R=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}],I=r?t.startMobile:t.startDesktop,j=r?t.secondMobile:t.secondDesktop,W=(new e.CubicBezierCurve3(I,j,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175)),{pacmanHomePath:{points:L,color:16776960},ghost1HomePath:{points:E,color:16711680},ghost2HomePath:{points:x,color:16753920},ghost3HomePath:{points:B,color:16738740},ghost4HomePath:{points:G,color:3329330},ghost5HomePath:{points:O,color:16767673},cameraPOVPath:{points:k,color:16777215},ghost1POVPath:{points:z,color:16711680},ghost2POVPath:{points:H,color:16753920},ghost3POVPath:{points:D,color:16738740},ghost4POVPath:{points:F,color:3329330},ghost5POVPath:{points:R,color:16767673}}),N={};Object.entries(W).forEach((([r,t])=>{N[r]=function(r){const t=new e.CurvePath;for(let o=0;o<r.length-1;o++){const c=r[o],p=r[o+1];if("straight"===c.type){const r=new e.LineCurve3(c.pos,p.pos);t.add(r)}else if("curve"===c.type){let r;r="upperArc"===c.curveType?new e.Vector3(c.pos.x,c.pos.y,p.pos.z):"lowerArc"===c.curveType?new e.Vector3(p.pos.x,c.pos.y,c.pos.z):"forwardDownArc"===c.curveType?new e.Vector3(c.pos.x,p.pos.y,c.pos.z):new e.Vector3(c.pos.x,c.pos.y,p.pos.z);const o=new e.QuadraticBezierCurve3(c.pos,r,p.pos);t.add(o)}}return t}(t.points)}));const q={pacman:N.pacmanHomePath,ghost1:N.ghost1HomePath,ghost2:N.ghost2HomePath,ghost3:N.ghost3HomePath,ghost4:N.ghost4HomePath,ghost5:N.ghost5HomePath};let U="HOME",Q=!0;const Y={},$={},J={};function K(r,t){if(!$[r]||!P[r])return;const o=$[r].curve.getPointAt(t);let c=1;t>.8&&(c=1-(t-.8)/.2),P[r].position.copy(o);const p=P[r];p instanceof e.Mesh&&p.material?Array.isArray(p.material)?p.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=c)})):void 0!==p.material.transparent&&(p.material.opacity=c):p instanceof e.Group&&p.traverse((r=>{r instanceof e.Mesh&&r.material&&(Array.isArray(r.material)?r.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=c)})):void 0!==r.material.transparent&&(r.material.opacity=c))}))}let X=0;function Z(){const r=y.getDelta();X+=r,"HOME"===U&&(f&&f.update(r),Object.keys(P).forEach((r=>{if("pacman"===r)return;const t=q[r];if(t){const o=.1*X%1,c=t.getPointAt(o);if(c&&P[r]){P[r].position.copy(c);const t=P[r];t instanceof e.Mesh&&t.material?Array.isArray(t.material)?t.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==t.material.transparent&&(t.material.opacity=1):t instanceof e.Group&&t.traverse((r=>{r instanceof e.Mesh&&r.material&&(Array.isArray(r.material)?r.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==r.material.transparent&&(r.material.opacity=1))}))}}}))),requestAnimationFrame(Z)}function ee(){console.log("Initializing animation system..."),Object.keys(P).forEach((e=>{"pacman"!==e&&P[e]&&(J[e]=P[e].position.clone())})),function(){if("undefined"!=typeof window&&window.gsap){const r=window.gsap.ScrollTrigger;r.create({trigger:".sc--intro",start:"top bottom",end:"bottom top",onUpdate:r=>{if(Q&&(console.log("First scroll detected - switching to scroll animation"),Object.keys(P).forEach((e=>{"pacman"!==e&&P[e]&&(Y[e]=P[e].position.clone())})),console.log("Ghost positions captured:",Y),Object.keys(Y).forEach((r=>{const t=Y[r],o=p.clone(),c=t.clone();$[r]={startPosition:t,midPosition:o,endPosition:c,curve:new e.QuadraticBezierCurve3(t,o,c)}})),console.log("Bezier curves created:",$),U="SCROLL_ANIMATION",Q=!1),"SCROLL_ANIMATION"===U){const e=r.progress;Object.keys($).forEach((r=>{K(r,e)}))}}}),r.create({trigger:".sc--home",start:"top bottom",end:"bottom top",onUpdate:e=>{if("SCROLL_ANIMATION"===U){const r=1-e.progress;Object.keys($).forEach((e=>{K(e,r)}))}},onLeave:()=>{0===window.scrollY&&(console.log("Back to top - resetting to HOME state"),U="HOME",Q=!0)}}),r.create({trigger:".sc--pov",start:"top bottom",end:"bottom top",onEnter:()=>{Object.keys(P).forEach((r=>{if("pacman"!==r&&P[r]){P[r].position.copy(p);const t=P[r];t instanceof e.Mesh&&t.material?Array.isArray(t.material)?t.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==t.material.transparent&&(t.material.opacity=1):t instanceof e.Group&&t.traverse((r=>{r instanceof e.Mesh&&r.material&&(Array.isArray(r.material)?r.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==r.material.transparent&&(r.material.opacity=1))}))}}))}})}}(),Z(),console.log("Animation system initialized")}async function re(){console.log("Starting CAM 3D Animation...");try{function t(){a.render(s,v),requestAnimationFrame(t)}r?a.setPixelRatio(Math.min(window.devicePixelRatio,2)):a.setPixelRatio(window.devicePixelRatio),a.shadowMap.enabled=!0,a.shadowMap.type=e.PCFSoftShadowMap,a.shadowMap.enabled=!0,a.shadowMap.type=e.PCFSoftShadowMap,a.setSize(u.clientWidth,u.clientHeight),u.appendChild(a.domElement),window.addEventListener("load",i),window.addEventListener("resize",i),console.log("Renderer initialized"),function(){const r=new e.AmbientLight(16777215);s.add(r);const t=new e.DirectionalLight(16777215,.8);s.add(t),t.position.set(-5,15,10),t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,t.shadow.camera.left=-20,t.shadow.camera.right=20,t.shadow.camera.top=20,t.shadow.camera.bottom=-20,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.001,t.shadow.radius=3,t.castShadow=!0}(),console.log("Lighting setup complete"),v.position.copy(o),v.lookAt(c),console.log("Camera initialized"),window.addEventListener("resize",(()=>{v.aspect=window.innerWidth/window.innerHeight,v.updateProjectionMatrix()})),console.log("Camera resize setup complete"),console.log("Loading 3D model..."),await new Promise(((r,t)=>{if(!m)return console.warn("GLTFLoader not available. Please include GLTFLoader script."),void r();m.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(t){const o=t.scene,c=[];o.traverse((r=>{const o=r.name||"";if("CAM-Pacman"===o){const o=[];if(r.traverse((e=>{const r=e.name||"";e.isMesh&&"CAM-Pacman_Shell"!==r&&"CAM-Pacman_Shell_Boolean"!==r?(e.material=g[r]||g.default,o.push(e)):"CAM-Pacman_Shell"!==r&&"CAM-Pacman_Shell_Boolean"!==r||(e.visible=!1,e.morphTargetInfluences=[],e.userData.skipAnimation=!0),c.push(r)})),o.forEach((e=>P.pacman.add(e))),P.pacman.scale.set(.05,.05,.05),P.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),t.animations&&t.animations.length>0){f=new e.AnimationMixer(P.pacman);const r={};t.animations.forEach((e=>{const t=f.clipAction(e);t.getMixer().addEventListener("loop",(function(e){e.action.getRoot().traverse((function(e){e.userData&&e.userData.skipAnimation&&(e.updateMorphTargets=function(){})}))})),r[e.name]=t,t.setEffectiveWeight(0),t.play()})),Object.values(r).forEach((e=>{e.setEffectiveWeight(1)}))}}else if(_[o]){const t=_[o],c=new e.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const p=[];r.traverse((r=>{const t=r.name||"";r.isMesh&&(t.startsWith("Ghost_Mesh")?r instanceof e.Mesh&&(r.material=A):["EUR","CHF","YEN","USD","GBP"].includes(t)&&(r.visible=!1),p.push(r))})),p.forEach((e=>{const r=e.name||"";r.includes("EUR")||r.startsWith("Ghost_Mesh")?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),c.add(e)})),(t instanceof e.Mesh||t instanceof e.Group)&&t.add(c)}if(r.isMesh)if("CAM-Arena_LowRes_Top"===o)r.material=h,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===o)r.material=V,r.castShadow=!0;else if("CAM-Floor"===o){const t=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),t.material=T,t.position.y=-.5,t.receiveShadow=!0,s.add(t)}})),o.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),s.add(o),o.position.set(.5,.5,.5),console.log("3D Model loaded successfully"),r()}),void 0,(function(e){console.error("Fehler beim Laden des 3D-Modells:",e),console.warn("Continuing without 3D model..."),r()}))})),console.log("Model loading complete"),console.log("Initializing animation system..."),ee(),t(),console.log("Animation loop started"),console.log("Scene children count:",s.children.length),s.children.forEach(((e,r)=>{console.log(`Child ${r}:`,e.type,e.name||"unnamed")}))}catch(p){console.error("Initialization error:",p)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",re):re()})();
//# sourceMappingURL=script.js.map