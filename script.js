(()=>{"use strict";var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var o in t)e.o(t,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:t[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=THREE,t=window.innerWidth<768,o={mazeContainer:document.querySelector(".el--home-maze.el"),canvas:document.querySelector("canvas"),homeSection:document.querySelector(".sc--home.sc"),introSection:document.querySelector(".sc--intro.sc"),povSection:document.querySelector(".sc--pov.sc"),finalSection:document.querySelector(".sc--final.sc"),finalContainer:document.querySelector(".cr--final.cr"),parentElements:document.querySelectorAll(".cmp--pov.cmp")},c=gsap;var p=e.n(c);const n=ScrollTrigger;var s=e.n(n);p().registerPlugin(s());const u=new r.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,1e3);u.quaternion.clone(),(new r.Quaternion).setFromEuler(new r.Euler(-1.5708,0,0));const w=(new r.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),a=new r.MeshMatcapMaterial({matcap:w}),y=new r.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),i=new r.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:r.NormalBlending,side:r.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),v=new r.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),V={blue:new r.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new r.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new r.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},l={CAM_Pacman_Backframe:V.blue,"CAM-Pacman_Bitcoin_1":V.white,"CAM-Pacman_Bitcoin_2":V.white,"CAM-Pacman_Bottom":V.blue,"CAM-Pacman_Top":V.blue,"CAM-Pacman_Eye":V.white,CAM_Pacman_Logo_1:V.white,CAM_Pacman_Logo_2:V.white,"CAM-Pacman_Shell_Boolean":V.blue,"CAM-Pacman_Shell":V.blue,"CAM-Pacman_Bottom_electronic":V.white,"CAM-Pacman_Top_electronic":V.white,"CAM-Pacman_Bottom_Text":V.white,"CAM-Pacman_Top_Text":V.white,default:V.blue},h=(Array(5).fill(i),new r.GLTFLoader);let A;const T=new r.Group,g={pacman:T,ghost1:new r.Mesh(new r.BufferGeometry,i),ghost2:new r.Mesh(new r.BufferGeometry,i),ghost3:new r.Mesh(new r.BufferGeometry,i),ghost4:new r.Mesh(new r.BufferGeometry,i),ghost5:new r.Mesh(new r.BufferGeometry,i)},m={Ghost_EUR:g.ghost1,Ghost_CHF:g.ghost2,Ghost_YEN:g.ghost3,Ghost_USD:g.ghost4,Ghost_GBP:g.ghost5};function d(){const e=Math.min(window.devicePixelRatio,t?2:3);M.setPixelRatio(e),o.mazeContainer?M.setSize(o.mazeContainer.clientWidth,o.mazeContainer.clientHeight):M.setSize(window.innerWidth,window.innerHeight)}const f=new r.Scene,M=new r.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),C=new r.Clock,P=[];async function S(){t?M.setPixelRatio(Math.min(window.devicePixelRatio,2)):M.setPixelRatio(window.devicePixelRatio),M.shadowMap.enabled=!0,M.shadowMap.type=r.PCFSoftShadowMap,o.mazeContainer?(M.setSize(o.mazeContainer.clientWidth,o.mazeContainer.clientHeight),o.mazeContainer.appendChild(M.domElement)):(M.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(M.domElement)),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",d):d(),window.addEventListener("resize",d),M.render(f,u),function(){const e=new r.AmbientLight(16777215);f.add(e);const t=new r.DirectionalLight(16777215,.8);f.add(t),t.position.set(-5,15,10),t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,t.shadow.camera.left=-20,t.shadow.camera.right=20,t.shadow.camera.top=20,t.shadow.camera.bottom=-20,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.001,t.shadow.radius=3,t.castShadow=!0}(),u.position.set(.5,3,2),u.lookAt(.5,.5,.5),console.log("Camera position:",u.position),console.log("Camera lookAt: (0.5, 0.5, 0.5)"),console.log("Camera FOV:",u.fov),await async function(e){return Object.values(g).forEach((r=>e.add(r))),e.add(T),new Promise(((t,o)=>{h.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(o){const c=o.scene;c.traverse((t=>{if("CAM-Pacman"===t.name){const e=[];t.traverse((r=>{if(r.isMesh&&"CAM-Pacman_Shell"!==r.name&&"CAM-Pacman_Shell_Boolean"!==r.name){const t=l[r.name]||l.default;r.material=t,e.push(r)}else"CAM-Pacman_Shell"!==r.name&&"CAM-Pacman_Shell_Boolean"!==r.name||(r.visible=!1)})),e.forEach((e=>g.pacman.add(e))),g.pacman.scale.set(.05,.05,.05),g.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),A=new r.AnimationMixer(g.pacman);const c={};o.animations.forEach((e=>{const r=A.clipAction(e);c[e.name]=r,r.setEffectiveWeight(1),r.play()}))}else if(t.name&&m[t.name]){const e=m[t.name],o=new r.Group;t.rotation.z=Math.PI,t.rotation.x=Math.PI/2,t.scale.set(.75,.75,.75);const c=[];t.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=i:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),c.push(e))})),c.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),e?e.add(o):console.warn(`ghostContainer for ${t.name} is undefined!`)}if(t.isMesh)if("CAM-Arena_LowRes_Top"===t.name)t.material=y,t.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===t.name)t.material=a,t.castShadow=!0;else if("CAM-Floor"===t.name){const o=t.clone();t.position.y=-.1,t.position.x=0,t.position.z=0,t.material=new r.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:r.FrontSide}),t.receiveShadow=!1,t.castShadow=!0,t.scale.set(.5,.5,.5),o.material=v,o.position.y=-.5,o.receiveShadow=!0,e.add(o)}})),c.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.add(c),c.position.set(.5,.5,.5),t()}),(function(e){}),(function(e){o(e)}))}))}(f),console.log("Scene setup complete"),console.log("Scene children count:",f.children.length),console.log("Camera position after setup:",u.position)}const _=new r.Vector3(.45175,.5,.55675),b={startMobile:new r.Vector3(.5,2.5,2.5),startDesktop:new r.Vector3(-2,2.5,2),secondMobile:new r.Vector3(.5,2.5,2),secondDesktop:new r.Vector3(-1.5,3,2),mobileLookAt:new r.Vector3(.5,.5,-1.5),desktopLookAt:new r.Vector3(-1.25,.5,.25)},z=t?b.startMobile:b.startDesktop,E=t?b.secondMobile:b.secondDesktop,B=t?b.mobileLookAt:b.desktopLookAt,k=[{pos:new r.Vector3(.25525,.55,.6025),type:"straight"},{pos:new r.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,.1),type:"straight"},{pos:new r.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new r.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new r.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new r.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new r.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new r.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new r.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new r.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new r.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new r.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new r.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.25525,.55,.6025),type:"straight"}],x=[{pos:new r.Vector3(-.44825,.55,.703),type:"straight"},{pos:new r.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new r.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new r.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.25525,.55,.301),type:"straight"},{pos:new r.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.75775,.55,.8035),type:"straight"},{pos:new r.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.46125,.55,.703),type:"straight"},{pos:new r.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new r.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.25525,.55,.301),type:"straight"},{pos:new r.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new r.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new r.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.44825,.55,.703),type:"straight"}],G=[{pos:new r.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new r.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new r.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.25525,.55,.502),type:"straight"},{pos:new r.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new r.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new r.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new r.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new r.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.85825,.55,.1),type:"straight"},{pos:new r.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new r.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.25525,.55,.301),type:"straight"},{pos:new r.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new r.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new r.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.44825,.55,.703),type:"straight"}],L=[{pos:new r.Vector3(.85825,.55,.75325),type:"straight"},{pos:new r.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new r.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new r.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.55675,.55,.2005),type:"straight"},{pos:new r.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.46125,.55,.301),type:"straight"},{pos:new r.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.95875,.55,.904),type:"straight"},{pos:new r.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.75775,.55,1.105),type:"straight"},{pos:new r.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new r.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.85825,.55,.75325),type:"straight"}],H=[{pos:new r.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new r.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.95875,.55,.8035),type:"straight"},{pos:new r.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new r.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new r.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.44825,.55,.703),type:"straight"},{pos:new r.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new r.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,.2005),type:"straight"},{pos:new r.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.85825,.55,.1),type:"straight"},{pos:new r.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new r.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.46125,.55,.1),type:"straight"},{pos:new r.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new r.Vector3(1.05925,.55,.4015),type:"straight"}],O=[{pos:new r.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new r.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new r.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new r.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new r.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new r.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new r.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new r.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new r.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new r.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new r.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.85825,.55,.1),type:"straight"},{pos:new r.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new r.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new r.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],j=[{pos:z,lookAt:B},{pos:E,lookAt:B},{pos:new r.Vector3(.55675,3,.45175),lookAt:B},{pos:_,lookAt:B}];new r.Vector3(.55675,-.5,.45175),new r.Vector3(.55675,.55,.6025),new r.Vector3(.607,.55,.703),new r.Vector3(.65725,.55,.75325),new r.Vector3(.7075,.55,.8035),new r.Vector3(.9085,.55,.8035),new r.Vector3(.95875,.55,.85375),new r.Vector3(.95875,.55,1.15525),new r.Vector3(.9085,.55,1.2055),new r.Vector3(.808,.55,1.2055),new r.Vector3(.75775,.55,1.15525),new r.Vector3(.75775,.55,1.05475),new r.Vector3(.7075,.55,1.0045),new r.Vector3(.205,.55,1.0045),new r.Vector3(.15475,.55,1.05475),new r.Vector3(.15475,.55,1.15525),new r.Vector3(.205,.55,1.2055),new r.Vector3(.5065,.55,1.2055),new r.Vector3(.55675,.55,1.306),new r.Vector3(-.44825,1,2.0095),new r.Vector3(1.05925,.55,.703),new r.Vector3(1.05925,.55,.75325),new r.Vector3(1.009,.55,.8035),new r.Vector3(.9085,.55,.8035),new r.Vector3(1.05925,.55,1.2055),new r.Vector3(1.009,.55,1.2055),new r.Vector3(.95875,.55,1.15525),new r.Vector3(.95875,.55,1.05475),new r.Vector3(.35575,.55,.904),new r.Vector3(.35575,.55,.95425),new r.Vector3(.406,.55,1.0045),new r.Vector3(.5065,.55,1.0045),new r.Vector3(.15475,.55,1.105),new r.Vector3(.15475,.55,1.05475),new r.Vector3(.205,.55,1.0045),new r.Vector3(.3055,.55,1.0045),new r.Vector3(.55675,.55,1.306),new r.Vector3(.55675,.55,1.25575),new r.Vector3(.5065,.55,1.2055),new r.Vector3(.406,.55,1.2055),new r.Vector3(.65725,.55,.75325),new r.Vector3(.7075,.55,.8035),new r.Vector3(.75775,.55,.8035),new r.Vector3(.85825,.55,.8035),new r.Vector3(.9085,.55,.8035),new r.Vector3(.95875,.55,.85375),new r.Vector3(.95875,.55,.904),new r.Vector3(.95875,.55,1.0045),new r.Vector3(.75775,.55,1.05475),new r.Vector3(.7075,.55,1.0045),new r.Vector3(.65725,.55,1.0045),new r.Vector3(.55675,.55,1.0045),new r.Vector3(.65725,.55,1.0045),new r.Vector3(.5065,.55,1.0045),new r.Vector3(.45625,.55,1.0045),new r.Vector3(.35575,.55,1.0045),new r.Vector3(.15475,.55,1.15525),new r.Vector3(.205,.55,1.2055),new r.Vector3(.25525,.55,1.2055),new r.Vector3(.35575,.55,1.2055);const R={pacman:k,ghost1:x,ghost2:G,ghost3:L,ghost4:H,ghost5:O};function W(e,t){if(e.curveType){const o=e.curveType;if("upperArc"===o)return new r.Vector3(e.pos.x,e.pos.y,t.pos.z);if("lowerArc"===o)return new r.Vector3(t.pos.x,e.pos.y,e.pos.z);if("forwardDownArc"===o)return new r.Vector3(e.pos.x,t.pos.y,e.pos.z)}return new r.Vector3(e.pos.x,e.pos.y,t.pos.z)}function D(e,r,t,o){const c=W(e,r),p=e.pos.clone().lerp(r.pos,.5),n=t&&o?.6:.3;return c.clone().lerp(p,n)}function I(e){const t=new r.CurvePath;if(4===e.length){const o=new r.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);t.add(o)}return t}function q(){const e={};return Object.entries(R).forEach((([t,o])=>{e[t]=function(e){const t=new r.CurvePath,o=e.filter((e=>"type"in e));for(let e=0;e<o.length-1;e++){const c=o[e],p=o[e+1];if("straight"===c.type)t.add(new r.LineCurve3(c.pos,p.pos));else if("curve"===c.type){const n=e>0&&"curve"===o[e-1].type,s=e<o.length-2&&"curve"===o[e+1].type,u=n||s?D(c,p,n,s):W(c,p);t.add(new r.QuadraticBezierCurve3(c.pos,u,p.pos))}}return t}(o)})),e}const F={pacman:"pacmanHome",ghost1:"ghost1Home",ghost2:"ghost2Home",ghost3:"ghost3Home",ghost4:"ghost4Home",ghost5:"ghost5Home"};let U=!0,$=!1,N=0;function Q(){if(!U)return;const e=performance.now()/1e3,r=(e-0)%40/40,t=q();Object.entries(g).forEach((([e,o])=>{const c=t[F[e]];if(!c)return;const p=c.getPointAt(r);if(!p)return;const n=c.getTangentAt(r);n&&0!==n.length()&&(o.position.copy(p),function(e,r,t="ghost"){if(!r||0===r.length())return;const o=Math.atan2(r.x,r.z);if("pacman"===t)e.rotation.set(Math.PI/2,Math.PI,o+Math.PI/2);else if("ghost"===t)e.rotation.set(0,o,0);else if("camera"===t){const t=e.position.clone().add(r);e.lookAt(t)}}(o,n,"pacman"===e?"pacman":"ghost"))}));const o=C.getDelta();A&&A.update(o),Math.floor(60*e)%60==0&&(console.log("Home loop - Object positions:",{pacman:T.position,ghost1:g.ghost1.position,ghost2:g.ghost2.position,ghost3:g.ghost3.position,ghost4:g.ghost4.position,ghost5:g.ghost5.position}),console.log("Camera position:",u.position),console.log("Camera target:",u.getWorldDirection(new THREE.Vector3))),e<5&&(T.position.set(.5,.55,.5),g.ghost1.position.set(.6,.55,.5),g.ghost2.position.set(.4,.55,.5),g.ghost3.position.set(.5,.55,.6),g.ghost4.position.set(.5,.55,.4),g.ghost5.position.set(.5,.55,.5))}function Y(){const e=()=>T&&g&&0!==Object.keys(g).length?Object.values(g).every((e=>e.position.length()>0||e.children.length>0))?(console.log("Scene is ready, initializing scroll animation..."),void function(){const e=function(e,t){const o=function(e,t){const o={};return Object.entries({pacman:e,...t}).forEach((([e,t])=>{const c=t.position.clone(),p=new r.Vector3((c.x+_.x)/2,1,(c.z+_.z)/2);o[e]=[{pos:c},{pos:p},{pos:_}]})),o}(e,t),c={camera:I(j)};return Object.entries(o).forEach((([e,t])=>{c[e]=function(e){const t=new r.CurvePath;if(3===e.length){const o=new r.QuadraticBezierCurve3(e[0].pos,e[1].pos,e[2].pos);t.add(o)}return t}(t)})),c}(T,g);console.log("Scroll paths created:",Object.keys(e)),console.log("Pacman position:",T.position),console.log("Ghost positions:",Object.entries(g).map((([e,r])=>({key:e,position:r.position})))),U=!1,$=!0,N=performance.now()/1e3,p().timeline({scrollTrigger:{trigger:".sc--home",start:"top top",end:"bottom top",scrub:.5,onEnter:()=>{console.log("Home scroll animation started")},onLeave:()=>{console.log("Home scroll animation ended")}}}).to({progress:0},{progress:1,immediateRender:!1,onUpdate:function(){!function(e,r){if(r.camera){const t=r.camera.getPointAt(e);u.position.copy(t),u.updateProjectionMatrix()}if(r.pacman&&T){const t=r.pacman.getPointAt(e);T.position.copy(t),0!==e&&.5!==e&&1!==e||console.log(`Pacman at progress ${e}:`,t);const o=r.pacman.getTangentAt(e);o&&o.length()>0&&T.lookAt(t.clone().add(o.normalize()))}Object.entries(g).forEach((([t,o])=>{const c=r[t];if(c){const r=c.getPointAt(e);o.position.copy(r),0!==e&&.5!==e&&1!==e||console.log(`Ghost ${t} at progress ${e}:`,r);const p=c.getTangentAt(e);p&&p.length()>0&&o.lookAt(r.clone().add(p.normalize()))}}))}(this.targets()[0].progress,e)}})}()):(console.log("Objects not positioned yet, retrying in 100ms..."),void setTimeout(e,100)):(console.log("Scene not ready, retrying in 100ms..."),void setTimeout(e,100));e()}!async function(){var e;await S(),e=Q,P.push(e),Y(),function(){const e=()=>{P.forEach((e=>e())),M.render(f,u),requestAnimationFrame(e)};e()}()}()})();
//# sourceMappingURL=script.js.map