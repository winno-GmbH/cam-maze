(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=THREE,r=window.innerWidth<768,o={mazeContainer:document.querySelector(".el--home-maze.el"),canvas:document.querySelector("canvas"),homeSection:document.querySelector(".sc--home.sc"),introSection:document.querySelector(".sc--intro.sc"),povSection:document.querySelector(".sc--pov.sc"),finalSection:document.querySelector(".sc--final.sc"),finalContainer:document.querySelector(".cr--final.cr"),parentElements:document.querySelectorAll(".cmp--pov.cmp")},c=gsap;var n=e.n(c);const s=ScrollTrigger;var a=e.n(s);const p=new t.Vector3(.55675,.35,.45175),i={startMobile:new t.Vector3(.5,2.5,2.5),startDesktop:new t.Vector3(-2,2.5,2),secondMobile:new t.Vector3(.5,2.5,2),secondDesktop:new t.Vector3(-1.5,3,.75),mobileLookAt:new t.Vector3(.5,.5,-1.5),desktopLookAt:new t.Vector3(-1.25,.5,.25),cameraLookAtSecondDesktop:new t.Vector3(-.75,.5,-.75),cameraLookAtSecondMobile:new t.Vector3(-.75,.5,-.75),cameraHomeScrollEndLookAt:new t.Vector3(.55675,-5,.35),thirdPosition:new t.Vector3(.55675,3,.45175),cameraHomeScrollEndPathPoint:new t.Vector3(.55675,.5,.45175)},w=r?i.startMobile:i.startDesktop,u=r?i.secondMobile:i.secondDesktop,l=r?i.mobileLookAt:i.desktopLookAt,h=r?i.cameraLookAtSecondMobile:i.cameraLookAtSecondDesktop,y=i.thirdPosition,V=i.cameraHomeScrollEndLookAt,g=i.cameraHomeScrollEndPathPoint,m=[{pos:new t.Vector3(.25525,.55,.6025),type:"straight"},{pos:new t.Vector3(.25525,.55,.301),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.35575,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.45625,.55,.1),type:"straight"},{pos:new t.Vector3(.45625,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new t.Vector3(.15475,.55,-.2015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.05425,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.04625,.55,-5e-4),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.14675,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new t.Vector3(-.34775,.55,-.2015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.44825,.55,-.101),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(-.44825,.55,-.05),new t.Vector3(-.398,.55,-5e-4),new t.Vector3(-.34775,.55,.05)]},{pos:new t.Vector3(-.34775,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new t.Vector3(-.04625,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.05425,.55,.301),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new t.Vector3(-.14675,.55,.4015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.24725,.55,.502),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new t.Vector3(-.04625,.55,.6025),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.05425,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new t.Vector3(-.24725,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.34775,.55,.904),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(-.34775,.55,.95),new t.Vector3(-.398,.55,1.0045),new t.Vector3(-.44825,.55,1.05)]},{pos:new t.Vector3(-.44825,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new t.Vector3(-.24725,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.14675,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new t.Vector3(.05425,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.15475,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new t.Vector3(-.04625,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.14675,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new t.Vector3(.65725,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.75775,.55,.904),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(.75775,.55,.854),new t.Vector3(.7075,.55,.8035),new t.Vector3(.65725,.55,.75325),new t.Vector3(.55675,.55,.703),new t.Vector3(.45625,.55,.75325),new t.Vector3(.35575,.55,.8035),new t.Vector3(.25525,.55,.753)]},{pos:new t.Vector3(.25525,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.25525,.55,.6025),type:"straight"}],d=[{pos:new t.Vector3(-.44825,.55,.703),type:"straight"},{pos:new t.Vector3(-.44825,.55,.301),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new t.Vector3(-.24725,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.14675,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new t.Vector3(.35575,.55,-5e-4),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.45625,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.35575,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.25525,.55,.301),type:"straight"},{pos:new t.Vector3(.25525,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.35575,.55,.8035),type:"curve",arc:"lowerArc",curveCheckPoints:[new t.Vector3(.40575,.55,.8035),new t.Vector3(.45625,.55,.75325),new t.Vector3(.55675,.55,.703),new t.Vector3(.65725,.55,.75325),new t.Vector3(.70775,.55,.8035)]},{pos:new t.Vector3(.75775,.55,.8035),type:"straight"},{pos:new t.Vector3(.95875,.55,.8035),type:"curve",arc:"lowerArc",curveCheckPoints:[new t.Vector3(1.00875,.55,.8035),new t.Vector3(1.05925,.55,.75325),new t.Vector3(1.15975,.55,.703),new t.Vector3(1.26025,.55,.75325),new t.Vector3(1.31075,.55,.8035)]},{pos:new t.Vector3(1.36075,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.46125,.55,.703),type:"straight"},{pos:new t.Vector3(1.46125,.55,.301),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new t.Vector3(.35575,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.25525,.55,.301),type:"straight"},{pos:new t.Vector3(.25525,.55,.502),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.15475,.55,.6025),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.05425,.55,.703),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(.004,.55,.8035)]},{pos:new t.Vector3(-.04625,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.05425,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.15475,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new t.Vector3(-.04625,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.14675,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.0965,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.04625,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new t.Vector3(-.34775,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.44825,.55,.703),type:"straight"}],v=[{pos:new t.Vector3(-.04625,.55,.904),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(.004,.55,.8035)]},{pos:new t.Vector3(.05425,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new t.Vector3(-.14675,.55,.6025),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.24725,.55,.502),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new t.Vector3(.15475,.55,.4015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.25525,.55,.502),type:"straight"},{pos:new t.Vector3(.25525,.55,.703),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(.3055,.55,.8035),new t.Vector3(.35575,.55,.904)]},{pos:new t.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new t.Vector3(.65725,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.75775,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new t.Vector3(1.36075,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new t.Vector3(1.46125,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new t.Vector3(1.15975,.55,-5e-4),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.05925,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.95875,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.85825,.55,.1),type:"straight"},{pos:new t.Vector3(.85825,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.75775,.55,-.2015),type:"curve",arc:"lowerArc",curveCheckPoints:[new t.Vector3(.65725,.55,-.15125)]},{pos:new t.Vector3(.55675,.55,-.101),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new t.Vector3(.45625,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.35575,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.25525,.55,.301),type:"straight"},{pos:new t.Vector3(.25525,.55,.703),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(.3055,.55,.8035)]},{pos:new t.Vector3(.35575,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.25525,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.15475,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new t.Vector3(-.04625,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.14675,.55,1.105),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(-.0965,.55,1.0045)]}],A=[{pos:new t.Vector3(.85825,.55,.75325),type:"straight"},{pos:new t.Vector3(.85825,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.75775,.55,-.2015),type:"curve",arc:"lowerArc",curveCheckPoints:[new t.Vector3(.65725,.55,-.15125)]},{pos:new t.Vector3(.55675,.55,-.101),type:"curve",arc:"lowerArc",curveCheckPoints:[new t.Vector3(.45625,.55,-.15125)]},{pos:new t.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new t.Vector3(.15475,.55,-.2015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.05425,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new t.Vector3(.35575,.55,-5e-4),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.45625,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.55675,.55,.2005),type:"straight"},{pos:new t.Vector3(1.36075,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.46125,.55,.301),type:"straight"},{pos:new t.Vector3(1.46125,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.36075,.55,.8035),type:"curve",arc:"lowerArc",curveCheckPoints:[new t.Vector3(1.26025,.55,.75325)]},{pos:new t.Vector3(1.15975,.55,.703),type:"curve",arc:"lowerArc",curveCheckPoints:[new t.Vector3(1.05925,.55,.75325),new t.Vector3(1.009,.55,.8035)]},{pos:new t.Vector3(.95875,.55,.904),type:"straight"},{pos:new t.Vector3(.95875,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.85825,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.75775,.55,1.105),type:"straight"},{pos:new t.Vector3(.75775,.55,.904),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(.7075,.55,.8035),new t.Vector3(.65725,.55,.75325)]},{pos:new t.Vector3(.55675,.55,.703),type:"curve",arc:"lowerArc",curveCheckPoints:[new t.Vector3(.45625,.55,.75325)]},{pos:new t.Vector3(.35575,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.25525,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.15475,.55,.6025),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.05425,.55,.703),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(.004,.55,.8035)]},{pos:new t.Vector3(-.04625,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new t.Vector3(.65725,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.75775,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.808,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.85825,.55,.75325),type:"straight"}],f=[{pos:new t.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new t.Vector3(1.05925,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.95875,.55,.8035),type:"straight"},{pos:new t.Vector3(.85825,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.75775,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new t.Vector3(.25525,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.15475,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new t.Vector3(-.34775,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.44825,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.398,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.34775,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.398,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.44825,.55,.703),type:"straight"},{pos:new t.Vector3(-.44825,.55,.301),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new t.Vector3(-.04625,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.05425,.55,.301),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.15475,.55,.4015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.25525,.55,.301),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.35575,.55,.2005),type:"straight"},{pos:new t.Vector3(.75775,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.85825,.55,.1),type:"straight"},{pos:new t.Vector3(.85825,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.95875,.55,-.2015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.05925,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new t.Vector3(1.36075,.55,5e-4),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.46125,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.36075,.55,-.2015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.26025,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.36075,.55,5e-4),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.46125,.55,.1),type:"straight"},{pos:new t.Vector3(1.46125,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.36075,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.26025,.55,.75325),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.15975,.55,.703),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new t.Vector3(1.05925,.55,.4015),type:"straight"}],P=[{pos:new t.Vector3(.45625,.55,-.04975),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new t.Vector3(-.04625,.55,5e-4),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.14675,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new t.Vector3(-.34775,.55,-.2015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.44825,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.398,.55,5e-4),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.34775,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new t.Vector3(-.04625,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.05425,.55,.301),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new t.Vector3(-.14675,.55,.4015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(-.24725,.55,.502),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new t.Vector3(.15475,.55,.6025),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.25525,.55,.703),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.3055,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.35575,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new t.Vector3(.65725,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.75775,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.85825,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.95875,.55,.904),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.95875,.55,1.105),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new t.Vector3(1.36075,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new t.Vector3(1.46125,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new t.Vector3(1.15975,.55,-.2015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new t.Vector3(1.05925,.55,.1),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.95875,.55,.2005),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.85825,.55,.1),type:"straight"},{pos:new t.Vector3(.85825,.55,-.101),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.75775,.55,-.2015),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.65725,.55,-.15125),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.55675,.55,-.101),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.45625,.55,-.04975),type:"curve",arc:"lowerArc"}],S=[{pos:y,lookAt:V},{pos:u,lookAt:h},{pos:y,lookAt:V},{pos:g,lookAt:V}],M=[{pos:new t.Vector3(.55675,.5,.45175),type:"curve",arc:"forwardDownArc"},{pos:new t.Vector3(.55675,.55,.6025),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(.55675,.55,.6525),new t.Vector3(.607,.55,.703),new t.Vector3(.65725,.55,.75325),new t.Vector3(.7075,.55,.8035)]},{pos:new t.Vector3(.75775,.55,.8035),type:"straight"},{pos:new t.Vector3(.9085,.55,.8035),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.95875,.55,.85375),type:"straight"},{pos:new t.Vector3(.95875,.55,1.15525),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new t.Vector3(.808,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new t.Vector3(.75775,.55,1.05475),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new t.Vector3(.205,.55,1.0045),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new t.Vector3(.15475,.55,1.15525),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.205,.55,1.2055),type:"straight"},{pos:new t.Vector3(.5065,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.55675,.55,1.306),type:"curve",arc:"upperArc"},{pos:new t.Vector3(-.44825,1,2.0095),type:"straight"}],C=[{pos:new t.Vector3(1.05925,.55,.703),type:"straight"},{pos:new t.Vector3(1.05925,.55,.75325),type:"curve",arc:"upperArc"},{pos:new t.Vector3(1.009,.55,.8035),type:"straight"},{pos:new t.Vector3(.9085,.55,.8035),type:"straight"}],b=[{pos:new t.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new t.Vector3(1.009,.55,1.2055),type:"curve",arc:"lowerArc"},{pos:new t.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new t.Vector3(.95875,.55,1.05475),type:"straight"}],F=[{pos:new t.Vector3(.35575,.55,.904),type:"straight"},{pos:new t.Vector3(.35575,.55,.95425),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.406,.55,1.0045),type:"straight"},{pos:new t.Vector3(.5065,.55,1.0045),type:"straight"}],k=[{pos:new t.Vector3(.15475,.55,1.105),type:"straight"},{pos:new t.Vector3(.15475,.55,1.05475),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.205,.55,1.0045),type:"straight"},{pos:new t.Vector3(.3055,.55,1.0045),type:"straight"}],E=[{pos:new t.Vector3(.55675,.55,1.306),type:"straight"},{pos:new t.Vector3(.55675,.55,1.25575),type:"curve",arc:"upperArc"},{pos:new t.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new t.Vector3(.406,.55,1.2055),type:"straight"}],I={ghost1:{triggerPos:new t.Vector3(.65725,.55,.75325),ghostStartFadeIn:new t.Vector3(.7075,.55,.8035),ghostEndFadeIn:new t.Vector3(.725,.55,.8035),ghostStartFadeOut:new t.Vector3(.75,.55,.8035),camStartFadeIn:new t.Vector3(.75775,.55,.8035),camEndFadeIn:new t.Vector3(.775,.55,.8035),camStartFadeOut:new t.Vector3(.84,.55,.8035),endPosition:new t.Vector3(.85825,.55,.8035)},ghost2:{triggerPos:new t.Vector3(.9085,.55,.8035),ghostStartFadeIn:new t.Vector3(.95875,.55,.85375),ghostEndFadeIn:new t.Vector3(.95875,.55,.875),ghostStartFadeOut:new t.Vector3(.95875,.55,.89),camStartFadeIn:new t.Vector3(.95875,.55,.904),camEndFadeIn:new t.Vector3(.95875,.55,.93),camStartFadeOut:new t.Vector3(.95875,.55,.9975),endPosition:new t.Vector3(.95875,.55,1.0045)}};function z(){return w}function x(){return l}const T={pacman:m,ghost1:d,ghost2:v,ghost3:A,ghost4:f,ghost5:P},_={camera:M,ghost1:C,ghost2:b,ghost3:F,ghost4:k,ghost5:E};function O(){return S}n().registerPlugin(a());const L=new t.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,100),B=new t.Scene,$=new t.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),q=new t.Clock,j=[];function G(){const e=Math.min(window.devicePixelRatio,r?2:3);$.setPixelRatio(e),o.mazeContainer?$.setSize(o.mazeContainer.clientWidth,o.mazeContainer.clientHeight):$.setSize(window.innerWidth,window.innerHeight)}const R=(new t.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),D=new t.MeshMatcapMaterial({matcap:R}),H=new t.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),W=new t.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:t.NormalBlending,side:t.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),U=new t.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),Q={blue:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new t.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},Y={CAM_Pacman_Backframe:Q.blue,"CAM-Pacman_Bitcoin_1":Q.white,"CAM-Pacman_Bitcoin_2":Q.white,"CAM-Pacman_Bottom":Q.blue,"CAM-Pacman_Top":Q.blue,"CAM-Pacman_Eye":Q.white,CAM_Pacman_Logo_1:Q.white,CAM_Pacman_Logo_2:Q.white,"CAM-Pacman_Shell_Boolean":Q.blue,"CAM-Pacman_Shell":Q.blue,"CAM-Pacman_Bottom_electronic":Q.white,"CAM-Pacman_Top_electronic":Q.white,"CAM-Pacman_Bottom_Text":Q.white,"CAM-Pacman_Top_Text":Q.white,default:Q.blue},N=new t.GLTFLoader;let J;const K=new t.Group,X={pacman:K,ghost1:new t.Mesh(new t.BufferGeometry,W),ghost2:new t.Mesh(new t.BufferGeometry,W),ghost3:new t.Mesh(new t.BufferGeometry,W),ghost4:new t.Mesh(new t.BufferGeometry,W),ghost5:new t.Mesh(new t.BufferGeometry,W)},Z={Ghost_EUR:X.ghost1,Ghost_CHF:X.ghost2,Ghost_YEN:X.ghost3,Ghost_USD:X.ghost4,Ghost_GBP:X.ghost5},ee=new Map;class te{constructor(e,t=.05){this.currentTangent=e.clone(),this.smoothing=t}update(e){return this.currentTangent.lerp(e,this.smoothing),this.currentTangent.normalize()}reset(e){this.currentTangent.copy(e)}setSmoothingFactor(e){this.smoothing=Math.max(.001,Math.min(1,e))}}function re(e,r){const o=e.map((e=>`${e.pos.x},${e.pos.y},${e.pos.z},${e.type},${e.arc||""}`)).join("|");if(ee.has(o))return ee.get(o);const c=new t.CurvePath;let n=0;for(;n<e.length-1;){const o=e[n],s=e[n+1];if(o.curveCheckPoints&&o.curveCheckPoints.length>0){const e=[o.pos,...o.curveCheckPoints,s.pos];console.log(`Creating CatmullRomCurve3 for ${r} with curveCheckPoints:`,e.map((e=>`(${e.x}, ${e.y}, ${e.z})`))),c.add(new t.CatmullRomCurve3(e,!1,"centripetal",0))}else if("straight"===o.type)console.log("Creating LineCurve3 from",`(${o.pos.x}, ${o.pos.y}, ${o.pos.z})`,"to",`(${s.pos.x}, ${s.pos.y}, ${s.pos.z})`),c.add(new t.LineCurve3(o.pos,s.pos));else{const e=oe(o,s);console.log("Creating QuadraticBezierCurve3 from",`(${o.pos.x}, ${o.pos.y}, ${o.pos.z})`,"via",`(${e.x}, ${e.y}, ${e.z})`,"to",`(${s.pos.x}, ${s.pos.y}, ${s.pos.z})`),c.add(new t.QuadraticBezierCurve3(o.pos,e,s.pos))}n++}return ee.set(o,c),c}function oe(e,r){if(e.arc){const o=e.arc;if("upperArc"===o)return new t.Vector3(e.pos.x,e.pos.y,r.pos.z);if("lowerArc"===o)return new t.Vector3(r.pos.x,e.pos.y,e.pos.z);if("forwardDownArc"===o)return new t.Vector3(e.pos.x,r.pos.y,e.pos.z)}return new t.Vector3(e.pos.x,e.pos.y,r.pos.z)}function ce(e){const r=new t.CurvePath;if(4===e.length){const o=new t.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);r.add(o)}return r}function ne(){const e={};return Object.entries(T).forEach((([t,r])=>{e[t]=re(r,t)})),e}function se(){const e={};return Object.entries(_).forEach((([t,r])=>{e[t]=re(r,t)})),e}function ae(e,t,r="ghost"){if(!t||0===t.length())return;const o=Math.atan2(t.x,t.z);if("pacman"===r)e.rotation.set(Math.PI/2,Math.PI,o+Math.PI/2);else if("ghost"===r)e.rotation.set(0,o,0);else if("camera"===r){const r=e.position.clone().add(t);e.lookAt(r)}}function pe(e,r,o){const c=(new t.Quaternion).setFromEuler(new t.Euler(Math.PI/2,0,0)),n=(new t.Quaternion).setFromEuler(new t.Euler(-Math.PI/2,0,0)),s=r.angleTo(c)<r.angleTo(n)?c:n;e.quaternion.copy(r.clone().slerp(s,o))}let ie=null;const we={pacman:.9,ghost1:1,ghost2:1.1,ghost3:1.2,ghost4:1.3,ghost5:1.4};function ue(e,r){ie&&(ie.kill(),ie=null);const o=function(e){const r=function(e){const r={};return Object.entries(e).forEach((([e,o])=>{const c=new t.Vector3(o.x*(1/4)+p.x*(3/4),1.5,o.z*(1/4)+p.z*(3/4));r[e]=[{pos:o.clone()},{pos:c},{pos:p}]})),r}(e),o={camera:ce(O())};return Object.entries(r).forEach((([e,r])=>{o[e]=function(e){const r=new t.CurvePath;if(3===e.length){const o=new t.QuadraticBezierCurve3(e[0].pos,e[1].pos,e[2].pos);r.add(o)}return r}(r)})),o}(e),c=O();ie=n().timeline({scrollTrigger:{id:"homeScroll",trigger:".sc--home",start:"top top",end:"bottom top",scrub:.5,onScrubComplete:()=>{Ae()}}}).to({progress:0},{progress:1,immediateRender:!1,onUpdate:function(){!function(e,r,o,c){if(r.camera){const o=r.camera.getPointAt(e);L.position.copy(o);const n=new t.CubicBezierCurve3(c[0].lookAt,c[1].lookAt,c[2].lookAt,c[3].lookAt).getPoint(e);L.lookAt(n),L.updateProjectionMatrix()}const n=.85,s=e<n?1:e>.95?0:1-(e-n)/.09999999999999998;if(r.pacman&&K){const t=we.pacman??1,c=Math.min(e*t,1),n=Math.pow(c,1.25),a=r.pacman.getPointAt(n);a&&(K.position.copy(a),pe(K,o.pacman,n),K.traverse((e=>{e.isMesh&&e.material&&(e.material.opacity=s)})))}Object.entries(X).forEach((([t,c])=>{const n=r[t];if(n){const r=we[t]??1,a=Math.min(e*r,1),p=Math.pow(a,1.25),i=n.getPointAt(p);i&&(c.position.copy(i),pe(c,o[t],p),c.material&&(c.material.opacity=s))}}))}(this.targets()[0].progress,o,r,c)}})}const le=50;let he=!0,ye=0,Ve=0,ge={},me={},de=!1;const ve={};function Ae(){0===window.scrollY&&function(){he=!0,ye=Ve*le,ve.pacman=new te(new t.Vector3(1,0,0),.06),ve.ghost1=new te(new t.Vector3(1,0,0),.06),ve.ghost2=new te(new t.Vector3(1,0,0),.06),ve.ghost3=new te(new t.Vector3(1,0,0),.06),ve.ghost4=new te(new t.Vector3(1,0,0),.06),ve.ghost5=new te(new t.Vector3(1,0,0),.06);const e=ne();var r;Object.entries(X).forEach((([t,r])=>{const o=e[t];if(o){const e=o.getPointAt(0);if(e&&r.position.copy(e),ve[t]){const e=o.getTangentAt(0);e&&ve[t].reset(e)}}})),de||(r=()=>function(e){if(!he)return;ye+=e;const t=ye%le/le,r=ne();Object.entries(X).forEach((([e,o])=>{const c=r[e];if(c){const r=c.getPointAt(t);if(r&&o.position.copy(r),ve[e]&&t>0){const r=c.getTangentAt(t);r&&r.length()>0&&ae(o,ve[e].update(r),"pacman"===e?"pacman":"ghost")}}}))}(q.getDelta()),j.push(r),de=!0)}()}let fe=null,Pe=!1,Se=null,Me=!1,Ce=!1,be=!1,Fe=!1,ke=0;const Ee=new t.Vector3(.55675,.55,1.306),Ie=new t.Vector3(-.14675,1,1.8085),ze=new t.Vector3(.55675,.1,1.306),xe=new t.Vector3(-.14675,0,1.8085),Te=new t.Vector3(7.395407041377711,.9578031302345096,-4.312450290270135);let _e=null,Oe=!0;const Le={},Be={};function $e(){fe&&(fe.kill(),fe=null),se(),Be.camera=new te(new t.Vector3(0,0,-1),.08),Be.ghost1=new te(new t.Vector3(1,0,0),.08),Be.ghost2=new te(new t.Vector3(1,0,0),.08),Be.ghost3=new te(new t.Vector3(1,0,0),.08),Be.ghost4=new te(new t.Vector3(1,0,0),.08),Be.ghost5=new te(new t.Vector3(1,0,0),.08),Object.keys(I).forEach((e=>{Le[e]={hasBeenTriggered:!1,hasBeenDeactivated:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0,ghostTextOpacity:0,camTextOpacity:0,lastProgress:0}})),fe=n().timeline({scrollTrigger:{id:"povScroll",trigger:o.povSection,start:"top bottom",end:"bottom top",endTrigger:".sc--final",scrub:.5,toggleActions:"play none none reverse",onEnter:()=>{Pe=!0},onLeave:Ge,onLeaveBack:Ge}}).to({progress:0},{progress:1,immediateRender:!1,onStart:qe,onUpdate:function(){je.call(this)},onReverseComplete:()=>Re(!0),onComplete:Re})}function qe(){const e=se();if(Be.camera&&e.camera){const t=e.camera.getTangentAt(0);t&&Be.camera.reset(t)}Object.entries(X).forEach((([t,r])=>{if(e[t]&&"pacman"!==t){const o=e[t].getPointAt(0);r.position.copy(o);const c=e[t].getTangentAt(0).normalize();r.lookAt(o.clone().add(c)),r.visible=!1,r.scale.set(.5,.5,.5)}})),X.pacman&&(X.pacman.visible=!1),Me=!0}function je(){const e=this.targets()[0].progress,r=se();if(!r.camera)return;const o=r.camera.getPointAt(e);Se?(function(e,r){const o=r.camera.getPointAt(e);L.position.copy(o),L.fov=80;const c=document.querySelector("canvas");c&&"none"===c.style.display&&e<.99&&(c.style.display="block");const s=r.camera.getTangentAt(e).normalize();let a=s;Be.camera&&e>0&&(a=Be.camera.update(s));const p=o.clone().add(a);e>=.973?function(e,r,o){const c=He(se().camera,Ee),s=He(se().camera,Ie);if(e>=c&&e<=s){const a=(e-c)/(s-c);if(null===_e){const e=new t.Vector2(o.x-r.x,o.z-r.z).normalize();_e=Math.atan2(e.y,e.x),_e=_e>3?_e/2:_e}const p=new t.Vector2(ze.x-r.x,ze.z-r.z).normalize();let i=Math.atan2(p.y,p.x),w=i-_e;w>Math.PI?w-=2*Math.PI:w<-Math.PI&&(w+=2*Math.PI),w=1.75*-w,i=_e+w;const u=De(a),l=_e*(1-u)+i*u,h=1,y=new t.Vector3(r.x+Math.cos(l)*h,r.y,r.z+Math.sin(l)*h);L.lookAt(y),Ce=!0,e>=.8&&!be&&(be=!0,function(){const e=document.querySelector(".sc--final.sc");e&&n().timeline({scrollTrigger:{trigger:".sc--final",start:"top top",end:"bottom bottom",scrub:.5,toggleActions:"play none none reverse"}}).to(e,{opacity:1,ease:"power2.inOut",onComplete:()=>{Fe=!0,be=!1}})}())}}(e,o,p):e>.8&&Fe?function(e){if(0===ke&&1!==e){const t=Math.floor(100*e)/100;ke=.99===t?.973:e}const r=(e-ke)/(1-ke);if(Oe&&r>0){const e=function(){const e=new t.Vector3(0,0,-1);e.applyQuaternion(L.quaternion);const r=new t.Vector3;return r.copy(L.position).add(e.multiplyScalar(10)),r}(),o=(new t.Vector3).lerpVectors(e,xe,De(r)),c=80,n=20;L.fov=c+(n-c)*De(r),L.lookAt(o)}else if(r>0){const e=(new t.Vector3).lerpVectors(Te,xe,De(r)),o=20,c=80;L.fov=c-(c-o)*De(r),L.lookAt(e)}}(e):function(e,t){const r=He(se().camera,Ee),o=He(se().camera,Ie);if((e<r||e>o)&&!be){_e=null,Ce=!1,Fe=!1,be=!1;const e=document.querySelector(".sc--final.sc");e&&(e.style.opacity="0")}Ce||be||L.lookAt(t),Fe&&e>.8||(ke=0)}(e,p),L.updateProjectionMatrix()}(e,r),function(e,t,r){Object.entries(I).forEach((([t,o])=>{const c=X[t],n=r[t];c&&n&&"pacman"!==t&&function(e,t,r,o,c){const{triggerPos:n,ghostStartFadeIn:s,ghostEndFadeIn:a,ghostStartFadeOut:p,camStartFadeIn:i,camEndFadeIn:w,camStartFadeOut:u,endPosition:l}=c,h=Le[e],y=document.querySelectorAll(".cmp--pov.cmp")[parseInt(e.replace("ghost",""))-1];if(!y)return;const V=y.querySelectorAll(".pov"),g=y.querySelectorAll(".cam");if(!V||!g||0===V.length||0===g.length)return;null===h.triggerCameraProgress&&(h.triggerCameraProgress=He(se().camera,n,800),h.ghostStartFadeInProgress=He(se().camera,s,800),h.ghostEndFadeInProgress=He(se().camera,a,800),h.ghostStartFadeOutProgress=He(se().camera,p,800),h.camStartFadeInProgress=He(se().camera,i,800),h.camEndFadeInProgress=He(se().camera,w,800),h.camStartFadeOutProgress=He(se().camera,u,800),h.endCameraProgress=He(se().camera,l,800));const m=He(se().camera,o,800);if(m>=h.triggerCameraProgress&&m<=h.endCameraProgress){if(!t.visible&&(t.visible=!0,h.hasBeenTriggered=!0,Be[e])){const t=r.getTangentAt(0);t&&Be[e].reset(t)}const o=(m-h.triggerCameraProgress)/(h.endCameraProgress-h.triggerCameraProgress);let c=Math.max(0,Math.min(1,o));if(void 0===h.currentPathT)h.currentPathT=c;else{const e=.1;h.currentPathT+=(c-h.currentPathT)*e}c=h.currentPathT;const n=r.getPointAt(c);if(t.position.copy(n),Be[e]&&c>0){const o=r.getTangentAt(c);o&&o.length()>0&&ae(t,Be[e].update(o),"ghost")}if(c>.9){const e=t;e.material&&"opacity"in e.material&&(e.material.opacity=1-(c-.9)/.1)}else{const e=t;e.material&&"opacity"in e.material&&(e.material.opacity=1)}}else t.visible=!1,h.hasBeenTriggered=!1;!function(e,t,r,o,c,n){let s=0,a=0;if(t>=r.ghostStartFadeInProgress&&t<=r.ghostEndFadeInProgress){const e=(t-r.ghostStartFadeInProgress)/(r.ghostEndFadeInProgress-r.ghostStartFadeInProgress);s=Math.min(1,e),o.style.opacity=s.toString()}else if(t>r.ghostEndFadeInProgress&&t<r.ghostStartFadeOutProgress)s=1;else if(t>=r.ghostStartFadeOutProgress&&t<=r.camStartFadeInProgress){const e=(t-r.ghostStartFadeOutProgress)/(r.camStartFadeInProgress-r.ghostStartFadeOutProgress);s=Math.max(0,1-e)}if(t>=r.camStartFadeInProgress&&t<=r.camEndFadeInProgress){const e=(t-r.camStartFadeInProgress)/(r.camEndFadeInProgress-r.camStartFadeInProgress);a=Math.min(1,e)}else if(t>r.camEndFadeInProgress&&t<r.camStartFadeOutProgress)a=1;else if(t>=r.camStartFadeOutProgress&&t<=r.endCameraProgress){const e=(t-r.camStartFadeOutProgress)/(r.endCameraProgress-r.camStartFadeOutProgress);a=Math.max(0,1-e),o.style.opacity=a.toString()}a>.01&&s>.01?o.classList.contains("no-visibility")||o.classList.add("no-visibility"):o.classList.contains("no-visibility")||o.classList.remove("no-visibility"),c.forEach((e=>{const t=e;s>.01?(t.classList.remove("no-visibility"),t.style.opacity=s.toString()):s<=.01&&!t.classList.contains("no-visibility")&&(t.classList.add("no-visibility"),t.style.opacity="0")})),n.forEach((e=>{const t=e;a>.01?(t.classList.remove("no-visibility"),t.style.opacity=a.toString()):a<=.01&&!t.classList.contains("no-visibility")&&(t.classList.add("no-visibility"),t.style.opacity="0")}))}(0,m,h,y,V,g)}(t,c,n,e,o)}))}(o,0,r),Se.copy(o)):Se=o.clone()}function Ge(){Pe=!1,Object.entries(X).forEach((([e,t])=>{if("pacman"!==e){t.visible=!1;const r=parseInt(e.replace("ghost",""))-1,o=document.querySelectorAll(".cmp--pov.cmp")[r];if(o){const e=document.querySelectorAll(".pov"),t=document.querySelectorAll(".cam");e.forEach((e=>{const t=e;t.classList.add("no-visibility"),t.style.opacity="0"})),t.forEach((e=>{const t=e;t.classList.add("no-visibility"),t.style.opacity="0"}))}o.classList.contains("no-visibility")||o.classList.add("no-visibility");const c=t;c.material&&"opacity"in c.material&&(c.material.opacity=1)}})),X.pacman&&(X.pacman.visible=!0),L.fov=50,L.updateProjectionMatrix(),Object.keys(Be).forEach((e=>{if(Be[e]){const r="camera"===e?new t.Vector3(0,0,-1):new t.Vector3(1,0,0);Be[e].reset(r)}}))}function Re(e=!1){if(X.pacman&&(X.pacman.visible=!0),Ce=!1,_e=null,ke=0,be=!1,e)Fe=!1;else{const e=document.querySelector("canvas");e&&(e.style.display="none"),L.lookAt(xe),Fe=!0}Object.keys(Le).forEach((e=>{Le[e]={hasBeenTriggered:!1,hasBeenDeactivated:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0,ghostTextOpacity:0,camTextOpacity:0,lastProgress:0},Be[e]&&Be[e].reset(new t.Vector3(1,0,0))})),Be.camera&&Be.camera.reset(new t.Vector3(0,0,-1))}function De(e){return e*e*(3-2*e)}function He(e,t,r=2e3){if(!e||!t)return 0;let o=0,c=1/0;for(let n=0;n<r;n++)try{const s=n/(r-1),a=e.getPointAt(s);if(!a)continue;const p=a.distanceTo(t);p<c&&(c=p,o=s)}catch(e){}return o}let We=0;window.addEventListener("scroll",(()=>{const e=window.scrollY;Oe=e>We,We=e})),async function(){r?$.setPixelRatio(Math.min(window.devicePixelRatio,2)):$.setPixelRatio(window.devicePixelRatio),$.shadowMap.enabled=!0,$.shadowMap.type=t.PCFSoftShadowMap,o.mazeContainer?($.setSize(o.mazeContainer.clientWidth,o.mazeContainer.clientHeight),o.mazeContainer.appendChild($.domElement)):($.setSize(window.innerWidth,window.innerHeight),document.body.appendChild($.domElement)),G(),window.addEventListener("resize",G),$.render(B,L),function(){const e=new t.AmbientLight(16777215);B.add(e);const r=new t.DirectionalLight(16777215,.8);B.add(r),r.position.set(-5,15,10),r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.camera.left=-20,r.shadow.camera.right=20,r.shadow.camera.top=20,r.shadow.camera.bottom=-20,r.shadow.camera.near=.1,r.shadow.camera.far=50,r.shadow.bias=-.001,r.shadow.radius=3,r.castShadow=!0}(),function(){const e=z(),t=x();L.position.set(e.x,e.y,e.z),L.lookAt(t.x,t.y,t.z)}(),await async function(e){return Object.values(X).forEach((t=>e.add(t))),e.add(K),new Promise(((r,o)=>{N.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(o){const c=o.scene;console.log("=== 3D Model Hierarchy ==="),c.traverse((e=>{console.log(`[${e.type}] ${e.name}`)})),console.log("========================="),c.traverse((r=>{if("CAM-Pacman"===r.name){const e=[];r.traverse((t=>{if(t.isMesh&&"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name){const r=Y[t.name]||Y.default;t.material=r,e.push(t)}else"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name||(t.visible=!1)})),e.forEach((e=>X.pacman.add(e))),X.pacman.scale.set(.05,.05,.05),X.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),J=new t.AnimationMixer(X.pacman);const c={};o.animations.forEach((e=>{const t=J.clipAction(e);c[e.name]=t,t.setEffectiveWeight(1),t.play()}))}else if(r.name&&Z[r.name]){const e=Z[r.name],o=new t.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const c=[];r.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=W:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),c.push(e))})),c.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),e?e.add(o):console.warn(`ghostContainer for ${r.name} is undefined!`)}if(r.isMesh)if("CAM-Arena_LowRes_Top"===r.name)r.material=H,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===r.name)r.material=D,r.castShadow=!0;else if("CAM-Floor"===r.name){const o=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new t.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:t.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),o.material=U,o.position.y=-.5,o.receiveShadow=!0,e.add(o)}})),c.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.add(c),c.position.set(.5,.5,.5),r()}),(function(e){}),(function(e){o(e)}))}))}(B),Ae(),window.addEventListener("scroll",(()=>{0!==window.scrollY&&he&&(he=!1,Ve=ye%le/le,ge={},me={},Object.entries(X).forEach((([e,t])=>{ge[e]=t.position.clone(),me[e]=t.quaternion.clone()})),ue(ge,me))})),$e(),function(){const e=()=>{j.forEach((e=>e())),$.render(B,L),requestAnimationFrame(e)};e()}()}()})();
//# sourceMappingURL=script.js.map