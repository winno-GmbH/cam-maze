(()=>{"use strict";const e=THREE,t=window.innerWidth<768,r={startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)},o=t?r.startMobile:r.startDesktop,c=t?r.mobileLookAt:r.desktopLookAt,p=(new e.Vector3(.45175,.5,.55675),"https://c-am.b-cdn.net/CAM/matcap24.png"),n=(new e.Vector3(.65725,.55,.75325),new e.Vector3(.9085,.55,.8035),new e.Vector3(.75775,.55,1.05475),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.15475,.55,1.15525),new e.Scene),s=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),a=document.querySelector(".el--home-maze.el");a||console.error("Container .el--home-maze.el not found!");const i=new e.Clock;function u(){const e=Math.min(window.devicePixelRatio,t?2:3);s.setPixelRatio(e),s.setSize(a.clientWidth,a.clientHeight)}document.querySelector("canvas");const y=document.querySelector(".sc--final.sc"),w=(y?.querySelector(".cr--final.cr"),document.querySelectorAll(".cmp--pov.cmp"),new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3));w.quaternion.clone();const l=(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0));window.setCamera=function(t){if("string"==typeof t){const[r,o,c]=t.split(",").map(Number);t=new e.Vector3(r,o,c)}w.lookAt(t),w.updateProjectionMatrix(),w.updateMatrix(),w.updateMatrixWorld()};const v=(new e.TextureLoader).load(p),h=new e.MeshMatcapMaterial({matcap:v}),V=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),g=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),m=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),A={blue:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new e.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},d={CAM_Pacman_Backframe:A.blue,"CAM-Pacman_Bitcoin_1":A.white,"CAM-Pacman_Bitcoin_2":A.white,"CAM-Pacman_Bottom":A.blue,"CAM-Pacman_Top":A.blue,"CAM-Pacman_Eye":A.white,CAM_Pacman_Logo_1:A.white,CAM_Pacman_Logo_2:A.white,"CAM-Pacman_Shell_Boolean":A.blue,"CAM-Pacman_Shell":A.blue,"CAM-Pacman_Bottom_electronic":A.white,"CAM-Pacman_Top_electronic":A.white,"CAM-Pacman_Bottom_Text":A.white,"CAM-Pacman_Top_Text":A.white,default:A.blue},T=(Array(5).fill(g),new e.GLTFLoader);let P;const f=new e.Group;n.add(f);const M={pacman:f,ghost1:new e.Mesh(new e.BufferGeometry,g),ghost2:new e.Mesh(new e.BufferGeometry,g),ghost3:new e.Mesh(new e.BufferGeometry,g),ghost4:new e.Mesh(new e.BufferGeometry,g),ghost5:new e.Mesh(new e.BufferGeometry,g)},x={Ghost_EUR:M.ghost1,Ghost_CHF:M.ghost2,Ghost_YEN:M.ghost3,Ghost_USD:M.ghost4,Ghost_GBP:M.ghost5};Object.values(M).forEach((e=>n.add(e)));const O=[{pos:new e.Vector3(.25525,.55,.6025),type:"straight"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"straight"},{pos:new e.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new e.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,.6025),type:"straight"}],b=[{pos:new e.Vector3(-.44825,.55,.502),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,.8035),type:"straight"},{pos:new e.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.703),type:"straight"},{pos:new e.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new e.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.502),type:"straight"}],C=[{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new e.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.502),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new e.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"}],S=[{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.703),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.2005),type:"straight"},{pos:new e.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.301),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"straight"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"straight"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"upperArc"}],E=[{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new e.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.8035),type:"straight"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"straight"},{pos:new e.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.1),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"}],L=[{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new e.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new e.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],_=[{pos:new e.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],I=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],z=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],k=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],R=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],q=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}],B=t?r.startMobile:r.startDesktop,H=t?r.secondMobile:r.secondDesktop,D=(new e.CubicBezierCurve3(B,H,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175)),{pacmanHomePath:{points:O,color:16776960},ghost1HomePath:{points:b,color:16711680},ghost2HomePath:{points:C,color:16753920},ghost3HomePath:{points:S,color:16738740},ghost4HomePath:{points:E,color:3329330},ghost5HomePath:{points:L,color:16767673},cameraPOVPath:{points:_,color:16777215},ghost1POVPath:{points:I,color:16711680},ghost2POVPath:{points:z,color:16753920},ghost3POVPath:{points:k,color:16738740},ghost4POVPath:{points:R,color:3329330},ghost5POVPath:{points:q,color:16767673}}),G={};Object.entries(D).forEach((([t,r])=>{G[t]=function(t){const r=new e.CurvePath;for(let o=0;o<t.length-1;o++){const c=t[o],p=t[o+1];if("straight"===c.type){const t=new e.LineCurve3(c.pos,p.pos);r.add(t)}else if("curve"===c.type){let t;t="upperArc"===c.curveType?new e.Vector3(c.pos.x,c.pos.y,p.pos.z):"lowerArc"===c.curveType?new e.Vector3(p.pos.x,c.pos.y,c.pos.z):"forwardDownArc"===c.curveType?new e.Vector3(c.pos.x,p.pos.y,c.pos.z):new e.Vector3(c.pos.x,c.pos.y,p.pos.z);const o=new e.QuadraticBezierCurve3(c.pos,t,p.pos);r.add(o)}}return r}(r.points)}));const N={pacman:G.pacmanHomePath,ghost1:G.ghost1HomePath,ghost2:G.ghost2HomePath,ghost3:G.ghost3HomePath,ghost4:G.ghost4HomePath,ghost5:G.ghost5HomePath},j={targetProgress:0,currentProgress:0,velocity:0,lastTime:0};let F="HOME";const W=new e.Vector3(.55675,.5,.45175),Q={},$={},Y={},U={},Z={};let J=!1;const K={};let X,ee=0,te=0,re=0,oe=new e.Vector3,ce=new e.Vector3,pe=new e.Quaternion,ne=Date.now();function se(){F="HOME",ne=Date.now(),ee=0,te=0,w.position.copy(oe),w.quaternion.copy(pe),Object.keys(M).forEach((t=>{if(Y[t]&&U[t]&&Z[t]&&M[t]){M[t].position.copy(Y[t]),M[t].rotation.copy(U[t]),M[t].scale.copy(Z[t]);const r=M[t];r instanceof e.Mesh&&r.material?Array.isArray(r.material)?r.material.forEach((e=>{"opacity"in e&&(e.opacity=1)})):"opacity"in r.material&&(r.material.opacity=1):r instanceof e.Group&&r.traverse((t=>{t instanceof e.Mesh&&t.material&&(Array.isArray(t.material)?t.material.forEach((e=>{"opacity"in e&&(e.opacity=1)})):"opacity"in t.material&&(t.material.opacity=1))}))}})),window.animationDebugInfo&&(window.animationDebugInfo.state=F,window.animationDebugInfo.scrollProgress=0)}function ae(e){return e*e*(3-2*e)}function ie(){if(Pe.isActive)return;const t=document.querySelector(".sc--home");if(!t)return;const r=t.getBoundingClientRect(),o=window.innerHeight,c=r.top<=o&&r.bottom>-o;let p=0;if(r.top<=0&&r.bottom>=0){const e=r.height,t=Math.abs(r.top);p=Math.min(1,t/e)}else r.bottom<0&&(p=1);if(c)if(p>0){if("HOME"===F){const t=Date.now();re=(re+(t-ne-ee)/1e3*.03)%1,F="SCROLL_ANIMATION",Object.keys(M).forEach((e=>{M[e]&&(Q[e]=M[e].position.clone(),$[e]=M[e].rotation.clone())})),Object.keys(Q).forEach((t=>{const r=Q[t].clone(),o=W.clone(),c=new e.Vector3((r.x+o.x)/2,2,(r.z+o.z)/2);K[t]=new e.QuadraticBezierCurve3(r,c,o)})),function(){const t=w.position.clone();oe.copy(w.position),pe.copy(w.quaternion);const r=new e.Vector3(0,0,-1);r.applyQuaternion(w.quaternion),ce=w.position.clone().add(r.multiplyScalar(5));const o=window.innerWidth<768,c=new e.Vector3(.5,2.5,2),p=new e.Vector3(-1.5,3,2),n=o?c:p,s=(new e.Vector3).lerpVectors(t,n,.3);X=new e.CubicBezierCurve3(t,s,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175))}()}Object.keys(M).forEach((t=>{K[t]&&function(t,r){if(!(K[t]&&M[t]&&Q[t]&&$[t]))return;const o=M[t],c=K[t].getPoint(r);o.position.copy(c);const p=$[t],n=new e.Euler(Math.PI/-2,0,0),s=new e.Euler(p.x+(n.x-p.x)*r,p.y+(n.y-p.y)*r,p.z+(n.z-p.z)*r);o.rotation.copy(s);let a=1;r>=.8&&(a=1-(r-.8)/(1-.8),a=Math.max(0,a)),o instanceof e.Mesh&&o.material?Array.isArray(o.material)?o.material.forEach((e=>{"opacity"in e&&(e.opacity=a)})):"opacity"in o.material&&(o.material.opacity=a):o instanceof e.Group&&o.traverse((t=>{t instanceof e.Mesh&&t.material&&(Array.isArray(t.material)?t.material.forEach((e=>{"opacity"in e&&(e.opacity=a)})):"opacity"in t.material&&(t.material.opacity=a))}))}(t,Math.min(p/.8,1))})),function(t){if(!X)return;w.fov=50,w.updateProjectionMatrix();const r=X.getPointAt(t);if(w.position.copy(r),new e.Vector3(.55675,.5,.45175).clone(),0===t)w.quaternion.copy(pe);else{const r=new e.Quaternion;r.slerpQuaternions(pe,l,t),w.quaternion.copy(r)}}(p),window.animationDebugInfo&&(window.animationDebugInfo.scrollProgress=p)}else 0===p&&"HOME"!==F&&se();else window.scrollY<=10&&se()}function ue(){const e=document.querySelector(".sc--intro");if(!e)return;const t=e.getBoundingClientRect(),r=(window.innerHeight,t.top),o=t.bottom,c=t.height;if(r<=0&&o>=0){const e=Math.min(1,Math.abs(r)/c),t=.5;if(e<=t)ye(e/t),we(0);else{const r=(e-t)/(1-t);ye(1),we(r)}}else{const e=document.querySelector(".sc_h--intro"),t=document.querySelector(".sc_b--intro");e&&(e.style.display="none"),t&&(t.style.display="none")}}function ye(e){const t=document.querySelector(".sc_h--intro");if(!t)return;t.style.display="block";let r=0,o=0;if(e<1)if(e<=.3){const t=e/.3;r=.8*t,o=t}else if(e<=.7)r=.8+(e-.3)/.4*.4,o=1;else{const t=(e-.7)/.3;r=1.2+.3*t,o=1-t}else r=1.5,o=0;t.style.transform=`scale(${r})`,t.style.opacity=o.toString()}function we(e){const t=document.querySelector(".sc_b--intro");if(!t)return;if(!(e>0))return void(t.style.display="none");t.style.display="block";let r=.5,o=0;if(e>0)if(e<=.3){const t=e/.3;r=.5+.3*t,o=t}else if(e<=.7)r=.8+(e-.3)/.4*.4,o=1;else{const t=(e-.7)/.3;r=1.2+.3*t,o=1-t}else r=.5,o=0;t.style.transform=`scale(${r})`,t.style.opacity=o.toString()}function le(){!function(){const e=document.querySelector(".sc_h--intro");e&&(e.style.transform="scale(0)",e.style.opacity="0",e.style.display="none");const t=document.querySelector(".sc_b--intro");t&&(t.style.transform="scale(0.5)",t.style.opacity="0",t.style.display="none")}(),window.addEventListener("scroll",ie),window.addEventListener("scroll",ue),console.log("🎬 Setting up smooth scroll for POV section"),function t(){const r=document.querySelector(".sc--pov");if(r){const t=r.getBoundingClientRect(),c=window.innerHeight,p=t.top,n=t.height,s=.3*c,a=n+s;if(p<=c&&p+n>=-s){const t=Math.max(0,-p),r=Math.min(1,t/a);if(!Pe.isActive&&r>0&&("SCROLL_ANIMATION"===F||"HOME"===F)&&(Pe.isActive=!0,function(){if(F="POV_ANIMATION",Pe.cameraPOVPath&&(Pe.previousCameraPosition=Pe.cameraPOVPath.getPointAt(0)),Pe.rotationStarted=!1,Pe.cachedStartYAngle=null,fe=null,Pe.cameraPOVPath&&w){const t=Pe.cameraPOVPath.getPointAt(0);w.position.copy(t);const r=new e.Vector3(t.x,t.y+3,t.z);w.lookAt(r),console.log("📹 POV Start: Camera set to look straight up")}M.pacman&&(M.pacman.visible=!0),Object.entries(M).forEach((([e,t])=>{"pacman"!==e&&(t.visible=!0)})),window.animationDebugInfo&&(window.animationDebugInfo.povAnimationActive=!0)}(),console.log("🎬 POV Animation Started (smooth)")),Pe.isActive){const t=function(e){const t=performance.now()/1e3;if(0===j.lastTime)return j.lastTime=t,j.currentProgress=e,j.targetProgress=e,e;const r=Math.max(t-j.lastTime,.001);j.targetProgress=e;const o=j.targetProgress-j.currentProgress;return j.velocity+=.4*o,j.velocity*=.9,j.velocity=Math.max(-6,Math.min(6,j.velocity)),j.currentProgress+=j.velocity*r,j.currentProgress=Math.max(0,Math.min(1,j.currentProgress)),j.lastTime=t,Math.round(1e4*j.currentProgress)/1e4}(r);o=t,Pe.cameraPOVPath&&Pe.isActive&&(function(t){if(!Pe.cameraPOVPath||!w)return;const r=Pe.cameraPOVPath.getPointAt(t);w.position.copy(r);const o=.973;if(t>=o&&!Pe.rotationStarted){Pe.rotationStarted=!0;const t=function(){if(!w)return new e.Vector3;const t=new e.Vector3(0,0,-1);t.applyQuaternion(w.quaternion);const r=new e.Vector3;return r.copy(w.position).add(t.multiplyScalar(10)),r}();Pe.cachedStartYAngle=Math.atan2(t.x-w.position.x,t.z-w.position.z)}if(t<o){const r=.03;if(t<r){const o=ae(t/r),c=Ce(t),p=new e.Vector3(0,1,0),n=(new e.Vector3).addVectors(p.multiplyScalar(1-o),c.multiplyScalar(o)).normalize();Se(w.position.clone().add(n))}else{const e=Ce(t);Se(w.position.clone().add(e))}}else{const r=ae((t-o)/(1-o));Se((new e.Vector3).lerpVectors(Pe.targetLookAt,Pe.finalLookAt,r))}Pe.previousCameraPosition&&Pe.previousCameraPosition.copy(r)}(o),function(e){if(!Pe.cameraPOVPath||!Pe.isActive)return;const t=Pe.cameraPOVPath.getPointAt(e);Object.entries(M).forEach((([e,r])=>{"pacman"!==e?Pe.ghostPOVPaths[e]&&function(e,t,r,o){if(!r||!Pe.ghostPOVPaths[r])return;const c=Pe.ghostPOVPaths[r];if(c)if(e in Pe.triggerPositions){const r=Pe.triggerPositions[e],{triggerPos:p,ghostTextPos:n,camTextPos:s,endPosition:a,parent:i}=r;if(!p||!a)return;const u=i,y=i?.querySelector(".cmp--pov-cam");t.scale.set(.5,.5,.5),void 0===r.hasBeenTriggered&&(r.hasBeenTriggered=!1,r.hasBeenDeactivated=!1,r.triggerCameraProgress=null,r.ghostTextCameraProgress=null,r.camTextCameraProgress=null,r.endCameraProgress=null,r.currentPathT=0,r.ghostTextOpacity=0,r.camTextOpacity=0,r.lastProgress=0,t.visible=!1,u&&(u.classList.add("hidden"),u.style.opacity="0"),y&&(y.classList.add("hidden"),y.style.opacity="0"));const w=Ee(o,4e3);null===r.triggerCameraProgress&&(r.triggerCameraProgress=Ee(p,4e3),r.ghostTextCameraProgress=n?Ee(n,4e3):r.triggerCameraProgress,r.camTextCameraProgress=s?Ee(s,4e3):r.ghostTextCameraProgress,r.endCameraProgress=Ee(a,4e3));const l=r.triggerCameraProgress,v=r.ghostTextCameraProgress,h=r.camTextCameraProgress,V=r.endCameraProgress;if(w>=l&&w<=V){t.visible||(t.visible=!0,r.hasBeenTriggered=!0);const e=(w-l)/(V-l);let o=Math.max(0,Math.min(1,e));const p=c.getPointAt(o);t.position.copy(p);const n=c.getTangentAt(o).normalize(),s=t.position.clone().add(n);if(t.lookAt(s),o>.9){const e=1-(o-.9)/.1;t.material.opacity=Math.max(0,Math.min(1,e))}else t.material.opacity=1;t.material&&t.material.opacity}else t.visible=!1,r.hasBeenTriggered=!1;const g=V-l,m=v+.07*g,A=V-.15*g;let d=0;w>=v&&w<m?d=(w-v)/(m-v):w>=m&&w<A?d=1:w>=A&&w<=V&&(d=1-(w-A)/(V-A));const T=h+.07*g;let P=0;w>=h&&w<T?P=(w-h)/(T-h)*.8:w>=T&&w<A?P=.8:w>=A&&w<=V&&(P=.8*(1-(w-A)/(V-A)));const f=.2,M=.1;d>r.ghostTextOpacity?r.ghostTextOpacity+=(d-r.ghostTextOpacity)*f:r.ghostTextOpacity+=(d-r.ghostTextOpacity)*M,P>r.camTextOpacity?r.camTextOpacity+=(P-r.camTextOpacity)*f:r.camTextOpacity+=(P-r.camTextOpacity)*M;const x=Math.max(0,Math.min(1,Math.round(1e3*r.ghostTextOpacity)/1e3)),O=Math.max(0,Math.min(1,Math.round(1e3*r.camTextOpacity)/1e3));u&&(x>.01?(u.classList.contains("hidden")&&u.classList.remove("hidden"),u.style.opacity=x.toString()):x<=.01&&!u.classList.contains("hidden")&&(u.classList.add("hidden"),u.style.opacity="0")),y&&(O>.01?(y.classList.contains("hidden")&&y.classList.remove("hidden"),y.style.opacity=O.toString()):O<=.01&&!y.classList.contains("hidden")&&(y.classList.add("hidden"),y.style.opacity="0")),r.lastProgress=w}else{const e=Ee(o,4e3),r=c.getPointAt(e);t.position.copy(r);const p=c.getTangentAt(e).normalize(),n=r.clone().add(p);t.lookAt(n),t.visible=!0}}(e,r,e,t):r.visible=!1}))}(o),function(e){if(!Pe.cameraPOVPath)return;const t=Pe.cameraPOVPath.getPointAt(e);Object.entries(Pe.triggerPositions).forEach((([e,r])=>{const o=Ee(t);r.triggerCameraProgress||(r.triggerCameraProgress=Ee(r.triggerPos),r.ghostTextCameraProgress=Ee(r.ghostTextPos),r.camTextCameraProgress=Ee(r.camTextPos),r.endCameraProgress=Ee(r.endPosition));let c=0,p=0;if(o>=r.triggerCameraProgress){const e=r.camTextCameraProgress-r.ghostTextCameraProgress,t=Math.max(0,Math.min(1,(o-r.ghostTextCameraProgress)/e));if(c=t<Oe?1:1-(t-Oe)/(1-Oe),o>=r.camTextCameraProgress){const e=r.endCameraProgress-r.camTextCameraProgress,t=Math.max(0,Math.min(1,(o-r.camTextCameraProgress)/e));p=t<Oe?1:1-(t-Oe)/(1-Oe)}}const n=.2,s=.1;c>r.ghostTextOpacity?r.ghostTextOpacity+=(c-r.ghostTextOpacity)*n:r.ghostTextOpacity+=(c-r.ghostTextOpacity)*s,p>r.camTextOpacity?r.camTextOpacity+=(p-r.camTextOpacity)*n:r.camTextOpacity+=(p-r.camTextOpacity)*s,function(e){if(!e.parent)return;const t=e.parent.querySelector(".cmp--pov-ghost"),r=e.parent.querySelector(".cmp--pov-cam");if(t){const r=Math.max(0,Math.min(1,e.ghostTextOpacity));r>.01?(t.classList.remove("hidden"),t.style.opacity=r.toString()):(t.classList.add("hidden"),t.style.opacity="0")}if(r){const t=Math.max(0,Math.min(1,e.camTextOpacity));t>.01?(r.classList.remove("hidden"),r.style.opacity=t.toString()):(r.classList.add("hidden"),r.style.opacity="0")}}(r)}))}(o)),Math.abs(r-t)>.02&&console.log(`🔄 POV: ${r.toFixed(3)} → ${t.toFixed(3)}`)}}else Pe.isActive&&(Pe.isActive=!1,function(){F="SCROLL_ANIMATION",Object.values(Pe.triggerPositions).forEach((e=>{if(e.parent){e.parent.classList.add("hidden"),e.parent.style.opacity="0";const t=e.parent.querySelector(".cmp--pov-ghost"),r=e.parent.querySelector(".cmp--pov-cam");t&&(t.classList.add("hidden"),t.style.opacity="0"),r&&(r.classList.add("hidden"),r.style.opacity="0")}e.active=!1,e.ghostTextOpacity=0,e.camTextOpacity=0})),console.log("🔄 Restoring ghosts to ORIGINAL home positions"),Object.entries(Y).forEach((([t,r])=>{const o=M[t],c=U[t],p=Z[t];o&&r&&c&&p?(o.position.copy(r),o.rotation.copy(c),o.scale.copy(p),o.visible=!0,o instanceof e.Mesh&&o.material?Array.isArray(o.material)?o.material.forEach((e=>{"opacity"in e&&(e.opacity=1)})):"opacity"in o.material&&(o.material.opacity=1):o instanceof e.Group?o.traverse((t=>{t instanceof e.Mesh&&t.material&&(Array.isArray(t.material)?t.material.forEach((e=>{"opacity"in e&&(e.opacity=1)})):"opacity"in t.material&&(t.material.opacity=1))})):o.material&&(o.material.opacity=1),console.log(`✅ Restored ${t} to ORIGINAL: visible=${o.visible}, pos=`,r,"scale=",p)):console.warn(`⚠️ Missing original position/rotation/scale for ${t}`)})),M.pacman&&(M.pacman.visible=!0),console.log("🔧 POV End: Making all ghosts visible and restoring original scales"),Object.keys(M).forEach((t=>{if(M[t]&&Z[t]){const r=M[t].visible;M[t].visible=!0,M[t].scale.copy(Z[t]);const o=M[t];o instanceof e.Mesh&&o.material&&"opacity"in o.material?o.material.opacity=1:o instanceof e.Group&&o.traverse((t=>{t instanceof e.Mesh&&t.material&&"opacity"in t.material&&(t.material.opacity=1)})),console.log(`🔧 ${t}: was ${r} → now ${M[t].visible}, scale=`,Z[t])}}));const t=document.querySelector(".sc--home");if(t){const e=t.getBoundingClientRect(),r=window.innerHeight;e.top<=r&&e.bottom>=0?(F="HOME",console.log("🏠 Restored to HOME state after POV"),ne=Date.now(),ee=0,te=0):F="SCROLL_ANIMATION"}setTimeout((()=>{console.log("🔧 Final ghost visibility and scale check"),Object.keys(M).forEach((e=>{if(M[e]&&Z[e]){const t=M[e].visible;M[e].visible=!0,M[e].scale.copy(Z[e]),t||console.log(`🔧 FORCED ${e} visible with original scale`)}}))}),100),window.animationDebugInfo&&(window.animationDebugInfo.povAnimationActive=!1),fe=null}(),console.log("🎬 POV Animation Ended (smooth)"))}var o;requestAnimationFrame(t)}(),console.log("✅ Smooth scroll setup complete")}function ve(){if(function(){if(!w)return;let e=50;switch(F){case"HOME":case"SCROLL_ANIMATION":default:e=50;break;case"POV_ANIMATION":e=80}w.fov!==e&&(w.fov=e,w.updateProjectionMatrix())}(),P){const e=i.getDelta();P.update(e)}!function(){if("HOME"!==F)return;const t=Date.now(),r=(re+(t-ne-ee)/1e3*.03)%1;Object.entries(M).forEach((([t,o])=>{if(N[t])if("pacman"===t){const e=N[t].getPointAt(r);o.position.copy(e);const c=N[t].getTangentAt(r).normalize();o.lookAt(e.clone().add(c));const p=Math.atan2(c.x,c.z);void 0===o.previousZRotation&&(o.previousZRotation=p);let n=p-o.previousZRotation;n>Math.PI?n-=2*Math.PI:n<-Math.PI&&(n+=2*Math.PI);const s=.1,a=o.previousZRotation+n*s;o.previousZRotation=a,o.rotation.set(Math.PI/2,Math.PI,a+Math.PI/2)}else{const c=N[t].getPointAt(r);o.position.copy(c);const p=N[t].getTangentAt(r).normalize();o.lookAt(c.clone().add(p)),o instanceof e.Mesh&&o.material&&"opacity"in o.material&&(o.material.opacity=1)}}))}(),s.render(n,w),requestAnimationFrame(ve)}const he=[{pos:new e.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],Ve=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],ge=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],me=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],Ae=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],de=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}];function Te(t){const r=new e.CurvePath;for(let o=0;o<t.length-1;o++){const c=t[o],p=t[o+1];if("straight"===c.type){const t=new e.LineCurve3(c.pos,p.pos);r.add(t)}else if("curve"===c.type){let t;t="upperArc"===c.curveType?new e.Vector3(c.pos.x,c.pos.y,p.pos.z):"lowerArc"===c.curveType?new e.Vector3(p.pos.x,c.pos.y,c.pos.z):"forwardDownArc"===c.curveType?new e.Vector3(c.pos.x,p.pos.y,c.pos.z):new e.Vector3((c.pos.x+p.pos.x)/2,(c.pos.y+p.pos.y)/2,(c.pos.z+p.pos.z)/2);const o=new e.QuadraticBezierCurve3(c.pos,t,p.pos);r.add(o)}}return r}const Pe={isActive:!1,cameraPOVPath:null,ghostPOVPaths:{},triggerPositions:{},previousCameraPosition:null,startRotationPoint:new e.Vector3(.55675,.55,1.306),endRotationPoint:new e.Vector3(-.14675,1,1.8085),targetLookAt:new e.Vector3(.55675,5,1.306),finalLookAt:new e.Vector3(-.14675,0,1.8085),rotationStarted:!1,cachedStartYAngle:null,smoothedProgress:0,targetProgress:0,velocity:0,lastTargetProgress:0,lastTime:0};let fe=null;const Me=.08,xe=(Math.PI,.01),Oe=.8,be=document.querySelectorAll(".cmp--pov.cmp");function Ce(t){if(!Pe.cameraPOVPath)return new e.Vector3(0,0,-1);const r=Pe.cameraPOVPath.getTangentAt(t).normalize(),o=Math.min(t+xe,1),c=Pe.cameraPOVPath.getTangentAt(o).normalize(),p=Math.max(t-xe,0),n=Pe.cameraPOVPath.getTangentAt(p).normalize(),s=(new e.Vector3).addVectors(n,r).add(c).divideScalar(3).normalize();return r.dot(c)<.5?(new e.Vector3).addVectors(r.multiplyScalar(.6),s.multiplyScalar(.4)).normalize():(new e.Vector3).addVectors(r.multiplyScalar(.85),s.multiplyScalar(.15)).normalize()}function Se(t){if(!w)return;const r=new e.Matrix4;r.lookAt(w.position,t,w.up);const o=(new e.Quaternion).setFromRotationMatrix(r);if(!fe)return w.quaternion.copy(o),void(fe=o.clone());const c=w.quaternion.angleTo(o);let p=Me;c>Math.PI/8?p=.4*Me:c>Math.PI/16&&(p=.7*Me);const n=new e.Quaternion;n.slerpQuaternions(w.quaternion,o,p),w.quaternion.copy(n),fe.copy(w.quaternion)}function Ee(e,t=2e3){if(!Pe.cameraPOVPath)return 0;let r=0,o=1/0;for(let c=0;c<=t;c++){const p=c/t,n=Pe.cameraPOVPath.getPointAt(p).distanceTo(e);n<o&&(o=n,r=p)}return r}async function Le(){try{t?s.setPixelRatio(Math.min(window.devicePixelRatio,2)):s.setPixelRatio(window.devicePixelRatio),s.shadowMap.enabled=!0,s.shadowMap.type=e.PCFSoftShadowMap,s.shadowMap.enabled=!0,s.shadowMap.type=e.PCFSoftShadowMap,a?(s.setSize(a.clientWidth,a.clientHeight),a.appendChild(s.domElement)):(s.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(s.domElement)),window.addEventListener("load",u),window.addEventListener("resize",u),function(){const t=new e.AmbientLight(16777215);n.add(t);const r=new e.DirectionalLight(16777215,.8);n.add(r),r.position.set(-5,15,10),r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.camera.left=-20,r.shadow.camera.right=20,r.shadow.camera.top=20,r.shadow.camera.bottom=-20,r.shadow.camera.near=.1,r.shadow.camera.far=50,r.shadow.bias=-.001,r.shadow.radius=3,r.castShadow=!0}(),w.position.copy(o),w.lookAt(c),window.addEventListener("resize",(()=>{w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix()})),await async function(){return new Promise(((t,r)=>{T.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(r){const o=r.scene;o.traverse((t=>{if("CAM-Pacman"===t.name){const o=[];t.traverse((e=>{if(e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name){const t=d[e.name]||d.default;e.material=t,o.push(e)}else"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1)})),o.forEach((e=>M.pacman.add(e))),M.pacman.scale.set(.05,.05,.05),M.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),P=new e.AnimationMixer(M.pacman);const c={};r.animations.forEach((e=>{const t=P.clipAction(e);c[e.name]=t,t.setEffectiveWeight(1),t.play()}))}else if(t.name&&x[t.name]){const r=x[t.name],o=new e.Group;t.rotation.z=Math.PI,t.rotation.x=Math.PI/2,t.scale.set(.75,.75,.75);const c=[];t.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=g:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),c.push(e))})),c.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),r.add(o)}if(t.isMesh)if("CAM-Arena_LowRes_Top"===t.name)t.material=V,t.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===t.name)t.material=h,t.castShadow=!0;else if("CAM-Floor"===t.name){const r=t.clone();t.position.y=-.1,t.position.x=0,t.position.z=0,t.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),t.receiveShadow=!1,t.castShadow=!0,t.scale.set(.5,.5,.5),r.material=m,r.position.y=-.5,r.receiveShadow=!0,n.add(r)}})),o.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),n.add(o),o.position.set(.5,.5,.5),t()}),(function(e){}),(function(e){r(e)}))}))}(),function(){oe=w.position.clone(),pe=w.quaternion.clone();const t=new e.Vector3(0,0,-1);t.applyQuaternion(w.quaternion),ce=w.position.clone().add(t.multiplyScalar(5)),J||(console.log("🏠 Capturing ORIGINAL home positions, rotations, and scales (once)"),Object.keys(M).forEach((e=>{M[e]&&(Y[e]=M[e].position.clone(),U[e]=M[e].rotation.clone(),Z[e]=M[e].scale.clone(),console.log(`🏠 Captured ORIGINAL ${e} - pos:`,Y[e],"scale:",Z[e]))})),J=!0),window.animationDebugInfo={state:F,capturedPositions:Q,bezierCurves:K,povAnimationActive:!1},Object.keys(M).forEach((t=>{if(M[t]){M[t].visible=!0;const r=M[t];r instanceof e.Mesh&&r.material&&"opacity"in r.material?r.material.opacity=1:r instanceof e.Group&&r.traverse((t=>{t instanceof e.Mesh&&t.material&&"opacity"in t.material&&(t.material.opacity=1)}))}})),le(),console.log("🚀 Animation system fully initialized"),ve(),Pe.cameraPOVPath=Te(he),Pe.ghostPOVPaths={ghost1:Te(Ve),ghost2:Te(ge),ghost3:Te(me),ghost4:Te(Ae),ghost5:Te(de)},Pe.triggerPositions={ghost1:{triggerPos:new e.Vector3(.65725,.55,.75325),ghostTextPos:new e.Vector3(.7075,.55,.8035),camTextPos:new e.Vector3(.75775,.55,.8035),endPosition:new e.Vector3(.85825,.55,.8035),parent:be[0],active:!1},ghost2:{triggerPos:new e.Vector3(.9085,.55,.8035),ghostTextPos:new e.Vector3(.95875,.55,.85375),camTextPos:new e.Vector3(.95875,.55,.904),endPosition:new e.Vector3(.95875,.55,1.0045),parent:be[1],active:!1},ghost3:{triggerPos:new e.Vector3(.75775,.55,1.05475),ghostTextPos:new e.Vector3(.7075,.55,1.0045),camTextPos:new e.Vector3(.65725,.55,1.0045),endPosition:new e.Vector3(.55675,.55,1.0045),parent:be[2],active:!1},ghost4:{triggerPos:new e.Vector3(.65725,.55,1.0045),ghostTextPos:new e.Vector3(.5065,.55,1.0045),camTextPos:new e.Vector3(.45625,.55,1.0045),endPosition:new e.Vector3(.35575,.55,1.0045),parent:be[3],active:!1},ghost5:{triggerPos:new e.Vector3(.15475,.55,1.15525),ghostTextPos:new e.Vector3(.205,.55,1.2055),camTextPos:new e.Vector3(.25525,.55,1.2055),endPosition:new e.Vector3(.35575,.55,1.2055),parent:be[4],active:!1}}}()}catch(e){console.error("Initialization error:",e)}}new e.Vector3(.65725,.55,.75325),new e.Vector3(.7075,.55,.8035),new e.Vector3(.75775,.55,.8035),new e.Vector3(.85825,.55,.8035),be[0],new e.Vector3(.9085,.55,.8035),new e.Vector3(.95875,.55,.85375),new e.Vector3(.95875,.55,.904),new e.Vector3(.95875,.55,1.0045),be[1],new e.Vector3(.75775,.55,1.05475),new e.Vector3(.7075,.55,1.0045),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.55675,.55,1.0045),be[2],new e.Vector3(.65725,.55,1.0045),new e.Vector3(.5065,.55,1.0045),new e.Vector3(.45625,.55,1.0045),new e.Vector3(.35575,.55,1.0045),be[3],new e.Vector3(.15475,.55,1.15525),new e.Vector3(.205,.55,1.2055),new e.Vector3(.25525,.55,1.2055),new e.Vector3(.35575,.55,1.2055),be[4],"loading"===document.readyState?document.addEventListener("DOMContentLoaded",Le):Le()})();
//# sourceMappingURL=script.js.map