(()=>{"use strict";var e,t,r={352:e=>{if("undefined"==typeof gsap){var t=new Error("Cannot find module 'gsap'");throw t.code="MODULE_NOT_FOUND",t}e.exports=gsap},774:e=>{if("undefined"==typeof ScrollTrigger){var t=new Error("Cannot find module 'ScrollTrigger'");throw t.code="MODULE_NOT_FOUND",t}e.exports=ScrollTrigger}},o={};function c(e){var t=o[e];if(void 0!==t)return t.exports;var p=o[e]={exports:{}};return r[e](p,p.exports,c),p.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"==typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"==typeof r.then)return r}var p=Object.create(null);c.r(p);var n={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>n[e]=()=>r[e]));return n.default=()=>r,c.d(p,n),p},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};const p=THREE,n=window.innerWidth<768,s={startMobile:new p.Vector3(.5,2.5,2.5),startDesktop:new p.Vector3(-2,2.5,2),secondMobile:new p.Vector3(.5,2.5,2),secondDesktop:new p.Vector3(-1.5,3,2),mobileLookAt:new p.Vector3(.5,.5,-1.5),desktopLookAt:new p.Vector3(-1.25,.5,.25)},a=n?s.startMobile:s.startDesktop,i=n?s.mobileLookAt:s.desktopLookAt,u=(new p.Vector3(.45175,.5,.55675),"https://c-am.b-cdn.net/CAM/matcap24.png"),y=(new p.Vector3(.65725,.55,.75325),new p.Vector3(.9085,.55,.8035),new p.Vector3(.75775,.55,1.05475),new p.Vector3(.65725,.55,1.0045),new p.Vector3(.15475,.55,1.15525),new p.Scene),w=new p.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),l=document.querySelector(".el--home-maze.el");l||console.error("Container .el--home-maze.el not found!");const v=new p.Clock;function h(){const e=Math.min(window.devicePixelRatio,n?2:3);w.setPixelRatio(e),w.setSize(l.clientWidth,l.clientHeight)}document.querySelector("canvas");const V=document.querySelector(".sc--final.sc"),g=(V?.querySelector(".cr--final.cr"),document.querySelectorAll(".cmp--pov.cmp"),new p.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3));g.quaternion.clone();const m=(new p.Quaternion).setFromEuler(new p.Euler(-1.5708,0,0));window.setCamera=function(e){if("string"==typeof e){const[t,r,o]=e.split(",").map(Number);e=new p.Vector3(t,r,o)}g.lookAt(e),g.updateProjectionMatrix(),g.updateMatrix(),g.updateMatrixWorld()};const d=(new p.TextureLoader).load(u),A=new p.MeshMatcapMaterial({matcap:d}),T=new p.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),P=new p.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:p.NormalBlending,side:p.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),f=new p.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),M={blue:new p.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new p.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new p.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},x={CAM_Pacman_Backframe:M.blue,"CAM-Pacman_Bitcoin_1":M.white,"CAM-Pacman_Bitcoin_2":M.white,"CAM-Pacman_Bottom":M.blue,"CAM-Pacman_Top":M.blue,"CAM-Pacman_Eye":M.white,CAM_Pacman_Logo_1:M.white,CAM_Pacman_Logo_2:M.white,"CAM-Pacman_Shell_Boolean":M.blue,"CAM-Pacman_Shell":M.blue,"CAM-Pacman_Bottom_electronic":M.white,"CAM-Pacman_Top_electronic":M.white,"CAM-Pacman_Bottom_Text":M.white,"CAM-Pacman_Top_Text":M.white,default:M.blue},O=(Array(5).fill(P),new p.GLTFLoader);let b;const S=new p.Group;y.add(S);const C={pacman:S,ghost1:new p.Mesh(new p.BufferGeometry,P),ghost2:new p.Mesh(new p.BufferGeometry,P),ghost3:new p.Mesh(new p.BufferGeometry,P),ghost4:new p.Mesh(new p.BufferGeometry,P),ghost5:new p.Mesh(new p.BufferGeometry,P)},_={Ghost_EUR:C.ghost1,Ghost_CHF:C.ghost2,Ghost_YEN:C.ghost3,Ghost_USD:C.ghost4,Ghost_GBP:C.ghost5};Object.values(C).forEach((e=>y.add(e)));const E=[{pos:new p.Vector3(.25525,.55,.6025),type:"straight"},{pos:new p.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,.1),type:"straight"},{pos:new p.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new p.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new p.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new p.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new p.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new p.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new p.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new p.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new p.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new p.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new p.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.25525,.55,.6025),type:"straight"}],L=[{pos:new p.Vector3(-.44825,.55,.502),type:"straight"},{pos:new p.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new p.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new p.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.25525,.55,.301),type:"straight"},{pos:new p.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.75775,.55,.8035),type:"straight"},{pos:new p.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.46125,.55,.703),type:"straight"},{pos:new p.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new p.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.25525,.55,.301),type:"straight"},{pos:new p.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new p.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new p.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.44825,.55,.703),type:"straight"},{pos:new p.Vector3(-.44825,.55,.502),type:"straight"}],z=[{pos:new p.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new p.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new p.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.25525,.55,.502),type:"straight"},{pos:new p.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new p.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new p.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new p.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new p.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.85825,.55,.1),type:"straight"},{pos:new p.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new p.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.25525,.55,.301),type:"straight"},{pos:new p.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new p.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"}],I=[{pos:new p.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.85825,.55,.703),type:"straight"},{pos:new p.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new p.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new p.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.55675,.55,.2005),type:"straight"},{pos:new p.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.46125,.55,.301),type:"straight"},{pos:new p.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.95875,.55,.904),type:"straight"},{pos:new p.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.75775,.55,1.105),type:"straight"},{pos:new p.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new p.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.808,.55,.8035),type:"curve",curveType:"upperArc"}],q=[{pos:new p.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new p.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.95875,.55,.8035),type:"straight"},{pos:new p.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new p.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new p.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.44825,.55,.703),type:"straight"},{pos:new p.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new p.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,.2005),type:"straight"},{pos:new p.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.85825,.55,.1),type:"straight"},{pos:new p.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new p.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.46125,.55,.1),type:"straight"},{pos:new p.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new p.Vector3(1.05925,.55,.4015),type:"straight"}],B=[{pos:new p.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new p.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new p.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new p.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new p.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new p.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new p.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new p.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new p.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new p.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new p.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.85825,.55,.1),type:"straight"},{pos:new p.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],k=[{pos:new p.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new p.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.7075,.55,.8035),type:"straight"},{pos:new p.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.95875,.55,.85375),type:"straight"},{pos:new p.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new p.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new p.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new p.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new p.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.205,.55,1.2055),type:"straight"},{pos:new p.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.44825,1,2.0095),type:"straight"}],D=[{pos:new p.Vector3(1.05925,.55,.703),type:"straight"},{pos:new p.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.009,.55,.8035),type:"straight"},{pos:new p.Vector3(.9085,.55,.8035),type:"straight"}],H=[{pos:new p.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new p.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new p.Vector3(.95875,.55,1.05475),type:"straight"}],G=[{pos:new p.Vector3(.35575,.55,.904),type:"straight"},{pos:new p.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.406,.55,1.0045),type:"straight"},{pos:new p.Vector3(.5065,.55,1.0045),type:"straight"}],R=[{pos:new p.Vector3(.15475,.55,1.105),type:"straight"},{pos:new p.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.205,.55,1.0045),type:"straight"},{pos:new p.Vector3(.3055,.55,1.0045),type:"straight"}],j=[{pos:new p.Vector3(.55675,.55,1.306),type:"straight"},{pos:new p.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new p.Vector3(.406,.55,1.2055),type:"straight"}],N=n?s.startMobile:s.startDesktop,Q=n?s.secondMobile:s.secondDesktop,F=(new p.CubicBezierCurve3(N,Q,new p.Vector3(.55675,3,.45175),new p.Vector3(.55675,.5,.45175)),{pacmanHomePath:{points:E,color:16776960},ghost1HomePath:{points:L,color:16711680},ghost2HomePath:{points:z,color:16753920},ghost3HomePath:{points:I,color:16738740},ghost4HomePath:{points:q,color:3329330},ghost5HomePath:{points:B,color:16767673},cameraPOVPath:{points:k,color:16777215},ghost1POVPath:{points:D,color:16711680},ghost2POVPath:{points:H,color:16753920},ghost3POVPath:{points:G,color:16738740},ghost4POVPath:{points:R,color:3329330},ghost5POVPath:{points:j,color:16767673}}),W={};Object.entries(F).forEach((([e,t])=>{W[e]=function(e){const t=new p.CurvePath;for(let r=0;r<e.length-1;r++){const o=e[r],c=e[r+1];if("straight"===o.type){const e=new p.LineCurve3(o.pos,c.pos);t.add(e)}else if("curve"===o.type){let e;e="upperArc"===o.curveType?new p.Vector3(o.pos.x,o.pos.y,c.pos.z):"lowerArc"===o.curveType?new p.Vector3(c.pos.x,o.pos.y,o.pos.z):"forwardDownArc"===o.curveType?new p.Vector3(o.pos.x,c.pos.y,o.pos.z):new p.Vector3(o.pos.x,o.pos.y,c.pos.z);const r=new p.QuadraticBezierCurve3(o.pos,e,c.pos);t.add(r)}}return t}(t.points)}));const U={pacman:W.pacmanHomePath,ghost1:W.ghost1HomePath,ghost2:W.ghost2HomePath,ghost3:W.ghost3HomePath,ghost4:W.ghost4HomePath,ghost5:W.ghost5HomePath};let Y=null,Z=null,$="HOME";const J=new p.Vector3(.55675,.5,.45175),K={},X={},ee={};let te,re=0,oe=0,ce=0,pe=new p.Vector3,ne=new p.Vector3,se=new p.Quaternion,ae=Date.now();function ie(){$="HOME",ae=Date.now(),re=0,oe=0,g.position.copy(pe),g.quaternion.copy(se),Object.keys(C).forEach((e=>{if(K[e]&&X[e]&&C[e]){C[e].position.copy(K[e]),C[e].rotation.copy(X[e]);const t=C[e];t instanceof p.Mesh&&t.material?Array.isArray(t.material)?t.material.forEach((e=>{"opacity"in e&&(e.opacity=1)})):"opacity"in t.material&&(t.material.opacity=1):t instanceof p.Group&&t.traverse((e=>{e instanceof p.Mesh&&e.material&&(Array.isArray(e.material)?e.material.forEach((e=>{"opacity"in e&&(e.opacity=1)})):"opacity"in e.material&&(e.material.opacity=1))}))}})),window.animationDebugInfo&&(window.animationDebugInfo.state=$,window.animationDebugInfo.scrollProgress=0)}function ue(){const e=document.querySelector(".sc--home");if(!e)return;const t=e.getBoundingClientRect(),r=window.innerHeight,o=t.top<=r&&t.bottom>-r;let c=0;if(t.top<=0&&t.bottom>=0){const e=t.height,r=Math.abs(t.top);c=Math.min(1,r/e)}else t.bottom<0&&(c=1);if(o)if(c>0){if("HOME"===$){const e=Date.now();ce=(ce+(e-ae-re)/1e3*.1)%1,$="SCROLL_ANIMATION",Object.keys(C).forEach((e=>{C[e]&&(K[e]=C[e].position.clone(),X[e]=C[e].rotation.clone())})),Object.keys(K).forEach((e=>{const t=K[e].clone(),r=J.clone(),o=new p.Vector3((t.x+r.x)/2,2,(t.z+r.z)/2);ee[e]=new p.QuadraticBezierCurve3(t,o,r)})),function(){const e=g.position.clone();pe.copy(g.position),se.copy(g.quaternion);const t=new p.Vector3(0,0,-1);t.applyQuaternion(g.quaternion),ne=g.position.clone().add(t.multiplyScalar(5));const r=window.innerWidth<768,o=new p.Vector3(.5,2.5,2),c=new p.Vector3(-1.5,3,2),n=r?o:c,s=(new p.Vector3).lerpVectors(e,n,.3);te=new p.CubicBezierCurve3(e,s,new p.Vector3(.55675,3,.45175),new p.Vector3(.55675,.5,.45175))}()}Object.keys(C).forEach((e=>{ee[e]&&function(e,t){if(!(ee[e]&&C[e]&&K[e]&&X[e]))return;const r=C[e],o=ee[e].getPoint(t);r.position.copy(o);const c=X[e],n=new p.Euler(Math.PI/-2,0,0),s=new p.Euler(c.x+(n.x-c.x)*t,c.y+(n.y-c.y)*t,c.z+(n.z-c.z)*t);r.rotation.copy(s);let a=1;t>=.8&&(a=1-(t-.8)/(1-.8),a=Math.max(0,a)),r instanceof p.Mesh&&r.material?Array.isArray(r.material)?r.material.forEach((e=>{"opacity"in e&&(e.opacity=a)})):"opacity"in r.material&&(r.material.opacity=a):r instanceof p.Group&&r.traverse((e=>{e instanceof p.Mesh&&e.material&&(Array.isArray(e.material)?e.material.forEach((e=>{"opacity"in e&&(e.opacity=a)})):"opacity"in e.material&&(e.material.opacity=a))}))}(e,Math.min(c/.8,1))})),function(e){if(!te)return;g.fov=50,g.updateProjectionMatrix();const t=te.getPointAt(e);if(g.position.copy(t),new p.Vector3(.55675,.5,.45175).clone(),0===e)g.quaternion.copy(se);else{const t=new p.Quaternion;t.slerpQuaternions(se,m,e),g.quaternion.copy(t)}}(c),window.animationDebugInfo&&(window.animationDebugInfo.scrollProgress=c)}else 0===c&&"HOME"!==$&&ie();else window.scrollY<=10&&ie()}function ye(){const e=document.querySelector(".sc--intro");if(!e)return;const t=e.getBoundingClientRect(),r=(window.innerHeight,t.top),o=t.bottom,c=t.height;if(r<=0&&o>=0){const e=Math.min(1,Math.abs(r)/c),t=.5;if(e<=t)we(e/t),le(0);else{const r=(e-t)/(1-t);we(1),le(r)}}else{const e=document.querySelector(".sc_h--intro"),t=document.querySelector(".sc_b--intro");e&&(e.style.display="none"),t&&(t.style.display="none")}}function we(e){const t=document.querySelector(".sc_h--intro");if(!t)return;t.style.display="block";let r=0,o=0;if(e<1)if(e<=.3){const t=e/.3;r=.8*t,o=t}else if(e<=.7)r=.8+(e-.3)/.4*.4,o=1;else{const t=(e-.7)/.3;r=1.2+.3*t,o=1-t}else r=1.5,o=0;t.style.transform=`scale(${r})`,t.style.opacity=o.toString()}function le(e){const t=document.querySelector(".sc_b--intro");if(!t)return;if(!(e>0))return void(t.style.display="none");t.style.display="block";let r=.5,o=0;if(e>0)if(e<=.3){const t=e/.3;r=.5+.3*t,o=t}else if(e<=.7)r=.8+(e-.3)/.4*.4,o=1;else{const t=(e-.7)/.3;r=1.2+.3*t,o=1-t}else r=.5,o=0;t.style.transform=`scale(${r})`,t.style.opacity=o.toString()}function ve(){window.addEventListener("scroll",Be),console.log("üìú Fallback POV scroll handler set up")}function he(){if(function(){if(!g)return;let e=50;switch($){case"HOME":case"SCROLL_ANIMATION":default:e=50;break;case"POV_ANIMATION":e=80}g.fov!==e&&(g.fov=e,g.updateProjectionMatrix())}(),b){const e=v.getDelta();b.update(e)}!function(){if("HOME"!==$)return;const e=Date.now(),t=(ce+(e-ae-re)/1e3*.1)%1;Object.entries(C).forEach((([e,r])=>{if(U[e])if("pacman"===e){const o=U[e].getPointAt(t);r.position.copy(o);const c=U[e].getTangentAt(t).normalize();r.lookAt(o.clone().add(c));const p=Math.atan2(c.x,c.z);void 0===r.previousZRotation&&(r.previousZRotation=p);let n=p-r.previousZRotation;n>Math.PI?n-=2*Math.PI:n<-Math.PI&&(n+=2*Math.PI);const s=.1,a=r.previousZRotation+n*s;r.previousZRotation=a,r.rotation.set(Math.PI/2,Math.PI,a+Math.PI/2)}else{const o=U[e].getPointAt(t);r.position.copy(o);const c=U[e].getTangentAt(t).normalize();r.lookAt(o.clone().add(c)),r instanceof p.Mesh&&r.material&&"opacity"in r.material&&(r.material.opacity=1)}}))}(),w.render(y,g),requestAnimationFrame(he)}function Ve(){pe=g.position.clone(),se=g.quaternion.clone();const e=new p.Vector3(0,0,-1);e.applyQuaternion(g.quaternion),ne=g.position.clone().add(e.multiplyScalar(5)),window.animationDebugInfo={state:$,capturedPositions:K,bezierCurves:ee,povAnimationActive:!1},Object.keys(C).forEach((e=>{if(C[e]){C[e].visible=!0;const t=C[e];t instanceof p.Mesh&&t.material&&"opacity"in t.material?t.material.opacity=1:t instanceof p.Group&&t.traverse((e=>{e instanceof p.Mesh&&e.material&&"opacity"in e.material&&(e.material.opacity=1)}))}})),async function(){if(function(){const e=document.querySelector(".sc_h--intro");e&&(e.style.transform="scale(0)",e.style.opacity="0",e.style.display="none");const t=document.querySelector(".sc_b--intro");t&&(t.style.transform="scale(0.5)",t.style.opacity="0",t.style.display="none")}(),window.addEventListener("scroll",ue),window.addEventListener("scroll",ye),await async function(){try{const e=await Promise.resolve().then(c.t.bind(c,352,23)),t=await Promise.resolve().then(c.t.bind(c,774,23));if(Y=e.gsap||e.default,Z=t.ScrollTrigger||t.default,Y&&Z&&Y.registerPlugin)return Y.registerPlugin(Z),console.log("‚úÖ GSAP ScrollTrigger loaded and registered successfully"),!0}catch(e){console.warn("‚ö†Ô∏è GSAP dynamic import failed:",e)}return!1}()&&Y&&Z){const e=document.querySelector(".sc--pov");if(e)try{Z.create({trigger:e,start:"top top",end:"bottom bottom",scrub:.5,onUpdate:e=>{const t=e.progress;console.log(`üé¨ GSAP POV: progress=${t.toFixed(3)}`),Me.isActive&&Le(t)},onToggle:e=>{e.isActive?Me.isActive||(Me.isActive=!0,Ee(),console.log("üé¨ GSAP POV Animation Started")):Me.isActive&&(Me.isActive=!1,qe(),console.log("üé¨ GSAP POV Animation Ended"))}}),console.log("‚úÖ GSAP ScrollTrigger setup complete for POV section")}catch(e){console.error("‚ùå Error setting up GSAP ScrollTrigger:",e),ve()}}else console.warn("‚ö†Ô∏è GSAP not available, using fallback scroll handlers"),ve()}().then((()=>{console.log("üöÄ Animation system fully initialized")})).catch((e=>{console.error("‚ùå Error initializing scroll triggers:",e)})),he(),Me.cameraPOVPath=fe(ge),Me.ghostPOVPaths={ghost1:fe(me),ghost2:fe(de),ghost3:fe(Ae),ghost4:fe(Te),ghost5:fe(Pe)},Me.triggerPositions={ghost1:{triggerPos:new p.Vector3(.65725,.55,.75325),ghostTextPos:new p.Vector3(.7075,.55,.8035),camTextPos:new p.Vector3(.75775,.55,.8035),endPosition:new p.Vector3(.85825,.55,.8035),parent:_e[0],active:!1},ghost2:{triggerPos:new p.Vector3(.9085,.55,.8035),ghostTextPos:new p.Vector3(.95875,.55,.85375),camTextPos:new p.Vector3(.95875,.55,.904),endPosition:new p.Vector3(.95875,.55,1.0045),parent:_e[1],active:!1},ghost3:{triggerPos:new p.Vector3(.75775,.55,1.05475),ghostTextPos:new p.Vector3(.7075,.55,1.0045),camTextPos:new p.Vector3(.65725,.55,1.0045),endPosition:new p.Vector3(.55675,.55,1.0045),parent:_e[2],active:!1},ghost4:{triggerPos:new p.Vector3(.65725,.55,1.0045),ghostTextPos:new p.Vector3(.5065,.55,1.0045),camTextPos:new p.Vector3(.45625,.55,1.0045),endPosition:new p.Vector3(.35575,.55,1.0045),parent:_e[3],active:!1},ghost5:{triggerPos:new p.Vector3(.15475,.55,1.15525),ghostTextPos:new p.Vector3(.205,.55,1.2055),camTextPos:new p.Vector3(.25525,.55,1.2055),endPosition:new p.Vector3(.35575,.55,1.2055),parent:_e[4],active:!1}}}const ge=[{pos:new p.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new p.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.7075,.55,.8035),type:"straight"},{pos:new p.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.95875,.55,.85375),type:"straight"},{pos:new p.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new p.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new p.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new p.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new p.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.205,.55,1.2055),type:"straight"},{pos:new p.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(-.44825,1,2.0095),type:"straight"}],me=[{pos:new p.Vector3(1.05925,.55,.703),type:"straight"},{pos:new p.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(1.009,.55,.8035),type:"straight"},{pos:new p.Vector3(.9085,.55,.8035),type:"straight"}],de=[{pos:new p.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new p.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new p.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new p.Vector3(.95875,.55,1.05475),type:"straight"}],Ae=[{pos:new p.Vector3(.35575,.55,.904),type:"straight"},{pos:new p.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.406,.55,1.0045),type:"straight"},{pos:new p.Vector3(.5065,.55,1.0045),type:"straight"}],Te=[{pos:new p.Vector3(.15475,.55,1.105),type:"straight"},{pos:new p.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.205,.55,1.0045),type:"straight"},{pos:new p.Vector3(.3055,.55,1.0045),type:"straight"}],Pe=[{pos:new p.Vector3(.55675,.55,1.306),type:"straight"},{pos:new p.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new p.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new p.Vector3(.406,.55,1.2055),type:"straight"}];function fe(e){const t=new p.CurvePath;for(let r=0;r<e.length-1;r++){const o=e[r],c=e[r+1];if("straight"===o.type){const e=new p.LineCurve3(o.pos,c.pos);t.add(e)}else if("curve"===o.type){let e;e="upperArc"===o.curveType?new p.Vector3(o.pos.x,o.pos.y,c.pos.z):"lowerArc"===o.curveType?new p.Vector3(c.pos.x,o.pos.y,o.pos.z):"forwardDownArc"===o.curveType?new p.Vector3(o.pos.x,c.pos.y,o.pos.z):new p.Vector3((o.pos.x+c.pos.x)/2,(o.pos.y+c.pos.y)/2,(o.pos.z+c.pos.z)/2);const r=new p.QuadraticBezierCurve3(o.pos,e,c.pos);t.add(r)}}return t}const Me={isActive:!1,cameraPOVPath:null,ghostPOVPaths:{},triggerPositions:{},previousCameraPosition:null,startRotationPoint:new p.Vector3(.55675,.55,1.306),endRotationPoint:new p.Vector3(-.14675,1,1.8085),targetLookAt:new p.Vector3(.55675,.6,1.306),finalLookAt:new p.Vector3(-.14675,0,1.8085),rotationStarted:!1,cachedStartYAngle:null,smoothedProgress:0,targetProgress:0,velocity:0,lastTargetProgress:0,lastTime:0};let xe=null;const Oe=.15,be=Math.PI/6,Se=.02,Ce=.8,_e=document.querySelectorAll(".cmp--pov.cmp");function Ee(){$="POV_ANIMATION",Me.cameraPOVPath&&(Me.previousCameraPosition=Me.cameraPOVPath.getPointAt(0)),Me.rotationStarted=!1,Me.cachedStartYAngle=null,xe=null,C.pacman&&(C.pacman.visible=!0),Object.entries(C).forEach((([e,t])=>{"pacman"!==e&&(t.visible=!0)})),window.animationDebugInfo&&(window.animationDebugInfo.povAnimationActive=!0)}function Le(e){Me.cameraPOVPath&&Me.isActive&&(function(e){if(!Me.cameraPOVPath||!g)return;const t=Me.cameraPOVPath.getPointAt(e);g.position.copy(t);const r=.973;if(e>=r&&!Me.rotationStarted){Me.rotationStarted=!0;const e=function(){if(!g)return new p.Vector3;const e=new p.Vector3(0,0,-1);e.applyQuaternion(g.quaternion);const t=new p.Vector3;return t.copy(g.position).add(e.multiplyScalar(10)),t}();Me.cachedStartYAngle=Math.atan2(e.x-g.position.x,e.z-g.position.z)}if(e<r){const t=function(e){if(!Me.cameraPOVPath)return new p.Vector3(0,0,-1);const t=Me.cameraPOVPath.getTangentAt(e).normalize(),r=Math.min(e+Se,1),o=Me.cameraPOVPath.getTangentAt(r).normalize(),c=Math.max(e-Se,0),n=Me.cameraPOVPath.getTangentAt(c).normalize(),s=(new p.Vector3).addVectors(n,t).add(o).divideScalar(3).normalize();return t.dot(o)<.3?(new p.Vector3).addVectors(t.multiplyScalar(.3),s.multiplyScalar(.7)).normalize():(new p.Vector3).addVectors(t.multiplyScalar(.7),s.multiplyScalar(.3)).normalize()}(e);ze(g.position.clone().add(t))}else{const t=(o=(e-r)/.027000000000000024)*o*(3-2*o);ze((new p.Vector3).lerpVectors(Me.targetLookAt,Me.finalLookAt,t))}var o;Me.previousCameraPosition&&Me.previousCameraPosition.copy(t)}(e),function(e){if(!Me.cameraPOVPath)return;const t=Me.cameraPOVPath.getPointAt(e);Object.entries(C).forEach((([e,r])=>{"pacman"!==e?Me.ghostPOVPaths[e]&&function(e,t,r,o){if(!r||!Me.ghostPOVPaths[r])return;const c=Me.ghostPOVPaths[r];if(c)if(e in Me.triggerPositions){const r=Me.triggerPositions[e],{triggerPos:p,ghostTextPos:n,camTextPos:s,endPosition:a,parent:i}=r;if(!p||!a)return;const u=i,y=i?.querySelector(".cmp--pov-cam");t.scale.set(.5,.5,.5),void 0===r.hasBeenTriggered&&(r.hasBeenTriggered=!1,r.hasBeenDeactivated=!1,r.triggerCameraProgress=null,r.ghostTextCameraProgress=null,r.camTextCameraProgress=null,r.endCameraProgress=null,r.currentPathT=0,r.ghostTextOpacity=0,r.camTextOpacity=0,r.lastProgress=0,t.visible=!1,u&&(u.classList.add("hidden"),u.style.opacity="0"),y&&(y.classList.add("hidden"),y.style.opacity="0"));const w=Ie(o,800);null===r.triggerCameraProgress&&(r.triggerCameraProgress=Ie(p,800),r.ghostTextCameraProgress=n?Ie(n,800):r.triggerCameraProgress,r.camTextCameraProgress=s?Ie(s,800):r.ghostTextCameraProgress,r.endCameraProgress=Ie(a,800));const l=r.triggerCameraProgress,v=r.ghostTextCameraProgress,h=r.camTextCameraProgress,V=r.endCameraProgress;if(w>=l&&w<=V){t.visible||(t.visible=!0,r.hasBeenTriggered=!0);const e=(w-l)/(V-l);let o=Math.max(0,Math.min(1,e));const p=c.getPointAt(o);t.position.copy(p);const n=c.getTangentAt(o).normalize(),s=t.position.clone().add(n);if(t.lookAt(s),o>.9){const e=1-(o-.9)/.1;t.material.opacity=Math.max(0,Math.min(1,e))}else t.material.opacity=1;t.material&&t.material.opacity}else t.visible=!1,r.hasBeenTriggered=!1;const g=V-l,m=v+.07*g,d=V-.15*g;let A=0;w>=v&&w<m?A=(w-v)/(m-v):w>=m&&w<d?A=1:w>=d&&w<=V&&(A=1-(w-d)/(V-d));const T=h+.07*g;let P=0;w>=h&&w<T?P=(w-h)/(T-h)*.8:w>=T&&w<d?P=.8:w>=d&&w<=V&&(P=.8*(1-(w-d)/(V-d)));const f=.2,M=.1;A>r.ghostTextOpacity?r.ghostTextOpacity+=(A-r.ghostTextOpacity)*f:r.ghostTextOpacity+=(A-r.ghostTextOpacity)*M,P>r.camTextOpacity?r.camTextOpacity+=(P-r.camTextOpacity)*f:r.camTextOpacity+=(P-r.camTextOpacity)*M;const x=Math.max(0,Math.min(1,Math.round(1e3*r.ghostTextOpacity)/1e3)),O=Math.max(0,Math.min(1,Math.round(1e3*r.camTextOpacity)/1e3));u&&(x>.01?(u.classList.contains("hidden")&&u.classList.remove("hidden"),u.style.opacity=x.toString()):x<=.01&&!u.classList.contains("hidden")&&(u.classList.add("hidden"),u.style.opacity="0")),y&&(O>.01?(y.classList.contains("hidden")&&y.classList.remove("hidden"),y.style.opacity=O.toString()):O<=.01&&!y.classList.contains("hidden")&&(y.classList.add("hidden"),y.style.opacity="0")),r.lastProgress=w}else{const e=Ie(o),r=c.getPointAt(e);t.position.copy(r);const p=c.getTangentAt(e).normalize(),n=r.clone().add(p);t.lookAt(n),t.visible=!0}}(e,r,e,t):r.visible=!1}))}(e),function(e){if(!Me.cameraPOVPath)return;const t=Me.cameraPOVPath.getPointAt(e);Object.entries(Me.triggerPositions).forEach((([e,r])=>{const o=Ie(t);r.triggerCameraProgress||(r.triggerCameraProgress=Ie(r.triggerPos),r.ghostTextCameraProgress=Ie(r.ghostTextPos),r.camTextCameraProgress=Ie(r.camTextPos),r.endCameraProgress=Ie(r.endPosition));let c=0,p=0;if(o>=r.triggerCameraProgress){const e=r.camTextCameraProgress-r.ghostTextCameraProgress,t=Math.max(0,Math.min(1,(o-r.ghostTextCameraProgress)/e));if(c=t<Ce?1:1-(t-Ce)/(1-Ce),o>=r.camTextCameraProgress){const e=r.endCameraProgress-r.camTextCameraProgress,t=Math.max(0,Math.min(1,(o-r.camTextCameraProgress)/e));p=t<Ce?1:1-(t-Ce)/(1-Ce)}}c>r.ghostTextOpacity?r.ghostTextOpacity+=.2*(c-r.ghostTextOpacity):r.ghostTextOpacity+=.1*(c-r.ghostTextOpacity),p>r.camTextOpacity?r.camTextOpacity+=.2*(p-r.camTextOpacity):r.camTextOpacity+=.1*(p-r.camTextOpacity),function(e){if(!e.parent)return;const t=e.parent.querySelector(".cmp--pov-ghost"),r=e.parent.querySelector(".cmp--pov-cam");if(t){const r=Math.max(0,Math.min(1,e.ghostTextOpacity));r>.01?(t.classList.remove("hidden"),t.style.opacity=r.toString()):(t.classList.add("hidden"),t.style.opacity="0")}if(r){const t=Math.max(0,Math.min(1,e.camTextOpacity));t>.01?(r.classList.remove("hidden"),r.style.opacity=t.toString()):(r.classList.add("hidden"),r.style.opacity="0")}}(r)}))}(e))}function ze(e){if(!g)return;const t=new p.Matrix4;t.lookAt(g.position,e,g.up);const r=(new p.Quaternion).setFromRotationMatrix(t);if(!xe)return g.quaternion.copy(r),void(xe=r.clone());const o=g.quaternion.angleTo(r);if(o>be){const e=new p.Quaternion,t=be/o;e.slerpQuaternions(g.quaternion,r,t),g.quaternion.copy(e)}else{const e=new p.Quaternion;e.slerpQuaternions(g.quaternion,r,Oe),g.quaternion.copy(e)}xe.copy(g.quaternion)}function Ie(e,t=2e3){if(!Me.cameraPOVPath)return 0;let r=0,o=1/0;for(let c=0;c<=t;c++){const p=c/t,n=Me.cameraPOVPath.getPointAt(p).distanceTo(e);n<o&&(o=n,r=p)}return r}function qe(){$="SCROLL_ANIMATION",Object.values(Me.triggerPositions).forEach((e=>{if(e.parent){e.parent.classList.add("hidden"),e.parent.style.opacity="0";const t=e.parent.querySelector(".cmp--pov-ghost"),r=e.parent.querySelector(".cmp--pov-cam");t&&(t.classList.add("hidden"),t.style.opacity="0"),r&&(r.classList.add("hidden"),r.style.opacity="0")}e.active=!1,e.ghostTextOpacity=0,e.camTextOpacity=0})),Object.entries(K).forEach((([e,t])=>{const r=C[e];r&&t&&(r.position.copy(t.position),r.rotation.copy(t.rotation),r.visible=!0,r.scale.set(1,1,1),r instanceof p.Mesh&&r.material&&"opacity"in r.material?r.material.opacity=1:r instanceof p.Group?r.traverse((e=>{e instanceof p.Mesh&&e.material&&"opacity"in e.material&&(e.material.opacity=1)})):r.material.opacity=1)})),C.pacman&&(C.pacman.visible=!0),0===window.scrollY&&($="HOME"),window.animationDebugInfo&&(window.animationDebugInfo.povAnimationActive=!1),xe=null}function Be(){const e=document.querySelector(".sc--pov");if(!e)return;const t=e.getBoundingClientRect(),r=window.innerHeight,o=t.top,c=t.height,p=.3*r,n=c+p;if(o<=r&&o+c>=-p){const e=Math.max(0,-o),t=Math.min(1,e/n);!Me.isActive&&t>0&&("SCROLL_ANIMATION"===$||"HOME"===$)&&(Me.isActive=!0,Ee()),Me.isActive&&Le(t)}else Me.isActive&&(Me.isActive=!1,qe())}async function ke(){try{n?w.setPixelRatio(Math.min(window.devicePixelRatio,2)):w.setPixelRatio(window.devicePixelRatio),w.shadowMap.enabled=!0,w.shadowMap.type=p.PCFSoftShadowMap,w.shadowMap.enabled=!0,w.shadowMap.type=p.PCFSoftShadowMap,l?(w.setSize(l.clientWidth,l.clientHeight),l.appendChild(w.domElement)):(w.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(w.domElement)),window.addEventListener("load",h),window.addEventListener("resize",h),function(){const e=new p.AmbientLight(16777215);y.add(e);const t=new p.DirectionalLight(16777215,.8);y.add(t),t.position.set(-5,15,10),t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,t.shadow.camera.left=-20,t.shadow.camera.right=20,t.shadow.camera.top=20,t.shadow.camera.bottom=-20,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.001,t.shadow.radius=3,t.castShadow=!0}(),g.position.copy(a),g.lookAt(i),window.addEventListener("resize",(()=>{g.aspect=window.innerWidth/window.innerHeight,g.updateProjectionMatrix()})),await async function(){return new Promise(((e,t)=>{O.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(t){const r=t.scene;r.traverse((e=>{if("CAM-Pacman"===e.name){const r=[];e.traverse((e=>{if(e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name){const t=x[e.name]||x.default;e.material=t,r.push(e)}else"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1)})),r.forEach((e=>C.pacman.add(e))),C.pacman.scale.set(.05,.05,.05),C.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),b=new p.AnimationMixer(C.pacman);const o={};t.animations.forEach((e=>{const t=b.clipAction(e);o[e.name]=t,t.setEffectiveWeight(1),t.play()}))}else if(e.name&&_[e.name]){const t=_[e.name],r=new p.Group;e.rotation.z=Math.PI,e.rotation.x=Math.PI/2,e.scale.set(.75,.75,.75);const o=[];e.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=P:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),o.push(e))})),o.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),r.add(e)})),t.add(r)}if(e.isMesh)if("CAM-Arena_LowRes_Top"===e.name)e.material=T,e.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===e.name)e.material=A,e.castShadow=!0;else if("CAM-Floor"===e.name){const t=e.clone();e.position.y=-.1,e.position.x=0,e.position.z=0,e.material=new p.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:p.FrontSide}),e.receiveShadow=!1,e.castShadow=!0,e.scale.set(.5,.5,.5),t.material=f,t.position.y=-.5,t.receiveShadow=!0,y.add(t)}})),r.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),y.add(r),r.position.set(.5,.5,.5),e()}),(function(e){}),(function(e){t(e)}))}))}(),Ve()}catch(e){console.error("Initialization error:",e)}}new p.Vector3(.65725,.55,.75325),new p.Vector3(.7075,.55,.8035),new p.Vector3(.75775,.55,.8035),new p.Vector3(.85825,.55,.8035),_e[0],new p.Vector3(.9085,.55,.8035),new p.Vector3(.95875,.55,.85375),new p.Vector3(.95875,.55,.904),new p.Vector3(.95875,.55,1.0045),_e[1],new p.Vector3(.75775,.55,1.05475),new p.Vector3(.7075,.55,1.0045),new p.Vector3(.65725,.55,1.0045),new p.Vector3(.55675,.55,1.0045),_e[2],new p.Vector3(.65725,.55,1.0045),new p.Vector3(.5065,.55,1.0045),new p.Vector3(.45625,.55,1.0045),new p.Vector3(.35575,.55,1.0045),_e[3],new p.Vector3(.15475,.55,1.15525),new p.Vector3(.205,.55,1.2055),new p.Vector3(.25525,.55,1.2055),new p.Vector3(.35575,.55,1.2055),_e[4],"loading"===document.readyState?document.addEventListener("DOMContentLoaded",ke):ke()})();
//# sourceMappingURL=script.js.map