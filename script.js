(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=THREE,r=window.innerWidth<768,o=".sc--home.sc",n=".sc--intro.sc",s=".sc--outro.sc",a=800,c=.5,i=.05,p=.01,l=.5,u=.3,h=.4,d=.3;function m(e,t=0,r=1){return Math.max(t,Math.min(r,e))}const y=".el--home-maze.el",g="canvas",f=o,v=n,w=".sc--pov.sc",A=s,P=".cr--outro.cr",b=".cmp--pov.cmp",S={mazeContainer:document.querySelector(y),canvas:document.querySelector(g),homeSection:document.querySelector(f),introSection:document.querySelector(v),povSection:document.querySelector(w),finalSection:document.querySelector(A),finalContainer:document.querySelector(P),parentElements:document.querySelectorAll(b)},M={0:-.54875,.5:-.4985,1:-.44825,1.5:-.398,2:-.34775,2.5:-.2975,3:-.24725,3.5:-.197,4:-.14675,4.5:-.0965,5:-.04625,5.5:.004,6:.05425,6.5:.1045,7:.15475,7.5:.205,8:.25525,8.5:.3055,9:.35575,9.5:.406,10:.45625,10.5:.5065,11:.55675,11.5:.607,12:.65725,12.5:.7075,13:.75775,13.5:.808,14:.85825,14.5:.9085,15:.95875,15.5:1.009,16:1.05925,16.5:1.1095,17:1.15975,17.5:1.21,18:1.26025,18.5:1.3105,19:1.36075,19.5:1.411,20:1.46125},C={0:-.302,.5:-.25175,1:-.2015,1.5:-.15125,2:-.101,2.5:-.05075,3:-5e-4,3.5:.04975,4:.1,4.5:.15025,5:.2005,5.5:.25075,6:.301,6.5:.35125,7:.4015,7.5:.45175,8:.502,8.5:.55225,9:.6025,9.5:.65275,10:.703,10.5:.75325,11:.8035,11.5:.85375,12:.904,12.5:.95425,13:1.0045,13.5:1.05475,14:1.105,14.5:1.15525,15:1.2055,15.5:1.25575,16:1.306},F=(e,r)=>new t.Vector3(M[e],.55,C[r]),E=new t.Vector3(.55675,.35,.45175),k={startMobile:new t.Vector3(.5,2.5,2.5),startDesktop:new t.Vector3(-2,2.5,2),secondMobile:new t.Vector3(.5,2.5,2),secondDesktop:new t.Vector3(-1.5,3,.75),mobileLookAt:new t.Vector3(.5,.5,-1.5),desktopLookAt:new t.Vector3(-1.25,.5,.25),cameraLookAtSecondDesktop:new t.Vector3(-.75,.5,-.75),cameraLookAtSecondMobile:new t.Vector3(-.75,.5,-.75),cameraHomeScrollEndLookAt:new t.Vector3(.55675,-5,.35),thirdPosition:new t.Vector3(.55675,3,.45175),cameraHomeScrollEndPathPoint:new t.Vector3(.55675,.5,.45175)},x=r?k.startMobile:k.startDesktop,q=r?k.secondMobile:k.secondDesktop,I=r?k.mobileLookAt:k.desktopLookAt,O=r?k.cameraLookAtSecondMobile:k.cameraLookAtSecondDesktop,T=k.thirdPosition,z=k.cameraHomeScrollEndLookAt,V=k.cameraHomeScrollEndPathPoint,_=[{pos:F("8","9"),type:"straight"},{pos:F("8","6"),type:"curve",arc:"upperArc"},{pos:F("9","5"),type:"curve",arc:"lowerArc"},{pos:F("10","4"),type:"straight"},{pos:F("10","2"),type:"curve",arc:"upperArc"},{pos:F("9","1"),type:"straight"},{pos:F("7","1"),type:"curve",arc:"lowerArc"},{pos:F("6","2"),type:"curve",arc:"upperArc"},{pos:F("5","3"),type:"curve",arc:"lowerArc"},{pos:F("4","2"),type:"curve",arc:"upperArc"},{pos:F("3","1"),type:"straight",curveCheckPoints:[F("2","1"),F("1","2"),F("1","2.5"),F("1.5","3"),F("2","3.5")]},{pos:F("2","4"),type:"curve",arc:"upperArc"},{pos:F("3","5"),type:"straight"},{pos:F("5","5"),type:"curve",arc:"lowerArc"},{pos:F("6","6"),type:"curve",arc:"upperArc"},{pos:F("5","7"),type:"straight"},{pos:F("4","7"),type:"curve",arc:"lowerArc"},{pos:F("3","8"),type:"curve",arc:"upperArc"},{pos:F("4","9"),type:"straight"},{pos:F("5","9"),type:"curve",arc:"lowerArc"},{pos:F("6","10"),type:"curve",arc:"upperArc"},{pos:F("5","11"),type:"straight",curveCheckPoints:[F("3","11"),F("2","12"),F("1.5","13"),F("1","14"),F("2","15"),F("3","15"),F("4","14"),F("5","13")]},{pos:F("6","13"),type:"curve",arc:"lowerArc"},{pos:F("7","14"),type:"curve",arc:"upperArc"},{pos:F("6","15"),type:"straight"},{pos:F("5","15"),type:"curve",arc:"lowerArc"},{pos:F("4","14"),type:"curve",arc:"upperArc"},{pos:F("5","13"),type:"straight",curveCheckPoints:[F("12","13"),F("13","12"),F("12.5","11"),F("12","10.5"),F("11","10"),F("10","10.5"),F("9","11"),F("8","10"),F("8","9.5")]},{pos:F("8","9"),type:"straight"}],L=[{pos:F("1","10"),type:"straight"},{pos:F("1","6"),type:"curve",arc:"upperArc"},{pos:F("2","5"),type:"straight"},{pos:F("3","5"),type:"curve",arc:"lowerArc"},{pos:F("4","4"),type:"curve",arc:"upperArc"},{pos:F("5","3"),type:"straight"},{pos:F("9","3"),type:"curve",arc:"lowerArc"},{pos:F("10","4"),type:"curve",arc:"upperArc"},{pos:F("9","5"),type:"curve",arc:"lowerArc"},{pos:F("8","6"),type:"straight",curveCheckPoints:[F("8","10"),F("9","11"),F("10","10.5"),F("11","10"),F("12","10.5"),F("13","11"),F("15","11"),F("16","10.5"),F("17","10"),F("18","10.5"),F("19","11"),F("20","10")]},{pos:F("20","6"),type:"curve",arc:"upperArc"},{pos:F("19","5"),type:"straight"},{pos:F("9","5"),type:"curve",arc:"lowerArc"},{pos:F("8","6"),type:"straight",curveCheckPoints:[F("8","8"),F("7","9"),F("6","10"),F("5.5","11"),F("5","12"),F("6","13"),F("7","14"),F("6","15"),F("5","15"),F("4","14"),F("4.5","13"),F("5","12"),F("4","11")]},{pos:F("1","10"),type:"straight"}],B=[{pos:F("5","12"),type:"curve",arc:"upperArc",curveCheckPoints:[F("5.5","11")]},{pos:F("6","10"),type:"curve",arc:"upperArc"},{pos:F("5","9"),type:"straight"},{pos:F("4","9"),type:"curve",arc:"lowerArc"},{pos:F("3","8"),type:"curve",arc:"upperArc"},{pos:F("4","7"),type:"straight"},{pos:F("7","7"),type:"curve",arc:"lowerArc"},{pos:F("8","8"),type:"straight"},{pos:F("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[F("8.5","11"),F("9","12")]},{pos:F("10","13"),type:"straight"},{pos:F("12","13"),type:"curve",arc:"lowerArc"},{pos:F("13","14"),type:"curve",arc:"upperArc"},{pos:F("14","15"),type:"straight"},{pos:F("19","15"),type:"curve",arc:"lowerArc"},{pos:F("20","14"),type:"straight"},{pos:F("20","4"),type:"curve",arc:"upperArc"},{pos:F("19","3"),type:"straight"},{pos:F("17","3"),type:"curve",arc:"lowerArc"},{pos:F("16","4"),type:"curve",arc:"upperArc"},{pos:F("15","5"),type:"curve",arc:"lowerArc"},{pos:F("14","4"),type:"straight"},{pos:F("14","2"),type:"curve",arc:"upperArc"},{pos:F("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[F("12","1.5")]},{pos:F("11","2"),type:"curve",arc:"lowerArc"},{pos:F("10","3"),type:"straight"},{pos:F("10","4"),type:"curve",arc:"upperArc"},{pos:F("9","5"),type:"curve",arc:"lowerArc"},{pos:F("8","6"),type:"straight"},{pos:F("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[F("8.5","11")]},{pos:F("9","12"),type:"curve",arc:"upperArc"},{pos:F("8","13"),type:"curve",arc:"lowerArc"},{pos:F("7","14"),type:"curve",arc:"upperArc"},{pos:F("6","15"),type:"straight"},{pos:F("5","15"),type:"curve",arc:"lowerArc"},{pos:F("4","14"),type:"curve",arc:"upperArc",curveCheckPoints:[F("4.5","13"),F("5","12")]}],j=[{pos:F("14","10.5"),type:"straight"},{pos:F("14","2"),type:"curve",arc:"upperArc"},{pos:F("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[F("12","1.5"),F("11","2"),F("10","1.5")]},{pos:F("9","1"),type:"straight"},{pos:F("7","1"),type:"curve",arc:"lowerArc"},{pos:F("6","2"),type:"curve",arc:"upperArc"},{pos:F("7","3"),type:"straight"},{pos:F("9","3"),type:"curve",arc:"lowerArc"},{pos:F("10","4"),type:"curve",arc:"upperArc"},{pos:F("11","5"),type:"straight"},{pos:F("19","5"),type:"curve",arc:"lowerArc"},{pos:F("20","6"),type:"straight"},{pos:F("20","10"),type:"curve",arc:"upperArc"},{pos:F("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[F("18","10.5"),F("17","10"),F("16","10.5"),F("15.5","11")]},{pos:F("15","12"),type:"straight"},{pos:F("15","14"),type:"curve",arc:"upperArc"},{pos:F("14","15"),type:"curve",arc:"lowerArc"},{pos:F("13","14"),type:"straight"},{pos:F("13","12"),type:"curve",arc:"upperArc",curveCheckPoints:[F("12.5","11"),F("12","10.5"),F("10","10.5")]},{pos:F("9","11"),type:"curve",arc:"lowerArc"},{pos:F("8","10"),type:"curve",arc:"upperArc"},{pos:F("7","9"),type:"curve",arc:"lowerArc"},{pos:F("6","10"),type:"curve",arc:"upperArc",curveCheckPoints:[F("5.5","11")]},{pos:F("5","12"),type:"curve",arc:"upperArc"},{pos:F("6","13"),type:"straight"},{pos:F("12","13"),type:"curve",arc:"lowerArc"},{pos:F("13","12"),type:"curve",arc:"upperArc"},{pos:F("13.5","11"),type:"curve",arc:"lowerArc"},{pos:F("14","10.5"),type:"straight"}],U=[{pos:F("16","7"),type:"straight"},{pos:F("16","10"),type:"curve",arc:"upperArc"},{pos:F("15","11"),type:"straight"},{pos:F("14","11"),type:"curve",arc:"lowerArc"},{pos:F("13","12"),type:"curve",arc:"upperArc"},{pos:F("12","13"),type:"straight"},{pos:F("8","13"),type:"curve",arc:"lowerArc"},{pos:F("7","14"),type:"curve",arc:"upperArc"},{pos:F("6","15"),type:"straight"},{pos:F("2","15"),type:"curve",arc:"lowerArc"},{pos:F("1","14"),type:"curve",arc:"upperArc",curveCheckPoints:[F("1.5","13"),F("2","12"),F("1.5","11")]},{pos:F("1","10"),type:"straight"},{pos:F("1","6"),type:"curve",arc:"upperArc"},{pos:F("2","5"),type:"straight"},{pos:F("5","5"),type:"curve",arc:"lowerArc"},{pos:F("6","6"),type:"curve",arc:"upperArc"},{pos:F("7","7"),type:"curve",arc:"lowerArc"},{pos:F("8","6"),type:"curve",arc:"upperArc"},{pos:F("9","5"),type:"straight"},{pos:F("13","5"),type:"curve",arc:"lowerArc"},{pos:F("14","4"),type:"straight"},{pos:F("14","2"),type:"curve",arc:"upperArc"},{pos:F("15","1"),type:"curve",arc:"lowerArc"},{pos:F("16","2"),type:"curve",arc:"upperArc"},{pos:F("17","3"),type:"straight"},{pos:F("19","3"),type:"curve",arc:"lowerArc"},{pos:F("20","2"),type:"curve",arc:"upperArc"},{pos:F("19","1"),type:"curve",arc:"lowerArc"},{pos:F("18","2"),type:"curve",arc:"upperArc"},{pos:F("19","3"),type:"curve",arc:"lowerArc"},{pos:F("20","4"),type:"straight"},{pos:F("20","10"),type:"curve",arc:"upperArc"},{pos:F("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[F("18","10.5")]},{pos:F("17","10"),type:"curve",arc:"lowerArc"},{pos:F("16","9"),type:"straight"},{pos:F("16","7"),type:"straight"}],G=[{pos:F("10","3.5"),type:"curve",arc:"upperArc"},{pos:F("9","3"),type:"straight"},{pos:F("5","3"),type:"curve",arc:"lowerArc"},{pos:F("4","2"),type:"curve",arc:"upperArc"},{pos:F("3","1"),type:"straight"},{pos:F("2","1"),type:"curve",arc:"lowerArc"},{pos:F("1","2"),type:"curve",arc:"upperArc"},{pos:F("1.5","3"),type:"curve",arc:"lowerArc"},{pos:F("2","4"),type:"curve",arc:"upperArc"},{pos:F("3","5"),type:"straight"},{pos:F("5","5"),type:"curve",arc:"lowerArc"},{pos:F("6","6"),type:"curve",arc:"upperArc"},{pos:F("5","7"),type:"straight"},{pos:F("4","7"),type:"curve",arc:"lowerArc"},{pos:F("3","8"),type:"curve",arc:"upperArc"},{pos:F("4","9"),type:"straight"},{pos:F("7","9"),type:"curve",arc:"lowerArc"},{pos:F("8","10"),type:"curve",arc:"upperArc"},{pos:F("8.5","11"),type:"curve",arc:"lowerArc"},{pos:F("9","12"),type:"curve",arc:"upperArc"},{pos:F("10","13"),type:"straight"},{pos:F("12","13"),type:"curve",arc:"lowerArc"},{pos:F("13","12"),type:"curve",arc:"upperArc"},{pos:F("14","11"),type:"curve",arc:"lowerArc"},{pos:F("15","12"),type:"curve",arc:"upperArc"},{pos:F("15","14"),type:"curve",arc:"upperArc"},{pos:F("16","15"),type:"straight"},{pos:F("19","15"),type:"curve",arc:"lowerArc"},{pos:F("20","14"),type:"straight"},{pos:F("20","2"),type:"curve",arc:"upperArc"},{pos:F("19","1"),type:"straight"},{pos:F("17","1"),type:"curve",arc:"lowerArc"},{pos:F("16","2"),type:"straight"},{pos:F("16","4"),type:"curve",arc:"upperArc"},{pos:F("15","5"),type:"curve",arc:"lowerArc"},{pos:F("14","4"),type:"straight"},{pos:F("14","2"),type:"curve",arc:"upperArc"},{pos:F("13","1"),type:"curve",arc:"lowerArc"},{pos:F("12","1.5"),type:"curve",arc:"upperArc"},{pos:F("11","2"),type:"curve",arc:"lowerArc"},{pos:F("10","3.5"),type:"curve",arc:"lowerArc"}],$=[{pos:x,lookAt:I},{pos:q,lookAt:O},{pos:T,lookAt:z},{pos:V,lookAt:z}],H=[{pos:new t.Vector3(M[11],.40625,C[7.5]),type:"straight",lookAtSequence:[new t.Vector3(M[11],.2,C[8]),new t.Vector3(M[11],1.2,C[16]),new t.Vector3(M[11],.55,C[16])]},{pos:F("11","7.5"),type:"curve",arc:"lowerArc"},{pos:F("11","9"),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(M[11],.55,.6525),F("11.5","10"),F("12","10.5"),F("12.5","11")]},{pos:F("13","11"),type:"straight"},{pos:F("14.5","11"),type:"curve",arc:"lowerArc"},{pos:F("15","11.5"),type:"straight"},{pos:F("15","14.5"),type:"curve",arc:"upperArc"},{pos:F("14.5","15"),type:"straight"},{pos:F("13.5","15"),type:"curve",arc:"lowerArc"},{pos:F("13","14.5"),type:"straight"},{pos:F("13","13.5"),type:"curve",arc:"upperArc"},{pos:F("12.5","13"),type:"straight"},{pos:F("7.5","13"),type:"curve",arc:"lowerArc"},{pos:F("7","13.5"),type:"straight"},{pos:F("7","14.5"),type:"curve",arc:"upperArc"},{pos:F("7.5","15"),type:"straight"},{pos:F("10.5","15"),type:"curve",arc:"lowerArc"},{pos:F("11","16"),type:"curve",arc:"upperArc"}],D=[{pos:F("16","10"),type:"straight"},{pos:F("16","10.5"),type:"curve",arc:"upperArc"},{pos:F("15.5","11"),type:"straight"},{pos:F("14.5","11"),type:"straight"}],R=[{pos:F("16","15"),type:"straight"},{pos:F("15.5","15"),type:"curve",arc:"lowerArc"},{pos:F("15","14.5"),type:"straight"},{pos:F("15","13.5"),type:"straight"}],W=[{pos:F("9","12"),type:"straight"},{pos:F("9","12.5"),type:"curve",arc:"upperArc"},{pos:F("9.5","13"),type:"straight"},{pos:F("10.5","13"),type:"straight"}],Y=[{pos:F("7","14"),type:"straight"},{pos:F("7","13.5"),type:"curve",arc:"upperArc"},{pos:F("7.5","13"),type:"straight"},{pos:F("8.5","13"),type:"straight"}],Q=[{pos:F("11","16"),type:"straight"},{pos:F("11","15.5"),type:"curve",arc:"upperArc"},{pos:F("10.5","15"),type:"straight"},{pos:F("9.5","15"),type:"straight"}],N={ghost1:{triggerPos:new t.Vector3(.65725,.55,.75325),ghostStartFadeIn:new t.Vector3(.7075,.55,.8035),ghostEndFadeIn:new t.Vector3(.725,.55,.8035),ghostStartFadeOut:new t.Vector3(.75,.55,.8035),camStartFadeIn:new t.Vector3(.75775,.55,.8035),camEndFadeIn:new t.Vector3(.775,.55,.8035),camStartFadeOut:new t.Vector3(.84,.55,.8035),endPosition:new t.Vector3(.85825,.55,.8035),forceEndProgress:{start:.1,end:.16}},ghost2:{triggerPos:new t.Vector3(.9085,.55,.8035),ghostStartFadeIn:new t.Vector3(.95875,.55,.85375),ghostEndFadeIn:new t.Vector3(.95875,.55,.875),ghostStartFadeOut:new t.Vector3(.95875,.55,.89),camStartFadeIn:new t.Vector3(.95875,.55,.904),camEndFadeIn:new t.Vector3(.95875,.55,.93),camStartFadeOut:new t.Vector3(.95875,.55,.9975),endPosition:new t.Vector3(.95875,.55,1.0045),forceEndProgress:{start:.17,end:.22}},ghost3:{triggerPos:new t.Vector3(.75775,.55,1.05475),ghostStartFadeIn:new t.Vector3(.7075,.55,1.0045),ghostEndFadeIn:new t.Vector3(.7075,.55,1.0045),ghostStartFadeOut:new t.Vector3(.6825,.55,1.0045),camStartFadeIn:new t.Vector3(.65725,.55,1.0045),camEndFadeIn:new t.Vector3(.65725,.55,1.0045),camStartFadeOut:new t.Vector3(.6065,.55,1.0045),endPosition:new t.Vector3(.55675,.55,1.0045),forceEndProgress:{start:.23,end:.33}},ghost4:{triggerPos:new t.Vector3(.65725,.55,1.0045),ghostStartFadeIn:new t.Vector3(.5565,.55,1.0045),ghostEndFadeIn:new t.Vector3(.5065,.55,1.0045),ghostStartFadeOut:new t.Vector3(.4815,.55,1.0045),camStartFadeIn:new t.Vector3(.45625,.55,1.0045),camEndFadeIn:new t.Vector3(.45625,.55,1.0045),camStartFadeOut:new t.Vector3(.4065,.55,1.0045),endPosition:new t.Vector3(.35575,.55,1.0045),forceEndProgress:{start:.38,end:.47}},ghost5:{triggerPos:new t.Vector3(.15475,.55,1.15525),ghostStartFadeIn:new t.Vector3(.1795,.55,1.18),ghostEndFadeIn:new t.Vector3(.205,.55,1.2055),ghostStartFadeOut:new t.Vector3(.23025,.55,1.2055),camStartFadeIn:new t.Vector3(.25525,.55,1.2055),camEndFadeIn:new t.Vector3(.25525,.55,1.2055),camStartFadeOut:new t.Vector3(.3055,.55,1.2055),endPosition:new t.Vector3(.35575,.55,1.2055),forceEndProgress:{start:.52,end:.59}}};function J(){return x}function K(){return I}const X={pacman:_,ghost1:L,ghost2:B,ghost3:j,ghost4:U,ghost5:G},Z={camera:H,ghost1:D,ghost2:R,ghost3:W,ghost4:Y,ghost5:Q};function ee(){return $}const te=new t.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,100),re=new t.Scene,oe=new t.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),ne=new t.Clock,se=[];function ae(){const e=Math.min(window.devicePixelRatio,r?2:3);oe.setPixelRatio(e),S.mazeContainer?(oe.setSize(S.mazeContainer.clientWidth,S.mazeContainer.clientHeight),te.aspect=S.mazeContainer.clientWidth/S.mazeContainer.clientHeight):(oe.setSize(window.innerWidth,window.innerHeight),te.aspect=window.innerWidth/window.innerHeight),te.updateProjectionMatrix()}const ce=new class{constructor(){this.enabled=!1,this.statsElement=null,this.frameCount=0,this.lastTime=performance.now(),this.fps=0,this.frameTime=0,this.renderer=null}enable(e){this.enabled=!0,this.renderer=e,this.createStatsPanel(),this.startMonitoring()}disable(){this.enabled=!1,this.statsElement&&(this.statsElement.remove(),this.statsElement=null)}toggle(e){this.enabled?this.disable():this.enable(e)}createStatsPanel(){this.statsElement||(this.statsElement=document.createElement("div"),this.statsElement.id="performance-monitor",this.statsElement.style.cssText="\n      position: fixed;\n      top: 10px;\n      right: 10px;\n      background: rgba(0, 0, 0, 0.8);\n      color: #0f0;\n      font-family: 'Courier New', monospace;\n      font-size: 12px;\n      padding: 10px;\n      border-radius: 5px;\n      z-index: 10000;\n      min-width: 200px;\n      line-height: 1.6;\n    ",document.body.appendChild(this.statsElement))}startMonitoring(){if(!this.enabled||!this.statsElement)return;const e=performance.now(),t=e-this.lastTime;this.lastTime=e,this.frameCount++,this.frameTime=t,this.frameCount%60==0&&(this.fps=Math.round(1e3/(t||1)),this.updateStats()),requestAnimationFrame((()=>this.startMonitoring()))}updateStats(){if(!this.statsElement||!this.renderer)return;const e={fps:this.fps,frameTime:Math.round(100*this.frameTime)/100,memoryUsed:0,memoryTotal:0,drawCalls:this.renderer.info.render.calls,triangles:this.renderer.info.render.triangles,geometries:this.renderer.info.memory.geometries,textures:this.renderer.info.memory.textures};performance.memory&&(e.memoryUsed=Math.round(performance.memory.usedJSHeapSize/1048576),e.memoryTotal=Math.round(performance.memory.totalJSHeapSize/1048576));const t=e.fps>=55?"#0f0":e.fps>=30?"#ff0":"#f00",r=e.frameTime<16.67?"#0f0":e.frameTime<33.33?"#ff0":"#f00";this.statsElement.innerHTML=`\n      <div style="font-weight: bold; margin-bottom: 5px; border-bottom: 1px solid #0f0; padding-bottom: 5px;">\n        Performance Monitor\n      </div>\n      <div>FPS: <span style="color: ${t}">${e.fps}</span></div>\n      <div>Frame Time: <span style="color: ${r}">${e.frameTime}ms</span></div>\n      ${e.memoryUsed>0?`<div>Memory: ${e.memoryUsed}MB / ${e.memoryTotal}MB</div>`:""}\n      <div>Draw Calls: ${e.drawCalls}</div>\n      <div>Triangles: ${e.triangles.toLocaleString()}</div>\n      <div>Geometries: ${e.geometries}</div>\n      <div>Textures: ${e.textures}</div>\n    `}getStats(){return this.renderer?{fps:this.fps,frameTime:this.frameTime,memoryUsed:performance.memory?Math.round(performance.memory.usedJSHeapSize/1048576):0,memoryTotal:performance.memory?Math.round(performance.memory.totalJSHeapSize/1048576):0,drawCalls:this.renderer.info.render.calls,triangles:this.renderer.info.render.triangles,geometries:this.renderer.info.memory.geometries,textures:this.renderer.info.memory.textures}:null}},ie=ScrollTrigger;var pe=e.n(ie);const le=(new t.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),ue=new t.MeshMatcapMaterial({matcap:le}),he=new t.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),de=new t.MeshPhysicalMaterial({color:16777215,opacity:.9999,transparent:!0,depthWrite:!1,depthTest:!0,blending:t.NormalBlending,side:t.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),me=new t.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),ye={blue:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new t.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},ge={CAM_Pacman_Backframe:ye.blue,"CAM-Pacman_Bitcoin_1":ye.white,"CAM-Pacman_Bitcoin_2":ye.white,"CAM-Pacman_Bottom":ye.blue,"CAM-Pacman_Top":ye.blue,"CAM-Pacman_Eye":ye.white,CAM_Pacman_Logo_1:ye.white,CAM_Pacman_Logo_2:ye.white,"CAM-Pacman_Shell_Boolean":ye.blue,"CAM-Pacman_Shell":ye.blue,"CAM-Pacman_Bottom_electronic":ye.white,"CAM-Pacman_Top_electronic":ye.white,"CAM-Pacman_Bottom_Text":ye.white,"CAM-Pacman_Top_Text":ye.white,default:ye.blue},fe=new t.GLTFLoader;let ve;const we=new t.Group,Ae={pacman:we,ghost1:new t.Mesh(new t.BufferGeometry,de),ghost2:new t.Mesh(new t.BufferGeometry,de),ghost3:new t.Mesh(new t.BufferGeometry,de),ghost4:new t.Mesh(new t.BufferGeometry,de),ghost5:new t.Mesh(new t.BufferGeometry,de)},Pe={Ghost_EUR:Ae.ghost1,Ghost_CHF:Ae.ghost2,Ghost_YEN:Ae.ghost3,Ghost_USD:Ae.ghost4,Ghost_GBP:Ae.ghost5},be=new Map;class Se{constructor(e,t=.06){this.currentTangent=e.clone(),this.smoothing=t}update(e){return this.currentTangent.lerp(e,this.smoothing),this.currentTangent.normalize()}reset(e){this.currentTangent.copy(e)}getCurrentTangent(){return this.currentTangent.clone()}setSmoothingFactor(e){this.smoothing=Math.max(.001,Math.min(1,e))}}function Me(e){const r=e.map((e=>`${e.pos.x},${e.pos.y},${e.pos.z},${e.type},${e.arc||""}`)).join("|");if(be.has(r))return be.get(r);const o=new t.CurvePath;let n=0;for(;n<e.length-1;){const r=e[n],s=e[n+1];if(r.curveCheckPoints?.length){const e=[r.pos,...r.curveCheckPoints,s.pos];o.add(new t.CatmullRomCurve3(e,!1,"centripetal",0))}else if("straight"===r.type)o.add(new t.LineCurve3(r.pos,s.pos));else{const e=Ce(r,s);o.add(new t.QuadraticBezierCurve3(r.pos,e,s.pos))}n++}return be.set(r,o),o}function Ce(e,r){if(e.arc){const o=e.arc;if("upperArc"===o)return new t.Vector3(e.pos.x,e.pos.y,r.pos.z);if("lowerArc"===o)return new t.Vector3(r.pos.x,e.pos.y,e.pos.z);if("forwardDownArc"===o)return new t.Vector3(e.pos.x,r.pos.y,e.pos.z)}return new t.Vector3(e.pos.x,e.pos.y,r.pos.z)}function Fe(e){const r=new t.CurvePath;if(4===e.length){const o=new t.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);r.add(o)}return r}function Ee(){const e={};return Object.entries(X).forEach((([t,r])=>{e[t]=Me(r)})),e}function ke(){const e={};return Object.entries(Z).forEach((([t,r])=>{e[t]=Me(r)})),e}const xe=gsap;var qe=e.n(xe);const Ie=["pacman","ghost1","ghost2","ghost3","ghost4","ghost5"],Oe=["EUR","CHF","YEN","USD","GBP"];function Te(e){return Oe.some((t=>e===t||e.includes(t)))}function ze(e){return e.includes("Shell")||e.includes("Bitcoin_1")||e.includes("Bitcoin_2")}function Ve(e,t,r="ghost"){if(!t?.length())return;const o=Math.atan2(t.x,t.z);if("pacman"===r)e.rotation.set(-Math.PI/2,Math.PI,-(o+Math.PI/2));else if("ghost"===r)e.rotation.set(0,o,0);else if("camera"===r){const r=e.position.clone().add(t);e.lookAt(r)}}const _e=(new t.Quaternion).setFromEuler(new t.Euler(Math.PI/2,0,0)),Le=(new t.Quaternion).setFromAxisAngle(new t.Vector3(0,1,0),Math.PI).clone().multiply(_e),Be=(new t.Quaternion).setFromEuler(new t.Euler(-Math.PI/2,0,0));function je(e,t,r){const o=t.angleTo(Le)<t.angleTo(Be)?Le:Be;e.quaternion.copy(t.clone().slerp(o,r))}function Ue(e,r){let o=e.clone();return r.forEach((({axis:e,angle:r})=>{o=function(e,r,o){const n="x"===r?new t.Vector3(1,0,0):"y"===r?new t.Vector3(0,1,0):new t.Vector3(0,0,1),s=(new t.Quaternion).setFromAxisAngle(n,o);return e.clone().multiply(s)}(o,e,r)})),o}function Ge(e,t,r){const o=!1!==r?.preserveTransmission;De(e,(e=>{$e(e,t,o)}),{skipCurrencySymbols:!0===r?.skipCurrencySymbols})}function $e(e,t,r=!0){const o=e,n=o.opacity??1,s=o.transparent??!1;if(Math.abs(n-t)<1e-4)return;o.opacity=t;const a=!!(r&&void 0!==o.transmission&&o.transmission>0)||t<1;s!==a&&(o.transparent=a,void 0!==o.needsUpdate&&(o.needsUpdate=!0))}function He(e){let t=1,r=!1;return De(e,(e=>{r||(t=e.opacity??1,r=!0)}),{skipCurrencySymbols:!1}),t}function De(e,t,r){const o=!0===r?.skipCurrencySymbols,n=!0===r?.skipPacmanParts,s=r?.objectKey;e.traverse((e=>{if(e.isMesh&&e.material){const r=e,a=e.name||"";if(o&&Te(a))return;if(n&&"pacman"===s&&ze(a))return;Array.isArray(r.material)?r.material.forEach((e=>{t(e,r,a)})):t(r.material,r,a)}}))}function Re(e,r=1,o=!1){re.traverse((n=>{if("CAM-Floor"===n.name&&(n.visible=e,n instanceof t.Mesh&&n.material)){const e=n.material;e.color.setHex(16777215),e.opacity=r,e.transparent=o}}))}function We(e,t,r){let o;o="pacman"===t?"intro"===r?.1:.05:"intro"===r?1.5:"pov"===r?.5:1,e.scale.set(o,o,o),e.updateMatrixWorld(!0),qe().set(e.scale,{x:o,y:o,z:o})}function Ye(e,t){e&&(Ae.pacman&&qe().set(Ae.pacman,{visible:!1}),Object.entries(Ae).forEach((([e,t])=>{"pacman"!==e&&(qe().set(t,{visible:!1}),We(t,e,"pov"),De(t,(e=>{$e(e,1,!0)}),{skipCurrencySymbols:!1}))})),Re(!0,1,!1))}function Qe(e,t){e&&Re(!0,1,!1)}let Ne=window.scrollY;function Je(){const e=window.scrollY,t=e>Ne?"down":"up";return Ne=e,t}class Ke{constructor(e,t){this.pool=[],this.createFn=e,this.resetFn=t}acquire(){if(this.pool.length>0){const e=this.pool.pop();return this.resetFn&&this.resetFn(e),e}return this.createFn()}release(e){this.resetFn&&this.resetFn(e),this.pool.push(e)}clear(){this.pool=[]}}function Xe(e){e.set(0,0,0)}function Ze(e){e.set(0,0,0,1)}const et=new Ke((()=>new t.Vector3),Xe),tt=new Ke((()=>new t.Quaternion),Ze),rt=new Ke((()=>new t.Object3D),(function(e){e.position.set(0,0,0),e.quaternion.set(0,0,0,1),e.scale.set(1,1,1),e.rotation.set(0,0,0)})),ot=new Ke((()=>new t.Vector3),Xe),nt=new Ke((()=>new t.Quaternion),Ze),st={t:0,animationTime:0},at={};let ct={},it={},pt=null,lt=!1;function ut(e){lt=e}function ht(){const e={};return Object.entries(at).forEach((([t,r])=>{const o=ot.acquire();o.copy(r.position),e[t]=o})),e}function dt(){const e={};return Object.entries(at).forEach((([t,r])=>{const o=nt.acquire();o.copy(r.rotation),e[t]=o})),e}function mt(e,t,r=!1,o=!1){if((lt||r)&&(at[e]&&at[e].position.copy(t),o)){const r=ot.acquire();r.copy(t),ct[e]=r}}function yt(e,t,r=!1){if(at[e]&&at[e].rotation.copy(t),r){const r=nt.acquire();r.copy(t),it[e]=r}}function gt(){const e={};return Object.entries(it).forEach((([t,r])=>{const o=nt.acquire();o.copy(r),e[t]=o})),e}let ft=null,vt={};function wt(){ft&&(ft.kill(),ft=null);const e=ee(),r=new t.CurvePath;if(4===e.length){const o=new t.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);r.add(o)}const n=()=>{requestAnimationFrame((()=>{const e=pe().getById("introScroll");if(e?.isActive)return;const t=function(){const e={};return Object.entries(ct).forEach((([t,r])=>{const o=ot.acquire();o.copy(r),e[t]=o})),e}(),r=gt();Je();for(const e of Ie){const o=Ae[e];if(t[e]){o.position.copy(t[e]);const r=ot.acquire();r.copy(t[e]),vt[e]=r}else{const t=ht()[e]||o.position;o.position.copy(t);const r=ot.acquire();r.copy(t),vt[e]=r}r[e]&&o.quaternion.copy(r[e])}const o=Object.keys(r).length>0?r:dt();var n;(n=vt)&&o&&Object.entries(Ae).forEach((([e,t])=>{n[e]&&(t.position.set(n[e].x,n[e].y,n[e].z),qe().set(t.position,{x:n[e].x,y:n[e].y,z:n[e].z})),qe().set(t,{visible:!0}),We(t,e,"home"),De(t,((e,t,r)=>{Te(r)?t.visible=!1:(t.visible=!0,function(e,t,r=!0){const o=e,n=o.transparent??!1,s=!!(r&&void 0!==o.transmission&&o.transmission>0)||t;n!==s&&(o.transparent=s,void 0!==o.needsUpdate&&(o.needsUpdate=!0))}(e,!0,!0))}),{skipCurrencySymbols:!1})})),Re(!0,1,!1),s()}))};ft=qe().timeline({scrollTrigger:{id:"homeScroll",trigger:o,start:"top top",end:"bottom top",scrub:c,markers:!1,refreshPriority:0,invalidateOnRefresh:!1,onEnter:n,onEnterBack:n,onUpdate:o=>{if(r&&r.curves.length){const n=o.progress,s=Math.min(1,Math.max(0,n)),a=r.getPointAt(s);te.position.copy(a);const c=[];if(e.forEach((e=>{"lookAt"in e&&e.lookAt&&c.push(e.lookAt)})),c.length>=4){const e=new t.CubicBezierCurve3(c[0],c[1],c[2],c[3]).getPoint(s);te.lookAt(e)}te.fov=50,te.updateProjectionMatrix()}},onLeave:()=>{const e=pe().getById("introScroll");e?.isActive||ft?.resume()},onLeaveBack:()=>{const e=pe().getById("introScroll");e?.isActive||ft?.resume()}}});for(const e of Ie){const t=Ae[e],r=ot.acquire();r.copy(t.position),vt[e]=r}const s=()=>{ft&&ft.clear();for(const t of Ie)e=Ae[t],qe().killTweensOf(e),qe().killTweensOf(e.scale),qe().killTweensOf(e.position),qe().killTweensOf(e.rotation),qe().killTweensOf(e.quaternion),De(e,(e=>{qe().killTweensOf(e),qe().killTweensOf(e.opacity)}),{skipCurrencySymbols:!1});var e;const r=function(e){const r=function(e){const r={};return Object.entries(e).forEach((([e,o])=>{const n=new t.Vector3(o.x*(1/4)+E.x*(3/4),1.5,o.z*(1/4)+E.z*(3/4));r[e]=[{pos:o.clone()},{pos:n},{pos:E}]})),r}(e),o={camera:Fe(ee())};return Object.entries(r).forEach((([e,r])=>{o[e]=function(e){const r=new t.CurvePath;if(3===e.length){const o=new t.QuadraticBezierCurve3(e[0].pos,e[1].pos,e[2].pos);r.add(o)}return r}(r)})),o}(vt),o=[],n=[];for(const e of Ie){const s=Ae[e],a=He(s);De(s,((e,t)=>{const r=e.clone();if($e(r,a,!0),Array.isArray(t.material)){const o=t.material.indexOf(e);if(-1!==o){const e=[...t.material];e[o]=r,t.material=e}}else t.material=r}),{skipCurrencySymbols:!1});const c=gt(),i=nt.acquire();if(c[e])i.copy(c[e]);else{const t=dt();t[e]?i.copy(t[e]):i.copy(s.quaternion)}const p=(new t.Euler).setFromQuaternion(i),l=(new t.Euler).setFromQuaternion(Le);nt.release(i);const u=r[e];if(!u)return;const h={progress:0,rotX:p.x,rotY:p.y,rotZ:p.z,opacity:a};o.push(h),n.push({key:e,object:s,path:u,startEuler:p,endEuler:l})}n.forEach(((e,t)=>{const r=o[t],n=1+.15*t,s=e.path.getPointAt(0);e.object.position.copy(s),ft.fromTo(r,{progress:0,rotX:e.startEuler.x,rotY:e.startEuler.y,rotZ:e.startEuler.z,opacity:r.opacity},{progress:1,rotX:e.endEuler.x,rotY:e.endEuler.y,rotZ:e.endEuler.z,opacity:0,ease:"power2.out",immediateRender:!1,duration:n,onUpdate:function(){const t=pe().getById("introScroll");if(t?.isActive)return;const o=e.path.getPointAt(r.progress);e.object.position.copy(o),e.object.rotation.set(r.rotX,r.rotY,r.rotZ),e.object.quaternion.setFromEuler(e.object.rotation),Ge(e.object,r.opacity,{preserveTransmission:!0,skipCurrencySymbols:!0})}},0)}))};s()}const At=new class{constructor(){this.cache=new Map,this.cacheSize=10}getCacheKey(e,t){return`${e.uuid||Math.random().toString()}_${t.toFixed(6)}`}getPoint(e,t,r){const o=this.getCacheKey(e,t),n=this.cache.get(o);if(n&&Math.abs(n.t-t)<1e-4)return r.copy(n.point),r;const s=e.getPointAt(t);if(r.copy(s),this.cache.size>=this.cacheSize){const e=this.cache.keys().next().value;void 0!==e&&this.cache.delete(e)}const a={point:s.clone(),tangent:e.getTangentAt(t).clone(),t};return this.cache.set(o,a),r}getTangent(e,t,r){const o=this.getCacheKey(e,t),n=this.cache.get(o);if(n&&Math.abs(n.t-t)<1e-4)return r.copy(n.tangent),r;const s=e.getTangentAt(t);if(r.copy(s),this.cache.size>=this.cacheSize){const e=this.cache.keys().next().value;void 0!==e&&this.cache.delete(e)}const a={point:e.getPointAt(t).clone(),tangent:s.clone(),t};return this.cache.set(o,a),r}clear(){this.cache.clear()}},Pt=new class{constructor(){this.frameCount=0,this.lastFpsCheck=0,this.currentFps=60,this.updateInterval=1,this.frameSkipCounter=0,this.targetFps=60,this.minFps=15,this.maxUpdateInterval=4}update(){this.frameCount++;const e=performance.now();return e-this.lastFpsCheck>=1e3&&(this.currentFps=this.frameCount,this.frameCount=0,this.lastFpsCheck=e,this.currentFps<this.minFps?this.updateInterval=Math.min(this.maxUpdateInterval,Math.ceil(this.targetFps/this.currentFps)):this.currentFps>=.9*this.targetFps?this.updateInterval=1:this.updateInterval=Math.max(1,Math.ceil(this.targetFps/this.currentFps))),this.frameSkipCounter++,this.frameSkipCounter>=this.updateInterval&&(this.frameSkipCounter=0,!0)}getCurrentFps(){return this.currentFps}getUpdateInterval(){return this.updateInterval}shouldSkipFrame(){return 0!==this.frameSkipCounter}reset(){this.frameCount=0,this.lastFpsCheck=performance.now(),this.currentFps=60,this.updateInterval=1,this.frameSkipCounter=0}};let bt=!0,St=0,Mt=!1,Ct=0,Ft={},Et=null;const kt={};let xt=!1;const qt={};function It(){bt=!0,ut(!0);const e=Ee(),r=gt(),o=pt;var n;xt&&null!==o&&(St=50*o),Ct=0,Ft={},!0&&(Object.entries(Ae).forEach((([e,t])=>{qe().set(t,{visible:!0}),We(t,e,"home"),De(t,((e,t,r)=>{Te(r)?t.visible=!1:t.visible=!0}),{skipCurrencySymbols:!1}),function(e){Ge(e,1,{preserveTransmission:!0,skipCurrencySymbols:!0})}(t)})),Re(!0,1,!1)),function(){const e=new t.Vector3(1,0,0);Ie.forEach((t=>{qt[t]=new Se(e.clone(),.06)}))}();for(const t of Ie){const n=Ae[t],s=e[t];if(s){if(xt&&null!==o){const e=ot.acquire();At.getPoint(s,o,e),n.position.copy(e),mt(t,e),ot.release(e)}const e=r[t];if(e){if(n.quaternion.copy(e),yt(t,e),xt){const r=nt.acquire();r.copy(e),Ft[t]=r}}else if(yt(t,n.quaternion),xt){const e=nt.acquire();e.copy(n.quaternion),Ft[t]=e}"pacman"!==t&&(n.visible=!0);const a=`${t}-home`;if("home"!==kt[a]&&(We(n,t,"home"),kt[a]="home"),qt[t]&&null!==o){const e=ot.acquire();At.getTangent(s,o,e),e.length()>0&&qt[t].reset(e),ot.release(e)}}}if(!Mt){let e=ne.getElapsedTime();n=()=>{if(document.hidden)return void(e=ne.getElapsedTime());if(!Pt.update())return;const t=ne.getElapsedTime(),r=t-e;e=t,function(e){if(!bt)return;const t=pe().getById("introScroll");if(t?.isActive)return;const r=Math.min(e,.1)*Pt.getUpdateInterval();St+=r,Ct+=r;const o=St%50/50;(function(e,t){st.t=e,st.animationTime=t})(o,St),Et||(Et=Ee());const n=Et;ve&&ve.update(r);const s=Math.min(Ct/1.5,1),a=xt&&s<1,c=Pt.getCurrentFps()<20;Object.entries(Ae).forEach((([e,t])=>{const r=n[e];if(r){const n=o,i=ot.acquire();At.getPoint(r,n,i),t.position.copy(i),mt(e,i),ot.release(i);const p=`${e}-home`;"home"!==kt[p]&&(We(t,e,"home"),kt[p]="home");const l=tt.acquire();if(qt[e]&&n>0){const t=ot.acquire();if(At.getTangent(r,n,t),t.length()>0){let r=t;c||(r=qt[e].update(t));const o="pacman"===e?"pacman":"ghost",n=rt.acquire();Ve(n,r,o),l.copy(n.quaternion),rt.release(n)}ot.release(t)}if(a&&Ft[e]){const r=s*s*(3-2*s),o=tt.acquire();o.copy(Ft[e]).slerp(l,r),t.quaternion.copy(o),tt.release(o)}else t.quaternion.copy(l);yt(e,t.quaternion),tt.release(l)}}))}(r)},se.push(n),Mt=!0}}function Ot(){const e=function(e){let t=null,r=0;return function(...o){const n=Date.now(),s=16-(n-r);s<=0||s>16?(t&&(clearTimeout(t),t=null),r=n,e.apply(this,o)):t||(t=setTimeout((()=>{r=Date.now(),t=null,e.apply(this,o)}),s))}}((()=>{0===window.scrollY?bt||It():bt&&function(){if(bt){bt=!1,ut(!1),xt=!0,pt=St%50/50;for(const e of Ie){const t=Ae[e],r=ot.acquire();r.copy(t.position),mt(e,r,!0,!0),ot.release(r);const o=nt.acquire();o.copy(t.quaternion),yt(e,o,!0),nt.release(o)}wt()}}()}));window.addEventListener("scroll",e,{passive:!0})}const Tt={};qe().registerPlugin(pe());let zt=null,Vt=null,_t=!1,Lt=!1;const Bt=new t.Vector3(.55675,.55,1.306),jt=new t.Vector3(-.14675,1,1.8085);let Ut=null;const Gt={},$t={};function Ht(){zt&&(zt.kill(),zt=null),function(){$t.camera=new Se(new t.Vector3(0,0,-1),.08);for(let e=1;e<=5;e++)$t[`ghost${e}`]=new Se(new t.Vector3(1,0,0),.08)}(),Object.keys(N).forEach((e=>{Gt[e]={hasBeenTriggered:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0}})),zt=qe().timeline({scrollTrigger:{id:"povScroll",trigger:S.povSection,start:"top bottom",end:"bottom top",markers:!1,scrub:c,toggleActions:"play none none reverse",onEnter:()=>{Je(),Ye(!0)},onEnterBack:()=>{Je(),Ye(!0)}}}).addLabel("pov-animation-start",0).to({progress:0},{progress:1,immediateRender:!1,onStart:Dt,onUpdate:function(){Rt.call(this)},onReverseComplete:()=>{Nt(),Jt()},onComplete:()=>{Nt(),Jt()}}).addLabel("pov-animation-sequence-phase",i).addLabel("pov-animation-transition-phase",.07).addLabel("pov-animation-end",1)}function Dt(){const e=ke();if($t.camera&&e.camera){const t=ot.acquire();At.getTangent(e.camera,0,t),t.length()>0&&$t.camera.reset(t),ot.release(t)}Object.entries(Ae).forEach((([t,r])=>{if(e[t]&&"pacman"!==t){const o=ot.acquire();At.getPoint(e[t],0,o),r.position.copy(o);const n=ot.acquire();At.getTangent(e[t],0,n).normalize();const s=et.acquire();s.copy(o).add(n),r.lookAt(s),et.release(s),ot.release(o),ot.release(n),r.visible=!1,We(r,t,"pov")}})),Ae.pacman&&(Ae.pacman.visible=!1)}function Rt(){const e=this.targets()[0].progress,t=ke();if(!t.camera)return;const r=ot.acquire();At.getPoint(t.camera,e,r);const o=r;if(Vt)!function(e,t,r){const o=pe().getById("introScroll");if(o&&o.isActive)return;te.position.copy(r),te.fov=80;const n=function(e,t){const r=Z.camera;if(e<=i){const t=r[0];if("lookAtSequence"in t&&t.lookAtSequence?.length){const r=e/i,o=t.lookAtSequence.length,n=1/o,s=Math.floor(r/n),a=r%n/n,c=Math.min(s,o-1),p=Math.min(s+1,o-1);if(c===p)return t.lookAtSequence[c];{const e=t.lookAtSequence[c],r=t.lookAtSequence[p],o=et.acquire();o.copy(e).lerp(r,a);const n=ot.acquire();return n.copy(o),et.release(o),n}}}else if(e<=.07){const o=r[0];if("lookAtSequence"in o&&o.lookAtSequence?.length){const r=o.lookAtSequence[o.lookAtSequence.length-1],n=ot.acquire();At.getPoint(t.camera,e,n);const s=n,a=ot.acquire();At.getTangent(t.camera,e,a).normalize();const c=a,p=et.acquire();p.set(c.x,0,c.z).normalize();const l=et.acquire();l.copy(s).add(p);const u=(e-i)/.020000000000000004,h=et.acquire();h.copy(r).lerp(l,u);const d=ot.acquire();return d.copy(h),et.release(p),et.release(l),et.release(h),ot.release(n),ot.release(a),d}}return null}(e,t);if(n)return te.lookAt(n),void te.updateProjectionMatrix();const s=ot.acquire();At.getTangent(t.camera,e,s).normalize();let a=s,c=!0;if($t.camera&&e>0&&(a=$t.camera.update(s)),e<=.15){const e=et.acquire();e.set(a.x,0,a.z).normalize(),a===s&&(c=!1),a=e}const p=et.acquire();p.copy(r).add(a),function(e,t){const r=ke(),o=Kt(r.camera,Bt),n=Kt(r.camera,jt);(e<o||e>n)&&!Lt&&(Ut=null,_t=!1,Lt=!1),_t||Lt||te.lookAt(t)}(e,p),c&&a!==s&&ot.release(s),e<=.15&&et.release(a),et.release(p),te.updateProjectionMatrix()}(e,t,o),function(e,t,r){Object.entries(N).forEach((([o,n])=>{const s=Ae[o],c=r[o];if(!s||!c||"pacman"===o)return;const i=t>n.forceEndProgress.start&&t<n.forceEndProgress.end;!function(e,t,r,o,n,s){const{triggerPos:c,ghostStartFadeIn:i,ghostEndFadeIn:l,ghostStartFadeOut:u,camStartFadeIn:h,camEndFadeIn:d,camStartFadeOut:y,endPosition:g}=n,f=Gt[e],v=parseInt(e.replace("ghost",""))-1;let w=Tt[v];if(!w){const e=document.querySelectorAll(".cmp--pov.cmp")[v];w={parent:e||null,povElements:e?e.querySelectorAll(".pov"):document.querySelectorAll(".nonexistent"),camElements:e?e.querySelectorAll(".cam"):document.querySelectorAll(".nonexistent")},Tt[v]=w}const{parent:A,povElements:P,camElements:b}=w;if(!A||!P.length||!b.length)return;const S=ke();null===f.triggerCameraProgress&&(f.triggerCameraProgress=Kt(S.camera,c,a),f.ghostStartFadeInProgress=Kt(S.camera,i,a),f.ghostEndFadeInProgress=Kt(S.camera,l,a),f.ghostStartFadeOutProgress=Kt(S.camera,u,a),f.camStartFadeInProgress=Kt(S.camera,h,a),f.camEndFadeInProgress=Kt(S.camera,d,a),f.camStartFadeOutProgress=Kt(S.camera,y,a),f.endCameraProgress=Kt(S.camera,g,a));const M=Kt(S.camera,o,a);if(M>=f.triggerCameraProgress&&M<=f.endCameraProgress){if(!t.visible&&(t.visible=!0,f.hasBeenTriggered=!0,$t[e])){const t=ot.acquire();At.getTangent(r,0,t),t.length()>0&&$t[e].reset(t),ot.release(t)}let o=m((M-f.triggerCameraProgress)/(f.endCameraProgress-f.triggerCameraProgress));void 0===f.currentPathT?f.currentPathT=o:f.currentPathT+=.1*(o-f.currentPathT),o=f.currentPathT;const n=ot.acquire();if(At.getPoint(r,o,n),t.position.copy(n),$t[e]&&o>0){const n=ot.acquire();At.getTangent(r,o,n),n.length()>0&&Ve(t,$t[e].update(n),"ghost"),ot.release(n)}ot.release(n),Ge(t,o>.9?1-(o-.9)/.1:1,{preserveTransmission:!0,skipCurrencySymbols:!0})}else t.visible=!1,f.hasBeenTriggered=!1;!function(e,t,r,o,n,s,a=!1){if(a)return o.style.opacity="0",o.classList.add("no-visibility"),Qt(n),void Qt(s);const{targetGhostOpacity:c,targetCamOpacity:i}=function(e,t){let r=0,o=0;if(e>=t.ghostStartFadeInProgress&&e<=t.ghostEndFadeInProgress){const o=(e-t.ghostStartFadeInProgress)/(t.ghostEndFadeInProgress-t.ghostStartFadeInProgress);r=Math.min(1,o)}else if(e>t.ghostEndFadeInProgress&&e<t.ghostStartFadeOutProgress)r=1;else if(e>=t.ghostStartFadeOutProgress&&e<=t.camStartFadeInProgress){const o=(e-t.ghostStartFadeOutProgress)/(t.camStartFadeInProgress-t.ghostStartFadeOutProgress);r=Math.max(0,1-o)}if(e>=t.camStartFadeInProgress&&e<=t.camEndFadeInProgress){const r=(e-t.camStartFadeInProgress)/(t.camEndFadeInProgress-t.camStartFadeInProgress);o=Math.min(1,r)}else if(e>t.camEndFadeInProgress&&e<t.camStartFadeOutProgress)o=1;else if(e>=t.camStartFadeOutProgress&&e<=t.endCameraProgress){const r=(e-t.camStartFadeOutProgress)/(t.endCameraProgress-t.camStartFadeOutProgress);o=Math.max(0,1-r)}return{targetGhostOpacity:r,targetCamOpacity:o}}(t,r);t>=r.camStartFadeOutProgress?o.style.opacity=i.toString():t>=r.ghostStartFadeInProgress&&t<=r.ghostEndFadeInProgress&&(o.style.opacity=c.toString());const l=i>p&&c>p,u=o.classList.contains("no-visibility");l&&!u?o.classList.add("no-visibility"):!l&&u&&o.classList.remove("no-visibility"),c>p?Wt(n,c):Qt(n),i>p?Wt(s,i):Qt(s)}(0,M,f,A,P,b,s)}(o,s,c,e,n,i)}))}(o,e,t),Vt.copy(o);else{const e=ot.acquire();e.copy(o),Vt=e}ot.release(r)}function Wt(e,t){e.forEach((e=>{const r=e;t>p?(r.classList.remove("no-visibility"),r.style.opacity=t.toString()):t<=p&&!r.classList.contains("no-visibility")&&(r.classList.add("no-visibility"),r.style.opacity="0")}))}function Yt(){Object.keys($t).forEach((e=>{if($t[e]){const r="camera"===e?new t.Vector3(0,0,-1):new t.Vector3(1,0,0);$t[e].reset(r)}}))}function Qt(e){e.forEach((e=>{const t=e;t.classList.add("no-visibility"),t.style.opacity="0"}))}function Nt(){Object.entries(Ae).forEach((([e,t])=>{if("pacman"!==e){t.visible=!1;const r=parseInt(e.replace("ghost",""))-1,o=Tt[r];o?.parent&&(Qt(o.povElements),Qt(o.camElements),o.parent.classList.add("no-visibility")),Ge(t,1,{preserveTransmission:!0,skipCurrencySymbols:!0})}})),Ae.pacman&&(Ae.pacman.visible=!0),Yt()}function Jt(){Ae.pacman&&(Ae.pacman.visible=!0),_t=!1,Ut=null,Lt=!1,Object.keys(Gt).forEach((e=>{Gt[e]={hasBeenTriggered:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0}})),Yt()}function Kt(e,t,r=800){if(!e||!t)return 0;let o=0,n=1/0;for(let s=0;s<r;s++)try{const a=s/(r-1),c=e.getPointAt(a);if(!c)continue;const i=c.distanceTo(t);i<n&&(n=i,o=a)}catch(e){}return o}let Xt=null,Zt=!1,er=null,tr=null,rr=null,or={},nr=null,sr=-1;const ar={},cr={};function ir(){nr=null,sr=-1,er=null}function pr(){Object.entries(Ae).forEach((([e,t])=>{ar[e]||(ar[e]=[],t.traverse((t=>{if(t.isMesh){const r=t,o=t.name||"",n=r.material;n&&(Array.isArray(n)?n:[n]).forEach((t=>{ar[e].push({mesh:r,material:t,childName:o})}))}})))}))}function lr(e){Object.values(Ae).forEach((t=>{t.userData.introScrollLocked=e}))}function ur(){const e={visible:!0,opacity:1,transparent:!1};hr&&hr.visible===e.visible&&hr.opacity===e.opacity&&hr.transparent===e.transparent||(Re(e.visible,e.opacity,e.transparent),hr=e)}let hr=null;const dr=new t.Vector3;let mr=null;!async function(){r?oe.setPixelRatio(Math.min(window.devicePixelRatio,2)):oe.setPixelRatio(window.devicePixelRatio),oe.shadowMap.enabled=!0,oe.shadowMap.type=t.PCFSoftShadowMap,S.mazeContainer?(oe.setSize(S.mazeContainer.clientWidth,S.mazeContainer.clientHeight),S.mazeContainer.appendChild(oe.domElement)):(oe.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(oe.domElement)),ae(),window.addEventListener("resize",ae),oe.render(re,te),function(){const e=new t.AmbientLight(16777215);re.add(e);const r=new t.DirectionalLight(16777215,.8);re.add(r),r.position.set(-5,15,10),r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.camera.left=-20,r.shadow.camera.right=20,r.shadow.camera.top=20,r.shadow.camera.bottom=-20,r.shadow.camera.near=.1,r.shadow.camera.far=50,r.shadow.bias=-.001,r.shadow.radius=3,r.castShadow=!0}(),function(){const e=J(),t=K();te.position.set(e.x,e.y,e.z),te.lookAt(t.x,t.y,t.z)}(),await async function(e){return Object.values(Ae).forEach((t=>e.add(t))),e.add(we),new Promise(((r,o)=>{fe.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(o){const n=o.scene;n.traverse((r=>{if("CAM-Pacman"===r.name){const e=[];r.traverse((t=>{if(t.isMesh&&"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name&&"CAM-Pacman_Bitcoin_1"!==t.name&&"CAM-Pacman_Bitcoin_2"!==t.name){const r=ge[t.name]||ge.default;t.material=r,e.push(t)}else"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name&&"CAM-Pacman_Bitcoin_1"!==t.name&&"CAM-Pacman_Bitcoin_2"!==t.name||(t.visible=!1)})),e.forEach((e=>Ae.pacman.add(e))),Ae.pacman.scale.set(.05,.05,.05),Ae.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),ve=new t.AnimationMixer(Ae.pacman);const n={};o.animations.forEach((e=>{const t=ve.clipAction(e);t.getMixer().addEventListener("loop",(function(e){e.action.getRoot().traverse((function(e){e.userData&&e.userData.skipAnimation&&(e.updateMorphTargets=function(){})}))})),n[e.name]=t,t.setEffectiveWeight(0),t.play()})),Object.values(n).forEach((e=>{e.setEffectiveWeight(1)}))}else if(r.name&&Pe[r.name]){const e=Pe[r.name],o=new t.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const n=[];r.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=de:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),n.push(e))})),n.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),e&&e.add(o)}if(r.isMesh)if("CAM-Arena_LowRes_Top"===r.name)r.material=he,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===r.name)r.material=ue,r.castShadow=!0;else if("CAM-Floor"===r.name){const o=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new t.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:t.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),o.material=me,o.position.y=-.5,o.receiveShadow=!0,e.add(o)}else r.visible=!1})),n.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.add(n),n.position.set(.5,.5,.5),r()}),void 0,(function(e){o(e)}))}))}(re),Object.entries(Ae).forEach((([e,t])=>{const r=He(t),o=ot.acquire();o.copy(t.position);const n=nt.acquire();n.copy(t.quaternion);const s=ot.acquire();s.copy(t.scale),at[e]={position:o,rotation:n,scale:s,visible:t.visible,opacity:r}})),Ot(),0===window.scrollY&&It(),Ht(),Xt&&(Xt.kill(),Xt=null),Xt=qe().timeline({scrollTrigger:{trigger:n,start:"top top",end:"bottom bottom",scrub:c,refreshPriority:1,markers:{startColor:"green",endColor:"red",fontSize:"12px",fontWeight:"bold",indent:60},onEnter:()=>{Zt=!0,ir(),pr(),lr(!0)},onEnterBack:()=>{Zt=!0,ir(),pr(),lr(!0)},onLeave:()=>{Zt=!1,ir(),ur(),lr(!1)},onLeaveBack:()=>{Zt=!1,ir(),ur(),lr(!1)},onUpdate:e=>{"number"==typeof e.progress&&function(e){if(!Zt)return;if(er===e)return;er=e;const r=performance.now();if(!nr||r-sr>16){const e=te.position.x,o=te.position.y,n=te.position.z;if(isFinite(e)&&isFinite(o)&&isFinite(n))nr||(nr=new t.Vector3),nr.set(e,o,n),sr=r,dr.copy(nr);else{if(!nr)return;dr.copy(nr)}}else dr.copy(nr);if(function(){if(tr&&rr)return;const e=Ae.pacman;if(e){if(!or.pacman){const t=nt.acquire();t.copy(e.quaternion),or.pacman=t}const t=tt.acquire();t.copy(or.pacman);const r=rt.acquire();r.quaternion.copy(t),je(r,t,1),t.copy(r.quaternion),rt.release(r);const o=Ue(t,[{axis:"x",angle:Math.PI/2},{axis:"y",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"y",angle:Math.PI}]),n=nt.acquire();n.copy(o),tr=n,tt.release(t)}const t=Ae.ghost1;if(t){if(!or.ghost1){const e=nt.acquire();e.copy(t.quaternion),or.ghost1=e}const e=tt.acquire();e.copy(or.ghost1);const r=rt.acquire();r.quaternion.copy(e),je(r,e,1),e.copy(r.quaternion),rt.release(r);const o=Ue(e,[{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI}]),n=nt.acquire();n.copy(o),rr=n,tt.release(e)}Object.keys(Ae).forEach((e=>{const t=Ae[e];if(t&&!or[e]){const r=nt.acquire();r.copy(t.quaternion),or[e]=r}}))}(),ve){const e=ne.getDelta(),t=Pt.getUpdateInterval();ve.update(e*t)}const o={visible:!0,opacity:0,transparent:!0};hr&&hr.visible===o.visible&&hr.opacity===o.opacity&&hr.transparent===o.transparent||(Re(o.visible,o.opacity,o.transparent),hr=o);const n=tr,s=rr,a=dr.x-10,c=dr.x+10,i=[{key:"pacman",behindOffset:1.5,zOffset:.5,xOffset:0,yOffset:0,zPhase:0},{key:"ghost1",behindOffset:0,zOffset:.5,xOffset:.5,yOffset:-.5,zPhase:1*Math.PI},{key:"ghost2",behindOffset:-.005,zOffset:.5,xOffset:0,yOffset:-1,zPhase:1.5*Math.PI},{key:"ghost3",behindOffset:-.01,zOffset:.5,xOffset:.5,yOffset:.5,zPhase:1*Math.PI},{key:"ghost4",behindOffset:-.015,zOffset:.5,xOffset:.75,yOffset:.25,zPhase:1*Math.PI},{key:"ghost5",behindOffset:-.02,zOffset:.5,xOffset:0,yOffset:-.5,zPhase:1*Math.PI}],p=m(e),l=a+(c-a)*p,u=l+4.3,h=dr.y+-2,d=dr.z+0;if(!(isFinite(l)&&isFinite(u)&&isFinite(h)&&isFinite(d)))return;const y=p<.2?p/.2:1;i.forEach((({key:e,behindOffset:t,zOffset:r,xOffset:o,yOffset:a,zPhase:c})=>{const i=Ae[e];if(!i)return;const l="pacman"===e?0:.01*Math.sin(p*Math.PI*2*20+c),m=u+t+o,g=h+a-("pacman"===e?0:1.5*l),f=d+r-l;if(!isFinite(m)||!isFinite(g)||!isFinite(f)||Math.abs(f)<.01||Math.abs(f)>100)return;i.position.set(m,g,f);const v="pacman"===e?n:s;v&&i.quaternion.copy(v);const w=`${e}-intro`;cr[w]||(We(i,e,"intro"),cr[w]={key:e,sceneType:"intro"}),i.visible=!0;const A="pacman"===e?1:y;ar[e]||pr();const P=ar[e];P&&P.forEach((({mesh:t,material:r,childName:o})=>{if(Te(o)||"pacman"===e&&ze(o))return void(t.visible=!1);t.visible=!0;const n=r;Math.abs(n.opacity-A)>.001&&(n.opacity=A,void 0!==n.transmission&&n.transmission>0?n.transparent=!0:n.transparent=A<1)}))}))}(e.progress)},id:"introScroll"}}).addLabel("intro-text-start",0).fromTo(".sc_h--intro",{scale:l,opacity:0},{keyframes:[{scale:l,opacity:0,duration:0},{scale:.8,opacity:1,duration:u},{scale:1.2,opacity:1,duration:h},{scale:1.5,opacity:0,duration:d}]}).addLabel("intro-text-fade-in",0).addLabel("intro-text-hold",.3).addLabel("intro-text-fade-out",.7).fromTo(".sc_b--intro",{scale:l,opacity:0},{keyframes:[{scale:l,opacity:0,duration:0},{scale:.8,opacity:1,duration:u},{scale:1.2,opacity:1,duration:h},{scale:1.5,opacity:0,duration:d}]}).addLabel("intro-text-end",1),mr=qe().timeline({scrollTrigger:{trigger:s,start:"top center",end:"bottom bottom",scrub:c,markers:!1,onEnter:()=>{Je(),Qe(!0)},onEnterBack:()=>{Je(),Qe(!0)}}}).addLabel("outro-text-start",0).fromTo(".sc_b--outro",{scale:l,opacity:0},{keyframes:[{scale:l,opacity:0,duration:0},{scale:.8,opacity:1,duration:u},{scale:1.2,opacity:1,duration:h},{scale:1.5,opacity:0,duration:d}]}).addLabel("outro-text-fade-in",0).addLabel("outro-text-hold",.3).addLabel("outro-text-fade-out",.7).addLabel("outro-text-end",1),function(){const e=document.querySelector(".wr_p--skip.wr_p");if(e){const t=document.querySelector(".sc--testimonials");t&&e.addEventListener("click",(()=>{t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}))}}(),function(){let e=0;const t=()=>{const r=performance.now();r-e>=16.67&&(se.forEach((e=>e())),oe.render(re,te),e=r),requestAnimationFrame(t)};t()}(),ce.enable(oe),"undefined"!=typeof window&&(window.performanceMonitor=ce,window.enablePerformanceMonitor=()=>{ce.enable(oe)},window.disablePerformanceMonitor=()=>{ce.disable()},window.togglePerformanceMonitor=()=>{ce.toggle(oe)})}()})();
//# sourceMappingURL=script.js.map