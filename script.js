(()=>{"use strict";const e=THREE,t=window.innerWidth<768,r={startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)},o=t?r.startMobile:r.startDesktop,c=t?r.mobileLookAt:r.desktopLookAt,p="\n    varying vec3 vPosition;\n    void main() {\n      vPosition = position;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",n="\n    varying vec3 vPosition;\n    uniform float mixValue;\n    void main() {\n      float factor = (vPosition.y + 1.0) / 2.0;\n      vec3 colorA = vec3(0.0, 0.0, 1.0);\n      vec3 colorB = vec3(0.0, 1.0, 1.0);\n      vec3 colorC = vec3(1.0, 0.0, 0.0);\n      vec3 colorD = vec3(1.0, 1.0, 0.0);\n      \n      vec3 gradientA = mix(colorA, colorB, factor);\n      vec3 gradientB = mix(colorC, colorD, factor);\n      \n      vec3 finalColor = mix(gradientA, gradientB, mixValue);\n      gl_FragColor = vec4(finalColor, 1.0);\n    }\n  ",s={homeEndPoint:new e.Vector3(.55675,.5,.45175),povStartPoint1:new e.Vector3(.55675,-5,.45175),povStartPoint2:new e.Vector3(.55675,-2.5,.45175),startRotationPoint:new e.Vector3(.55675,.55,1.306),endRotationPoint:new e.Vector3(-.14675,1,1.8085),targetLookAt:new e.Vector3(.55675,.1,1.306),finalLookAt:new e.Vector3(-.14675,0,1.8085),reverseFinalLookAt:new e.Vector3(7.395407041377711,.9578031302345096,-4.312450290270135)},a=new e.Scene,i=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),u=document.querySelector(".el--home-maze.el"),y=new e.Clock;function w(){const e=Math.min(window.devicePixelRatio,t?2:3);i.setPixelRatio(e),i.setSize(u.clientWidth,u.clientHeight)}const l=document.querySelector("canvas"),v=document.querySelector(".sc--final.sc"),h=(v?.querySelector(".cr--final.cr"),document.querySelectorAll(".cmp--pov.cmp")),V=new e.PerspectiveCamera(50,u.clientWidth/u.clientHeight,.001,1e3),g=V.quaternion.clone(),d=(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0));window.setCamera=function(t){if("string"==typeof t){const[r,o,c]=t.split(",").map(Number);t=new e.Vector3(r,o,c)}V.lookAt(t),V.updateProjectionMatrix(),V.updateMatrix(),V.updateMatrixWorld()};const m=(new e.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),A=new e.MeshMatcapMaterial({matcap:m}),T=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),P=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),f=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),M=(new e.ShaderMaterial({vertexShader:p,fragmentShader:n,uniforms:{mixValue:{value:0}}}),{blue:new e.MeshBasicMaterial({color:1337811}),white:new e.MeshBasicMaterial({color:16777215}),default:new e.MeshBasicMaterial({color:1337811})}),x={CAM_Pacman_Backframe:M.blue,"CAM-Pacman_Bitcoin_1":M.white,"CAM-Pacman_Bitcoin_2":M.white,"CAM-Pacman_Bottom":M.blue,"CAM-Pacman_Top":M.blue,"CAM-Pacman_Eye":M.white,CAM_Pacman_Logo_1:M.white,CAM_Pacman_Logo_2:M.white,"CAM-Pacman_Shell_Boolean":M.blue,"CAM-Pacman_Shell":M.blue,"CAM-Pacman_Bottom_electronic":M.white,"CAM-Pacman_Top_electronic":M.white,"CAM-Pacman_Bottom_Text":M.white,"CAM-Pacman_Top_Text":M.white,default:M.blue},b=(Array(5).fill(P),e.GLTFLoader?new e.GLTFLoader:null);let C;const S=new e.Group;a.add(S);const O={pacman:S,ghost1:new e.Mesh(new e.BufferGeometry,P),ghost2:new e.Mesh(new e.BufferGeometry,P),ghost3:new e.Mesh(new e.BufferGeometry,P),ghost4:new e.Mesh(new e.BufferGeometry,P),ghost5:new e.Mesh(new e.BufferGeometry,P)};Object.values(O).forEach((e=>a.add(e)));const L={Ghost_EUR:O.ghost1,Ghost_CHF:O.ghost2,Ghost_YEN:O.ghost3,Ghost_USD:O.ghost4,Ghost_GBP:O.ghost5};const _={animationRunning:!0,savedPositions:{},pauseTime:null,timeOffset:0,oldTop:0,scrollTimeout:null,homePositionsSaved:!1,homeAnimationPositions:{},isInPovSection:!1,isMovingForward:!0,previousCameraPosition:null,cachedStartYAngle:null,animationStarted:!1,rotationStarted:!1,startedInitEndScreen:!1,endScreenPassed:!1,startEndProgress:0,cachedHomeEndRotation:null};const E=[{pos:new e.Vector3(.25525,.55,.6025),type:"straight"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"straight"},{pos:new e.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new e.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,.6025),type:"straight"}],R=[{pos:new e.Vector3(-.44825,.55,.502),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,.8035),type:"straight"},{pos:new e.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.703),type:"straight"},{pos:new e.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new e.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.502),type:"straight"}],B=[{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new e.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.502),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new e.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"}],k=[{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.703),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.2005),type:"straight"},{pos:new e.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.301),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"straight"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"straight"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"upperArc"}],D=[{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new e.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.8035),type:"straight"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"straight"},{pos:new e.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.1),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"}],z=[{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new e.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new e.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],G=[{pos:new e.Vector3(.55675,.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],I=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],H=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],F=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],W=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],j=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}],q=t?r.startMobile:r.startDesktop,Q=t?r.secondMobile:r.secondDesktop,Y=new e.CubicBezierCurve3(q,Q,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175)),U={pacmanHomePath:{points:E,color:16776960},ghost1HomePath:{points:R,color:16711680},ghost2HomePath:{points:B,color:16753920},ghost3HomePath:{points:k,color:16738740},ghost4HomePath:{points:D,color:3329330},ghost5HomePath:{points:z,color:16767673},cameraPOVPath:{points:G,color:16777215},ghost1POVPath:{points:I,color:16711680},ghost2POVPath:{points:H,color:16753920},ghost3POVPath:{points:F,color:16738740},ghost4POVPath:{points:W,color:3329330},ghost5POVPath:{points:j,color:16767673}};function N(e){const t={};return"home"===e?(t.pacman="pacmanHomePath",t.ghost1="ghost1HomePath",t.ghost2="ghost2HomePath",t.ghost3="ghost3HomePath",t.ghost4="ghost4HomePath",t.ghost5="ghost5HomePath"):"pov"===e&&(t.pacman="cameraPOVPath",t.ghost1="ghost1POVPath",t.ghost2="ghost2POVPath",t.ghost3="ghost3POVPath",t.ghost4="ghost4POVPath",t.ghost5="ghost5POVPath"),t}const Z={};function $(e,t,r=2e3){if(!e||!t)return 0;let o=0,c=1/0;for(let p=0;p<r;p++)try{const n=p/(r-1),s=e.getPointAt(n);if(!s)continue;const a=s.distanceTo(t);a<c&&(c=a,o=n)}catch(e){}return o}Object.entries(U).forEach((([t,r])=>{Z[t]=function(t){const r=new e.CurvePath;for(let o=0;o<t.length-1;o++){const c=t[o],p=t[o+1];if("straight"===c.type){const t=new e.LineCurve3(c.pos,p.pos);r.add(t)}else if("curve"===c.type){let t;t="upperArc"===c.curveType?new e.Vector3(c.pos.x,c.pos.y,p.pos.z):"lowerArc"===c.curveType?new e.Vector3(p.pos.x,c.pos.y,c.pos.z):"forwardDownArc"===c.curveType?new e.Vector3(c.pos.x,p.pos.y,c.pos.z):new e.Vector3(c.pos.x,c.pos.y,p.pos.z);const o=new e.QuadraticBezierCurve3(c.pos,t,p.pos);r.add(o)}}return r}(r.points)}));const J=window.gsap;"undefined"!=typeof window&&window.gsap&&window.ScrollTrigger&&window.gsap.registerPlugin(window.ScrollTrigger);const K={ghost1:{triggerPos:new e.Vector3(.65725,.55,.75325),ghostTextPos:new e.Vector3(.7075,.55,.8035),camTextPos:new e.Vector3(.75775,.55,.8035),endPosition:new e.Vector3(.85825,.55,.8035),parent:h[0],active:!1},ghost2:{triggerPos:new e.Vector3(.9085,.55,.8035),ghostTextPos:new e.Vector3(.95875,.55,.85375),camTextPos:new e.Vector3(.95875,.55,.904),endPosition:new e.Vector3(.95875,.55,1.0045),parent:h[1],active:!1},ghost3:{triggerPos:new e.Vector3(.75775,.55,1.05475),ghostTextPos:new e.Vector3(.7075,.55,1.0045),camTextPos:new e.Vector3(.65725,.55,1.0045),endPosition:new e.Vector3(.55675,.55,1.0045),parent:h[2],active:!1},ghost4:{triggerPos:new e.Vector3(.65725,.55,1.0045),ghostTextPos:new e.Vector3(.5065,.55,1.0045),camTextPos:new e.Vector3(.45625,.55,1.0045),endPosition:new e.Vector3(.35575,.55,1.0045),parent:h[3],active:!1},ghost5:{triggerPos:new e.Vector3(.15475,.55,1.15525),ghostTextPos:new e.Vector3(.205,.55,1.2055),camTextPos:new e.Vector3(.25525,.55,1.2055),endPosition:new e.Vector3(.35575,.55,1.2055),parent:h[4],active:!1}};function X(){const e=N("pov");Object.entries(O).forEach((([t,r])=>{const o=e[t];if(Z[o]){const e=Z[o].getPointAt(0);r.position.copy(e);const c=Z[o].getTangentAt(0).normalize();r.lookAt(e.clone().add(c)),"pacman"!==t&&(r.visible=!1)}}))}function ee(){const t=this.targets()[0].progress,r=Z.cameraPOVPath.getPointAt(t);_.previousCameraPosition?(function(t){const r=N("pov");Object.entries(O).forEach((([o,c])=>{if("pacman"===o)return;const p=r[o];Z[p]&&K[o]&&function(t,r,o,c){const{triggerPos:p,ghostTextPos:n,camTextPos:s,endPosition:a,parent:i}=K[t];if(!p||!a||!i)return;const u=i,y=i.querySelector(".cmp--pov-cam");if(!y)return;r.scale.set(.5,.5,.5),void 0===K[t].hasBeenTriggered&&(K[t].hasBeenTriggered=!1,K[t].hasBeenDeactivated=!1,K[t].triggerCameraProgress=null,K[t].ghostTextCameraProgress=null,K[t].camTextCameraProgress=null,K[t].endCameraProgress=null,K[t].currentPathT=0,K[t].ghostTextOpacity=0,K[t].camTextOpacity=0,K[t].lastProgress=0,r.visible=!1,u.classList.add("hidden"),y.classList.add("hidden"),u.style.opacity="0",y.style.opacity="0");const w=$(Z.cameraPOVPath,c,800);null===K[t].triggerCameraProgress&&(K[t].triggerCameraProgress=$(Z.cameraPOVPath,p,800),K[t].ghostTextCameraProgress=n?$(Z.cameraPOVPath,n,800):K[t].triggerCameraProgress,K[t].camTextCameraProgress=s?$(Z.cameraPOVPath,s,800):K[t].ghostTextCameraProgress,K[t].endCameraProgress=$(Z.cameraPOVPath,a,800));const l=K[t].triggerCameraProgress,v=K[t].ghostTextCameraProgress,h=K[t].camTextCameraProgress,V=K[t].endCameraProgress;if(w>=l&&w<=V){r.visible||(r.visible=!0,K[t].hasBeenTriggered=!0);const c=(w-l)/(V-l);let p=Math.max(0,Math.min(1,c));if(void 0===K[t].currentPathT)K[t].currentPathT=p;else{const e=.1;K[t].currentPathT+=(p-K[t].currentPathT)*e}p=K[t].currentPathT;const n=Z[o].getPointAt(p);r.position.copy(n);const s=Z[o].getTangentAt(p).normalize(),a=r.position.clone().add(s);K[t].currentRotation||(K[t].currentRotation=new e.Quaternion,r.getWorldQuaternion(K[t].currentRotation));const i=new e.Quaternion,u=(new e.Matrix4).lookAt(r.position,a,new e.Vector3(0,1,0));i.setFromRotationMatrix(u);const y=.15;if(K[t].currentRotation.slerp(i,y),r.quaternion.copy(K[t].currentRotation),p>.9){const e=r.material;e&&!Array.isArray(e)&&(e.opacity=1-(p-.9)/.1)}else{const e=r.material;e&&!Array.isArray(e)&&(e.opacity=1)}}else r.visible=!1,K[t].hasBeenTriggered=!1;const g=V-l,d=v+.07*g,m=V-.15*g;let A=0;w>=v&&w<d?A=(w-v)/(d-v):w>=d&&w<m?A=1:w>=m&&w<=V&&(A=1-(w-m)/(V-m));const T=h+.07*g;let P=0;w>=h&&w<T?P=(w-h)/(T-h)*.8:w>=T&&w<m?P=.8:w>=m&&w<=V&&(P=.8*(1-(w-m)/(V-m)));A>(K[t].ghostTextOpacity||0)?K[t].ghostTextOpacity=(K[t].ghostTextOpacity||0)+.2*(A-(K[t].ghostTextOpacity||0)):K[t].ghostTextOpacity=(K[t].ghostTextOpacity||0)+.1*(A-(K[t].ghostTextOpacity||0)),P>(K[t].camTextOpacity||0)?K[t].camTextOpacity=(K[t].camTextOpacity||0)+.2*(P-(K[t].camTextOpacity||0)):K[t].camTextOpacity=(K[t].camTextOpacity||0)+.1*(P-(K[t].camTextOpacity||0));const f=Math.max(0,Math.min(1,Math.round(1e3*(K[t].ghostTextOpacity||0))/1e3)),M=Math.max(0,Math.min(1,Math.round(1e3*(K[t].camTextOpacity||0))/1e3));f>.01?(u.classList.contains("hidden")&&u.classList.remove("hidden"),u.style.opacity=f.toString()):f<=.01&&!u.classList.contains("hidden")&&(u.classList.add("hidden"),u.style.opacity="0"),M>.01?(y.classList.contains("hidden")&&y.classList.remove("hidden"),y.style.opacity=M.toString()):M<=.01&&!y.classList.contains("hidden")&&(y.classList.add("hidden"),y.style.opacity="0"),K[t].lastProgress=w}(o,c,p,t)}))}(r),function(t){const r=Z.cameraPOVPath.getPointAt(t);V.position.copy(r),V.fov=80;const o=Z.cameraPOVPath.getTangentAt(t).normalize();(function(t,r,o){"none"===l.style.display&&t<.99&&(l.style.display="block"),0===t?V.lookAt(new e.Vector3(V.position.x,2,V.position.z)):V.lookAt(o)})(t,0,r.clone().add(o)),V.updateProjectionMatrix()}(t),_.previousCameraPosition.copy(r)):_.previousCameraPosition=r.clone()}function te(){!function(e,t){Object.entries(e).forEach((([e,r])=>{r&&!t.children.includes(r)&&(console.log(`Adding ${e} back to scene`),t.add(r))}))}(O,a),Object.entries(O).forEach((([t,r])=>{if("pacman"!==t){K[t]&&(K[t].hasBeenTriggered=!1,K[t].hasBeenDeactivated=!1,K[t].active=!1);const o=K[t]?K[t].parent:null;if(o){o.classList.add("hidden");const e=o.querySelector(".cmp--pov-cam");e&&(e.classList.add("hidden"),e.style.opacity="0"),o.style.opacity="0"}if(r.visible=!0,r instanceof e.Mesh&&r.material&&(Array.isArray(r.material)?r.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==r.material.transparent&&(r.material.opacity=1)),r.scale.set(1,1,1),_.homeAnimationPositions[t]){r.position.copy(_.homeAnimationPositions[t].position);const o=(new e.Vector3).addVectors(r.position,_.homeAnimationPositions[t].lookAt);r.lookAt(o)}}})),S.visible=!0,_.animationRunning=!0}function re(t=!1){Object.entries(O).forEach((([t,r])=>{if("pacman"!==t){r.scale.set(1,1,1),r instanceof e.Mesh&&r.material&&(Array.isArray(r.material)?r.material.forEach((e=>{void 0!==e.transparent&&(e.opacity=1)})):void 0!==r.material.transparent&&(r.material.opacity=1)),r.visible=!1;const{parent:o}=K[t];if(o){const e=o,r=o.querySelector(".cmp--pov-cam");e.classList.add("hidden"),r&&r.classList.add("hidden"),K[t].active=!1}}})),function(e=!1){S.visible=!0,_.rotationStarted=!1,_.cachedStartYAngle=null,_.startEndProgress=0,_.startedInitEndScreen=!1,e?_.endScreenPassed=!1:(l.style.display="none",V.lookAt(s.finalLookAt),_.endScreenPassed=!0)}(t)}function oe(){const e=Date.now()-_.timeOffset;if(_.animationRunning){const t=e/6e3%6/6,r=N("home");S.visible||(S.visible=!0);const o=y.getDelta();C&&C.update(o),Object.entries(O).forEach((([e,o])=>{const c=r[e];if(Z[c]){const r=Z[c].getPointAt(t);o.position.copy(r);const p=Z[c].getTangentAt(t).normalize();if(o.lookAt(r.clone().add(p)),"pacman"===e){const e=Math.atan2(p.x,p.z);void 0===o.previousZRotation&&(o.previousZRotation=e);let t=e-o.previousZRotation;t>Math.PI?t-=2*Math.PI:t<-Math.PI&&(t+=2*Math.PI);const r=.1,c=o.previousZRotation+t*r;o.previousZRotation=c,o.rotation.set(Math.PI/2,Math.PI,c+Math.PI/2)}}}))}i.render(a,V),requestAnimationFrame(oe)}function ce(){console.log("=== GSAP DEBUG ==="),console.log("GSAP available:",!!J),console.log("ScrollTrigger available:",!!window.ScrollTrigger),console.log("cameraHomePath available:",!!Y),console.log("camera available:",!!V),console.log("startQuaternion available:",!!g),console.log("endQuaternion available:",!!d),J?(J&&(J.set(".cmp--scroll",{display:"block"}),window.scrollY>0&&J.set(".cmp--scroll",{opacity:1,y:0}),setTimeout((()=>{J.to(".cmp--scroll",{opacity:0,y:"1em",duration:.25,onComplete:()=>{J.set(".cmp--scroll",{display:"none"})},scrollTrigger:{trigger:".sc--home.sc",start:"top top",toggleActions:"play none none reverse"}})}),1e4)),J&&(J&&J.fromTo(".sc_h--intro",{scale:0,opacity:0},{scale:1.5,opacity:0,scrollTrigger:{trigger:".sc--intro",start:"top top",end:"center center",scrub:.5},ease:"none",keyframes:[{scale:0,opacity:0,duration:0},{scale:.8,opacity:1,duration:.3},{scale:1.2,opacity:1,duration:.4},{scale:1.5,opacity:0,duration:.3}]}),J.timeline({scrollTrigger:{trigger:".sc--intro",start:"center center",end:"bottom bottom",scrub:.5,onEnter:()=>{J.killTweensOf(V.position),V.position.set(.55,-5,.45),V.updateMatrix(),V.updateMatrixWorld()}}}).fromTo(".sc_b--intro",{scale:.5,opacity:0},{keyframes:[{scale:.5,opacity:0,duration:0},{scale:.8,opacity:1,duration:.3},{scale:1.2,opacity:1,duration:.4},{scale:1.5,opacity:0,duration:.3}]})),console.log("=== INIT CAMERA HOME DEBUG ==="),console.log("camera:",!!V),console.log("cameraHomePath:",!!Y),console.log("startQuaternion:",!!g),console.log("endQuaternion:",!!d),J&&V&&Y&&g&&d?J.timeline({scrollTrigger:{trigger:".sc--home",start:"top top",end:"bottom top",scrub:.5}}).to({t:0},{t:1,immediateRender:!1,onUpdate:function(){const t=this.targets()[0].t,r=Y.getPoint(t);V.position.copy(r),V.fov=50;const o=new e.Quaternion;o.slerpQuaternions(g,d,t),V.quaternion.copy(o),t>.98&&(_.cachedHomeEndRotation=V.quaternion.clone()),V.updateProjectionMatrix()}}):console.warn("Camera animation variables not ready or GSAP not available"),O&&V&&Z.cameraPOVPath&&g&&d?J&&J.timeline({scrollTrigger:{trigger:".sc--pov",start:"top bottom",end:"bottom top",endTrigger:".sc--final",scrub:.5,toggleActions:"play none none reverse",onLeave:te,onLeaveBack:te}}).to({progress:0},{progress:1,immediateRender:!1,onStart:X,onUpdate:ee,onReverseComplete:()=>re(!0),onComplete:re}):console.warn("Animation resources not ready")):console.warn("GSAP not available, skipping scroll animations")}class pe{constructor(){this.initialized=!1,this.init()}async init(){try{console.log("Initializing CAM 3D Animation..."),this.initCore(),await this.loadAssets(),this.setupAnimations(),this.start(),this.initialized=!0,console.log("CAM 3D Animation initialized successfully")}catch(e){console.error("Failed to initialize CAM 3D Animation:",e),this.startBasicAnimation()}}initCore(){t?i.setPixelRatio(Math.min(window.devicePixelRatio,2)):i.setPixelRatio(window.devicePixelRatio),i.shadowMap.enabled=!0,i.shadowMap.type=e.PCFSoftShadowMap,i.shadowMap.enabled=!0,i.shadowMap.type=e.PCFSoftShadowMap,i.setSize(u.clientWidth,u.clientHeight),u.appendChild(i.domElement),window.addEventListener("load",w),window.addEventListener("resize",w),function(){const t=new e.AmbientLight(16777215);a.add(t);const r=new e.DirectionalLight(16777215,.8);a.add(r),r.position.set(-5,15,10),r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.camera.left=-20,r.shadow.camera.right=20,r.shadow.camera.top=20,r.shadow.camera.bottom=-20,r.shadow.camera.near=.1,r.shadow.camera.far=50,r.shadow.bias=-.001,r.shadow.radius=3,r.castShadow=!0}(),V.position.copy(o),V.lookAt(c),window.addEventListener("resize",(()=>{V.aspect=window.innerWidth/window.innerHeight,V.updateProjectionMatrix()})),window.addEventListener("scroll",(()=>{const t=window.scrollY;_.isMovingForward,_.isMovingForward=t>_.oldTop,_.oldTop=t,_.homePositionsSaved||0!==window.scrollY||(_.homePositionsSaved=!0,Object.entries(O).forEach((([t,r])=>{_.homeAnimationPositions[t]={position:r.position.clone(),lookAt:r.getWorldDirection(new e.Vector3).clone(),rotation:r.rotation.clone()}}))),window.scrollY>0&&_.animationRunning?(_.pauseTime=Date.now(),_.animationRunning=!1):0!==window.scrollY||_.animationRunning||(_.pauseTime&&(_.timeOffset+=Date.now()-_.pauseTime),_.animationRunning=!0,_.scrollTimeout&&(clearTimeout(_.scrollTimeout),_.scrollTimeout=null))})),window.addEventListener("load",(()=>{console.log("Application loaded")}))}async loadAssets(){console.log("Loading 3D assets..."),await new Promise(((t,r)=>{if(!b)return console.warn("GLTFLoader not available. Please include GLTFLoader script."),void t();b.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(r){const o=r.scene,c=[];o.traverse((t=>{if(function(t,r,o){if("CAM-Pacman"===t.name){const c=[];t.traverse((t=>{t instanceof e.Mesh&&"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name?(t.material=x[t.name]||x.default,c.push(t)):"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name||(t.visible=!1,t instanceof e.Mesh&&(t.morphTargetInfluences&&(t.morphTargetInfluences=[]),t.morphTargetDictionary&&(t.morphTargetDictionary={})),t.userData.skipAnimation=!0),r.push(t.name)})),c.forEach((e=>O.pacman.add(e))),O.pacman.scale.set(.05,.05,.05),O.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),C=new e.AnimationMixer(O.pacman);const p={};o.animations.forEach((e=>{if(e.tracks.some((e=>e.name.includes("CAM-Pacman_Shell")&&e.name.includes("morphTargetInfluences"))))return void console.log("Skipping problematic animation clip:",e.name);const t=C.clipAction(e);t.getMixer().addEventListener("loop",(function(e){e.action.getRoot().traverse((function(e){e.userData&&e.userData.skipAnimation&&(e.updateMorphTargets=function(){})}))})),p[e.name]=t,t.setEffectiveWeight(0),t.play()})),Object.values(p).forEach((e=>{e.setEffectiveWeight(1)}))}}(t,c,r),function(t){if(L[t.name]){const r=L[t.name],o=new e.Group;t.rotation.z=Math.PI,t.rotation.x=Math.PI/2,t.scale.set(.75,.75,.75);const c=[];t.traverse((t=>{t instanceof e.Mesh&&(t.name.startsWith("Ghost_Mesh")?t.material=P:["EUR","CHF","YEN","USD","GBP"].includes(t.name)&&(t.visible=!1),c.push(t))})),c.forEach((e=>{e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh")?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),(r instanceof e.Mesh||r instanceof e.Group)&&r.add(o)}}(t),t instanceof e.Mesh)if("CAM-Arena_LowRes_Top"===t.name)t.material=T,t.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===t.name)t.material=A,t.castShadow=!0;else if("CAM-Floor"===t.name){const r=t.clone();t.position.y=-.1,t.position.x=0,t.position.z=0,t.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),t.receiveShadow=!1,t.castShadow=!0,t.scale.set(.5,.5,.5),r.material=f,r.position.y=-.5,r.receiveShadow=!0,a.add(r)}else c.includes(t.name)||(t.visible=!1)})),o.traverse((function(t){t instanceof e.Mesh&&(t.castShadow=!0,t.receiveShadow=!0)})),a.add(o),o.position.set(.5,.5,.5),t()}),void 0,(function(e){console.error("Fehler beim Laden des 3D-Modells:",e),console.warn("Continuing without 3D model..."),t()}))})),console.log("3D assets loaded successfully")}setupAnimations(){console.log("Setting up animations..."),setTimeout((()=>{ce()}),200)}start(){console.log("Starting animation loop..."),this.startBasicAnimation(),_.animationRunning=0===window.scrollY}startBasicAnimation(){oe(),_.animationRunning=0===window.scrollY,i.render(a,V)}getInitializationStatus(){return this.initialized}restart(){this.initialized&&(_.animationRunning=!0,oe())}pause(){_.animationRunning=!1}resume(){_.animationRunning=!0}}if(document.addEventListener("DOMContentLoaded",(()=>{const e=new pe;window.CAMApp=e})),"loading"===document.readyState);else{const e=new pe;window.CAMApp=e}})();
//# sourceMappingURL=script.js.map