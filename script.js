(()=>{"use strict";var e,t,r={352:e=>{e.exports=gsap},774:e=>{e.exports=ScrollTrigger}},o={};function c(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e](n,n.exports,c),n.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,c.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"==typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"==typeof r.then)return r}var n=Object.create(null);c.r(n);var p={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>p[e]=()=>r[e]));return p.default=()=>r,c.d(n,p),n},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};const n=THREE,p=window.innerWidth<768,s=new n.Vector3(.55675,.45,.45175),i=(new n.Vector3(.65725,.55,.75325),new n.Vector3(.9085,.55,.8035),new n.Vector3(.75775,.55,1.05475),new n.Vector3(.65725,.55,1.0045),new n.Vector3(.15475,.55,1.15525),{startMobile:new n.Vector3(.5,2.5,2.5),startDesktop:new n.Vector3(-2,2.5,2),secondMobile:new n.Vector3(.5,2.5,2),secondDesktop:new n.Vector3(-1.5,3,2),mobileLookAt:new n.Vector3(.5,.5,-1.5),desktopLookAt:new n.Vector3(-1.25,.5,.25)}),a=p?i.startMobile:i.startDesktop,u=p?i.secondMobile:i.secondDesktop,y=p?i.mobileLookAt:i.desktopLookAt,l=".sc--home.sc",w={mazeContainer:document.querySelector(".el--home-maze.el"),canvas:document.querySelector("canvas"),finalSection:document.querySelector(".sc--final.sc"),finalContainer:document.querySelector(".cr--final.cr"),parentElements:document.querySelectorAll(".cmp--pov.cmp")},v=new n.Scene,h=new n.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),g=new n.Clock;function V(){const e=Math.min(window.devicePixelRatio,p?2:3);h.setPixelRatio(e),w.mazeContainer?h.setSize(w.mazeContainer.clientWidth,w.mazeContainer.clientHeight):h.setSize(window.innerWidth,window.innerHeight)}const d=new n.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3);d.quaternion.clone();const m=(new n.Quaternion).setFromEuler(new n.Euler(-1.5708,0,0)),A=(new n.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),T=new n.MeshMatcapMaterial({matcap:A}),f=new n.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),P=new n.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:n.NormalBlending,side:n.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),M=new n.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),S={blue:new n.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new n.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new n.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},x={CAM_Pacman_Backframe:S.blue,"CAM-Pacman_Bitcoin_1":S.white,"CAM-Pacman_Bitcoin_2":S.white,"CAM-Pacman_Bottom":S.blue,"CAM-Pacman_Top":S.blue,"CAM-Pacman_Eye":S.white,CAM_Pacman_Logo_1:S.white,CAM_Pacman_Logo_2:S.white,"CAM-Pacman_Shell_Boolean":S.blue,"CAM-Pacman_Shell":S.blue,"CAM-Pacman_Bottom_electronic":S.white,"CAM-Pacman_Top_electronic":S.white,"CAM-Pacman_Bottom_Text":S.white,"CAM-Pacman_Top_Text":S.white,default:S.blue},b=(Array(5).fill(P),new n.GLTFLoader);let O;const C=new n.Group;v.add(C);const E={pacman:C,ghost1:new n.Mesh(new n.BufferGeometry,P),ghost2:new n.Mesh(new n.BufferGeometry,P),ghost3:new n.Mesh(new n.BufferGeometry,P),ghost4:new n.Mesh(new n.BufferGeometry,P),ghost5:new n.Mesh(new n.BufferGeometry,P)},$={Ghost_EUR:E.ghost1,Ghost_CHF:E.ghost2,Ghost_YEN:E.ghost3,Ghost_USD:E.ghost4,Ghost_GBP:E.ghost5};Object.values(E).forEach((e=>v.add(e)));const z=[{pos:new n.Vector3(.25525,.55,.6025),type:"straight"},{pos:new n.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,.1),type:"straight"},{pos:new n.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new n.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new n.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new n.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new n.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new n.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new n.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new n.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new n.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new n.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new n.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.25525,.55,.6025),type:"straight"}],_=[{pos:new n.Vector3(-.44825,.55,.502),type:"straight"},{pos:new n.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new n.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new n.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.25525,.55,.301),type:"straight"},{pos:new n.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.75775,.55,.8035),type:"straight"},{pos:new n.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.46125,.55,.703),type:"straight"},{pos:new n.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new n.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.25525,.55,.301),type:"straight"},{pos:new n.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new n.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new n.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.44825,.55,.703),type:"straight"},{pos:new n.Vector3(-.44825,.55,.502),type:"straight"}],F=[{pos:new n.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new n.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new n.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.25525,.55,.502),type:"straight"},{pos:new n.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new n.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new n.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new n.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new n.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.85825,.55,.1),type:"straight"},{pos:new n.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new n.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.25525,.55,.301),type:"straight"},{pos:new n.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new n.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"}],B=[{pos:new n.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.85825,.55,.703),type:"straight"},{pos:new n.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new n.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new n.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.55675,.55,.2005),type:"straight"},{pos:new n.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.46125,.55,.301),type:"straight"},{pos:new n.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.95875,.55,.904),type:"straight"},{pos:new n.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.75775,.55,1.105),type:"straight"},{pos:new n.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new n.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.808,.55,.8035),type:"curve",curveType:"upperArc"}],L=[{pos:new n.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new n.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.95875,.55,.8035),type:"straight"},{pos:new n.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new n.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new n.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.44825,.55,.703),type:"straight"},{pos:new n.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new n.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,.2005),type:"straight"},{pos:new n.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.85825,.55,.1),type:"straight"},{pos:new n.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new n.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.46125,.55,.1),type:"straight"},{pos:new n.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new n.Vector3(1.05925,.55,.4015),type:"straight"}],k=[{pos:new n.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new n.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new n.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new n.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new n.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new n.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new n.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new n.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new n.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new n.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new n.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.85825,.55,.1),type:"straight"},{pos:new n.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],H=[{pos:new n.Vector3(.55675,-.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new n.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.7075,.55,.8035),type:"straight"},{pos:new n.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.95875,.55,.85375),type:"straight"},{pos:new n.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new n.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new n.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new n.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new n.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.205,.55,1.2055),type:"straight"},{pos:new n.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(-.44825,1,2.0095),type:"straight"}],j=[{pos:new n.Vector3(1.05925,.55,.703),type:"straight"},{pos:new n.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(1.009,.55,.8035),type:"straight"},{pos:new n.Vector3(.9085,.55,.8035),type:"straight"}],q=[{pos:new n.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new n.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new n.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new n.Vector3(.95875,.55,1.05475),type:"straight"}],I=[{pos:new n.Vector3(.35575,.55,.904),type:"straight"},{pos:new n.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.406,.55,1.0045),type:"straight"},{pos:new n.Vector3(.5065,.55,1.0045),type:"straight"}],G=[{pos:new n.Vector3(.15475,.55,1.105),type:"straight"},{pos:new n.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.205,.55,1.0045),type:"straight"},{pos:new n.Vector3(.3055,.55,1.0045),type:"straight"}],R=[{pos:new n.Vector3(.55675,.55,1.306),type:"straight"},{pos:new n.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new n.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new n.Vector3(.406,.55,1.2055),type:"straight"}],D=(new n.CubicBezierCurve3(a,u,new n.Vector3(.55675,3,.45175),new n.Vector3(.55675,.5,.45175)),{pacmanHome:U(z),ghost1Home:U(_),ghost2Home:U(F),ghost3Home:U(B),ghost4Home:U(L),ghost5Home:U(k),cameraPOV:U(H),ghost1POV:U(j),ghost2POV:U(q),ghost3POV:U(I),ghost4POV:U(G),ghost5POV:U(R)});function U(e){const t=new n.CurvePath;for(let r=0;r<e.length-1;r++){const o=e[r],c=e[r+1];if("straight"===o.type){const e=new n.LineCurve3(o.pos,c.pos);t.add(e)}else if("curve"===o.type){let e;e="upperArc"===o.curveType?new n.Vector3(o.pos.x,o.pos.y,c.pos.z):"lowerArc"===o.curveType?new n.Vector3(c.pos.x,o.pos.y,o.pos.z):"forwardDownArc"===o.curveType?new n.Vector3(o.pos.x,c.pos.y,o.pos.z):new n.Vector3(o.pos.x,o.pos.y,c.pos.z);const r=new n.QuadraticBezierCurve3(o.pos,e,c.pos);t.add(r)}}return t}function Q(e){return"home"===e?{pacman:D.pacmanHome,ghost1:D.ghost1Home,ghost2:D.ghost2Home,ghost3:D.ghost3Home,ghost4:D.ghost4Home,ghost5:D.ghost5Home}:"pov"===e?{pacman:D.cameraPOV,ghost1:D.ghost1POV,ghost2:D.ghost2POV,ghost3:D.ghost3POV,ghost4:D.ghost4POV,ghost5:D.ghost5POV}:{}}const W={mazeContainer:document.querySelector(".el--home-maze.el"),canvas:document.querySelector("canvas"),homeSection:document.querySelector(".sc--home.sc"),introSection:document.querySelector(".sc--intro.sc"),introHeader:document.querySelector(".sc_h--intro"),introBody:document.querySelector(".sc_b--intro"),povSection:document.querySelector(".sc--pov.sc"),finalSection:document.querySelector(".sc--final.sc"),finalContainer:document.querySelector(".cr--final.cr"),parentElements:document.querySelectorAll(".cmp--pov.cmp")},N={ghost1:{triggerPos:new n.Vector3(.65725,.55,.75325),ghostTextPos:new n.Vector3(.7075,.55,.8035),camTextPos:new n.Vector3(.75775,.55,.8035),endPosition:new n.Vector3(.85825,.55,.8035),parent:W.parentElements[0]||null,active:!1},ghost2:{triggerPos:new n.Vector3(.9085,.55,.8035),ghostTextPos:new n.Vector3(.95875,.55,.85375),camTextPos:new n.Vector3(.95875,.55,.904),endPosition:new n.Vector3(.95875,.55,1.0045),parent:W.parentElements[1]||null,active:!1},ghost3:{triggerPos:new n.Vector3(.75775,.55,1.05475),ghostTextPos:new n.Vector3(.7075,.55,1.0045),camTextPos:new n.Vector3(.65725,.55,1.0045),endPosition:new n.Vector3(.55675,.55,1.0045),parent:W.parentElements[2]||null,active:!1},ghost4:{triggerPos:new n.Vector3(.65725,.55,1.0045),ghostTextPos:new n.Vector3(.5065,.55,1.0045),camTextPos:new n.Vector3(.45625,.55,1.0045),endPosition:new n.Vector3(.35575,.55,1.0045),parent:W.parentElements[3]||null,active:!1},ghost5:{triggerPos:new n.Vector3(.15475,.55,1.15525),ghostTextPos:new n.Vector3(.205,.55,1.2055),camTextPos:new n.Vector3(.25525,.55,1.2055),endPosition:new n.Vector3(.35575,.55,1.2055),parent:W.parentElements[4]||null,active:!1}};let Y=!1;const J=Q("pov");Object.entries(J).forEach((([e,t])=>{for(let e=0;e<=10;e++){const r=e/10;t.getPointAt(r)}}));const K=["ghost1","ghost2","ghost3","ghost4","ghost5"];let X=null;const Z={};function ee(e,t=2e3){if(!J.pacman)return 0;let r=1/0,o=0;for(let c=0;c<=t;c++){const n=c/t,p=J.pacman.getPointAt(n).distanceTo(e);p<r&&(r=p,o=n)}return o}function te(e){console.log(`POV update called: progress=${e.toFixed(3)}, isPOVActive=${Y}`),Y=!0;const t=e;!function(e){if(console.log(`updatePOVCamera called with progress: ${e}`),!J.pacman)return void console.error("POV camera path not found!");const t=J.pacman.getPointAt(e);console.log(`Camera position: ${t.x.toFixed(3)}, ${t.y.toFixed(3)}, ${t.z.toFixed(3)}`),d.position.copy(t);const r=J.pacman.getTangentAt(e).normalize();if(t.clone().add(r),console.log(`Tangent: ${r.x.toFixed(3)}, ${r.y.toFixed(3)}, ${r.z.toFixed(3)}`),0===e)d.lookAt(new n.Vector3(d.position.x,2,d.position.z)),console.log("Camera: Initial position");else if(e<.1){const t=e/.1,r=new n.Vector3(d.position.x,1,d.position.z),o=new n.Vector3(d.position.x,.5,d.position.z+1),c=new n.Vector3;c.lerpVectors(r,o,oe(t)),d.lookAt(c),console.log("Camera: Entry transition")}else{const r=Math.min(e+.02,1),o=J.pacman.getPointAt(r),c=(new n.Vector3).subVectors(o,t).normalize(),p=new n.Vector3(0,.05,0),s=(new n.Vector3).addVectors(c,p).normalize();!function(e){const t=new n.Matrix4;t.lookAt(d.position,e,d.up);const r=(new n.Quaternion).setFromRotationMatrix(t);if(!X)return d.quaternion.copy(r),void(X=r.clone());d.quaternion.slerpQuaternions(X,r,.3),X.copy(d.quaternion)}(t.clone().add(s)),console.log("Camera: Normal path following")}d.fov=80,d.updateProjectionMatrix(),d.updateMatrixWorld(),console.log(`Camera FOV: ${d.fov}, Final position: ${d.position.x.toFixed(3)}, ${d.position.y.toFixed(3)}, ${d.position.z.toFixed(3)}`)}(t),K.forEach((e=>{const r=E[e],o=J[e];if(r&&o){const c=N[e];if(!c)return;const p=ee(J.pacman.getPointAt(t));void 0===c.triggerCameraProgress&&(c.triggerCameraProgress=ee(c.triggerPos),c.ghostTextCameraProgress=ee(c.ghostTextPos),c.camTextCameraProgress=ee(c.camTextPos),c.endCameraProgress=ee(c.endPosition));const s=c.triggerCameraProgress,i=c.endCameraProgress;if(p>=s&&p<=i){r.visible=!0,r.scale.set(.5,.5,.5);const t=(p-s)/(i-s),c=oe(oe(Math.max(0,Math.min(1,t)))),a=o.getPointAt(c);r.position.copy(a);const u=o.getTangentAt(c).normalize(),y=Math.min(c+.05,1),l=o.getTangentAt(y).normalize(),w=(new n.Vector3).addVectors(u.clone().multiplyScalar(.7),l.clone().multiplyScalar(.3)).normalize(),v=r.position.clone().add(w);if(r.lookAt(v),c>.95){const t=1-(c-.95)/.05;Y&&r instanceof n.Group&&(console.log(`POV Fade: ghost=${e}, progress=${c.toFixed(3)}, fadeOpacity=${t.toFixed(3)}`),r.traverse((e=>{e.material&&(Array.isArray(e.material)?e.material:[e.material]).forEach((e=>{e&&"opacity"in e&&(e.opacity=Math.max(0,Math.min(1,t)),e.transparent=t<1,e.needsUpdate=!0)}))})))}else{const t=document.querySelector(".sc--home"),o=t&&t.getBoundingClientRect().bottom>0;Y&&!o&&r instanceof n.Group&&(console.log(`POV Reset: ghost=${e}, progress=${c.toFixed(3)}, setting opacity=1, isInHomeSection=${o}`),r.traverse((e=>{e.material&&(Array.isArray(e.material)?e.material:[e.material]).forEach((e=>{e&&"opacity"in e&&(e.opacity=1,e.transparent=!1,e.needsUpdate=!0)}))})))}}else r.visible=!1}})),function(e){if(!J.pacman)return;const t=J.pacman.getPointAt(e);Object.entries(N).forEach((([e,r])=>{const o=Z[e],c=ee(t);void 0===o.triggerCameraProgress&&(o.triggerCameraProgress=ee(r.triggerPos),o.ghostTextCameraProgress=ee(r.ghostTextPos),o.camTextCameraProgress=ee(r.camTextPos),o.endCameraProgress=ee(r.endPosition));let n=0,p=0;if(c>=o.triggerCameraProgress){const e=o.endCameraProgress-o.triggerCameraProgress,t=o.ghostTextCameraProgress,r=t+.07*e,s=o.endCameraProgress-.15*e,i=o.endCameraProgress;if(c>=t&&c<r?n=(c-t)/(r-t):c>=r&&c<s?n=1:c>=s&&c<=i&&(n=1-(c-s)/(i-s)),c>=o.camTextCameraProgress){const t=o.camTextCameraProgress,r=t+.07*e;c>=t&&c<r?p=(c-t)/(r-t):c>=r&&c<s?p=1:c>=s&&c<=i&&(p=1*(1-(c-s)/(i-s)))}}n>o.ghostTextOpacity?o.ghostTextOpacity+=.2*(n-o.ghostTextOpacity):o.ghostTextOpacity+=.1*(n-o.ghostTextOpacity),p>o.camTextOpacity?o.camTextOpacity+=.2*(p-o.camTextOpacity):o.camTextOpacity+=.1*(p-o.camTextOpacity),function(e,t){if(!e.parent)return;const r=e.parent.querySelectorAll(".pov"),o=e.parent.querySelectorAll(".cam"),c=e.parent,n=Math.max(0,Math.min(1,Math.round(1e3*t.ghostTextOpacity)/1e3));n>.01?(c.style.opacity=n.toString(),c.style.visibility="visible",c.style.pointerEvents="auto",c.style.transition="opacity 0.3s ease-in-out"):(c.style.opacity="0",c.style.visibility="hidden",c.style.pointerEvents="none",c.style.transition="opacity 0.3s ease-in-out");const p=Math.max(0,Math.min(1,Math.round(1e3*t.camTextOpacity)/1e3));r.forEach((e=>{const t=e;if(p>.01){const e=1-p;t.style.opacity=e.toString(),t.style.visibility="visible",t.style.transition="opacity 0.4s ease-in-out",p>=.99&&(t.style.opacity="0",t.style.visibility="hidden")}else t.style.opacity="1",t.style.visibility="visible",t.style.transition="opacity 0.4s ease-in-out"})),o.forEach((e=>{const t=e;p>.01?(t.style.display="block",t.style.opacity=p.toString(),t.style.visibility="visible",t.style.transition="opacity 0.4s ease-in-out",p>=.99&&(t.style.opacity="1",t.style.visibility="visible")):(t.style.opacity="0",t.style.visibility="hidden",t.style.display="none",t.style.transition="opacity 0.4s ease-in-out")}))}(r,o)}))}(t)}function re(){console.log("Stopping POV Animation..."),Y=!1,d.fov=50,d.updateProjectionMatrix(),K.forEach((e=>{const t=E[e];t&&t.scale.set(1,1,1)})),Object.entries(N).forEach((([e,t])=>{if(t.parent){const e=t.parent;e.style.opacity="0",e.style.visibility="hidden",e.style.pointerEvents="none";const r=e.querySelectorAll(".pov"),o=e.querySelectorAll(".cam");r.forEach((e=>{const t=e;t.style.opacity="0",t.style.visibility="hidden"})),o.forEach((e=>{const t=e;t.style.opacity="0",t.style.visibility="hidden",t.style.display="none"}))}})),Object.keys(Z).forEach((e=>{Z[e]={ghostTextOpacity:0,camTextOpacity:0,active:!1}})),console.log("POV Animation stopped")}function oe(e){return e*e*(3-2*e)}Object.keys(N).forEach((e=>{Z[e]={ghostTextOpacity:0,camTextOpacity:0,active:!1}}));const ce={ghost1:1.4,ghost2:1.3,ghost3:1.2,ghost4:1.1,ghost5:1,pacman:.9};let ne="HOME",pe=0,se=0,ie={},ae={},ue={},ye=null,le=null,we=!1,ve=!1,he=0,ge=!1,Ve=0,de={},me={};const Ae=["pacman","ghost1","ghost2","ghost3","ghost4","ghost5"],Te=Q("home");function fe(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}function Pe(e,t){let r=!1;const o=(new Date).toISOString().split("T")[1].split(".")[0];function c(e){e.material&&(Array.isArray(e.material)?e.material:[e.material]).forEach((c=>{if(c)if(c.isMeshBasicMaterial||c.isMeshStandardMaterial||c.isMeshPhysicalMaterial||c.isMeshMatcapMaterial){const n=c.opacity;c.opacity=t,c.transparent=t<1,c.depthWrite=1===t,c.needsUpdate=!0,r=!0,(t<1||n!==t)&&console.log(`[${o}] Set opacity ${t.toFixed(3)} on material: ${c.type||c.constructor.name}, oldOpacity: ${n.toFixed(3)}, mesh: "${e.name||"unnamed"}", caller: ${(new Error).stack?.split("\n")[2]?.trim()||"unknown"}`)}else if(c.isShaderMaterial)c.uniforms&&c.uniforms.opacity&&(c.uniforms.opacity.value=t,c.needsUpdate=!0,r=!0);else if("opacity"in c){const n=c.opacity;c.opacity=t,c.transparent=t<1,c.depthWrite=1===t,c.needsUpdate=!0,r=!0,(t<1||n!==t)&&console.log(`[${o}] Set opacity ${t.toFixed(3)} on fallback material, oldOpacity: ${n.toFixed(3)}, mesh: "${e.name||"unnamed"}", caller: ${(new Error).stack?.split("\n")[2]?.trim()||"unknown"}`)}}))}console.log(`[${o}] setGhostOpacity called on: ${e.type} "${e.name||"unnamed"}", target opacity: ${t.toFixed(3)}`),e instanceof n.Mesh?c(e):e instanceof n.Group&&e.traverse((e=>{e instanceof n.Mesh&&c(e)}))}let Me=0;function Se(e){Math.abs(e-Me)<.001||(se=Math.max(0,Math.min(1,e)),Me=e)}function xe(){h.render(v,d)}function be(){requestAnimationFrame(be);const e=g.getDelta();if(O&&O.update(e),Y){const e=ne;return ne="POV_ANIMATION",e!==ne&&console.log(`Animation state changed: ${e} -> ${ne}`),Object.values(E).forEach((e=>{e.visible=!0})),void xe()}if(ge){const t=ne;ne="TRANSITION",t!==ne&&console.log(`Animation state changed: ${t} -> ${ne}`),function(e){Ve+=e/.5;const t=fe(Math.min(Ve,1));Object.entries(E).forEach((([e,r])=>{if(Ae.includes(e)){const o=Te[e];if(o){const c=o.getPointAt(pe),p=de[e];r.position.lerpVectors(p,c,t);const s=me[e],i=o.getTangentAt(pe).normalize(),a=new n.Euler;if("pacman"===e){const e=Math.atan2(i.x,i.z);a.set(Math.PI/2,Math.PI,e+Math.PI/2)}else a.setFromQuaternion((new n.Quaternion).setFromUnitVectors(new n.Vector3(0,0,1),i));const u=(new n.Quaternion).setFromEuler(s),y=(new n.Quaternion).setFromEuler(a),l=new n.Quaternion;if(l.slerpQuaternions(u,y,t),r.quaternion.copy(l),se<=.01){const t=(new Date).toISOString().split("T")[1].split(".")[0];console.log(`[${t}] Transition: Setting opacity=1 for ghost=${e}, scrollProgress=${se.toFixed(3)}, transitionProgress=${Ve.toFixed(3)}`),Pe(r,1)}}}})),Ve>=1&&(ge=!1,ve=!1)}(e)}else if(se>.01){const e=ne;ne="SCROLL_ANIMATION",e!==ne&&console.log(`Animation state changed: ${e} -> ${ne}, scrollProgress=${se.toFixed(3)}`),ve||(ve||(Object.entries(E).forEach((([e,t])=>{ae[e]=t.position.clone(),ue[e]=t.rotation.clone()})),ie={},Object.entries(ae).forEach((([e,t])=>{const r=s.clone(),o=new n.Vector3((t.x+r.x)/2,(t.y+r.y)/2,(t.z+r.z)/2),c=new n.Vector3(o.x+.3*(o.x-(t.x+r.x)/2),o.y+1.5,o.z+.3*(o.z-(t.z+r.z)/2));ie[e]=new n.QuadraticBezierCurve3(t,c,r)})),ye=new n.CubicBezierCurve3(d.position.clone(),new n.Vector3((d.position.x+s.x)/2,2,(d.position.z+s.z)/2),new n.Vector3(.55675,3,.45175),s.clone()),le=d.quaternion.clone(),ve=!0),he=pe),t=se,Object.entries(E).forEach((([e,r])=>{const o=ce[e]||1;let c=Math.min(t*o,1);const p=ie[e];if(!p)return;const s=p.getPointAt(c);r.position.copy(s);const i=ue[e],a=new n.Euler(-Math.PI/2,0,0),u=(new n.Quaternion).setFromEuler(i),y=(new n.Quaternion).setFromEuler(a),l=new n.Quaternion,w=fe(c);l.slerpQuaternions(u,y,w),r.quaternion.copy(l)})),function(e){if(!ye||!le)return;const t=ye.getPoint(e);d.position.copy(t),d.fov=50,d.updateProjectionMatrix();const r=new n.Quaternion;r.slerpQuaternions(le,m,e),d.quaternion.copy(r)}(se)}else{const t=ne;ne="HOME",t!==ne&&console.log(`Animation state changed: ${t} -> ${ne}, scrollProgress=${se.toFixed(3)}`),ve&&!ge?(ge=!0,Ve=0,de={},me={},Object.entries(E).forEach((([e,t])=>{de[e]=t.position.clone(),me[e]=t.rotation.clone()}))):ge||function(e){pe=(pe+.03*e)%1,Object.entries(E).forEach((([e,t])=>{if(Ae.includes(e)){const r=Te[e];if(r){const o=pe,c=r.getPointAt(o);t.position.copy(c);const n=r.getTangentAt(o).normalize();if(t.lookAt(c.clone().add(n)),"pacman"===e){const e=Math.atan2(n.x,n.z);t.rotation.set(Math.PI/2,Math.PI,e+Math.PI/2)}if(se<=.01){const r=(new Date).toISOString().split("T")[1].split(".")[0];console.log(`[${r}] Home Animation: Setting opacity=1 for ghost=${e}, scrollProgress=${se.toFixed(3)}`),Pe(t,1)}}}}))}(e)}var t;xe()}function Oe(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}function Ce(e){const t=W.introHeader;if(!t)return;let r=0,o=0;if(e>0&&e<1)if(e<=.2){const t=Oe(e/.2);r=.8*t,o=t}else if(e<=.8)r=.8+(e-.2)/.6*.4,o=1;else{const t=(e-.8)/.2;r=1.2+.3*t,o=1-t}else e>=1?(r=1.5,o=0):(r=0,o=0);t.style.setProperty("transform",`scale(${r})`,"important"),t.style.opacity=o.toString()}function Ee(e){const t=W.introBody;if(!t)return;let r=.5,o=0;if(e>0&&e<1)if(e<=.2){const t=Oe(e/.2);r=.5+.3*t,o=t}else if(e<=.8)r=.8+(e-.2)/.6*.4,o=1;else{const t=(e-.8)/.2;r=1.2+.3*t,o=1-t}else e>=1?(r=1.5,o=0):(r=.5,o=0);t.style.setProperty("transform",`scale(${r})`,"important"),t.style.opacity=o.toString()}!async function(){try{p?h.setPixelRatio(Math.min(window.devicePixelRatio,2)):h.setPixelRatio(window.devicePixelRatio),h.shadowMap.enabled=!0,h.shadowMap.type=n.PCFSoftShadowMap,h.shadowMap.enabled=!0,h.shadowMap.type=n.PCFSoftShadowMap,w.mazeContainer?(h.setSize(w.mazeContainer.clientWidth,w.mazeContainer.clientHeight),w.mazeContainer.appendChild(h.domElement)):(h.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(h.domElement)),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",V):V(),window.addEventListener("resize",V),function(){const e=new n.AmbientLight(16777215);v.add(e);const t=new n.DirectionalLight(16777215,.8);v.add(t),t.position.set(-5,15,10),t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,t.shadow.camera.left=-20,t.shadow.camera.right=20,t.shadow.camera.top=20,t.shadow.camera.bottom=-20,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.001,t.shadow.radius=3,t.castShadow=!0}(),d.position.copy(a),d.lookAt(y),window.addEventListener("resize",(()=>{d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix()})),await async function(){return new Promise(((e,t)=>{b.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(t){const r=t.scene;r.traverse((e=>{if("CAM-Pacman"===e.name){const r=[];e.traverse((e=>{if(e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name){const t=x[e.name]||x.default;e.material=t,r.push(e)}else"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1)})),r.forEach((e=>E.pacman.add(e))),E.pacman.scale.set(.075,.075,.075),E.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),O=new n.AnimationMixer(E.pacman);const o={};t.animations.forEach((e=>{const t=O.clipAction(e);o[e.name]=t,t.setEffectiveWeight(1),t.play()}))}else if(e.name&&$[e.name]){const t=$[e.name],r=new n.Group;e.rotation.z=Math.PI,e.rotation.x=Math.PI/2,e.scale.set(.75,.75,.75);const o=[];e.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=P:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),o.push(e))})),o.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),r.add(e)})),t.add(r)}if(e.isMesh)if("CAM-Arena_LowRes_Top"===e.name)e.material=f,e.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===e.name)e.material=T,e.castShadow=!0;else if("CAM-Floor"===e.name){const t=e.clone();e.position.y=-.1,e.position.x=0,e.position.z=0,e.material=new n.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:n.FrontSide}),e.receiveShadow=!1,e.castShadow=!0,e.scale.set(.5,.5,.5),t.material=M,t.position.y=-.5,t.receiveShadow=!0,v.add(t)}})),r.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),v.add(r),r.position.set(.5,.5,.5),e()}),(function(e){}),(function(e){t(e)}))}))}(),ne="HOME",pe=0,se=0,be(),async function(){try{const e=await Promise.resolve().then(c.t.bind(c,352,23)),t=await Promise.resolve().then(c.t.bind(c,774,23)),r=e.gsap||e.default,o=t.ScrollTrigger||t.default;if(!r||!o)throw new Error("GSAP modules not loaded properly");r.registerPlugin(o);const n=document.querySelector(l);if(!n)return void console.warn("Home section not found, scroll animation disabled");r.timeline({scrollTrigger:{trigger:n,start:"top top",end:"bottom top",scrub:1}}).to({},{duration:1,onUpdate:function(){const e=this.progress();Se(e);let t=1;if(e>=.5&&(t=1-(e-.5)/.5,t=Math.max(0,t)),e>=.45){const r=(new Date).toISOString().split("T")[1].split(".")[0];console.log(`[${r}] GSAP Fade: progress=${e.toFixed(3)}, fadeOpacity=${t.toFixed(3)}, scrollProgress=${se.toFixed(3)}`)}Object.values(E).forEach((e=>{Pe(e,t)}))}}),we=!0}catch(e){console.error("❌ GSAP ScrollTrigger setup failed:",e),window.addEventListener("scroll",(()=>{const e=document.querySelector(l);if(e){const t=e.getBoundingClientRect();Se(Math.max(0,Math.min(1,1-t.bottom/window.innerHeight)))}}))}}(),async function(){try{const e=await Promise.resolve().then(c.t.bind(c,352,23)),t=await Promise.resolve().then(c.t.bind(c,774,23)),r=e.gsap||e.default,o=t.ScrollTrigger||t.default;if(!r||!o)throw new Error("GSAP modules not loaded properly");r.registerPlugin(o),r.config({force3D:!0,nullTargetWarn:!1,autoSleep:60}),o.config({autoRefreshEvents:"visibilitychange,DOMContentLoaded,load",limitCallbacks:!0}),o.create({trigger:W.introSection,start:"top top",end:"center center",scrub:.3,pin:W.introHeader,pinSpacing:!1,invalidateOnRefresh:!0,onUpdate:e=>{Ce(e.progress),Ee(0)},onEnter:()=>W.introHeader.classList.add("intro-centered"),onEnterBack:()=>W.introHeader.classList.add("intro-centered"),onLeave:()=>W.introHeader.classList.remove("intro-centered"),onLeaveBack:()=>W.introHeader.classList.remove("intro-centered")}),o.create({trigger:W.introSection,start:"center center",end:"bottom bottom",scrub:.3,pin:W.introBody,pinSpacing:!1,invalidateOnRefresh:!0,onUpdate:e=>{const t=e.progress;Ce(1),Ee(t)},onEnter:()=>W.introBody.classList.add("intro-centered"),onEnterBack:()=>W.introBody.classList.add("intro-centered"),onLeave:()=>W.introBody.classList.remove("intro-centered"),onLeaveBack:()=>W.introBody.classList.remove("intro-centered")})}catch(e){console.error("❌ GSAP intro animations setup failed:",e),window.addEventListener("scroll",(()=>{if(W.introSection&&W.introHeader&&W.introBody){const e=W.introSection.getBoundingClientRect();if(e.top<=0&&e.bottom>=0){const t=Math.abs(e.top),r=Math.min(1,t/e.height);if(r<=.5)Ce(r/.5),Ee(0);else{const e=(r-.5)/.5;Ce(1),Ee(e)}}else Ce(0),Ee(0)}}))}}(),await async function(){if(console.log("Initializing POV Animation System..."),!W.povSection)return console.error("POV section not found! Check if .sc--pov.sc exists in HTML"),console.log("Available DOM elements:",{homeSection:!!W.homeSection,introSection:!!W.introSection,povSection:!!W.povSection,finalSection:!!W.finalSection}),void console.log("All sections in document:",document.querySelectorAll('[class*="sc--"]'));if(console.log("POV section found:",W.povSection),!J.pacman)return console.error("POV paths not found! Check pathPoints.ts for POV path definitions"),void console.log("Available POV paths:",Object.keys(J));console.log("POV paths loaded successfully:",Object.keys(J));const e=K.filter((e=>!E[e]));e.length>0&&(console.warn("Some ghosts are missing:",e),console.log("Available ghosts:",Object.keys(E)));const t=Object.entries(N).filter((([e,t])=>!t.parent));t.length>0&&(console.warn("Some trigger elements are missing:",t.map((([e])=>e))),console.log("Available parent elements:",W.parentElements.length));const r=await Promise.resolve().then(c.t.bind(c,352,23)),o=await Promise.resolve().then(c.t.bind(c,774,23)),n=r.gsap||r.default,p=o.ScrollTrigger||o.default;n.registerPlugin(p);const s=p.create({trigger:".sc--pov",start:"top top",end:"bottom bottom",scrub:1.2,onUpdate:e=>{const t=e.progress;e.isActive&&(console.log(`POV ScrollTrigger onUpdate: progress=${t.toFixed(3)}, isActive=${e.isActive}`),te(t))},onEnter:()=>{console.log("POV section entered!"),Y=!0},onLeave:()=>{console.log("POV section left!"),re()},onEnterBack:()=>{console.log("POV section entered (backward)!"),Y=!0},onLeaveBack:()=>{console.log("POV section left (backward)!"),re()}});console.log("POV Animation System initialized successfully!"),console.log("ScrollTrigger created:",s),window.testPOV=(e=.5)=>{console.log("=== MANUAL POV TEST ==="),function(e=.5){J.pacman?(J.pacman.getPointAt(e),K.forEach((t=>{const r=J[t],o=E[t];r&&o&&r.getPointAt(e)})),te(e)):console.error("POV camera path not found!")}(e)},window.startPOV=()=>{console.log("=== MANUAL POV START ==="),Y=!0,te(.5)},window.stopPOV=()=>{console.log("=== MANUAL POV STOP ==="),re()}}()}catch(e){console.error("Initialization error:",e)}}()})();
//# sourceMappingURL=script.js.map