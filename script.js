(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=THREE,r=window.innerWidth<768,o=".sc--home.sc",n=".sc--intro.sc",a=".sc--outro.sc",s=".el--home-maze.el",c="canvas",i=o,p=n,l=".sc--pov.sc",u=a,h=".cr--outro.cr",m=".cmp--pov.cmp",y={mazeContainer:document.querySelector(s),canvas:document.querySelector(c),homeSection:document.querySelector(i),introSection:document.querySelector(p),povSection:document.querySelector(l),finalSection:document.querySelector(u),finalContainer:document.querySelector(h),parentElements:document.querySelectorAll(m)},g=gsap;var d=e.n(g);const f=ScrollTrigger;var w=e.n(f);const v={0:-.54875,.5:-.4985,1:-.44825,1.5:-.398,2:-.34775,2.5:-.2975,3:-.24725,3.5:-.197,4:-.14675,4.5:-.0965,5:-.04625,5.5:.004,6:.05425,6.5:.1045,7:.15475,7.5:.205,8:.25525,8.5:.3055,9:.35575,9.5:.406,10:.45625,10.5:.5065,11:.55675,11.5:.607,12:.65725,12.5:.7075,13:.75775,13.5:.808,14:.85825,14.5:.9085,15:.95875,15.5:1.009,16:1.05925,16.5:1.1095,17:1.15975,17.5:1.21,18:1.26025,18.5:1.3105,19:1.36075,19.5:1.411,20:1.46125},A={0:-.302,.5:-.25175,1:-.2015,1.5:-.15125,2:-.101,2.5:-.05075,3:-5e-4,3.5:.04975,4:.1,4.5:.15025,5:.2005,5.5:.25075,6:.301,6.5:.35125,7:.4015,7.5:.45175,8:.502,8.5:.55225,9:.6025,9.5:.65275,10:.703,10.5:.75325,11:.8035,11.5:.85375,12:.904,12.5:.95425,13:1.0045,13.5:1.05475,14:1.105,14.5:1.15525,15:1.2055,15.5:1.25575,16:1.306},P=(e,t)=>new THREE.Vector3(v[e],.55,A[t]),b=new t.Vector3(.55675,.35,.45175),S={startMobile:new t.Vector3(.5,2.5,2.5),startDesktop:new t.Vector3(-2,2.5,2),secondMobile:new t.Vector3(.5,2.5,2),secondDesktop:new t.Vector3(-1.5,3,.75),mobileLookAt:new t.Vector3(.5,.5,-1.5),desktopLookAt:new t.Vector3(-1.25,.5,.25),cameraLookAtSecondDesktop:new t.Vector3(-.75,.5,-.75),cameraLookAtSecondMobile:new t.Vector3(-.75,.5,-.75),cameraHomeScrollEndLookAt:new t.Vector3(.55675,-5,.35),thirdPosition:new t.Vector3(.55675,3,.45175),cameraHomeScrollEndPathPoint:new t.Vector3(.55675,.5,.45175)},M=r?S.startMobile:S.startDesktop,E=r?S.secondMobile:S.secondDesktop,k=r?S.mobileLookAt:S.desktopLookAt,C=r?S.cameraLookAtSecondMobile:S.cameraLookAtSecondDesktop,F=S.thirdPosition,V=S.cameraHomeScrollEndLookAt,O=S.cameraHomeScrollEndPathPoint,I=[{pos:P("8","9"),type:"straight"},{pos:P("8","6"),type:"curve",arc:"upperArc"},{pos:P("9","5"),type:"curve",arc:"lowerArc"},{pos:P("10","4"),type:"straight"},{pos:P("10","2"),type:"curve",arc:"upperArc"},{pos:P("9","1"),type:"straight"},{pos:P("7","1"),type:"curve",arc:"lowerArc"},{pos:P("6","2"),type:"curve",arc:"upperArc"},{pos:P("5","3"),type:"curve",arc:"lowerArc"},{pos:P("4","2"),type:"curve",arc:"upperArc"},{pos:P("3","1"),type:"straight",curveCheckPoints:[P("2","1"),P("1","2"),P("1","2.5"),P("1.5","3"),P("2","3.5")]},{pos:P("2","4"),type:"curve",arc:"upperArc"},{pos:P("3","5"),type:"straight"},{pos:P("5","5"),type:"curve",arc:"lowerArc"},{pos:P("6","6"),type:"curve",arc:"upperArc"},{pos:P("5","7"),type:"straight"},{pos:P("4","7"),type:"curve",arc:"lowerArc"},{pos:P("3","8"),type:"curve",arc:"upperArc"},{pos:P("4","9"),type:"straight"},{pos:P("5","9"),type:"curve",arc:"lowerArc"},{pos:P("6","10"),type:"curve",arc:"upperArc"},{pos:P("5","11"),type:"straight",curveCheckPoints:[P("3","11"),P("2","12"),P("1.5","13"),P("1","14"),P("2","15"),P("3","15"),P("4","14"),P("5","13")]},{pos:P("6","13"),type:"curve",arc:"lowerArc"},{pos:P("7","14"),type:"curve",arc:"upperArc"},{pos:P("6","15"),type:"straight"},{pos:P("5","15"),type:"curve",arc:"lowerArc"},{pos:P("4","14"),type:"curve",arc:"upperArc"},{pos:P("5","13"),type:"straight",curveCheckPoints:[P("12","13"),P("13","12"),P("12.5","11"),P("12","10.5"),P("11","10"),P("10","10.5"),P("9","11"),P("8","10"),P("8","9.5")]},{pos:P("8","9"),type:"straight"}],T=[{pos:P("1","10"),type:"straight"},{pos:P("1","6"),type:"curve",arc:"upperArc"},{pos:P("2","5"),type:"straight"},{pos:P("3","5"),type:"curve",arc:"lowerArc"},{pos:P("4","4"),type:"curve",arc:"upperArc"},{pos:P("5","3"),type:"straight"},{pos:P("9","3"),type:"curve",arc:"lowerArc"},{pos:P("10","4"),type:"curve",arc:"upperArc"},{pos:P("9","5"),type:"curve",arc:"lowerArc"},{pos:P("8","6"),type:"straight",curveCheckPoints:[P("8","10"),P("9","11"),P("10","10.5"),P("11","10"),P("12","10.5"),P("13","11"),P("15","11"),P("16","10.5"),P("17","10"),P("18","10.5"),P("19","11"),P("20","10")]},{pos:P("20","6"),type:"curve",arc:"upperArc"},{pos:P("19","5"),type:"straight"},{pos:P("9","5"),type:"curve",arc:"lowerArc"},{pos:P("8","6"),type:"straight",curveCheckPoints:[P("8","8"),P("7","9"),P("6","10"),P("5.5","11"),P("5","12"),P("6","13"),P("7","14"),P("6","15"),P("5","15"),P("4","14"),P("4.5","13"),P("5","12"),P("4","11")]},{pos:P("1","10"),type:"straight"}],x=[{pos:P("5","12"),type:"curve",arc:"upperArc",curveCheckPoints:[P("5.5","11")]},{pos:P("6","10"),type:"curve",arc:"upperArc"},{pos:P("5","9"),type:"straight"},{pos:P("4","9"),type:"curve",arc:"lowerArc"},{pos:P("3","8"),type:"curve",arc:"upperArc"},{pos:P("4","7"),type:"straight"},{pos:P("7","7"),type:"curve",arc:"lowerArc"},{pos:P("8","8"),type:"straight"},{pos:P("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[P("8.5","11"),P("9","12")]},{pos:P("10","13"),type:"straight"},{pos:P("12","13"),type:"curve",arc:"lowerArc"},{pos:P("13","14"),type:"curve",arc:"upperArc"},{pos:P("14","15"),type:"straight"},{pos:P("19","15"),type:"curve",arc:"lowerArc"},{pos:P("20","14"),type:"straight"},{pos:P("20","4"),type:"curve",arc:"upperArc"},{pos:P("19","3"),type:"straight"},{pos:P("17","3"),type:"curve",arc:"lowerArc"},{pos:P("16","4"),type:"curve",arc:"upperArc"},{pos:P("15","5"),type:"curve",arc:"lowerArc"},{pos:P("14","4"),type:"straight"},{pos:P("14","2"),type:"curve",arc:"upperArc"},{pos:P("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[P("12","1.5")]},{pos:P("11","2"),type:"curve",arc:"lowerArc"},{pos:P("10","3"),type:"straight"},{pos:P("10","4"),type:"curve",arc:"upperArc"},{pos:P("9","5"),type:"curve",arc:"lowerArc"},{pos:P("8","6"),type:"straight"},{pos:P("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[P("8.5","11")]},{pos:P("9","12"),type:"curve",arc:"upperArc"},{pos:P("8","13"),type:"curve",arc:"lowerArc"},{pos:P("7","14"),type:"curve",arc:"upperArc"},{pos:P("6","15"),type:"straight"},{pos:P("5","15"),type:"curve",arc:"lowerArc"},{pos:P("4","14"),type:"curve",arc:"upperArc",curveCheckPoints:[P("4.5","13"),P("5","12")]}],_=[{pos:P("14","10.5"),type:"straight"},{pos:P("14","2"),type:"curve",arc:"upperArc"},{pos:P("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[P("12","1.5"),P("11","2"),P("10","1.5")]},{pos:P("9","1"),type:"straight"},{pos:P("7","1"),type:"curve",arc:"lowerArc"},{pos:P("6","2"),type:"curve",arc:"upperArc"},{pos:P("7","3"),type:"straight"},{pos:P("9","3"),type:"curve",arc:"lowerArc"},{pos:P("10","4"),type:"curve",arc:"upperArc"},{pos:P("11","5"),type:"straight"},{pos:P("19","5"),type:"curve",arc:"lowerArc"},{pos:P("20","6"),type:"straight"},{pos:P("20","10"),type:"curve",arc:"upperArc"},{pos:P("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[P("18","10.5"),P("17","10"),P("16","10.5"),P("15.5","11")]},{pos:P("15","12"),type:"straight"},{pos:P("15","14"),type:"curve",arc:"upperArc"},{pos:P("14","15"),type:"curve",arc:"lowerArc"},{pos:P("13","14"),type:"straight"},{pos:P("13","12"),type:"curve",arc:"upperArc",curveCheckPoints:[P("12.5","11"),P("12","10.5"),P("10","10.5")]},{pos:P("9","11"),type:"curve",arc:"lowerArc"},{pos:P("8","10"),type:"curve",arc:"upperArc"},{pos:P("7","9"),type:"curve",arc:"lowerArc"},{pos:P("6","10"),type:"curve",arc:"upperArc",curveCheckPoints:[P("5.5","11")]},{pos:P("5","12"),type:"curve",arc:"upperArc"},{pos:P("6","13"),type:"straight"},{pos:P("12","13"),type:"curve",arc:"lowerArc"},{pos:P("13","12"),type:"curve",arc:"upperArc"},{pos:P("13.5","11"),type:"curve",arc:"lowerArc"},{pos:P("14","10.5"),type:"straight"}],q=[{pos:P("16","7"),type:"straight"},{pos:P("16","10"),type:"curve",arc:"upperArc"},{pos:P("15","11"),type:"straight"},{pos:P("14","11"),type:"curve",arc:"lowerArc"},{pos:P("13","12"),type:"curve",arc:"upperArc"},{pos:P("12","13"),type:"straight"},{pos:P("8","13"),type:"curve",arc:"lowerArc"},{pos:P("7","14"),type:"curve",arc:"upperArc"},{pos:P("6","15"),type:"straight"},{pos:P("2","15"),type:"curve",arc:"lowerArc"},{pos:P("1","14"),type:"curve",arc:"upperArc",curveCheckPoints:[P("1.5","13"),P("2","12"),P("1.5","11")]},{pos:P("1","10"),type:"straight"},{pos:P("1","6"),type:"curve",arc:"upperArc"},{pos:P("2","5"),type:"straight"},{pos:P("5","5"),type:"curve",arc:"lowerArc"},{pos:P("6","6"),type:"curve",arc:"upperArc"},{pos:P("7","7"),type:"curve",arc:"lowerArc"},{pos:P("8","6"),type:"curve",arc:"upperArc"},{pos:P("9","5"),type:"straight"},{pos:P("13","5"),type:"curve",arc:"lowerArc"},{pos:P("14","4"),type:"straight"},{pos:P("14","2"),type:"curve",arc:"upperArc"},{pos:P("15","1"),type:"curve",arc:"lowerArc"},{pos:P("16","2"),type:"curve",arc:"upperArc"},{pos:P("17","3"),type:"straight"},{pos:P("19","3"),type:"curve",arc:"lowerArc"},{pos:P("20","2"),type:"curve",arc:"upperArc"},{pos:P("19","1"),type:"curve",arc:"lowerArc"},{pos:P("18","2"),type:"curve",arc:"upperArc"},{pos:P("19","3"),type:"curve",arc:"lowerArc"},{pos:P("20","4"),type:"straight"},{pos:P("20","10"),type:"curve",arc:"upperArc"},{pos:P("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[P("18","10.5")]},{pos:P("17","10"),type:"curve",arc:"lowerArc"},{pos:P("16","9"),type:"straight"},{pos:P("16","7"),type:"straight"}],z=[{pos:P("10","3.5"),type:"curve",arc:"upperArc"},{pos:P("9","3"),type:"straight"},{pos:P("5","3"),type:"curve",arc:"lowerArc"},{pos:P("4","2"),type:"curve",arc:"upperArc"},{pos:P("3","1"),type:"straight"},{pos:P("2","1"),type:"curve",arc:"lowerArc"},{pos:P("1","2"),type:"curve",arc:"upperArc"},{pos:P("1.5","3"),type:"curve",arc:"lowerArc"},{pos:P("2","4"),type:"curve",arc:"upperArc"},{pos:P("3","5"),type:"straight"},{pos:P("5","5"),type:"curve",arc:"lowerArc"},{pos:P("6","6"),type:"curve",arc:"upperArc"},{pos:P("5","7"),type:"straight"},{pos:P("4","7"),type:"curve",arc:"lowerArc"},{pos:P("3","8"),type:"curve",arc:"upperArc"},{pos:P("4","9"),type:"straight"},{pos:P("7","9"),type:"curve",arc:"lowerArc"},{pos:P("8","10"),type:"curve",arc:"upperArc"},{pos:P("8.5","11"),type:"curve",arc:"lowerArc"},{pos:P("9","12"),type:"curve",arc:"upperArc"},{pos:P("10","13"),type:"straight"},{pos:P("12","13"),type:"curve",arc:"lowerArc"},{pos:P("13","12"),type:"curve",arc:"upperArc"},{pos:P("14","11"),type:"curve",arc:"lowerArc"},{pos:P("15","12"),type:"curve",arc:"upperArc"},{pos:P("15","14"),type:"curve",arc:"upperArc"},{pos:P("16","15"),type:"straight"},{pos:P("19","15"),type:"curve",arc:"lowerArc"},{pos:P("20","14"),type:"straight"},{pos:P("20","2"),type:"curve",arc:"upperArc"},{pos:P("19","1"),type:"straight"},{pos:P("17","1"),type:"curve",arc:"lowerArc"},{pos:P("16","2"),type:"straight"},{pos:P("16","4"),type:"curve",arc:"upperArc"},{pos:P("15","5"),type:"curve",arc:"lowerArc"},{pos:P("14","4"),type:"straight"},{pos:P("14","2"),type:"curve",arc:"upperArc"},{pos:P("13","1"),type:"curve",arc:"lowerArc"},{pos:P("12","1.5"),type:"curve",arc:"upperArc"},{pos:P("11","2"),type:"curve",arc:"lowerArc"},{pos:P("10","3.5"),type:"curve",arc:"lowerArc"}],B=[{pos:M,lookAt:k},{pos:E,lookAt:C},{pos:F,lookAt:V},{pos:O,lookAt:V}],j=[{pos:new t.Vector3(v[11],.40625,A[7.5]),type:"straight",lookAtSequence:[new t.Vector3(v[11],.2,A[8]),new t.Vector3(v[11],1.2,A[16]),new t.Vector3(v[11],.55,A[16])]},{pos:P("11","7.5"),type:"curve",arc:"lowerArc"},{pos:P("11","9"),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(v[11],.55,.6525),P("11.5","10"),P("12","10.5"),P("12.5","11")]},{pos:P("13","11"),type:"straight"},{pos:P("14.5","11"),type:"curve",arc:"lowerArc"},{pos:P("15","11.5"),type:"straight"},{pos:P("15","14.5"),type:"curve",arc:"upperArc"},{pos:P("14.5","15"),type:"straight"},{pos:P("13.5","15"),type:"curve",arc:"lowerArc"},{pos:P("13","14.5"),type:"straight"},{pos:P("13","13.5"),type:"curve",arc:"upperArc"},{pos:P("12.5","13"),type:"straight"},{pos:P("7.5","13"),type:"curve",arc:"lowerArc"},{pos:P("7","13.5"),type:"straight"},{pos:P("7","14.5"),type:"curve",arc:"upperArc"},{pos:P("7.5","15"),type:"straight"},{pos:P("10.5","15"),type:"curve",arc:"lowerArc"},{pos:P("11","16"),type:"curve",arc:"upperArc"}],L=[{pos:P("16","10"),type:"straight"},{pos:P("16","10.5"),type:"curve",arc:"upperArc"},{pos:P("15.5","11"),type:"straight"},{pos:P("14.5","11"),type:"straight"}],R=[{pos:P("16","15"),type:"straight"},{pos:P("15.5","15"),type:"curve",arc:"lowerArc"},{pos:P("15","14.5"),type:"straight"},{pos:P("15","13.5"),type:"straight"}],G=[{pos:P("9","12"),type:"straight"},{pos:P("9","12.5"),type:"curve",arc:"upperArc"},{pos:P("9.5","13"),type:"straight"},{pos:P("10.5","13"),type:"straight"}],W=[{pos:P("7","14"),type:"straight"},{pos:P("7","13.5"),type:"curve",arc:"upperArc"},{pos:P("7.5","13"),type:"straight"},{pos:P("8.5","13"),type:"straight"}],H=[{pos:P("11","16"),type:"straight"},{pos:P("11","15.5"),type:"curve",arc:"upperArc"},{pos:P("10.5","15"),type:"straight"},{pos:P("9.5","15"),type:"straight"}],D={ghost1:{triggerPos:new t.Vector3(.65725,.55,.75325),ghostStartFadeIn:new t.Vector3(.7075,.55,.8035),ghostEndFadeIn:new t.Vector3(.725,.55,.8035),ghostStartFadeOut:new t.Vector3(.75,.55,.8035),camStartFadeIn:new t.Vector3(.75775,.55,.8035),camEndFadeIn:new t.Vector3(.775,.55,.8035),camStartFadeOut:new t.Vector3(.84,.55,.8035),endPosition:new t.Vector3(.85825,.55,.8035),forceEndProgress:{start:.1,end:.16}},ghost2:{triggerPos:new t.Vector3(.9085,.55,.8035),ghostStartFadeIn:new t.Vector3(.95875,.55,.85375),ghostEndFadeIn:new t.Vector3(.95875,.55,.875),ghostStartFadeOut:new t.Vector3(.95875,.55,.89),camStartFadeIn:new t.Vector3(.95875,.55,.904),camEndFadeIn:new t.Vector3(.95875,.55,.93),camStartFadeOut:new t.Vector3(.95875,.55,.9975),endPosition:new t.Vector3(.95875,.55,1.0045),forceEndProgress:{start:.17,end:.22}},ghost3:{triggerPos:new t.Vector3(.75775,.55,1.05475),ghostStartFadeIn:new t.Vector3(.7075,.55,1.0045),ghostEndFadeIn:new t.Vector3(.7075,.55,1.0045),ghostStartFadeOut:new t.Vector3(.6825,.55,1.0045),camStartFadeIn:new t.Vector3(.65725,.55,1.0045),camEndFadeIn:new t.Vector3(.65725,.55,1.0045),camStartFadeOut:new t.Vector3(.6065,.55,1.0045),endPosition:new t.Vector3(.55675,.55,1.0045),forceEndProgress:{start:.23,end:.33}},ghost4:{triggerPos:new t.Vector3(.65725,.55,1.0045),ghostStartFadeIn:new t.Vector3(.5565,.55,1.0045),ghostEndFadeIn:new t.Vector3(.5065,.55,1.0045),ghostStartFadeOut:new t.Vector3(.4815,.55,1.0045),camStartFadeIn:new t.Vector3(.45625,.55,1.0045),camEndFadeIn:new t.Vector3(.45625,.55,1.0045),camStartFadeOut:new t.Vector3(.4065,.55,1.0045),endPosition:new t.Vector3(.35575,.55,1.0045),forceEndProgress:{start:.38,end:.47}},ghost5:{triggerPos:new t.Vector3(.15475,.55,1.15525),ghostStartFadeIn:new t.Vector3(.1795,.55,1.18),ghostEndFadeIn:new t.Vector3(.205,.55,1.2055),ghostStartFadeOut:new t.Vector3(.23025,.55,1.2055),camStartFadeIn:new t.Vector3(.25525,.55,1.2055),camEndFadeIn:new t.Vector3(.25525,.55,1.2055),camStartFadeOut:new t.Vector3(.3055,.55,1.2055),endPosition:new t.Vector3(.35575,.55,1.2055),forceEndProgress:{start:.52,end:.59}}};function U(){return M}function Y(){return k}const Q={pacman:I,ghost1:T,ghost2:x,ghost3:_,ghost4:q,ghost5:z},$={camera:j,ghost1:L,ghost2:R,ghost3:G,ghost4:W,ghost5:H};function N(){return B}d().registerPlugin(w());const X=new t.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,100),Z=new t.Scene,K=new t.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),J=new t.Clock,ee=[];function te(){const e=Math.min(window.devicePixelRatio,r?2:3);K.setPixelRatio(e),y.mazeContainer?(K.setSize(y.mazeContainer.clientWidth,y.mazeContainer.clientHeight),X.aspect=y.mazeContainer.clientWidth/y.mazeContainer.clientHeight):(K.setSize(window.innerWidth,window.innerHeight),X.aspect=window.innerWidth/window.innerHeight),X.updateProjectionMatrix()}const re=(new t.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),oe=new t.MeshMatcapMaterial({matcap:re}),ne=new t.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),ae=new t.MeshPhysicalMaterial({color:16777215,opacity:.9999,transparent:!0,depthWrite:!1,depthTest:!0,blending:t.NormalBlending,side:t.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),se=new t.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),ce={blue:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new t.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},ie={CAM_Pacman_Backframe:ce.blue,"CAM-Pacman_Bitcoin_1":ce.white,"CAM-Pacman_Bitcoin_2":ce.white,"CAM-Pacman_Bottom":ce.blue,"CAM-Pacman_Top":ce.blue,"CAM-Pacman_Eye":ce.white,CAM_Pacman_Logo_1:ce.white,CAM_Pacman_Logo_2:ce.white,"CAM-Pacman_Shell_Boolean":ce.blue,"CAM-Pacman_Shell":ce.blue,"CAM-Pacman_Bottom_electronic":ce.white,"CAM-Pacman_Top_electronic":ce.white,"CAM-Pacman_Bottom_Text":ce.white,"CAM-Pacman_Top_Text":ce.white,default:ce.blue},pe=new t.GLTFLoader;let le;const ue=new t.Group,he={pacman:ue,ghost1:new t.Mesh(new t.BufferGeometry,ae),ghost2:new t.Mesh(new t.BufferGeometry,ae),ghost3:new t.Mesh(new t.BufferGeometry,ae),ghost4:new t.Mesh(new t.BufferGeometry,ae),ghost5:new t.Mesh(new t.BufferGeometry,ae)},me={Ghost_EUR:he.ghost1,Ghost_CHF:he.ghost2,Ghost_YEN:he.ghost3,Ghost_USD:he.ghost4,Ghost_GBP:he.ghost5};new t.MeshBasicMaterial({color:65280,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0});const ye=new Map;class ge{constructor(e,t=.06){this.currentTangent=e.clone(),this.smoothing=t}update(e){return this.currentTangent.lerp(e,this.smoothing),this.currentTangent.normalize()}reset(e){this.currentTangent.copy(e)}getCurrentTangent(){return this.currentTangent.clone()}setSmoothingFactor(e){this.smoothing=Math.max(.001,Math.min(1,e))}}function de(e,r){const o=e.map((e=>`${e.pos.x},${e.pos.y},${e.pos.z},${e.type},${e.arc||""}`)).join("|");if(ye.has(o))return ye.get(o);const n=new t.CurvePath;let a=0;for(;a<e.length-1;){const r=e[a],o=e[a+1];if(r.curveCheckPoints&&r.curveCheckPoints.length>0){const e=[r.pos,...r.curveCheckPoints,o.pos];n.add(new t.CatmullRomCurve3(e,!1,"centripetal",0))}else if("straight"===r.type)n.add(new t.LineCurve3(r.pos,o.pos));else{const e=fe(r,o);n.add(new t.QuadraticBezierCurve3(r.pos,e,o.pos))}a++}return ye.set(o,n),n}function fe(e,r){if(e.arc){const o=e.arc;if("upperArc"===o)return new t.Vector3(e.pos.x,e.pos.y,r.pos.z);if("lowerArc"===o)return new t.Vector3(r.pos.x,e.pos.y,e.pos.z);if("forwardDownArc"===o)return new t.Vector3(e.pos.x,r.pos.y,e.pos.z)}return new t.Vector3(e.pos.x,e.pos.y,r.pos.z)}function we(e){const r=new t.CurvePath;if(4===e.length){const o=new t.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);r.add(o)}return r}function ve(){const e={};return Object.entries(Q).forEach((([t,r])=>{e[t]=de(r)})),e}function Ae(){const e={};return Object.entries($).forEach((([t,r])=>{e[t]=de(r)})),e}const Pe=["pacman","ghost1","ghost2","ghost3","ghost4","ghost5"],be={ghost1:16711680,ghost2:65280,ghost3:255,ghost4:16776960,ghost5:16711935},Se=["EUR","CHF","YEN","USD","GBP"];function Me(e){return Se.some((t=>e===t||e.includes(t)))}function Ee(e){return e.includes("Shell")||e.includes("Bitcoin_1")||e.includes("Bitcoin_2")}function ke(e,t,r="ghost"){if(!t||0===t.length())return;const o=Math.atan2(t.x,t.z);if("pacman"===r)e.rotation.set(-Math.PI/2,Math.PI,-(o+Math.PI/2));else if("ghost"===r)e.rotation.set(0,o,0);else if("camera"===r){const r=e.position.clone().add(t);e.lookAt(r)}}const Ce=(new t.Quaternion).setFromEuler(new t.Euler(Math.PI/2,0,0)),Fe=(new t.Quaternion).setFromAxisAngle(new t.Vector3(0,1,0),Math.PI).clone().multiply(Ce),Ve=(new t.Quaternion).setFromEuler(new t.Euler(-Math.PI/2,0,0));function Oe(e,t,r){const o=t.angleTo(Fe)<t.angleTo(Ve)?Fe:Ve;e.quaternion.copy(t.clone().slerp(o,r))}function Ie(e,r){let o=e.clone();return r.forEach((({axis:e,angle:r})=>{o=function(e,r,o){const n="x"===r?new t.Vector3(1,0,0):"y"===r?new t.Vector3(0,1,0):new t.Vector3(0,0,1),a=(new t.Quaternion).setFromAxisAngle(n,o);return e.clone().multiply(a)}(o,e,r)})),o}function Te(e,t,r){const o=!1!==r?.preserveTransmission,n=!1!==r?.skipCurrencySymbols;e.traverse((e=>{if(e.isMesh&&e.material){const r=e,a=e.name||"";if(n&&Me(a))return;Array.isArray(r.material)?r.material.forEach((e=>{xe(e,t,o)})):xe(r.material,t,o)}}))}function xe(e,t,r=!0){const o=e;o.opacity=t,r&&void 0!==o.transmission&&o.transmission>0?o.transparent=!0:o.transparent=t<1,void 0!==o.needsUpdate&&(o.needsUpdate=!0)}function _e(e,t,r=!0){const o=e;r&&void 0!==o.transmission&&o.transmission>0?o.transparent=!0:o.transparent=t,void 0!==o.needsUpdate&&(o.needsUpdate=!0)}function qe(e,t,r){ze(e,(e=>{e.color&&e.color.getHex()!==t&&e.color.setHex(t)}),{skipCurrencySymbols:!1!==r?.skipCurrencySymbols})}function ze(e,t,r){const o=!0===r?.skipCurrencySymbols,n=!0===r?.skipPacmanParts,a=r?.objectKey;e.traverse((e=>{if(e.isMesh&&e.material){const r=e,s=e.name||"";if(o&&Me(s))return;if(n&&"pacman"===a&&Ee(s))return;Array.isArray(r.material)?r.material.forEach((e=>{t(e,r,s)})):t(r.material,r,s)}}))}function Be(e,r=1,o=!1){Z.traverse((n=>{if("CAM-Floor"===n.name&&(n.visible=e,n instanceof t.Mesh&&n.material)){const e=n.material;e.color.setHex(16777215),e.opacity=r,e.transparent=o}}))}function je(e,t,r){let o;o="pacman"===t?"intro"===r?.1:.05:"pov"===r?.5:1,e.scale.set(o,o,o),e.updateMatrixWorld(!0),d().set(e.scale,{x:o,y:o,z:o})}function Le(e){d().killTweensOf(e),d().killTweensOf(e.scale),d().killTweensOf(e.position),d().killTweensOf(e.rotation),d().killTweensOf(e.quaternion),e.traverse((e=>{if(e.isMesh&&e.material){const t=e;Array.isArray(t.material)?t.material.forEach((e=>{d().killTweensOf(e),d().killTweensOf(e.opacity)})):(d().killTweensOf(t.material),d().killTweensOf(t.material.opacity))}}))}let Re=null,Ge=null,We={};function He(e,t){e&&(he.pacman&&d().set(he.pacman,{visible:!1}),Object.entries(he).forEach((([e,t])=>{"pacman"!==e&&(d().set(t,{visible:!1}),d().set(t.scale,{x:.5,y:.5,z:.5}),t.traverse((e=>{if(e.isMesh&&e.material){const t=e;Array.isArray(t.material)?t.material.forEach((e=>{xe(e,1,!0)})):xe(t.material,1,!0)}})))})),Be(!0,1,!1))}function De(e,t){e&&Be(!0,1,!1)}let Ue=window.scrollY;function Ye(){const e=window.scrollY,t=e>Ue?"down":"up";return Ue=e,t}const Qe={t:0,pausedT:0,animationTime:0},$e={};let Ne=!1;function Xe(e){Ne=e}function Ze(){Ne&&Object.entries(he).forEach((([e,t])=>{if($e[e])$e[e].position.copy(t.position),$e[e].rotation.copy(t.quaternion),$e[e].scale.copy(t.scale),$e[e].visible=t.visible;else{let r=1,o=!1;ze(t,(e=>{o||(r=e.opacity??1,o=!0)}),{skipCurrencySymbols:!1}),$e[e]={position:t.position.clone(),rotation:t.quaternion.clone(),scale:t.scale.clone(),visible:t.visible,opacity:r}}}))}function Ke(){const e={};return Object.entries($e).forEach((([t,r])=>{e[t]=r.position.clone()})),e}function Je(){const e={};return Object.entries($e).forEach((([t,r])=>{e[t]=r.rotation.clone()})),e}function et(e,t){Ne&&$e[e]&&$e[e].position.copy(t)}function tt(e,t){$e[e]&&$e[e].rotation.copy(t)}let rt=null,ot={};function nt(){rt&&(rt.kill(),rt=null);const e=N(),r=new t.CurvePath;if(4===e.length){const o=new t.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);r.add(o)}const n=()=>{requestAnimationFrame((()=>{const e=Je(),t=(Ye(),{});var r,o;Object.entries(he).forEach((([e,r])=>{t[e]=r.position.clone()})),ot=t,o=e,(r=t)&&o&&Object.entries(he).forEach((([e,t])=>{r[e]&&(t.position.set(r[e].x,r[e].y,r[e].z),d().set(t.position,{x:r[e].x,y:r[e].y,z:r[e].z})),o[e],d().set(t,{visible:!0}),je(t,e,"home"),t.traverse((e=>{if(e.isMesh&&e.material){const t=e;if(Me(e.name||""))return void(t.visible=!1);t.visible=!0,Array.isArray(t.material)?t.material.forEach((e=>{_e(e,!0,!0)})):_e(t.material,!0,!0)}}))})),Be(!0,1,!1),Object.entries(he).forEach((([e,t])=>{ot[e]=t.position.clone()})),s(),i()}))};rt=d().timeline({scrollTrigger:{id:"homeScroll",trigger:o,start:"top top",end:"bottom top",scrub:.5,onEnter:n,onEnterBack:n,onScrubComplete:()=>{requestAnimationFrame((()=>{dt()}))}}});const a=Object.entries(he);a.forEach((([e,t])=>{ot[e]=t.position.clone()}));const s=()=>{rt&&rt.clear(),a.forEach((([e,t])=>{d().killTweensOf(t),d().killTweensOf(t.position),d().killTweensOf(t.rotation)}));const e=function(e){const r=function(e){const r={};return Object.entries(e).forEach((([e,o])=>{const n=new t.Vector3(o.x*(1/4)+b.x*(3/4),1.5,o.z*(1/4)+b.z*(3/4));r[e]=[{pos:o.clone()},{pos:n},{pos:b}]})),r}(e),o={camera:we(N())};return Object.entries(r).forEach((([e,r])=>{o[e]=function(e){const r=new t.CurvePath;if(3===e.length){const o=new t.QuadraticBezierCurve3(e[0].pos,e[1].pos,e[2].pos);r.add(o)}return r}(r)})),o}(ot),r=[],o=[];a.forEach((([n,a])=>{const s=function(e){let t=1;return e.traverse((e=>{if(e.isMesh&&e.material){const r=e;Array.isArray(r.material)?r.material.length>0&&(t=r.material[0].opacity??1):t=r.material.opacity??1}})),t}(a);a.traverse((e=>{if(e.isMesh&&e.material){const t=e;if(Array.isArray(t.material)){const e=t.material.map((e=>{const t=e.clone();return t.opacity=s,t.transparent=!0,t}));t.material=e}else{const e=t.material.clone();e.opacity=s,e.transparent=!0,t.material=e}}}));const c=Je()[n]||a.quaternion.clone(),i=(new t.Euler).setFromQuaternion(c),p=(new t.Euler).setFromQuaternion(Fe),l=e[n];if(!l)return;const u={progress:0,rotX:i.x,rotY:i.y,rotZ:i.z,opacity:s};r.push(u),o.push({key:n,object:a,path:l,startEuler:i,endEuler:p})}));const n=o.length;o.forEach(((e,t)=>{const o=r[t],a=t*(.15/n);rt.fromTo(o,{progress:0,rotX:e.startEuler.x,rotY:e.startEuler.y,rotZ:e.startEuler.z,opacity:o.opacity},{progress:1,rotX:e.endEuler.x,rotY:e.endEuler.y,rotZ:e.endEuler.z,opacity:0,ease:"power1.out",onUpdate:function(){const t=e.path.getPointAt(o.progress);e.object.position.copy(t),e.object.rotation.set(o.rotX,o.rotY,o.rotZ),e.object.quaternion.setFromEuler(e.object.rotation),tt(e.key,e.object.quaternion),Te(e.object,o.opacity,{preserveTransmission:!0,skipCurrencySymbols:!0})}},a)}))};let c=null;const i=()=>{c&&d().killTweensOf(c),c={value:0},r&&0!==r.curves.length?rt.fromTo(c,{value:0},{value:1,immediateRender:!1,onUpdate:function(){const o=this.targets()[0].value;if(r&&r.curves.length>0){const n=r.getPointAt(o);X.position.copy(n);const a=[];if(e.forEach((e=>{"lookAt"in e&&e.lookAt&&a.push(e.lookAt)})),a.length>=4){const e=new t.CubicBezierCurve3(a[0],a[1],a[2],a[3]).getPoint(o);X.lookAt(e)}X.fov=50,X.updateProjectionMatrix()}}},0):console.warn("Camera path not created, skipping camera animation")};s(),i()}const at=50,st=1.5;let ct=!0,it=0,pt=0,lt=!1,ut=0,ht={},mt=!1;const yt={};function gt(){if(ct=!0,Xe(!0),mt){const e=ve(),t=Ke();let r=0,o=0;Object.entries(t).forEach((([t,n])=>{const a=e[t];if(a){let e=0,t=1/0;for(let r=0;r<=100;r++){const o=r/100,s=a.getPointAt(o);if(s){const r=s.distanceTo(n);r<t&&(t=r,e=o)}}r+=e,o++}})),o>0&&(pt=r/o),it=pt*at}ut=0,ht={},!0&&(Object.entries(he).forEach((([e,t])=>{d().set(t,{visible:!0}),je(t,e,"home"),t.traverse((e=>{if(e.isMesh&&e.material){const t=e;if(Me(e.name||""))return void(t.visible=!1);t.visible=!0}})),function(e){Te(e,1,{preserveTransmission:!0,skipCurrencySymbols:!0})}(t)})),Be(!0,1,!1)),yt.pacman=new ge(new t.Vector3(1,0,0),.06),yt.ghost1=new ge(new t.Vector3(1,0,0),.06),yt.ghost2=new ge(new t.Vector3(1,0,0),.06),yt.ghost3=new ge(new t.Vector3(1,0,0),.06),yt.ghost4=new ge(new t.Vector3(1,0,0),.06),yt.ghost5=new ge(new t.Vector3(1,0,0),.06);const e=ve(),r=Ke();var o;Object.entries(he).forEach((([t,o])=>{const n=e[t];if(n){const e=r[t];if(e&&mt)o.position.copy(e),et(t,e);else{const e=n.getPointAt(pt);e&&(o.position.copy(e),et(t,e))}if(tt(t,o.quaternion),mt&&(ht[t]=o.quaternion.clone()),"pacman"!==t&&(o.visible=!0),je(o,t,"home"),yt[t]){const e=n.getTangentAt(pt);e&&yt[t].reset(e)}}})),Ze(),lt||(o=()=>function(e){if(!ct)return;it+=e,ut+=e;const r=it%at/at;!function(e,t){Qe.t=e,Qe.animationTime=t}(r,it);const o=ve();le&&le.update(e);const n=Math.min(ut/st,1),a=mt&&n<1;Object.entries(he).forEach((([e,s])=>{const c=o[e];if(c){const o=c.getPointAt(r);o&&(s.position.copy(o),et(e,o)),je(s,e,"home");const i=new t.Quaternion;if(yt[e]&&r>0){const o=c.getTangentAt(r);if(o&&o.length()>0){const r=yt[e].update(o),n="pacman"===e?"pacman":"ghost",a=new t.Object3D;ke(a,r,n),i.copy(a.quaternion)}}if(a&&ht[e]){const t=n*n*(3-2*n);s.quaternion.copy(ht[e].clone().slerp(i,t))}else s.quaternion.copy(i);tt(e,s.quaternion)}}))}(J.getDelta()),ee.push(o),lt=!0)}function dt(){0===window.scrollY&&gt()}const ft={};d().registerPlugin(w());let wt=null,vt=null,At=!1,Pt=!1;const bt=new t.Vector3(.55675,.55,1.306),St=new t.Vector3(-.14675,1,1.8085);let Mt=null;const Et={},kt={};function Ct(){wt&&(wt.kill(),wt=null),function(){kt.camera=new ge(new t.Vector3(0,0,-1),.08);for(let e=1;e<=5;e++)kt[`ghost${e}`]=new ge(new t.Vector3(1,0,0),.08)}(),Object.keys(D).forEach((e=>{Et[e]={hasBeenTriggered:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0}})),wt=d().timeline({scrollTrigger:{id:"povScroll",trigger:y.povSection,start:"top bottom",end:"bottom top",markers:!0,scrub:.5,toggleActions:"play none none reverse",onEnter:()=>{Ye(),He(!0)},onEnterBack:()=>{Ye(),He(!0)}}}).to({progress:0},{progress:1,immediateRender:!1,onStart:Ft,onUpdate:function(){Vt.call(this)},onReverseComplete:()=>{Tt(),xt()},onComplete:()=>{Tt(),xt()}})}function Ft(){const e=Ae();if(kt.camera&&e.camera){const t=e.camera.getTangentAt(0);t&&kt.camera.reset(t)}Object.entries(he).forEach((([t,r])=>{if(e[t]&&"pacman"!==t){const o=e[t].getPointAt(0);r.position.copy(o);const n=e[t].getTangentAt(0).normalize();r.lookAt(o.clone().add(n)),r.visible=!1,je(r,t,"pov")}})),he.pacman&&(he.pacman.visible=!1)}function Vt(){const e=this.targets()[0].progress,r=Ae();if(!r.camera)return;const o=r.camera.getPointAt(e);vt?(function(e,r,o){const n=w().getById("introScroll");if(n&&n.isActive)return;X.position.copy(o),X.fov=80;const a=function(e,r){const o=$.camera,n=.05;if(e<=n){const t=o[0];if("lookAtSequence"in t&&t.lookAtSequence&&t.lookAtSequence.length>0){const r=e/n,o=t.lookAtSequence.length,a=1/o,s=Math.floor(r/a),c=r%a/a,i=Math.min(s,o-1),p=Math.min(s+1,o-1);if(i===p)return t.lookAtSequence[i];{const e=t.lookAtSequence[i],r=t.lookAtSequence[p];return e.clone().lerp(r,c)}}}else if(e<=.07){const a=o[0];if("lookAtSequence"in a&&a.lookAtSequence&&a.lookAtSequence.length>0){const o=a.lookAtSequence[a.lookAtSequence.length-1],s=r.camera.getPointAt(e),c=r.camera.getTangentAt(e).normalize(),i=new t.Vector3(c.x,0,c.z).normalize(),p=s.clone().add(i),l=(e-n)/.020000000000000004;return o.clone().lerp(p,l)}}return null}(e,r);if(a)return X.lookAt(a),void X.updateProjectionMatrix();const s=r.camera.getTangentAt(e).normalize();let c=s;kt.camera&&e>0&&(c=kt.camera.update(s)),e<=.15&&(c=new t.Vector3(c.x,0,c.z).normalize());(function(e,t){const r=Ae(),o=_t(r.camera,bt),n=_t(r.camera,St);(e<o||e>n)&&!Pt&&(Mt=null,At=!1,Pt=!1),At||Pt||X.lookAt(t)})(e,o.clone().add(c)),X.updateProjectionMatrix()}(e,r,o),function(e,t,r){Object.entries(D).forEach((([o,n])=>{const a=he[o],s=r[o];if(!a||!s||"pacman"===o)return;const c=t>n.forceEndProgress.start&&t<n.forceEndProgress.end;!function(e,t,r,o,n,a){const{triggerPos:s,ghostStartFadeIn:c,ghostEndFadeIn:i,ghostStartFadeOut:p,camStartFadeIn:l,camEndFadeIn:u,camStartFadeOut:h,endPosition:m}=n,y=Et[e],g=parseInt(e.replace("ghost",""))-1;let d=ft[g];if(!d){const e=document.querySelectorAll(".cmp--pov.cmp")[g];d={parent:e||null,povElements:e?e.querySelectorAll(".pov"):[],camElements:e?e.querySelectorAll(".cam"):[]},ft[g]=d}const{parent:f,povElements:w,camElements:v}=d;if(!f||!w.length||!v.length)return;const A=Ae();null===y.triggerCameraProgress&&(y.triggerCameraProgress=_t(A.camera,s,800),y.ghostStartFadeInProgress=_t(A.camera,c,800),y.ghostEndFadeInProgress=_t(A.camera,i,800),y.ghostStartFadeOutProgress=_t(A.camera,p,800),y.camStartFadeInProgress=_t(A.camera,l,800),y.camEndFadeInProgress=_t(A.camera,u,800),y.camStartFadeOutProgress=_t(A.camera,h,800),y.endCameraProgress=_t(A.camera,m,800));const P=_t(A.camera,o,800);if(P>=y.triggerCameraProgress&&P<=y.endCameraProgress){if(!t.visible&&(t.visible=!0,y.hasBeenTriggered=!0,kt[e])){const t=r.getTangentAt(0);t&&kt[e].reset(t)}const o=(P-y.triggerCameraProgress)/(y.endCameraProgress-y.triggerCameraProgress);let n=Math.max(0,Math.min(1,o));if(void 0===y.currentPathT)y.currentPathT=n;else{const e=.1;y.currentPathT+=(n-y.currentPathT)*e}n=y.currentPathT;const a=r.getPointAt(n);if(t.position.copy(a),kt[e]&&n>0){const o=r.getTangentAt(n);o&&o.length()>0&&ke(t,kt[e].update(o),"ghost")}if(n>.9){const e=t;e.material&&"opacity"in e.material&&(e.material.opacity=1-(n-.9)/.1)}else{const e=t;e.material&&"opacity"in e.material&&(e.material.opacity=1)}}else t.visible=!1,y.hasBeenTriggered=!1;!function(e,t,r,o,n,a,s=!1){if(s)return o.style.opacity="0",o.classList.add("no-visibility"),It(n),void It(a);let c=0,i=0;if(t>=r.ghostStartFadeInProgress&&t<=r.ghostEndFadeInProgress){const e=(t-r.ghostStartFadeInProgress)/(r.ghostEndFadeInProgress-r.ghostStartFadeInProgress);c=Math.min(1,e),o.style.opacity=c.toString()}else if(t>r.ghostEndFadeInProgress&&t<r.ghostStartFadeOutProgress)c=1;else if(t>=r.ghostStartFadeOutProgress&&t<=r.camStartFadeInProgress){const e=(t-r.ghostStartFadeOutProgress)/(r.camStartFadeInProgress-r.ghostStartFadeOutProgress);c=Math.max(0,1-e)}if(t>=r.camStartFadeInProgress&&t<=r.camEndFadeInProgress){const e=(t-r.camStartFadeInProgress)/(r.camEndFadeInProgress-r.camStartFadeInProgress);i=Math.min(1,e)}else if(t>r.camEndFadeInProgress&&t<r.camStartFadeOutProgress)i=1;else if(t>=r.camStartFadeOutProgress&&t<=r.endCameraProgress){const e=(t-r.camStartFadeOutProgress)/(r.endCameraProgress-r.camStartFadeOutProgress);i=Math.max(0,1-e),o.style.opacity=i.toString()}const p=i>.01&&c>.01,l=o.classList.contains("no-visibility");p&&!l?o.classList.add("no-visibility"):!p&&l&&o.classList.remove("no-visibility"),n.forEach((e=>{const t=e;c>.01?(t.classList.remove("no-visibility"),t.style.opacity=c.toString()):c<=.01&&!t.classList.contains("no-visibility")&&(t.classList.add("no-visibility"),t.style.opacity="0")})),a.forEach((e=>{const t=e;i>.01?(t.classList.remove("no-visibility"),t.style.opacity=i.toString()):i<=.01&&!t.classList.contains("no-visibility")&&(t.classList.add("no-visibility"),t.style.opacity="0")}))}(0,P,y,f,w,v,a)}(o,a,s,e,n,c)}))}(o,e,r),vt.copy(o)):vt=o.clone()}function Ot(){Object.keys(kt).forEach((e=>{if(kt[e]){const r="camera"===e?new t.Vector3(0,0,-1):new t.Vector3(1,0,0);kt[e].reset(r)}}))}function It(e){e.forEach((e=>{const t=e;t.classList.add("no-visibility"),t.style.opacity="0"}))}function Tt(){Object.entries(he).forEach((([e,t])=>{if("pacman"!==e){t.visible=!1;const r=parseInt(e.replace("ghost",""))-1,o=ft[r];o?.parent&&(It(o.povElements),It(o.camElements),o.parent.classList.add("no-visibility"));const n=t;n.material&&"opacity"in n.material&&(n.material.opacity=1)}})),he.pacman&&(he.pacman.visible=!0),Ot()}function xt(){he.pacman&&(he.pacman.visible=!0),At=!1,Mt=null,Pt=!1,Object.keys(Et).forEach((e=>{Et[e]={hasBeenTriggered:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0}})),Ot()}function _t(e,t,r=2e3){if(!e||!t)return 0;let o=0,n=1/0;for(let a=0;a<r;a++)try{const s=a/(r-1),c=e.getPointAt(s);if(!c)continue;const i=c.distanceTo(t);i<n&&(n=i,o=s)}catch(e){}return o}let qt=null,zt=!1,Bt=0,jt=!1;function Lt(){!function(){const e=d().getById("homeScroll");if(e){const t=e.timeline;t?.pause&&t.pause()}const t=w().getById("povScroll");if(t){const e=t.timeline;e?.pause&&e.pause()}}();const e=()=>{Pe.forEach((e=>{const t=he[e];t&&function(e,t){d().killTweensOf(t),d().killTweensOf(t.scale),d().killTweensOf(t.position),d().killTweensOf(t.quaternion),t.visible=!0,t.traverse((t=>{if(t.isMesh&&t.material){const r=t,o=t.name||"";if(Me(o)||"pacman"===e&&Ee(o))return;r.visible=!0,Array.isArray(r.material)?r.material.forEach((e=>{xe(e,1,!0)})):xe(r.material,1,!0)}})),t.updateMatrixWorld(!0)}(e,t)}))};e(),function(){if(!Re||!Ge){const e=he.pacman;if(e){We.pacman||(We.pacman=e.quaternion.clone());let t=We.pacman.clone();Oe(e,t,1),t=e.quaternion.clone(),t=Ie(t,[{axis:"x",angle:Math.PI/2},{axis:"y",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"x",angle:Math.PI}]),Re=t,e.quaternion.copy(We.pacman)}const t=he.ghost1;if(t){We.ghost1||(We.ghost1=t.quaternion.clone());let e=We.ghost1.clone();Oe(t,e,1),e=t.quaternion.clone(),e=Ie(e,[{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"x",angle:Math.PI}]),Ge=e,t.quaternion.copy(We.ghost1)}Pe.forEach((e=>{const t=he[e];t&&!We[e]&&(We[e]=t.quaternion.clone())}))}const e=X.position.x-5,r=new t.Vector3(e+4.3,X.position.y+-2,X.position.z+0);Pe.forEach(((e,o)=>{const n=he[e];if(!n)return;Le(n);const a=0===o?0:-.5*o,s=new t.Vector3(r.x+a,r.y,r.z);d().set(n.position,{x:s.x,y:s.y,z:s.z}),"pacman"===e&&Re?n.quaternion.copy(Re):Ge&&n.quaternion.copy(Ge),je(n,e,"intro"),d().set(n,{visible:!0}),n.traverse((t=>{if(t.isMesh&&t.material){const r=t,o=t.name||"";if(Me(o)||"pacman"===e&&Ee(o))return void(r.visible=!1);r.visible=!0,Array.isArray(r.material)?r.material.forEach((e=>{xe(e,1,!0)})):xe(r.material,1,!0),be[e]&&"pacman"!==e&&qe(n,be[e])}})),n.updateMatrixWorld(!0)})),Be(!0,0,!0)}(Ye()),e(),jt=!1;const r=w().getById("introScroll"),o=r&&"number"==typeof r.progress?r.progress:0;Bt=o,Gt(o),requestAnimationFrame((()=>{const e=w().getById("introScroll"),t=e&&"number"==typeof e.progress?e.progress:0;Bt=t,Gt(t)}))}function Rt(){Be(!0,1,!1)}function Gt(e){if(zt&&!jt){jt=!0;try{Be(!0,0,!0);const r=new t.Vector3(X.position.x,X.position.y,X.position.z),o=10,n=r.x-o,a=r.x+o,s=[{key:"pacman",behindOffset:0},{key:"ghost1",behindOffset:-.5},{key:"ghost2",behindOffset:-1},{key:"ghost3",behindOffset:-1.5},{key:"ghost4",behindOffset:-2},{key:"ghost5",behindOffset:-2.5}],c=Math.max(0,Math.min(1,e)),i=n+(a-n)*c+4.3,p=r.y+-2,l=r.z+0,u=.2,h=c<u?c/u:1;s.forEach((({key:e,behindOffset:t})=>{const r=he[e];if(!r)return;Le(r);const o=i+t,n=p,a=l;r.position.set(o,n,a);const s=Re,c=Ge;"pacman"===e&&s?r.quaternion.copy(s):c&&r.quaternion.copy(c),r.updateMatrixWorld(!0),r.visible=!0,je(r,e,"intro");const u="pacman"===e?1:h;r.traverse((t=>{if(t.isMesh&&t.material){const o=t,n=t.name||"";if(Me(n)||"pacman"===e&&Ee(n))return void(o.visible=!1);o.visible=!0,Array.isArray(o.material)?o.material.forEach((e=>{xe(e,u,!0)})):xe(o.material,u,!0),be[e]&&"pacman"!==e&&qe(r,be[e])}})),r.updateMatrixWorld(!0)}))}finally{jt=!1}}}let Wt=null;!async function(){r?K.setPixelRatio(Math.min(window.devicePixelRatio,2)):K.setPixelRatio(window.devicePixelRatio),K.shadowMap.enabled=!0,K.shadowMap.type=t.PCFSoftShadowMap,y.mazeContainer?(K.setSize(y.mazeContainer.clientWidth,y.mazeContainer.clientHeight),y.mazeContainer.appendChild(K.domElement)):(K.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(K.domElement)),te(),window.addEventListener("resize",te),K.render(Z,X),function(){const e=new t.AmbientLight(16777215);Z.add(e);const r=new t.DirectionalLight(16777215,.8);Z.add(r),r.position.set(-5,15,10),r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.camera.left=-20,r.shadow.camera.right=20,r.shadow.camera.top=20,r.shadow.camera.bottom=-20,r.shadow.camera.near=.1,r.shadow.camera.far=50,r.shadow.bias=-.001,r.shadow.radius=3,r.castShadow=!0}(),function(){const e=U(),t=Y();X.position.set(e.x,e.y,e.z),X.lookAt(t.x,t.y,t.z)}(),function(){const e=(new t.BufferGeometry).setFromPoints([new t.Vector3(-5,-.55,0),new t.Vector3(5,-.55,0)]),r=new t.LineBasicMaterial({color:16711680,linewidth:3}),o=new t.Line(e,r);o.renderOrder=999,Z.add(o);const n=(new t.BufferGeometry).setFromPoints([new t.Vector3(-5,-.55,.75),new t.Vector3(5,-.55,.75)]),a=new t.LineBasicMaterial({color:65280,linewidth:3}),s=new t.Line(n,a);s.renderOrder=999,Z.add(s)}(),await async function(e){return Object.values(he).forEach((t=>e.add(t))),e.add(ue),new Promise(((r,o)=>{pe.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(o){const n=o.scene;n.traverse((e=>{})),n.traverse((r=>{if("CAM-Pacman"===r.name){const e=[];r.traverse((t=>{if(t.isMesh&&"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name&&"CAM-Pacman_Bitcoin_1"!==t.name&&"CAM-Pacman_Bitcoin_2"!==t.name){const r=ie[t.name]||ie.default;t.material=r,e.push(t)}else"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name&&"CAM-Pacman_Bitcoin_1"!==t.name&&"CAM-Pacman_Bitcoin_2"!==t.name||(t.visible=!1)})),e.forEach((e=>he.pacman.add(e))),he.pacman.scale.set(.05,.05,.05),he.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),le=new t.AnimationMixer(he.pacman);const n={};o.animations.forEach((e=>{const t=le.clipAction(e);t.getMixer().addEventListener("loop",(function(e){e.action.getRoot().traverse((function(e){e.userData&&e.userData.skipAnimation&&(e.updateMorphTargets=function(){})}))})),n[e.name]=t,t.setEffectiveWeight(0),t.play()})),Object.values(n).forEach((e=>{e.setEffectiveWeight(1)}))}else if(r.name&&me[r.name]){const e=me[r.name],o=new t.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const n=[];r.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=ae:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),n.push(e))})),n.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),e?e.add(o):console.warn(`ghostContainer for ${r.name} is undefined!`)}if(r.isMesh)if("CAM-Arena_LowRes_Top"===r.name)r.material=ne,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===r.name)r.material=oe,r.castShadow=!0;else if("CAM-Floor"===r.name){const o=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new t.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:t.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),o.material=se,o.position.y=-.5,o.receiveShadow=!0,e.add(o)}else r.visible=!1})),n.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.add(n),n.position.set(.5,.5,.5),r()}),(function(e){}),(function(e){o(e)}))}))}(Z),Object.entries(he).forEach((([e,t])=>{let r=1,o=!1;ze(t,(e=>{o||(r=e.opacity??1,o=!0)}),{skipCurrencySymbols:!1}),$e[e]={position:t.position.clone(),rotation:t.quaternion.clone(),scale:t.scale.clone(),visible:t.visible,opacity:r}})),dt(),window.addEventListener("scroll",(()=>{0!==window.scrollY&&function(){if(!ct)return;ct=!1,Xe(!1),mt=!0,pt=it%at/at,function(e){Qe.pausedT=e}(pt),Xe(!0),Ze(),Xe(!1);const e=ve();Object.entries(he).forEach((([r,o])=>{const n=e[r];if(n&&yt[r]){const e=n.getTangentAt(pt);if(e&&e.length()>0){const e=yt[r].getCurrentTangent(),o="pacman"===r?"pacman":"ghost",n=new t.Object3D;ke(n,e,o),tt(r,n.quaternion.clone())}else tt(r,o.quaternion)}else tt(r,o.quaternion)})),nt()}()})),Ct(),qt&&(qt.kill(),qt=null),qt=d().timeline({scrollTrigger:{trigger:n,start:"top top",end:"bottom bottom",scrub:.5,refreshPriority:1,onEnter:()=>{zt=!0,Lt()},onEnterBack:()=>{zt=!0,Lt()},onLeave:()=>{zt=!1,Rt()},onLeaveBack:()=>{zt=!1,Rt()},onUpdate:e=>{zt&&"number"==typeof e.progress&&!jt&&(Bt=e.progress,Gt(e.progress))},id:"introScroll"}}).fromTo(".sc_h--intro",{scale:.5,opacity:0},{keyframes:[{scale:.5,opacity:0,duration:0},{scale:.8,opacity:1,duration:.3},{scale:1.2,opacity:1,duration:.4},{scale:1.5,opacity:0,duration:.3}]}).fromTo(".sc_b--intro",{scale:.5,opacity:0},{keyframes:[{scale:.5,opacity:0,duration:0},{scale:.8,opacity:1,duration:.3},{scale:1.2,opacity:1,duration:.4},{scale:1.5,opacity:0,duration:.3}]}).to({progress:0},{progress:1,duration:1,immediateRender:!1,onComplete:()=>{zt&&Gt(Bt)},onReverseComplete:()=>{zt&&Gt(Bt)}},0),Wt=d().timeline({scrollTrigger:{trigger:a,start:"top center",end:"bottom bottom",scrub:.5,onEnter:()=>{Ye(),De(!0)},onEnterBack:()=>{Ye(),De(!0)}}}).fromTo(".sc_b--outro",{scale:.5,opacity:0},{keyframes:[{scale:.5,opacity:0,duration:0},{scale:.8,opacity:1,duration:.3},{scale:1.2,opacity:1,duration:.4},{scale:1.5,opacity:0,duration:.3}]}),function(){const e=document.querySelector(".wr_p--skip.wr_p");if(e){const t=document.querySelector(".sc--testimonials");t&&e.addEventListener("click",(()=>{t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}))}}(),function(){const e=()=>{ee.forEach((e=>e())),K.render(Z,X),requestAnimationFrame(e)};e()}()}()})();
//# sourceMappingURL=script.js.map