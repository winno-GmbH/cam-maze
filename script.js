(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=THREE,r=window.innerWidth<768,o={mazeContainer:document.querySelector(".el--home-maze.el"),canvas:document.querySelector("canvas"),homeSection:document.querySelector(".sc--home.sc"),introSection:document.querySelector(".sc--intro.sc"),povSection:document.querySelector(".sc--pov.sc"),finalSection:document.querySelector(".sc--final.sc"),finalContainer:document.querySelector(".cr--final.cr"),parentElements:document.querySelectorAll(".cmp--pov.cmp")},c=gsap;var s=e.n(c);const a=ScrollTrigger;var n=e.n(a);const p={0:-.54875,.5:-.4985,1:-.44825,1.5:-.398,2:-.34775,2.5:-.2975,3:-.24725,3.5:-.197,4:-.14675,4.5:-.0965,5:-.04625,5.5:.004,6:.05425,6.5:.1045,7:.15475,7.5:.205,8:.25525,8.5:.3055,9:.35575,9.5:.406,10:.45625,10.5:.5065,11:.55675,11.5:.607,12:.65725,12.5:.7075,13:.75775,13.5:.808,14:.85825,14.5:.9085,15:.95875,15.5:1.009,16:1.05925,16.5:1.1095,17:1.15975,17.5:1.21,18:1.26025,18.5:1.3105,19:1.36075,19.5:1.411,20:1.46125},i={0:-.302,.5:-.25175,1:-.2015,1.5:-.15125,2:-.101,2.5:-.05075,3:-5e-4,3.5:.04975,4:.1,4.5:.15025,5:.2005,5.5:.25075,6:.301,6.5:.35125,7:.4015,7.5:.45175,8:.502,8.5:.55225,9:.6025,9.5:.65275,10:.703,10.5:.75325,11:.8035,11.5:.85375,12:.904,12.5:.95425,13:1.0045,13.5:1.05475,14:1.105,14.5:1.15525,15:1.2055,15.5:1.25575,16:1.306},l=(e,t)=>new THREE.Vector3(p[e],.55,i[t]),u=new t.Vector3(.55675,.35,.45175),h={startMobile:new t.Vector3(.5,2.5,2.5),startDesktop:new t.Vector3(-2,2.5,2),secondMobile:new t.Vector3(.5,2.5,2),secondDesktop:new t.Vector3(-1.5,3,.75),mobileLookAt:new t.Vector3(.5,.5,-1.5),desktopLookAt:new t.Vector3(-1.25,.5,.25),cameraLookAtSecondDesktop:new t.Vector3(-.75,.5,-.75),cameraLookAtSecondMobile:new t.Vector3(-.75,.5,-.75),cameraHomeScrollEndLookAt:new t.Vector3(.55675,-5,.35),thirdPosition:new t.Vector3(.55675,3,.45175),cameraHomeScrollEndPathPoint:new t.Vector3(.55675,.5,.45175)},g=r?h.startMobile:h.startDesktop,y=r?h.secondMobile:h.secondDesktop,m=r?h.mobileLookAt:h.desktopLookAt,d=r?h.cameraLookAtSecondMobile:h.cameraLookAtSecondDesktop,w=h.thirdPosition,v=h.cameraHomeScrollEndLookAt,A=h.cameraHomeScrollEndPathPoint,f=[{pos:l("8","9"),type:"straight"},{pos:l("8","6"),type:"curve",arc:"upperArc"},{pos:l("9","5"),type:"curve",arc:"lowerArc"},{pos:l("10","4"),type:"straight"},{pos:l("10","2"),type:"curve",arc:"upperArc"},{pos:l("9","1"),type:"straight"},{pos:l("7","1"),type:"curve",arc:"lowerArc"},{pos:l("6","2"),type:"curve",arc:"upperArc"},{pos:l("5","3"),type:"curve",arc:"lowerArc"},{pos:l("4","2"),type:"curve",arc:"upperArc"},{pos:l("3","1"),type:"straight",curveCheckPoints:[l("2","1"),l("1","2"),l("1","2.5"),l("1.5","3"),l("2","3.5")]},{pos:l("2","4"),type:"curve",arc:"upperArc"},{pos:l("3","5"),type:"straight"},{pos:l("5","5"),type:"curve",arc:"lowerArc"},{pos:l("6","6"),type:"curve",arc:"upperArc"},{pos:l("5","7"),type:"straight"},{pos:l("4","7"),type:"curve",arc:"lowerArc"},{pos:l("3","8"),type:"curve",arc:"upperArc"},{pos:l("4","9"),type:"straight"},{pos:l("5","9"),type:"curve",arc:"lowerArc"},{pos:l("6","10"),type:"curve",arc:"upperArc"},{pos:l("5","11"),type:"straight",curveCheckPoints:[l("3","11"),l("2","12"),l("1.5","13"),l("1","14"),l("2","15"),l("3","15"),l("4","14"),l("5","13")]},{pos:l("6","13"),type:"curve",arc:"lowerArc"},{pos:l("7","14"),type:"curve",arc:"upperArc"},{pos:l("6","15"),type:"straight"},{pos:l("5","15"),type:"curve",arc:"lowerArc"},{pos:l("4","14"),type:"curve",arc:"upperArc"},{pos:l("5","13"),type:"straight",curveCheckPoints:[l("12","13"),l("13","12"),l("12.5","11"),l("12","10.5"),l("11","10"),l("10","10.5"),l("9","11"),l("8","10"),l("8","9.5")]},{pos:l("8","9"),type:"straight"}],P=[{pos:l("1","10"),type:"straight"},{pos:l("1","6"),type:"curve",arc:"upperArc"},{pos:l("2","5"),type:"straight"},{pos:l("3","5"),type:"curve",arc:"lowerArc"},{pos:l("4","4"),type:"curve",arc:"upperArc"},{pos:l("5","3"),type:"straight"},{pos:l("9","3"),type:"curve",arc:"lowerArc"},{pos:l("10","4"),type:"curve",arc:"upperArc"},{pos:l("9","5"),type:"curve",arc:"lowerArc"},{pos:l("8","6"),type:"straight",curveCheckPoints:[l("8","10"),l("9","11"),l("10","10.5"),l("11","10"),l("12","10.5"),l("13","11"),l("15","11"),l("16","10.5"),l("17","10"),l("18","10.5"),l("19","11"),l("20","10")]},{pos:l("20","6"),type:"curve",arc:"upperArc"},{pos:l("19","5"),type:"straight"},{pos:l("9","5"),type:"curve",arc:"lowerArc"},{pos:l("8","6"),type:"straight",curveCheckPoints:[l("8","8"),l("7","9"),l("6","10"),l("5.5","11"),l("5","12"),l("6","13"),l("7","14"),l("6","15"),l("5","15"),l("4","14"),l("4.5","13"),l("5","12"),l("4","11")]},{pos:l("1","10"),type:"straight"}],S=[{pos:l("5","12"),type:"curve",arc:"upperArc",curveCheckPoints:[l("5.5","11")]},{pos:l("6","10"),type:"curve",arc:"upperArc"},{pos:l("5","9"),type:"straight"},{pos:l("4","9"),type:"curve",arc:"lowerArc"},{pos:l("3","8"),type:"curve",arc:"upperArc"},{pos:l("4","7"),type:"straight"},{pos:l("7","7"),type:"curve",arc:"lowerArc"},{pos:l("8","8"),type:"straight"},{pos:l("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[l("8.5","11"),l("9","12")]},{pos:l("10","13"),type:"straight"},{pos:l("12","13"),type:"curve",arc:"lowerArc"},{pos:l("13","14"),type:"curve",arc:"upperArc"},{pos:l("14","15"),type:"straight"},{pos:l("19","15"),type:"curve",arc:"lowerArc"},{pos:l("20","14"),type:"straight"},{pos:l("20","4"),type:"curve",arc:"upperArc"},{pos:l("19","3"),type:"straight"},{pos:l("17","3"),type:"curve",arc:"lowerArc"},{pos:l("16","4"),type:"curve",arc:"upperArc"},{pos:l("15","5"),type:"curve",arc:"lowerArc"},{pos:l("14","4"),type:"straight"},{pos:l("14","2"),type:"curve",arc:"upperArc"},{pos:l("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[l("12","1.5")]},{pos:l("11","2"),type:"curve",arc:"lowerArc"},{pos:l("10","3"),type:"straight"},{pos:l("10","4"),type:"curve",arc:"upperArc"},{pos:l("9","5"),type:"curve",arc:"lowerArc"},{pos:l("8","6"),type:"straight"},{pos:l("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[l("8.5","11")]},{pos:l("9","12"),type:"curve",arc:"upperArc"},{pos:l("8","13"),type:"curve",arc:"lowerArc"},{pos:l("7","14"),type:"curve",arc:"upperArc"},{pos:l("6","15"),type:"straight"},{pos:l("5","15"),type:"curve",arc:"lowerArc"},{pos:l("4","14"),type:"curve",arc:"upperArc",curveCheckPoints:[l("4.5","13"),l("5","12")]}],M=[{pos:l("14","10.5"),type:"straight"},{pos:l("14","2"),type:"curve",arc:"upperArc"},{pos:l("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[l("12","1.5"),l("11","2"),l("10","1.5")]},{pos:l("9","1"),type:"straight"},{pos:l("7","1"),type:"curve",arc:"lowerArc"},{pos:l("6","2"),type:"curve",arc:"upperArc"},{pos:l("7","3"),type:"straight"},{pos:l("9","3"),type:"curve",arc:"lowerArc"},{pos:l("10","4"),type:"curve",arc:"upperArc"},{pos:l("11","5"),type:"straight"},{pos:l("19","5"),type:"curve",arc:"lowerArc"},{pos:l("20","6"),type:"straight"},{pos:l("20","10"),type:"curve",arc:"upperArc"},{pos:l("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[l("18","10.5"),l("17","10"),l("16","10.5"),l("15.5","11")]},{pos:l("15","12"),type:"straight"},{pos:l("15","14"),type:"curve",arc:"upperArc"},{pos:l("14","15"),type:"curve",arc:"lowerArc"},{pos:l("13","14"),type:"straight"},{pos:l("13","12"),type:"curve",arc:"upperArc",curveCheckPoints:[l("12.5","11"),l("12","10.5"),l("10","10.5")]},{pos:l("9","11"),type:"curve",arc:"lowerArc"},{pos:l("8","10"),type:"curve",arc:"upperArc"},{pos:l("7","9"),type:"curve",arc:"lowerArc"},{pos:l("6","10"),type:"curve",arc:"upperArc",curveCheckPoints:[l("5.5","11")]},{pos:l("5","12"),type:"curve",arc:"upperArc"},{pos:l("6","13"),type:"straight"},{pos:l("12","13"),type:"curve",arc:"lowerArc"},{pos:l("13","12"),type:"curve",arc:"upperArc"},{pos:l("13.5","11"),type:"curve",arc:"lowerArc"},{pos:l("14","10.5"),type:"straight"}],C=[{pos:l("16","7"),type:"straight"},{pos:l("16","10"),type:"curve",arc:"upperArc"},{pos:l("15","11"),type:"straight"},{pos:l("14","11"),type:"curve",arc:"lowerArc"},{pos:l("13","12"),type:"curve",arc:"upperArc"},{pos:l("12","13"),type:"straight"},{pos:l("8","13"),type:"curve",arc:"lowerArc"},{pos:l("7","14"),type:"curve",arc:"upperArc"},{pos:l("6","15"),type:"straight"},{pos:l("2","15"),type:"curve",arc:"lowerArc"},{pos:l("1","14"),type:"curve",arc:"upperArc",curveCheckPoints:[l("1.5","13"),l("2","12"),l("1.5","11")]},{pos:l("1","10"),type:"straight"},{pos:l("1","6"),type:"curve",arc:"upperArc"},{pos:l("2","5"),type:"straight"},{pos:l("5","5"),type:"curve",arc:"lowerArc"},{pos:l("6","6"),type:"curve",arc:"upperArc"},{pos:l("7","7"),type:"curve",arc:"lowerArc"},{pos:l("8","6"),type:"curve",arc:"upperArc"},{pos:l("9","5"),type:"straight"},{pos:l("13","5"),type:"curve",arc:"lowerArc"},{pos:l("14","4"),type:"straight"},{pos:l("14","2"),type:"curve",arc:"upperArc"},{pos:l("15","1"),type:"curve",arc:"lowerArc"},{pos:l("16","2"),type:"curve",arc:"upperArc"},{pos:l("17","3"),type:"straight"},{pos:l("19","3"),type:"curve",arc:"lowerArc"},{pos:l("20","2"),type:"curve",arc:"upperArc"},{pos:l("19","1"),type:"curve",arc:"lowerArc"},{pos:l("18","2"),type:"curve",arc:"upperArc"},{pos:l("19","3"),type:"curve",arc:"lowerArc"},{pos:l("20","4"),type:"straight"},{pos:l("20","10"),type:"curve",arc:"upperArc"},{pos:l("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[l("18","10.5")]},{pos:l("17","10"),type:"curve",arc:"lowerArc"},{pos:l("16","9"),type:"straight"},{pos:l("16","7"),type:"straight"}],b=[{pos:l("10","3.5"),type:"curve",arc:"upperArc"},{pos:l("9","3"),type:"straight"},{pos:l("5","3"),type:"curve",arc:"lowerArc"},{pos:l("4","2"),type:"curve",arc:"upperArc"},{pos:l("3","1"),type:"straight"},{pos:l("2","1"),type:"curve",arc:"lowerArc"},{pos:l("1","2"),type:"curve",arc:"upperArc"},{pos:l("1.5","3"),type:"curve",arc:"lowerArc"},{pos:l("2","4"),type:"curve",arc:"upperArc"},{pos:l("3","5"),type:"straight"},{pos:l("5","5"),type:"curve",arc:"lowerArc"},{pos:l("6","6"),type:"curve",arc:"upperArc"},{pos:l("5","7"),type:"straight"},{pos:l("4","7"),type:"curve",arc:"lowerArc"},{pos:l("3","8"),type:"curve",arc:"upperArc"},{pos:l("4","9"),type:"straight"},{pos:l("7","9"),type:"curve",arc:"lowerArc"},{pos:l("8","10"),type:"curve",arc:"upperArc"},{pos:l("8.5","11"),type:"curve",arc:"lowerArc"},{pos:l("9","12"),type:"curve",arc:"upperArc"},{pos:l("10","13"),type:"straight"},{pos:l("12","13"),type:"curve",arc:"lowerArc"},{pos:l("13","12"),type:"curve",arc:"upperArc"},{pos:l("14","11"),type:"curve",arc:"lowerArc"},{pos:l("15","12"),type:"curve",arc:"upperArc"},{pos:l("15","14"),type:"curve",arc:"upperArc"},{pos:l("16","15"),type:"straight"},{pos:l("19","15"),type:"curve",arc:"lowerArc"},{pos:l("20","14"),type:"straight"},{pos:l("20","2"),type:"curve",arc:"upperArc"},{pos:l("19","1"),type:"straight"},{pos:l("17","1"),type:"curve",arc:"lowerArc"},{pos:l("16","2"),type:"straight"},{pos:l("16","4"),type:"curve",arc:"upperArc"},{pos:l("15","5"),type:"curve",arc:"lowerArc"},{pos:l("14","4"),type:"straight"},{pos:l("14","2"),type:"curve",arc:"upperArc"},{pos:l("13","1"),type:"curve",arc:"lowerArc"},{pos:l("12","1.5"),type:"curve",arc:"upperArc"},{pos:l("11","2"),type:"curve",arc:"lowerArc"},{pos:l("10","3.5"),type:"curve",arc:"lowerArc"}],F=[{pos:w,lookAt:v},{pos:y,lookAt:d},{pos:w,lookAt:v},{pos:A,lookAt:v}],E=[{pos:l("11","7.5"),type:"curve",arc:"forwardDownArc"},{pos:l("11","9"),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(p[11],.55,.6525),l("11.5","10"),l("12","10.5"),l("12.5","11")]},{pos:l("13","11"),type:"straight"},{pos:l("14.5","11"),type:"curve",arc:"lowerArc"},{pos:l("15","11.5"),type:"straight"},{pos:l("15","14.5"),type:"curve",arc:"upperArc"},{pos:l("14.5","15"),type:"straight"},{pos:l("13.5","15"),type:"curve",arc:"lowerArc"},{pos:l("13","14.5"),type:"straight"},{pos:l("13","13.5"),type:"curve",arc:"upperArc"},{pos:l("12.5","13"),type:"straight"},{pos:l("7.5","13"),type:"curve",arc:"lowerArc"},{pos:l("7","13.5"),type:"straight"},{pos:l("7","14.5"),type:"curve",arc:"upperArc"},{pos:l("7.5","15"),type:"straight"},{pos:l("10.5","15"),type:"curve",arc:"lowerArc"},{pos:l("11","16"),type:"curve",arc:"upperArc"},{pos:new t.Vector3(p[1],1,2.0095),type:"straight"}],V=[{pos:l("16","10"),type:"straight"},{pos:l("16","10.5"),type:"curve",arc:"upperArc"},{pos:l("15.5","11"),type:"straight"},{pos:l("14.5","11"),type:"straight"}],k=[{pos:l("16","15"),type:"straight"},{pos:l("15.5","15"),type:"curve",arc:"lowerArc"},{pos:l("15","14.5"),type:"straight"},{pos:l("15","13.5"),type:"straight"}],I=[{pos:l("9","12"),type:"straight"},{pos:l("9","12.5"),type:"curve",arc:"upperArc"},{pos:l("9.5","13"),type:"straight"},{pos:l("10.5","13"),type:"straight"}],z=[{pos:l("7","14"),type:"straight"},{pos:l("7","13.5"),type:"curve",arc:"upperArc"},{pos:l("7.5","13"),type:"straight"},{pos:l("8.5","13"),type:"straight"}],x=[{pos:l("11","16"),type:"straight"},{pos:l("11","15.5"),type:"curve",arc:"upperArc"},{pos:l("10.5","15"),type:"straight"},{pos:l("9.5","15"),type:"straight"}],T={ghost1:{triggerPos:new t.Vector3(.65725,.55,.75325),ghostStartFadeIn:new t.Vector3(.7075,.55,.8035),ghostEndFadeIn:new t.Vector3(.725,.55,.8035),ghostStartFadeOut:new t.Vector3(.75,.55,.8035),camStartFadeIn:new t.Vector3(.75775,.55,.8035),camEndFadeIn:new t.Vector3(.775,.55,.8035),camStartFadeOut:new t.Vector3(.84,.55,.8035),endPosition:new t.Vector3(.85825,.55,.8035)},ghost2:{triggerPos:new t.Vector3(.9085,.55,.8035),ghostStartFadeIn:new t.Vector3(.95875,.55,.85375),ghostEndFadeIn:new t.Vector3(.95875,.55,.875),ghostStartFadeOut:new t.Vector3(.95875,.55,.89),camStartFadeIn:new t.Vector3(.95875,.55,.904),camEndFadeIn:new t.Vector3(.95875,.55,.93),camStartFadeOut:new t.Vector3(.95875,.55,.9975),endPosition:new t.Vector3(.95875,.55,1.0045)}};function _(){return g}function O(){return m}const L={pacman:f,ghost1:P,ghost2:S,ghost3:M,ghost4:C,ghost5:b},B={camera:E,ghost1:V,ghost2:k,ghost3:I,ghost4:z,ghost5:x};function $(){return F}s().registerPlugin(n());const j=new t.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,100),q=new t.Scene,R=new t.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),G=new t.Clock,D=[];function H(){const e=Math.min(window.devicePixelRatio,r?2:3);R.setPixelRatio(e),o.mazeContainer?(R.setSize(o.mazeContainer.clientWidth,o.mazeContainer.clientHeight),j.aspect=o.mazeContainer.clientWidth/o.mazeContainer.clientHeight):(R.setSize(window.innerWidth,window.innerHeight),j.aspect=window.innerWidth/window.innerHeight),j.updateProjectionMatrix()}const W=(new t.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),U=new t.MeshMatcapMaterial({matcap:W}),Q=new t.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),Y=new t.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:t.NormalBlending,side:t.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),N=new t.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),J={blue:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new t.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},K={CAM_Pacman_Backframe:J.blue,"CAM-Pacman_Bitcoin_1":J.white,"CAM-Pacman_Bitcoin_2":J.white,"CAM-Pacman_Bottom":J.blue,"CAM-Pacman_Top":J.blue,"CAM-Pacman_Eye":J.white,CAM_Pacman_Logo_1:J.white,CAM_Pacman_Logo_2:J.white,"CAM-Pacman_Shell_Boolean":J.blue,"CAM-Pacman_Shell":J.blue,"CAM-Pacman_Bottom_electronic":J.white,"CAM-Pacman_Top_electronic":J.white,"CAM-Pacman_Bottom_Text":J.white,"CAM-Pacman_Top_Text":J.white,default:J.blue},X=new t.GLTFLoader;let Z;const ee=new t.Group,te={pacman:ee,ghost1:new t.Mesh(new t.BufferGeometry,Y),ghost2:new t.Mesh(new t.BufferGeometry,Y),ghost3:new t.Mesh(new t.BufferGeometry,Y),ghost4:new t.Mesh(new t.BufferGeometry,Y),ghost5:new t.Mesh(new t.BufferGeometry,Y)},re={Ghost_EUR:te.ghost1,Ghost_CHF:te.ghost2,Ghost_YEN:te.ghost3,Ghost_USD:te.ghost4,Ghost_GBP:te.ghost5},oe=new Map;class ce{constructor(e,t=.06){this.currentTangent=e.clone(),this.smoothing=t}update(e){return this.currentTangent.lerp(e,this.smoothing),this.currentTangent.normalize()}reset(e){this.currentTangent.copy(e)}setSmoothingFactor(e){this.smoothing=Math.max(.001,Math.min(1,e))}}function se(e,r){const o=e.map((e=>`${e.pos.x},${e.pos.y},${e.pos.z},${e.type},${e.arc||""}`)).join("|");if(oe.has(o))return oe.get(o);const c=new t.CurvePath;let s=0;for(;s<e.length-1;){const o=e[s],a=e[s+1];if(o.curveCheckPoints&&o.curveCheckPoints.length>0){const e=[o.pos,...o.curveCheckPoints,a.pos];console.log(`Creating CatmullRomCurve3 for ${r} with curveCheckPoints:`,e.map((e=>`(${e.x}, ${e.y}, ${e.z})`))),c.add(new t.CatmullRomCurve3(e,!1,"centripetal",0))}else if("straight"===o.type)console.log("Creating LineCurve3 from",`(${o.pos.x}, ${o.pos.y}, ${o.pos.z})`,"to",`(${a.pos.x}, ${a.pos.y}, ${a.pos.z})`),c.add(new t.LineCurve3(o.pos,a.pos));else{const e=ae(o,a);console.log("Creating QuadraticBezierCurve3 from",`(${o.pos.x}, ${o.pos.y}, ${o.pos.z})`,"via",`(${e.x}, ${e.y}, ${e.z})`,"to",`(${a.pos.x}, ${a.pos.y}, ${a.pos.z})`),c.add(new t.QuadraticBezierCurve3(o.pos,e,a.pos))}s++}return oe.set(o,c),c}function ae(e,r){if(e.arc){const o=e.arc;if("upperArc"===o)return new t.Vector3(e.pos.x,e.pos.y,r.pos.z);if("lowerArc"===o)return new t.Vector3(r.pos.x,e.pos.y,e.pos.z);if("forwardDownArc"===o)return new t.Vector3(e.pos.x,r.pos.y,e.pos.z)}return new t.Vector3(e.pos.x,e.pos.y,r.pos.z)}function ne(e){const r=new t.CurvePath;if(4===e.length){const o=new t.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);r.add(o)}return r}function pe(){const e={};return Object.entries(L).forEach((([t,r])=>{e[t]=se(r,t)})),e}function ie(){const e={};return Object.entries(B).forEach((([t,r])=>{e[t]=se(r,t)})),e}function le(e,t,r="ghost"){if(!t||0===t.length())return;const o=Math.atan2(t.x,t.z);if("pacman"===r)e.rotation.set(Math.PI/2,Math.PI,o+Math.PI/2);else if("ghost"===r)e.rotation.set(0,o,0);else if("camera"===r){const r=e.position.clone().add(t);e.lookAt(r)}}function ue(e,r,o){const c=(new t.Quaternion).setFromEuler(new t.Euler(Math.PI/2,0,0)),s=(new t.Quaternion).setFromEuler(new t.Euler(-Math.PI/2,0,0)),a=r.angleTo(c)<r.angleTo(s)?c:s;e.quaternion.copy(r.clone().slerp(a,o))}let he=null;const ge={pacman:.9,ghost1:1,ghost2:1.1,ghost3:1.2,ghost4:1.3,ghost5:1.4};function ye(e,r){he&&(he.kill(),he=null);const o=function(e){const r=function(e){const r={};return Object.entries(e).forEach((([e,o])=>{const c=new t.Vector3(o.x*(1/4)+u.x*(3/4),1.5,o.z*(1/4)+u.z*(3/4));r[e]=[{pos:o.clone()},{pos:c},{pos:u}]})),r}(e),o={camera:ne($())};return Object.entries(r).forEach((([e,r])=>{o[e]=function(e){const r=new t.CurvePath;if(3===e.length){const o=new t.QuadraticBezierCurve3(e[0].pos,e[1].pos,e[2].pos);r.add(o)}return r}(r)})),o}(e),c=$();he=s().timeline({scrollTrigger:{id:"homeScroll",trigger:".sc--home",start:"top top",end:"bottom top",scrub:.5,onScrubComplete:()=>{Me()}}}).to({progress:0},{progress:1,immediateRender:!1,onUpdate:function(){!function(e,r,o,c){if(r.camera){const o=r.camera.getPointAt(e);j.position.copy(o);const s=new t.CubicBezierCurve3(c[0].lookAt,c[1].lookAt,c[2].lookAt,c[3].lookAt).getPoint(e);j.lookAt(s),j.updateProjectionMatrix()}const s=.85,a=e<s?1:e>.95?0:1-(e-s)/.09999999999999998;if(r.pacman&&ee){const t=ge.pacman??1,c=Math.min(e*t,1),s=Math.pow(c,1.25),n=r.pacman.getPointAt(s);n&&(ee.position.copy(n),ue(ee,o.pacman,s),ee.traverse((e=>{e.isMesh&&e.material&&(e.material.opacity=a)})))}Object.entries(te).forEach((([t,c])=>{const s=r[t];if(s){const r=ge[t]??1,n=Math.min(e*r,1),p=Math.pow(n,1.25),i=s.getPointAt(p);i&&(c.position.copy(i),ue(c,o[t],p),c.material&&(c.material.opacity=a))}}))}(this.targets()[0].progress,o,r,c)}})}const me=50;let de=!0,we=0,ve=0,Ae={},fe={},Pe=!1;const Se={};function Me(){0===window.scrollY&&function(){de=!0,we=ve*me,Se.pacman=new ce(new t.Vector3(1,0,0),.06),Se.ghost1=new ce(new t.Vector3(1,0,0),.06),Se.ghost2=new ce(new t.Vector3(1,0,0),.06),Se.ghost3=new ce(new t.Vector3(1,0,0),.06),Se.ghost4=new ce(new t.Vector3(1,0,0),.06),Se.ghost5=new ce(new t.Vector3(1,0,0),.06);const e=pe();var r;Object.entries(te).forEach((([t,r])=>{const o=e[t];if(o){const e=o.getPointAt(0);if(e&&r.position.copy(e),r.visible=!0,r.scale.set(1,1,1),Se[t]){const e=o.getTangentAt(0);e&&Se[t].reset(e)}}})),Pe||(r=()=>function(e){if(!de)return;we+=e;const t=we%me/me,r=pe();Object.entries(te).forEach((([e,o])=>{const c=r[e];if(c){const r=c.getPointAt(t);if(r&&o.position.copy(r),Se[e]&&t>0){const r=c.getTangentAt(t);r&&r.length()>0&&le(o,Se[e].update(r),"pacman"===e?"pacman":"ghost")}}}))}(G.getDelta()),D.push(r),Pe=!0)}()}let Ce=null,be=!1,Fe=null,Ee=!1,Ve=!1,ke=!1,Ie=!1,ze=0;const xe=new t.Vector3(.55675,.55,1.306),Te=new t.Vector3(-.14675,1,1.8085),_e=new t.Vector3(.55675,.1,1.306),Oe=new t.Vector3(-.14675,0,1.8085),Le=new t.Vector3(7.395407041377711,.9578031302345096,-4.312450290270135);let Be=null,$e=!0;const je={},qe={};function Re(){Ce&&(Ce.kill(),Ce=null),ie(),qe.camera=new ce(new t.Vector3(0,0,-1),.08),qe.ghost1=new ce(new t.Vector3(1,0,0),.08),qe.ghost2=new ce(new t.Vector3(1,0,0),.08),qe.ghost3=new ce(new t.Vector3(1,0,0),.08),qe.ghost4=new ce(new t.Vector3(1,0,0),.08),qe.ghost5=new ce(new t.Vector3(1,0,0),.08),Object.keys(T).forEach((e=>{je[e]={hasBeenTriggered:!1,hasBeenDeactivated:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0,ghostTextOpacity:0,camTextOpacity:0,lastProgress:0}})),Ce=s().timeline({scrollTrigger:{id:"povScroll",trigger:o.povSection,start:"top bottom",end:"bottom top",endTrigger:".sc--final",scrub:.5,toggleActions:"play none none reverse",onEnter:()=>{be=!0}}}).to({progress:0},{progress:1,immediateRender:!1,onStart:Ge,onUpdate:function(){De.call(this)},onReverseComplete:()=>{He(),We(!0)},onComplete:()=>{He(),We()}})}function Ge(){const e=ie();if(qe.camera&&e.camera){const t=e.camera.getTangentAt(0);t&&qe.camera.reset(t)}Object.entries(te).forEach((([t,r])=>{if(e[t]&&"pacman"!==t){const o=e[t].getPointAt(0);r.position.copy(o);const c=e[t].getTangentAt(0).normalize();r.lookAt(o.clone().add(c)),r.visible=!1,r.scale.set(.5,.5,.5)}})),te.pacman&&(te.pacman.visible=!1),Ee=!0}function De(){const e=this.targets()[0].progress,r=ie();if(!r.camera)return;const o=r.camera.getPointAt(e);Fe?(function(e,r){const o=r.camera.getPointAt(e);j.position.copy(o),j.fov=80;const c=document.querySelector("canvas");c&&"none"===c.style.display&&e<.99&&(c.style.display="block");const a=r.camera.getTangentAt(e).normalize();let n=a;qe.camera&&e>0&&(n=qe.camera.update(a));const p=o.clone().add(n);e>=.973?function(e,r,o){const c=Qe(ie().camera,xe),a=Qe(ie().camera,Te);if(e>=c&&e<=a){const n=(e-c)/(a-c);if(null===Be){const e=new t.Vector2(o.x-r.x,o.z-r.z).normalize();Be=Math.atan2(e.y,e.x),Be=Be>3?Be/2:Be}const p=new t.Vector2(_e.x-r.x,_e.z-r.z).normalize();let i=Math.atan2(p.y,p.x),l=i-Be;l>Math.PI?l-=2*Math.PI:l<-Math.PI&&(l+=2*Math.PI),l=1.75*-l,i=Be+l;const u=Ue(n),h=Be*(1-u)+i*u,g=1,y=new t.Vector3(r.x+Math.cos(h)*g,r.y,r.z+Math.sin(h)*g);j.lookAt(y),Ve=!0,e>=.8&&!ke&&(ke=!0,function(){const e=document.querySelector(".sc--final.sc");e&&s().timeline({scrollTrigger:{trigger:".sc--final",start:"top top",end:"bottom bottom",scrub:.5,toggleActions:"play none none reverse"}}).to(e,{opacity:1,ease:"power2.inOut",onComplete:()=>{Ie=!0,ke=!1}})}())}}(e,o,p):e>.8&&Ie?function(e){if(0===ze&&1!==e){const t=Math.floor(100*e)/100;ze=.99===t?.973:e}const r=(e-ze)/(1-ze);if($e&&r>0){const e=function(){const e=new t.Vector3(0,0,-1);e.applyQuaternion(j.quaternion);const r=new t.Vector3;return r.copy(j.position).add(e.multiplyScalar(10)),r}(),o=(new t.Vector3).lerpVectors(e,Oe,Ue(r)),c=80,s=20;j.fov=c+(s-c)*Ue(r),j.lookAt(o)}else if(r>0){const e=(new t.Vector3).lerpVectors(Le,Oe,Ue(r)),o=20,c=80;j.fov=c-(c-o)*Ue(r),j.lookAt(e)}}(e):function(e,t){const r=Qe(ie().camera,xe),o=Qe(ie().camera,Te);if((e<r||e>o)&&!ke){Be=null,Ve=!1,Ie=!1,ke=!1;const e=document.querySelector(".sc--final.sc");e&&(e.style.opacity="0")}Ve||ke||j.lookAt(t),Ie&&e>.8||(ze=0)}(e,p),j.updateProjectionMatrix()}(e,r),function(e,t,r){Object.entries(T).forEach((([t,o])=>{const c=te[t],s=r[t];c&&s&&"pacman"!==t&&function(e,t,r,o,c){const{triggerPos:s,ghostStartFadeIn:a,ghostEndFadeIn:n,ghostStartFadeOut:p,camStartFadeIn:i,camEndFadeIn:l,camStartFadeOut:u,endPosition:h}=c,g=je[e],y=document.querySelectorAll(".cmp--pov.cmp")[parseInt(e.replace("ghost",""))-1];if(!y)return;const m=y.querySelectorAll(".pov"),d=y.querySelectorAll(".cam");if(!m||!d||0===m.length||0===d.length)return;null===g.triggerCameraProgress&&(g.triggerCameraProgress=Qe(ie().camera,s,800),g.ghostStartFadeInProgress=Qe(ie().camera,a,800),g.ghostEndFadeInProgress=Qe(ie().camera,n,800),g.ghostStartFadeOutProgress=Qe(ie().camera,p,800),g.camStartFadeInProgress=Qe(ie().camera,i,800),g.camEndFadeInProgress=Qe(ie().camera,l,800),g.camStartFadeOutProgress=Qe(ie().camera,u,800),g.endCameraProgress=Qe(ie().camera,h,800));const w=Qe(ie().camera,o,800);if(w>=g.triggerCameraProgress&&w<=g.endCameraProgress){if(!t.visible&&(t.visible=!0,g.hasBeenTriggered=!0,qe[e])){const t=r.getTangentAt(0);t&&qe[e].reset(t)}const o=(w-g.triggerCameraProgress)/(g.endCameraProgress-g.triggerCameraProgress);let c=Math.max(0,Math.min(1,o));if(void 0===g.currentPathT)g.currentPathT=c;else{const e=.1;g.currentPathT+=(c-g.currentPathT)*e}c=g.currentPathT;const s=r.getPointAt(c);if(t.position.copy(s),qe[e]&&c>0){const o=r.getTangentAt(c);o&&o.length()>0&&le(t,qe[e].update(o),"ghost")}if(c>.9){const e=t;e.material&&"opacity"in e.material&&(e.material.opacity=1-(c-.9)/.1)}else{const e=t;e.material&&"opacity"in e.material&&(e.material.opacity=1)}}else t.visible=!1,g.hasBeenTriggered=!1;!function(e,t,r,o,c,s){let a=0,n=0;if(t>=r.ghostStartFadeInProgress&&t<=r.ghostEndFadeInProgress){const e=(t-r.ghostStartFadeInProgress)/(r.ghostEndFadeInProgress-r.ghostStartFadeInProgress);a=Math.min(1,e),o.style.opacity=a.toString()}else if(t>r.ghostEndFadeInProgress&&t<r.ghostStartFadeOutProgress)a=1;else if(t>=r.ghostStartFadeOutProgress&&t<=r.camStartFadeInProgress){const e=(t-r.ghostStartFadeOutProgress)/(r.camStartFadeInProgress-r.ghostStartFadeOutProgress);a=Math.max(0,1-e)}if(t>=r.camStartFadeInProgress&&t<=r.camEndFadeInProgress){const e=(t-r.camStartFadeInProgress)/(r.camEndFadeInProgress-r.camStartFadeInProgress);n=Math.min(1,e)}else if(t>r.camEndFadeInProgress&&t<r.camStartFadeOutProgress)n=1;else if(t>=r.camStartFadeOutProgress&&t<=r.endCameraProgress){const e=(t-r.camStartFadeOutProgress)/(r.endCameraProgress-r.camStartFadeOutProgress);n=Math.max(0,1-e),o.style.opacity=n.toString()}n>.01&&a>.01?o.classList.contains("no-visibility")||o.classList.add("no-visibility"):o.classList.contains("no-visibility")||o.classList.remove("no-visibility"),c.forEach((e=>{const t=e;a>.01?(t.classList.remove("no-visibility"),t.style.opacity=a.toString()):a<=.01&&!t.classList.contains("no-visibility")&&(t.classList.add("no-visibility"),t.style.opacity="0")})),s.forEach((e=>{const t=e;n>.01?(t.classList.remove("no-visibility"),t.style.opacity=n.toString()):n<=.01&&!t.classList.contains("no-visibility")&&(t.classList.add("no-visibility"),t.style.opacity="0")}))}(0,w,g,y,m,d)}(t,c,s,e,o)}))}(o,0,r),Fe.copy(o)):Fe=o.clone()}function He(){be=!1,console.log("handleLeavePOV"),Object.entries(te).forEach((([e,t])=>{if("pacman"!==e){t.visible=!1;const r=parseInt(e.replace("ghost",""))-1,o=document.querySelectorAll(".cmp--pov.cmp")[r];if(o){const e=document.querySelectorAll(".pov"),t=document.querySelectorAll(".cam");e.forEach((e=>{const t=e;t.classList.add("no-visibility"),t.style.opacity="0"})),t.forEach((e=>{const t=e;t.classList.add("no-visibility"),t.style.opacity="0"}))}o.classList.contains("no-visibility")||o.classList.add("no-visibility");const c=t;c.material&&"opacity"in c.material&&(c.material.opacity=1)}})),te.pacman&&(te.pacman.visible=!0),j.updateProjectionMatrix(),Object.keys(qe).forEach((e=>{if(qe[e]){const r="camera"===e?new t.Vector3(0,0,-1):new t.Vector3(1,0,0);qe[e].reset(r)}}))}function We(e=!1){if(te.pacman&&(te.pacman.visible=!0),Ve=!1,Be=null,ze=0,ke=!1,e)Ie=!1;else{const e=document.querySelector("canvas");e&&(e.style.display="none"),j.lookAt(Oe),Ie=!0}Object.keys(je).forEach((e=>{je[e]={hasBeenTriggered:!1,hasBeenDeactivated:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0,ghostTextOpacity:0,camTextOpacity:0,lastProgress:0},qe[e]&&qe[e].reset(new t.Vector3(1,0,0))})),qe.camera&&qe.camera.reset(new t.Vector3(0,0,-1))}function Ue(e){return e*e*(3-2*e)}function Qe(e,t,r=2e3){if(!e||!t)return 0;let o=0,c=1/0;for(let s=0;s<r;s++)try{const a=s/(r-1),n=e.getPointAt(a);if(!n)continue;const p=n.distanceTo(t);p<c&&(c=p,o=a)}catch(e){}return o}let Ye=0;window.addEventListener("scroll",(()=>{const e=window.scrollY;$e=e>Ye,Ye=e})),async function(){r?R.setPixelRatio(Math.min(window.devicePixelRatio,2)):R.setPixelRatio(window.devicePixelRatio),R.shadowMap.enabled=!0,R.shadowMap.type=t.PCFSoftShadowMap,o.mazeContainer?(R.setSize(o.mazeContainer.clientWidth,o.mazeContainer.clientHeight),o.mazeContainer.appendChild(R.domElement)):(R.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(R.domElement)),H(),window.addEventListener("resize",H),R.render(q,j),function(){const e=new t.AmbientLight(16777215);q.add(e);const r=new t.DirectionalLight(16777215,.8);q.add(r),r.position.set(-5,15,10),r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.camera.left=-20,r.shadow.camera.right=20,r.shadow.camera.top=20,r.shadow.camera.bottom=-20,r.shadow.camera.near=.1,r.shadow.camera.far=50,r.shadow.bias=-.001,r.shadow.radius=3,r.castShadow=!0}(),function(){const e=_(),t=O();j.position.set(e.x,e.y,e.z),j.lookAt(t.x,t.y,t.z)}(),await async function(e){return Object.values(te).forEach((t=>e.add(t))),e.add(ee),new Promise(((r,o)=>{X.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(o){const c=o.scene;console.log("=== 3D Model Hierarchy ==="),c.traverse((e=>{console.log(`[${e.type}] ${e.name}`)})),console.log("========================="),c.traverse((r=>{if("CAM-Pacman"===r.name){const e=[];r.traverse((t=>{if(t.isMesh&&"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name){const r=K[t.name]||K.default;t.material=r,e.push(t)}else"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name||(t.visible=!1)})),e.forEach((e=>te.pacman.add(e))),te.pacman.scale.set(.05,.05,.05),te.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),Z=new t.AnimationMixer(te.pacman);const c={};o.animations.forEach((e=>{const t=Z.clipAction(e);c[e.name]=t,t.setEffectiveWeight(1),t.play()}))}else if(r.name&&re[r.name]){const e=re[r.name],o=new t.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const c=[];r.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=Y:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),c.push(e))})),c.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),e?e.add(o):console.warn(`ghostContainer for ${r.name} is undefined!`)}if(r.isMesh)if("CAM-Arena_LowRes_Top"===r.name)r.material=Q,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===r.name)r.material=U,r.castShadow=!0;else if("CAM-Floor"===r.name){const o=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new t.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:t.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),o.material=N,o.position.y=-.5,o.receiveShadow=!0,e.add(o)}else r.visible=!1})),c.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.add(c),c.position.set(.5,.5,.5),r()}),(function(e){}),(function(e){o(e)}))}))}(q),Me(),window.addEventListener("scroll",(()=>{0!==window.scrollY&&de&&(de=!1,ve=we%me/me,Ae={},fe={},Object.entries(te).forEach((([e,t])=>{Ae[e]=t.position.clone(),fe[e]=t.quaternion.clone()})),ye(Ae,fe))})),Re(),function(){const e=()=>{D.forEach((e=>e())),R.render(q,j),requestAnimationFrame(e)};e()}()}()})();
//# sourceMappingURL=script.js.map