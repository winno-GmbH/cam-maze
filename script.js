(()=>{"use strict";var e={417:(e,t,r)=>{r.d(t,{F:()=>o,k:()=>n});const o=window.innerWidth<768,n={mazeTexture:"https://c-am.b-cdn.net/CAM/matcap24.png",mazeModel:"https://c-am.b-cdn.net/CAM/c-am-assets-3.glb"}},909:e=>{e.exports=THREE},991:(e,t,r)=>{r.r(t),r.d(t,{createHomeScrollPathPoints:()=>V,getCameraHomeScrollPathPoints:()=>L,getLookAtPosition:()=>z,getStartPosition:()=>I,homePaths:()=>T,objectHomeScrollEndPathPoint:()=>c,povPaths:()=>B,povTriggerPositions:()=>O});var o=r(909),n=r(417);const s={0:-.54875,.5:-.4985,1:-.44825,1.5:-.398,2:-.34775,2.5:-.2975,3:-.24725,3.5:-.197,4:-.14675,4.5:-.0965,5:-.04625,5.5:.004,6:.05425,6.5:.1045,7:.15475,7.5:.205,8:.25525,8.5:.3055,9:.35575,9.5:.406,10:.45625,10.5:.5065,11:.55675,11.5:.607,12:.65725,12.5:.7075,13:.75775,13.5:.808,14:.85825,14.5:.9085,15:.95875,15.5:1.009,16:1.05925,16.5:1.1095,17:1.15975,17.5:1.21,18:1.26025,18.5:1.3105,19:1.36075,19.5:1.411,20:1.46125},a={0:-.302,.5:-.25175,1:-.2015,1.5:-.15125,2:-.101,2.5:-.05075,3:-5e-4,3.5:.04975,4:.1,4.5:.15025,5:.2005,5.5:.25075,6:.301,6.5:.35125,7:.4015,7.5:.45175,8:.502,8.5:.55225,9:.6025,9.5:.65275,10:.703,10.5:.75325,11:.8035,11.5:.85375,12:.904,12.5:.95425,13:1.0045,13.5:1.05475,14:1.105,14.5:1.15525,15:1.2055,15.5:1.25575,16:1.306},i=(e,t)=>new o.Vector3(s[e],.55,a[t]),c=new o.Vector3(.55675,.35,.45175),l={startMobile:new o.Vector3(.5,2.5,2.5),startDesktop:new o.Vector3(-2,2.5,2),secondMobile:new o.Vector3(.5,2.5,2),secondDesktop:new o.Vector3(-1.5,3,.75),mobileLookAt:new o.Vector3(.5,.5,-1.5),desktopLookAt:new o.Vector3(-1.25,.5,.25),cameraLookAtSecondDesktop:new o.Vector3(-.75,.5,-.75),cameraLookAtSecondMobile:new o.Vector3(-.75,.5,-.75),cameraHomeScrollEndLookAt:new o.Vector3(.55675,-5,.35),thirdPosition:new o.Vector3(.55675,3,.45175),cameraHomeScrollEndPathPoint:new o.Vector3(.55675,.5,.45175)},p=n.F?l.startMobile:l.startDesktop,u=n.F?l.secondMobile:l.secondDesktop,d=n.F?l.mobileLookAt:l.desktopLookAt,h=n.F?l.cameraLookAtSecondMobile:l.cameraLookAtSecondDesktop,m=l.thirdPosition,y=l.cameraHomeScrollEndLookAt,g=l.cameraHomeScrollEndPathPoint,f=[{pos:i("8","9"),type:"straight"},{pos:i("8","6"),type:"curve",arc:"upperArc"},{pos:i("9","5"),type:"curve",arc:"lowerArc"},{pos:i("10","4"),type:"straight"},{pos:i("10","2"),type:"curve",arc:"upperArc"},{pos:i("9","1"),type:"straight"},{pos:i("7","1"),type:"curve",arc:"lowerArc"},{pos:i("6","2"),type:"curve",arc:"upperArc"},{pos:i("5","3"),type:"curve",arc:"lowerArc"},{pos:i("4","2"),type:"curve",arc:"upperArc"},{pos:i("3","1"),type:"straight",curveCheckPoints:[i("2","1"),i("1","2"),i("1","2.5"),i("1.5","3"),i("2","3.5")]},{pos:i("2","4"),type:"curve",arc:"upperArc"},{pos:i("3","5"),type:"straight"},{pos:i("5","5"),type:"curve",arc:"lowerArc"},{pos:i("6","6"),type:"curve",arc:"upperArc"},{pos:i("5","7"),type:"straight"},{pos:i("4","7"),type:"curve",arc:"lowerArc"},{pos:i("3","8"),type:"curve",arc:"upperArc"},{pos:i("4","9"),type:"straight"},{pos:i("5","9"),type:"curve",arc:"lowerArc"},{pos:i("6","10"),type:"curve",arc:"upperArc"},{pos:i("5","11"),type:"straight",curveCheckPoints:[i("3","11"),i("2","12"),i("1.5","13"),i("1","14"),i("2","15"),i("3","15"),i("4","14"),i("5","13")]},{pos:i("6","13"),type:"curve",arc:"lowerArc"},{pos:i("7","14"),type:"curve",arc:"upperArc"},{pos:i("6","15"),type:"straight"},{pos:i("5","15"),type:"curve",arc:"lowerArc"},{pos:i("4","14"),type:"curve",arc:"upperArc"},{pos:i("5","13"),type:"straight",curveCheckPoints:[i("12","13"),i("13","12"),i("12.5","11"),i("12","10.5"),i("11","10"),i("10","10.5"),i("9","11"),i("8","10"),i("8","9.5")]},{pos:i("8","9"),type:"straight"}],w=[{pos:i("1","10"),type:"straight"},{pos:i("1","6"),type:"curve",arc:"upperArc"},{pos:i("2","5"),type:"straight"},{pos:i("3","5"),type:"curve",arc:"lowerArc"},{pos:i("4","4"),type:"curve",arc:"upperArc"},{pos:i("5","3"),type:"straight"},{pos:i("9","3"),type:"curve",arc:"lowerArc"},{pos:i("10","4"),type:"curve",arc:"upperArc"},{pos:i("9","5"),type:"curve",arc:"lowerArc"},{pos:i("8","6"),type:"straight",curveCheckPoints:[i("8","10"),i("9","11"),i("10","10.5"),i("11","10"),i("12","10.5"),i("13","11"),i("15","11"),i("16","10.5"),i("17","10"),i("18","10.5"),i("19","11"),i("20","10")]},{pos:i("20","6"),type:"curve",arc:"upperArc"},{pos:i("19","5"),type:"straight"},{pos:i("9","5"),type:"curve",arc:"lowerArc"},{pos:i("8","6"),type:"straight",curveCheckPoints:[i("8","8"),i("7","9"),i("6","10"),i("5.5","11"),i("5","12"),i("6","13"),i("7","14"),i("6","15"),i("5","15"),i("4","14"),i("4.5","13"),i("5","12"),i("4","11")]},{pos:i("1","10"),type:"straight"}],v=[{pos:i("5","12"),type:"curve",arc:"upperArc",curveCheckPoints:[i("5.5","11")]},{pos:i("6","10"),type:"curve",arc:"upperArc"},{pos:i("5","9"),type:"straight"},{pos:i("4","9"),type:"curve",arc:"lowerArc"},{pos:i("3","8"),type:"curve",arc:"upperArc"},{pos:i("4","7"),type:"straight"},{pos:i("7","7"),type:"curve",arc:"lowerArc"},{pos:i("8","8"),type:"straight"},{pos:i("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[i("8.5","11"),i("9","12")]},{pos:i("10","13"),type:"straight"},{pos:i("12","13"),type:"curve",arc:"lowerArc"},{pos:i("13","14"),type:"curve",arc:"upperArc"},{pos:i("14","15"),type:"straight"},{pos:i("19","15"),type:"curve",arc:"lowerArc"},{pos:i("20","14"),type:"straight"},{pos:i("20","4"),type:"curve",arc:"upperArc"},{pos:i("19","3"),type:"straight"},{pos:i("17","3"),type:"curve",arc:"lowerArc"},{pos:i("16","4"),type:"curve",arc:"upperArc"},{pos:i("15","5"),type:"curve",arc:"lowerArc"},{pos:i("14","4"),type:"straight"},{pos:i("14","2"),type:"curve",arc:"upperArc"},{pos:i("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[i("12","1.5")]},{pos:i("11","2"),type:"curve",arc:"lowerArc"},{pos:i("10","3"),type:"straight"},{pos:i("10","4"),type:"curve",arc:"upperArc"},{pos:i("9","5"),type:"curve",arc:"lowerArc"},{pos:i("8","6"),type:"straight"},{pos:i("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[i("8.5","11")]},{pos:i("9","12"),type:"curve",arc:"upperArc"},{pos:i("8","13"),type:"curve",arc:"lowerArc"},{pos:i("7","14"),type:"curve",arc:"upperArc"},{pos:i("6","15"),type:"straight"},{pos:i("5","15"),type:"curve",arc:"lowerArc"},{pos:i("4","14"),type:"curve",arc:"upperArc",curveCheckPoints:[i("4.5","13"),i("5","12")]}],b=[{pos:i("14","10.5"),type:"straight"},{pos:i("14","2"),type:"curve",arc:"upperArc"},{pos:i("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[i("12","1.5"),i("11","2"),i("10","1.5")]},{pos:i("9","1"),type:"straight"},{pos:i("7","1"),type:"curve",arc:"lowerArc"},{pos:i("6","2"),type:"curve",arc:"upperArc"},{pos:i("7","3"),type:"straight"},{pos:i("9","3"),type:"curve",arc:"lowerArc"},{pos:i("10","4"),type:"curve",arc:"upperArc"},{pos:i("11","5"),type:"straight"},{pos:i("19","5"),type:"curve",arc:"lowerArc"},{pos:i("20","6"),type:"straight"},{pos:i("20","10"),type:"curve",arc:"upperArc"},{pos:i("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[i("18","10.5"),i("17","10"),i("16","10.5"),i("15.5","11")]},{pos:i("15","12"),type:"straight"},{pos:i("15","14"),type:"curve",arc:"upperArc"},{pos:i("14","15"),type:"curve",arc:"lowerArc"},{pos:i("13","14"),type:"straight"},{pos:i("13","12"),type:"curve",arc:"upperArc",curveCheckPoints:[i("12.5","11"),i("12","10.5"),i("10","10.5")]},{pos:i("9","11"),type:"curve",arc:"lowerArc"},{pos:i("8","10"),type:"curve",arc:"upperArc"},{pos:i("7","9"),type:"curve",arc:"lowerArc"},{pos:i("6","10"),type:"curve",arc:"upperArc",curveCheckPoints:[i("5.5","11")]},{pos:i("5","12"),type:"curve",arc:"upperArc"},{pos:i("6","13"),type:"straight"},{pos:i("12","13"),type:"curve",arc:"lowerArc"},{pos:i("13","12"),type:"curve",arc:"upperArc"},{pos:i("13.5","11"),type:"curve",arc:"lowerArc"},{pos:i("14","10.5"),type:"straight"}],A=[{pos:i("16","7"),type:"straight"},{pos:i("16","10"),type:"curve",arc:"upperArc"},{pos:i("15","11"),type:"straight"},{pos:i("14","11"),type:"curve",arc:"lowerArc"},{pos:i("13","12"),type:"curve",arc:"upperArc"},{pos:i("12","13"),type:"straight"},{pos:i("8","13"),type:"curve",arc:"lowerArc"},{pos:i("7","14"),type:"curve",arc:"upperArc"},{pos:i("6","15"),type:"straight"},{pos:i("2","15"),type:"curve",arc:"lowerArc"},{pos:i("1","14"),type:"curve",arc:"upperArc",curveCheckPoints:[i("1.5","13"),i("2","12"),i("1.5","11")]},{pos:i("1","10"),type:"straight"},{pos:i("1","6"),type:"curve",arc:"upperArc"},{pos:i("2","5"),type:"straight"},{pos:i("5","5"),type:"curve",arc:"lowerArc"},{pos:i("6","6"),type:"curve",arc:"upperArc"},{pos:i("7","7"),type:"curve",arc:"lowerArc"},{pos:i("8","6"),type:"curve",arc:"upperArc"},{pos:i("9","5"),type:"straight"},{pos:i("13","5"),type:"curve",arc:"lowerArc"},{pos:i("14","4"),type:"straight"},{pos:i("14","2"),type:"curve",arc:"upperArc"},{pos:i("15","1"),type:"curve",arc:"lowerArc"},{pos:i("16","2"),type:"curve",arc:"upperArc"},{pos:i("17","3"),type:"straight"},{pos:i("19","3"),type:"curve",arc:"lowerArc"},{pos:i("20","2"),type:"curve",arc:"upperArc"},{pos:i("19","1"),type:"curve",arc:"lowerArc"},{pos:i("18","2"),type:"curve",arc:"upperArc"},{pos:i("19","3"),type:"curve",arc:"lowerArc"},{pos:i("20","4"),type:"straight"},{pos:i("20","10"),type:"curve",arc:"upperArc"},{pos:i("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[i("18","10.5")]},{pos:i("17","10"),type:"curve",arc:"lowerArc"},{pos:i("16","9"),type:"straight"},{pos:i("16","7"),type:"straight"}],P=[{pos:i("10","3.5"),type:"curve",arc:"upperArc"},{pos:i("9","3"),type:"straight"},{pos:i("5","3"),type:"curve",arc:"lowerArc"},{pos:i("4","2"),type:"curve",arc:"upperArc"},{pos:i("3","1"),type:"straight"},{pos:i("2","1"),type:"curve",arc:"lowerArc"},{pos:i("1","2"),type:"curve",arc:"upperArc"},{pos:i("1.5","3"),type:"curve",arc:"lowerArc"},{pos:i("2","4"),type:"curve",arc:"upperArc"},{pos:i("3","5"),type:"straight"},{pos:i("5","5"),type:"curve",arc:"lowerArc"},{pos:i("6","6"),type:"curve",arc:"upperArc"},{pos:i("5","7"),type:"straight"},{pos:i("4","7"),type:"curve",arc:"lowerArc"},{pos:i("3","8"),type:"curve",arc:"upperArc"},{pos:i("4","9"),type:"straight"},{pos:i("7","9"),type:"curve",arc:"lowerArc"},{pos:i("8","10"),type:"curve",arc:"upperArc"},{pos:i("8.5","11"),type:"curve",arc:"lowerArc"},{pos:i("9","12"),type:"curve",arc:"upperArc"},{pos:i("10","13"),type:"straight"},{pos:i("12","13"),type:"curve",arc:"lowerArc"},{pos:i("13","12"),type:"curve",arc:"upperArc"},{pos:i("14","11"),type:"curve",arc:"lowerArc"},{pos:i("15","12"),type:"curve",arc:"upperArc"},{pos:i("15","14"),type:"curve",arc:"upperArc"},{pos:i("16","15"),type:"straight"},{pos:i("19","15"),type:"curve",arc:"lowerArc"},{pos:i("20","14"),type:"straight"},{pos:i("20","2"),type:"curve",arc:"upperArc"},{pos:i("19","1"),type:"straight"},{pos:i("17","1"),type:"curve",arc:"lowerArc"},{pos:i("16","2"),type:"straight"},{pos:i("16","4"),type:"curve",arc:"upperArc"},{pos:i("15","5"),type:"curve",arc:"lowerArc"},{pos:i("14","4"),type:"straight"},{pos:i("14","2"),type:"curve",arc:"upperArc"},{pos:i("13","1"),type:"curve",arc:"lowerArc"},{pos:i("12","1.5"),type:"curve",arc:"upperArc"},{pos:i("11","2"),type:"curve",arc:"lowerArc"},{pos:i("10","3.5"),type:"curve",arc:"lowerArc"}],x=[{pos:p,lookAt:d},{pos:u,lookAt:h},{pos:m,lookAt:y},{pos:g,lookAt:y}],S=[{pos:new o.Vector3(s[11],.40625,a[7.5]),type:"straight",lookAtSequence:[new o.Vector3(s[11],.2,a[8]),new o.Vector3(s[11],1.2,a[16]),new o.Vector3(s[11],.55,a[16])]},{pos:i("11","7.5"),type:"curve",arc:"lowerArc"},{pos:i("11","9"),type:"curve",arc:"upperArc",curveCheckPoints:[new o.Vector3(s[11],.55,.6525),i("11.5","10"),i("12","10.5"),i("12.5","11")]},{pos:i("13","11"),type:"straight"},{pos:i("14.5","11"),type:"curve",arc:"lowerArc"},{pos:i("15","11.5"),type:"straight"},{pos:i("15","14.5"),type:"curve",arc:"upperArc"},{pos:i("14.5","15"),type:"straight"},{pos:i("13.5","15"),type:"curve",arc:"lowerArc"},{pos:i("13","14.5"),type:"straight"},{pos:i("13","13.5"),type:"curve",arc:"upperArc"},{pos:i("12.5","13"),type:"straight"},{pos:i("7.5","13"),type:"curve",arc:"lowerArc"},{pos:i("7","13.5"),type:"straight"},{pos:i("7","14.5"),type:"curve",arc:"upperArc"},{pos:i("7.5","15"),type:"straight"},{pos:i("10.5","15"),type:"curve",arc:"lowerArc"},{pos:i("11","16"),type:"curve",arc:"upperArc"}],M=[{pos:i("16","10"),type:"straight"},{pos:i("16","10.5"),type:"curve",arc:"upperArc"},{pos:i("15.5","11"),type:"straight"},{pos:i("14.5","11"),type:"straight"}],E=[{pos:i("16","15"),type:"straight"},{pos:i("15.5","15"),type:"curve",arc:"lowerArc"},{pos:i("15","14.5"),type:"straight"},{pos:i("15","13.5"),type:"straight"}],k=[{pos:i("9","12"),type:"straight"},{pos:i("9","12.5"),type:"curve",arc:"upperArc"},{pos:i("9.5","13"),type:"straight"},{pos:i("10.5","13"),type:"straight"}],F=[{pos:i("7","14"),type:"straight"},{pos:i("7","13.5"),type:"curve",arc:"upperArc"},{pos:i("7.5","13"),type:"straight"},{pos:i("8.5","13"),type:"straight"}],C=[{pos:i("11","16"),type:"straight"},{pos:i("11","15.5"),type:"curve",arc:"upperArc"},{pos:i("10.5","15"),type:"straight"},{pos:i("9.5","15"),type:"straight"}],O={ghost1:{triggerPos:new o.Vector3(.65725,.55,.75325),ghostStartFadeIn:new o.Vector3(.7075,.55,.8035),ghostEndFadeIn:new o.Vector3(.725,.55,.8035),ghostStartFadeOut:new o.Vector3(.75,.55,.8035),camStartFadeIn:new o.Vector3(.75775,.55,.8035),camEndFadeIn:new o.Vector3(.775,.55,.8035),camStartFadeOut:new o.Vector3(.84,.55,.8035),endPosition:new o.Vector3(.85825,.55,.8035),forceEndProgress:{start:.1,end:.16}},ghost2:{triggerPos:new o.Vector3(.9085,.55,.8035),ghostStartFadeIn:new o.Vector3(.95875,.55,.85375),ghostEndFadeIn:new o.Vector3(.95875,.55,.875),ghostStartFadeOut:new o.Vector3(.95875,.55,.89),camStartFadeIn:new o.Vector3(.95875,.55,.904),camEndFadeIn:new o.Vector3(.95875,.55,.93),camStartFadeOut:new o.Vector3(.95875,.55,.9975),endPosition:new o.Vector3(.95875,.55,1.0045),forceEndProgress:{start:.17,end:.22}},ghost3:{triggerPos:new o.Vector3(.75775,.55,1.05475),ghostStartFadeIn:new o.Vector3(.7075,.55,1.0045),ghostEndFadeIn:new o.Vector3(.7075,.55,1.0045),ghostStartFadeOut:new o.Vector3(.6825,.55,1.0045),camStartFadeIn:new o.Vector3(.65725,.55,1.0045),camEndFadeIn:new o.Vector3(.65725,.55,1.0045),camStartFadeOut:new o.Vector3(.6065,.55,1.0045),endPosition:new o.Vector3(.55675,.55,1.0045),forceEndProgress:{start:.23,end:.33}},ghost4:{triggerPos:new o.Vector3(.65725,.55,1.0045),ghostStartFadeIn:new o.Vector3(.5565,.55,1.0045),ghostEndFadeIn:new o.Vector3(.5065,.55,1.0045),ghostStartFadeOut:new o.Vector3(.4815,.55,1.0045),camStartFadeIn:new o.Vector3(.45625,.55,1.0045),camEndFadeIn:new o.Vector3(.45625,.55,1.0045),camStartFadeOut:new o.Vector3(.4065,.55,1.0045),endPosition:new o.Vector3(.35575,.55,1.0045),forceEndProgress:{start:.38,end:.47}},ghost5:{triggerPos:new o.Vector3(.15475,.55,1.15525),ghostStartFadeIn:new o.Vector3(.1795,.55,1.18),ghostEndFadeIn:new o.Vector3(.205,.55,1.2055),ghostStartFadeOut:new o.Vector3(.23025,.55,1.2055),camStartFadeIn:new o.Vector3(.25525,.55,1.2055),camEndFadeIn:new o.Vector3(.25525,.55,1.2055),camStartFadeOut:new o.Vector3(.3055,.55,1.2055),endPosition:new o.Vector3(.35575,.55,1.2055),forceEndProgress:{start:.52,end:.59}}};function I(){return p}function z(){return d}const T={pacman:f,ghost1:w,ghost2:v,ghost3:b,ghost4:A,ghost5:P},B={camera:S,ghost1:M,ghost2:E,ghost3:k,ghost4:F,ghost5:C};function V(e){const t={};return Object.entries(e).forEach((([e,r])=>{const n=new o.Vector3(r.x*(1/4)+c.x*(3/4),2,r.z*(1/4)+c.z*(3/4));t[e]=[{pos:r.clone()},{pos:n},{pos:c}]})),t}function L(){return x}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,r),s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o=r(909),n=r(417);const s=".sc--home.sc",a=".sc--intro.sc",i=".sc--outro.sc",c=800,l=.5,p=.05,u=.01,d=.5,h=.3,m=.4,y=.3;function g(e,t=0,r=1){return Math.max(t,Math.min(r,e))}const f=".el--home-maze.el",w="canvas",v=s,b=a,A=".sc--pov.sc",P=i,x=".cr--outro.cr",S=".cmp--pov.cmp",M={mazeContainer:document.querySelector(f),canvas:document.querySelector(w),homeSection:document.querySelector(v),introSection:document.querySelector(b),povSection:document.querySelector(A),finalSection:document.querySelector(P),finalContainer:document.querySelector(x),parentElements:document.querySelectorAll(S)};var E=r(991);const k=new o.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,100),F=new o.Scene,C=new o.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),O=new o.Clock,I=[];function z(){const e=Math.min(window.devicePixelRatio,n.F?2:3);C.setPixelRatio(e),M.mazeContainer?(C.setSize(M.mazeContainer.clientWidth,M.mazeContainer.clientHeight),k.aspect=M.mazeContainer.clientWidth/M.mazeContainer.clientHeight):(C.setSize(window.innerWidth,window.innerHeight),k.aspect=window.innerWidth/window.innerHeight),k.updateProjectionMatrix()}function T(e){I.push(e)}const B=gsap;var V=r.n(B);const L=ScrollTrigger;var j=r.n(L);function q(e){let t,r,n,s=-1,a=0;for(let o=0;o<e.length;++o){const i=e[o];if(i.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=i.array.constructor),t!==i.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===r&&(r=i.itemSize),r!==i.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===n&&(n=i.normalized),n!==i.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(-1===s&&(s=i.gpuType),s!==i.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;a+=i.array.length}const i=new t(a);let c=0;for(let t=0;t<e.length;++t)i.set(e[t].array,c),c+=e[t].array.length;const l=new o.BufferAttribute(i,r,n);return void 0!==s&&(l.gpuType=s),l}const G=(new o.TextureLoader).load(n.k.mazeTexture),_=new o.MeshMatcapMaterial({matcap:G}),R=new o.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),H=new o.MeshPhysicalMaterial({color:16777215,opacity:.9999,transparent:!0,depthWrite:!1,depthTest:!0,blending:o.NormalBlending,side:o.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),D=new o.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),U={blue:new o.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new o.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new o.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},W=new o.MeshPhysicalMaterial({color:16777215,metalness:0,roughness:.05,transmission:1,thickness:.5,ior:1.5,reflectivity:.5,clearcoat:1,clearcoatRoughness:.1,transparent:!0,opacity:1,side:o.DoubleSide,envMapIntensity:1}),Q=new o.MeshPhysicalMaterial({color:16737792,metalness:0,roughness:.05,transmission:.2,thickness:.5,ior:1.5,reflectivity:.5,clearcoat:1,clearcoatRoughness:.1,transparent:!0,opacity:.98,side:o.DoubleSide,envMapIntensity:1}),$={shell:new o.MeshPhysicalMaterial({color:16729088,metalness:0,roughness:.05,transmission:.9,thickness:.5,ior:1.5,reflectivity:.5,clearcoat:1,clearcoatRoughness:.1,transparent:!0,opacity:1,side:o.DoubleSide,envMapIntensity:1}),shellFront:W,shellBack:Q,bitcoin:new o.MeshStandardMaterial({color:16737792,roughness:.3,metalness:.2}),default:new o.MeshStandardMaterial({color:0,roughness:.5,metalness:.1})},Y={CAM_Pacman_Backframe:U.blue,"CAM-Pacman_Bitcoin_1":U.white,"CAM-Pacman_Bitcoin_2":U.white,"CAM-Pacman_Bottom":U.blue,"CAM-Pacman_Top":U.blue,"CAM-Pacman_Eye":U.white,CAM_Pacman_Logo_1:U.white,CAM_Pacman_Logo_2:U.white,"CAM-Pacman_Shell_Boolean":U.blue,"CAM-Pacman_Shell":U.blue,"CAM-Pacman_Bottom_electronic":U.white,"CAM-Pacman_Top_electronic":U.white,"CAM-Pacman_Bottom_Text":U.white,"CAM-Pacman_Top_Text":U.white,default:U.blue},N={shell:$.shell,shellFront:$.shellFront,shellBack:$.shellBack,bitcoin:$.bitcoin,default:$.default},X=new o.GLTFLoader;let Z;const J=new o.Group,K={pacman:J,ghost1:new o.Mesh(new o.BufferGeometry,H),ghost2:new o.Mesh(new o.BufferGeometry,H),ghost3:new o.Mesh(new o.BufferGeometry,H),ghost4:new o.Mesh(new o.BufferGeometry,H),ghost5:new o.Mesh(new o.BufferGeometry,H)},ee=new o.Group;ee.visible=!0;const te={Ghost_EUR:K.ghost1,Ghost_CHF:K.ghost2,Ghost_YEN:K.ghost3,Ghost_USD:K.ghost4,Ghost_GBP:K.ghost5};async function re(e){return Object.values(K).forEach((t=>e.add(t))),e.add(J),e.add(ee),new Promise(((t,r)=>{X.load(n.k.mazeModel,(function(r){const n=r.scene;n.traverse((t=>{if("CAM-Pacman"===t.name){const e=[];t.traverse((t=>{if(t.isMesh&&"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name&&"CAM-Pacman_Bitcoin_1"!==t.name&&"CAM-Pacman_Bitcoin_2"!==t.name){const r=Y[t.name]||Y.default;t.material=r,e.push(t)}else"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name&&"CAM-Pacman_Bitcoin_1"!==t.name&&"CAM-Pacman_Bitcoin_2"!==t.name||(t.visible=!1)})),e.forEach((e=>K.pacman.add(e))),K.pacman.scale.set(.05,.05,.05),K.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),Z=new o.AnimationMixer(K.pacman);const n={};r.animations.forEach((e=>{const t=Z.clipAction(e);t.getMixer().addEventListener("loop",(function(e){e.action.getRoot().traverse((function(e){e.userData&&e.userData.skipAnimation&&(e.updateMorphTargets=function(){})}))})),n[e.name]=t,t.setEffectiveWeight(0),t.play()})),Object.values(n).forEach((e=>{e.setEffectiveWeight(1)}))}else if(t.name&&te[t.name]){const e=te[t.name],r=new o.Group;t.rotation.z=Math.PI,t.rotation.x=Math.PI/2,t.scale.set(.75,.75,.75);const n=[];t.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=H:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),n.push(e))})),n.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),r.add(e)})),e&&e.add(r)}else if(t.name&&!t.name.toLowerCase().includes("pacman")&&("CAM-Pill-Orange"===t.name||t.name.toLowerCase().includes("pill")&&t.name.toLowerCase().includes("orange"))){const e=new o.Group,r=[],n=[];if(t.traverse((e=>{if(e.isMesh){const t=e,o=e.name||"",s=t.clone(),a=o.toLowerCase(),i=a.includes("shell"),c=a.includes("bitcoin")||a.includes("btc_logo");i?r.push(s):n.push({mesh:s,name:o,isBitcoin:c})}})),r.length>0){const t=r.map((e=>{const t=e.geometry.clone();return t.applyMatrix4(e.matrixWorld),t}));let n;n=1===t.length?t[0]:function(e,t=!1){const r=null!==e[0].index,n=new Set(Object.keys(e[0].attributes)),s=new Set(Object.keys(e[0].morphAttributes)),a={},i={},c=e[0].morphTargetsRelative,l=new o.BufferGeometry;let p=0;for(let o=0;o<e.length;++o){const u=e[o];let d=0;if(r!==(null!==u.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+o+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const e in u.attributes){if(!n.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+o+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[e]&&(a[e]=[]),a[e].push(u.attributes[e]),d++}if(d!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+o+". Make sure all geometries have the same number of attributes."),null;if(c!==u.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+o+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const e in u.morphAttributes){if(!s.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+o+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===i[e]&&(i[e]=[]),i[e].push(u.morphAttributes[e])}if(t){let e;if(r)e=u.index.count;else{if(void 0===u.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+o+". The geometry must have either an index or a position attribute"),null;e=u.attributes.position.count}l.addGroup(p,e,o),p+=e}}if(r){let t=0;const r=[];for(let o=0;o<e.length;++o){const n=e[o].index;for(let e=0;e<n.count;++e)r.push(n.getX(e)+t);t+=e[o].attributes.position.count}l.setIndex(r)}for(const e in a){const t=q(a[e]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" attribute."),null;l.setAttribute(e,t)}for(const e in i){const t=i[e][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[e]=[];for(let r=0;r<t;++r){const t=[];for(let o=0;o<i[e].length;++o)t.push(i[e][o][r]);const o=q(t);if(!o)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" morphAttribute."),null;l.morphAttributes[e].push(o)}}return l}(t),n.computeBoundingBox();const s=n.boundingBox,a=(s.max.y+s.min.y)/2;t.forEach((e=>{e!==n&&e.dispose()}));const{topGeometry:i,bottomGeometry:c}=function(e,t){const r=e.toNonIndexed().attributes.position.array,n=[],s=[];for(let e=0;e<r.length;e+=9){const o=(r[e+1]+r[e+4]+r[e+7])/3,a=[r[e],r[e+1],r[e+2],r[e+3],r[e+4],r[e+5],r[e+6],r[e+7],r[e+8]];o>=t?n.push(...a):s.push(...a)}const a=new o.BufferGeometry;a.setAttribute("position",new o.BufferAttribute(new Float32Array(n),3));const i=new o.BufferGeometry;return i.setAttribute("position",new o.BufferAttribute(new Float32Array(s),3)),a.computeVertexNormals(),i.computeVertexNormals(),{topGeometry:a,bottomGeometry:i}}(n,a),l=new o.Mesh(i,N.shellBack.clone());l.visible=!0,l.castShadow=!0,l.receiveShadow=!0,e.add(l);const p=new o.Mesh(c,N.shellFront.clone());p.visible=!0,p.castShadow=!0,p.receiveShadow=!0,e.add(p)}n.forEach((({mesh:t,name:r,isBitcoin:o})=>{t.material=o?N.bitcoin:N.default,t.visible=!0,t.castShadow=!0,t.receiveShadow=!0,e.add(t)})),e.children.length>0&&ee.add(e)}if(t.isMesh)if("CAM-Arena_LowRes_Top"===t.name)t.material=R,t.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===t.name)t.material=_,t.castShadow=!0;else if("CAM-Floor"===t.name){const r=t.clone();t.position.y=-.1,t.position.x=0,t.position.z=0,t.material=new o.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:o.FrontSide}),t.receiveShadow=!1,t.castShadow=!0,t.scale.set(.5,.5,.5),r.material=D,r.position.y=-.5,r.receiveShadow=!0,e.add(r)}else t.visible=!1;t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0)})),e.add(n),n.position.set(.5,.5,.5),ee.children.length>0&&(ee.scale.set(.05,.05,.05),ee.visible=!0,ee.traverse((e=>{e.isMesh&&(e.visible=!0)}))),t()}),void 0,(function(e){r(e)}))}))}const oe=new Map;class ne{constructor(e,t=.06){this.currentTangent=e.clone(),this.smoothing=t}update(e){return this.currentTangent.lerp(e,this.smoothing),this.currentTangent.normalize()}reset(e){this.currentTangent.copy(e)}getCurrentTangent(){return this.currentTangent.clone()}setSmoothingFactor(e){this.smoothing=Math.max(.001,Math.min(1,e))}}function se(e){const t=e.map((e=>`${e.pos.x},${e.pos.y},${e.pos.z},${e.type},${e.arc||""}`)).join("|");if(oe.has(t))return oe.get(t);const r=new o.CurvePath;let n=0;for(;n<e.length-1;){const t=e[n],s=e[n+1];if(t.curveCheckPoints?.length){const e=[t.pos,...t.curveCheckPoints,s.pos];r.add(new o.CatmullRomCurve3(e,!1,"centripetal",0))}else if("straight"===t.type)r.add(new o.LineCurve3(t.pos,s.pos));else{const e=ae(t,s);r.add(new o.QuadraticBezierCurve3(t.pos,e,s.pos))}n++}return oe.set(t,r),r}function ae(e,t){if(e.arc){const r=e.arc;if("upperArc"===r)return new o.Vector3(e.pos.x,e.pos.y,t.pos.z);if("lowerArc"===r)return new o.Vector3(t.pos.x,e.pos.y,e.pos.z);if("forwardDownArc"===r)return new o.Vector3(e.pos.x,t.pos.y,e.pos.z)}return new o.Vector3(e.pos.x,e.pos.y,t.pos.z)}function ie(e){const t=new o.CurvePath;if(4===e.length){const r=new o.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);t.add(r)}return t}function ce(){const e={};return Object.entries(E.homePaths).forEach((([t,r])=>{e[t]=se(r)})),e}function le(){const e={};return Object.entries(E.povPaths).forEach((([t,r])=>{e[t]=se(r)})),e}const pe=["pacman","ghost1","ghost2","ghost3","ghost4","ghost5"],ue=["EUR","CHF","YEN","USD","GBP"];function de(e){return ue.some((t=>e===t||e.includes(t)))}function he(e){return e.includes("Shell")||e.includes("Bitcoin_1")||e.includes("Bitcoin_2")}function me(e,t,r="ghost"){if(!t?.length())return;const o=Math.atan2(t.x,t.z);if("pacman"===r)e.rotation.set(-Math.PI/2,Math.PI,-(o+Math.PI/2));else if("ghost"===r)e.rotation.set(0,o,0);else if("camera"===r){const r=e.position.clone().add(t);e.lookAt(r)}}const ye=(new o.Quaternion).setFromEuler(new o.Euler(Math.PI/2,0,0)),ge=(new o.Quaternion).setFromAxisAngle(new o.Vector3(0,1,0),Math.PI).clone().multiply(ye),fe=(new o.Quaternion).setFromEuler(new o.Euler(-Math.PI/2,0,0));function we(e,t,r){const o=t.angleTo(ge)<t.angleTo(fe)?ge:fe;e.quaternion.copy(t.clone().slerp(o,r))}function ve(e,t){let r=e.clone();return t.forEach((({axis:e,angle:t})=>{r=function(e,t,r){const n="x"===t?new o.Vector3(1,0,0):"y"===t?new o.Vector3(0,1,0):new o.Vector3(0,0,1),s=(new o.Quaternion).setFromAxisAngle(n,r);return e.clone().multiply(s)}(r,e,t)})),r}let be=20,Ae=0,Pe=90,xe=0;function Se(){return{x:Ae,y:Pe,z:xe}}function Me(){if(!ee)return;const e=new o.Euler(1.571,be*Math.PI/180,180*Math.PI/180,"XYZ");ee.rotation.copy(e)}let Ee=null,ke=!1,Fe=null,Ce=!1;function Oe(e,t,r){const o=!1!==r?.preserveTransmission;Te(e,(e=>{Ie(e,t,o)}),{skipCurrencySymbols:!0===r?.skipCurrencySymbols})}function Ie(e,t,r=!0){const o=e,n=o.opacity??1,s=o.transparent??!1;if(Math.abs(n-t)<1e-4)return;o.opacity=t;const a=!!(r&&void 0!==o.transmission&&o.transmission>0)||t<1;s!==a&&(o.transparent=a,void 0!==o.needsUpdate&&(o.needsUpdate=!0))}function ze(e){let t=1,r=!1;return Te(e,(e=>{r||(t=e.opacity??1,r=!0)}),{skipCurrencySymbols:!1}),t}function Te(e,t,r){const o=!0===r?.skipCurrencySymbols,n=!0===r?.skipPacmanParts,s=r?.objectKey;e.traverse((e=>{if(e.isMesh&&e.material){const r=e,a=e.name||"";if(o&&de(a))return;if(n&&"pacman"===s&&he(a))return;Array.isArray(r.material)?r.material.forEach((e=>{t(e,r,a)})):t(r.material,r,a)}}))}function Be(e,t=1,r=!1){F.traverse((n=>{if("CAM-Floor"===n.name&&(n.visible=e,n instanceof o.Mesh&&n.material)){const e=n.material;e.color.setHex(16777215),e.opacity=t,e.transparent=r}}))}function Ve(e,t,r){let o;o="pacman"===t?"intro"===r?.1:.05:"intro"===r?1.5:"pov"===r?.5:1,e.scale.set(o,o,o),e.updateMatrixWorld(!0),V().set(e.scale,{x:o,y:o,z:o})}function Le(e){V().killTweensOf(e),V().killTweensOf(e.scale),V().killTweensOf(e.position),V().killTweensOf(e.rotation),V().killTweensOf(e.quaternion),Te(e,(e=>{V().killTweensOf(e),V().killTweensOf(e.opacity)}),{skipCurrencySymbols:!1})}function je(e,t){e&&(K.pacman&&V().set(K.pacman,{visible:!1}),Object.entries(K).forEach((([e,t])=>{"pacman"!==e&&(V().set(t,{visible:!1}),Ve(t,e,"pov"),Te(t,(e=>{Ie(e,1,!0)}),{skipCurrencySymbols:!1}))})),Be(!0,1,!1))}function qe(e,t){e&&Be(!0,1,!1)}let Ge=window.scrollY;function _e(){const e=window.scrollY,t=e>Ge?"down":"up";return Ge=e,t}const Re={t:0,animationTime:0},He={};let De={},Ue={},We=null,Qe=!1;function $e(e){Qe=e}function Ye(){const e={};return Object.entries(He).forEach((([t,r])=>{e[t]=r.rotation.clone()})),e}function Ne(e,t,r=!1,o=!1){(Qe||r)&&(He[e]&&He[e].position.copy(t),o&&(De[e]=t.clone()))}function Xe(e,t,r=!1){He[e]&&He[e].rotation.copy(t),r&&(Ue[e]=t.clone())}function Ze(){return Object.entries(Ue).reduce(((e,[t,r])=>(e[t]=r.clone(),e)),{})}let Je=null,Ke={},et=[];const tt=[];let rt=null,ot=null,nt=null,st=!1;function at(){st||(T((()=>{!function(){if(!nt)return;const e=j().getById("homeScroll");if(!e?.isActive)return;const t=j().getById("introScroll");if(t?.isActive)return;const r=nt.getCurrentProgress(),n=r*r*r,s=Se(),a=(new o.Quaternion).setFromAxisAngle(new o.Vector3(1,0,0),s.x*Math.PI/180),i=(new o.Quaternion).setFromAxisAngle(new o.Vector3(0,1,0),s.y*Math.PI/180),c=(new o.Quaternion).setFromAxisAngle(new o.Vector3(0,0,1),s.z*Math.PI/180),l=ge.clone().multiply(i).multiply(a).multiply(c),p=(new o.Euler).setFromQuaternion(l),u=nt.startEuler.x+(p.x-nt.startEuler.x)*n,d=nt.startEuler.y+(p.y-nt.startEuler.y)*n,h=nt.startEuler.z+(p.z-nt.startEuler.z)*n;nt.object.rotation.set(u,d,h),nt.object.quaternion.setFromEuler(nt.object.rotation),nt.object.updateMatrixWorld(!1)}()})),st=!0),Je&&(Je.kill(),Je=null);const e=(0,E.getCameraHomeScrollPathPoints)(),t=new o.CurvePath;if(4===e.length){const r=new o.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);t.add(r)}const r=()=>{tt.forEach((e=>{e.dispose()})),tt.length=0},n=()=>{j().getById("introScroll"),et.forEach((([e,t])=>{Le(t),Oe(t,1,{preserveTransmission:!0,skipCurrencySymbols:!0})})),r()},a=()=>{requestAnimationFrame((()=>{const e=j().getById("introScroll");if(e?.isActive)return;const t={...De},r=Ze();_e(),Object.entries(K).forEach((([e,o])=>{if(t[e])o.position.copy(t[e]),Ke[e]=t[e].clone();else{const t=function(){const e={};return Object.entries(He).forEach((([t,r])=>{e[t]=r.position.clone()})),e}(),r=t[e]||o.position;o.position.copy(r),Ke[e]=r.clone()}r[e]&&o.quaternion.copy(r[e])}));const o=Object.keys(r).length>0?r:Ye();var n;(n=Ke)&&o&&Object.entries(K).forEach((([e,t])=>{n[e]&&(t.position.set(n[e].x,n[e].y,n[e].z),V().set(t.position,{x:n[e].x,y:n[e].y,z:n[e].z})),V().set(t,{visible:!0}),Ve(t,e,"home"),Te(t,((e,t,r)=>{de(r)?t.visible=!1:(t.visible=!0,function(e,t,r=!0){const o=e,n=o.transparent??!1,s=!!(r&&void 0!==o.transmission&&o.transmission>0)||t;n!==s&&(o.transparent=s,void 0!==o.needsUpdate&&(o.needsUpdate=!0))}(e,!0,!0))}),{skipCurrencySymbols:!1})})),Be(!0,1,!1),i()}))};Je=V().timeline({scrollTrigger:{id:"homeScroll",trigger:s,start:"top top",end:"bottom top",scrub:l,markers:!1,refreshPriority:0,invalidateOnRefresh:!1,onEnter:a,onEnterBack:a,onUpdate:r=>{if(t&&t.curves.length){const n=r.progress,s=Math.min(1,Math.max(0,n)),a=1-Math.pow(1-s,2),i=t.getPointAt(a);k.position.copy(i);const c=[];if(e.forEach((e=>{"lookAt"in e&&e.lookAt&&c.push(e.lookAt)})),c.length>=4){const e=new o.CubicBezierCurve3(c[0],c[1],c[2],c[3]).getPointAt(a);k.lookAt(e)}k.fov=50,k.updateProjectionMatrix()}},onLeave:n,onLeaveBack:n}}),et=Object.entries(K),et.forEach((([e,t])=>{Ke[e]=t.position.clone()}));const i=()=>{Je&&Je.clear(),et.forEach((([e,t])=>{Le(t)})),r();const e=JSON.stringify(Ke);let t;rt&&ot===e?t=rt:(t=function(e){const t=(0,E.createHomeScrollPathPoints)(e),r={camera:ie((0,E.getCameraHomeScrollPathPoints)())};return Object.entries(t).forEach((([e,t])=>{r[e]=function(e){const t=new o.CurvePath;if(3===e.length){const r=new o.QuadraticBezierCurve3(e[0].pos,e[1].pos,e[2].pos);t.add(r)}return t}(t)})),r}(Ke),rt=t,ot=e);const n=[],s=[];et.forEach((([e,r])=>{const a=ze(r);Te(r,((e,t)=>{let r;if(e===H||Object.values(Y).includes(e)||Object.values(N).includes(e)||!t.material||Array.isArray(t.material))if(r=e.clone(),tt.push(r),Ie(r,a,!0),Array.isArray(t.material)){const o=t.material.indexOf(e);if(-1!==o){const e=[...t.material];e[o]=r,t.material=e}}else t.material=r;else Ie(e,a,!0)}),{skipCurrencySymbols:!1});const i=Ze()[e]||Ye()[e]||r.quaternion.clone(),c=(new o.Euler).setFromQuaternion(i);let l;if("pacman"===e){const e=Se(),t=(new o.Quaternion).setFromAxisAngle(new o.Vector3(1,0,0),e.x*Math.PI/180),r=(new o.Quaternion).setFromAxisAngle(new o.Vector3(0,1,0),e.y*Math.PI/180),n=(new o.Quaternion).setFromAxisAngle(new o.Vector3(0,0,1),e.z*Math.PI/180),s=ge.clone().multiply(r).multiply(t).multiply(n);l=(new o.Euler).setFromQuaternion(s)}else l=(new o.Euler).setFromQuaternion(ge);const p=t[e];if(!p)return;const u={progress:0,rotX:c.x,rotY:c.y,rotZ:c.z,opacity:a};n.push(u),s.push({key:e,object:r,path:p,startEuler:c,endEuler:l})}));const a=[[0,.7],[.05,.75],[.1,.8],[.15,.85],[.2,.9],[.25,.95]];s.forEach(((e,t)=>{const r=n[t],s=a[t]||[0,1],[i,c]=s,l=i,p=c-i,u=e.path.getPointAt(0);e.object.position.copy(u),"pacman"===e.key&&(nt={object:e.object,startEuler:e.startEuler,getCurrentProgress:()=>r.progress}),Je.fromTo(r,{progress:0,rotX:e.startEuler.x,rotY:e.startEuler.y,rotZ:e.startEuler.z,opacity:r.opacity},{progress:1,rotX:e.endEuler.x,rotY:e.endEuler.y,rotZ:e.endEuler.z,opacity:0,ease:"power2.out",immediateRender:!1,duration:p,onUpdate:function(){const t=j().getById("introScroll"),n=j().getById("homeScroll");if(t?.isActive||!n?.isActive)return;const s=r.progress,a=s*s*s,i=e.path.getPointAt(a);e.object.position.copy(i);let c,l,p,u=e.startEuler,d=e.endEuler;if("pacman"===e.key){const e=Se(),t=(new o.Quaternion).setFromAxisAngle(new o.Vector3(1,0,0),e.x*Math.PI/180),r=(new o.Quaternion).setFromAxisAngle(new o.Vector3(0,1,0),e.y*Math.PI/180),n=(new o.Quaternion).setFromAxisAngle(new o.Vector3(0,0,1),e.z*Math.PI/180),s=ge.clone().multiply(r).multiply(t).multiply(n),i=(new o.Euler).setFromQuaternion(s);c=u.x+(i.x-u.x)*a,l=u.y+(i.y-u.y)*a,p=u.z+(i.z-u.z)*a,Z&&Z.update(O.getDelta())}else c=u.x+(d.x-u.x)*a,l=u.y+(d.y-u.y)*a,p=u.z+(d.z-u.z)*a;e.object.rotation.set(c,l,p),e.object.quaternion.setFromEuler(e.object.rotation),e.object.updateMatrixWorld(!1),"pacman"===e.key&&requestAnimationFrame((()=>{const t=j().getById("homeScroll");t?.isActive&&e.object&&(e.object.rotation.set(c,l,p),e.object.quaternion.setFromEuler(e.object.rotation),e.object.updateMatrixWorld(!1))})),Oe(e.object,r.opacity,{preserveTransmission:!0,skipCurrencySymbols:!0})}},l)}))};i()}let it=!0,ct=0,lt=!1,pt=0,ut={},dt=!1;const ht={},mt=Object.entries(K),yt=new o.Object3D,gt=new o.Quaternion,ft={};function wt(){it=!0,$e(!0);const e=ce(),t=Ze(),n=We;dt&&null!==n&&(ct=50*n),pt=0,ut={};const{getStartPosition:s,getLookAtPosition:a}=r(991),i=s(),c=k.position.clone(),l=c.distanceTo(i),p=j().getById("homeScroll"),u=p&&p.progress>0;if(l>.1){V().killTweensOf(k.position);const e=u?1:.5;V().to(k.position,{x:i.x,y:i.y,z:i.z,duration:e,ease:"power2.out",onUpdate:()=>{k.updateProjectionMatrix()}});const t=a(),r={t:0},n=new o.Vector3;k.getWorldDirection(n),n.multiplyScalar(10).add(c),V().to(r,{t:1,duration:e,ease:"power2.out",onUpdate:()=>{const e=n.clone().lerp(t,r.t);k.lookAt(e),k.updateProjectionMatrix()}})}else{k.position.copy(i);const e=a();k.lookAt(e),k.updateProjectionMatrix()}if(!0&&(Object.entries(K).forEach((([e,t])=>{V().set(t,{visible:!0}),Ve(t,e,"home"),Te(t,((e,t,r)=>{de(r)?t.visible=!1:t.visible=!0}),{skipCurrencySymbols:!1}),function(e){Oe(e,1,{preserveTransmission:!0,skipCurrencySymbols:!0})}(t)})),Be(!0,1,!1)),function(){const e=new o.Vector3(1,0,0);pe.forEach((t=>{ht[t]=new ne(e.clone(),.06)}))}(),Object.entries(K).forEach((([r,o])=>{const s=e[r];if(s){if(dt&&null!==n){const e=s.getPointAt(n);if(e){const t=o.position.clone(),n=t.distanceTo(e),s=j().getById("homeScroll"),a=s&&s.isActive;n>.001||a?(V().killTweensOf(o.position),o.position.copy(t),V().to(o.position,{x:e.x,y:e.y,z:e.z,duration:a?.8:.5,ease:"power2.out",onUpdate:()=>{Ne(r,o.position)},onComplete:()=>{Ne(r,e)}})):(o.position.copy(e),Ne(r,e))}}const e=t[r];if(e){const t=o.quaternion.clone();if(t.angleTo(e)>.01){V().killTweensOf(o.quaternion);const n={t:0};V().to(n,{t:1,duration:.5,ease:"power2.out",onUpdate:()=>{o.quaternion.copy(t).slerp(e,n.t),Xe(r,o.quaternion)},onComplete:()=>{o.quaternion.copy(e),Xe(r,e),dt&&(ut[r]=e.clone())}})}else o.quaternion.copy(e),Xe(r,e),dt&&(ut[r]=e.clone())}else Xe(r,o.quaternion),dt&&(ut[r]=o.quaternion.clone());if("pacman"!==r&&(o.visible=!0),Ve(o,r,"home"),ht[r]&&null!==n){const e=s.getTangentAt(n);e&&ht[r].reset(e)}}})),!lt){let e=O.getElapsedTime();T((()=>{if(document.hidden)return void(e=O.getElapsedTime());const t=O.getElapsedTime(),r=t-e;e=t,function(e){if(!it)return;const t=j().getById("introScroll");if(t?.isActive)return;const r=j().getById("homeScroll");if(r?.isActive)return;const o=Math.min(e,.1);ct+=o,pt+=o;const n=ct%50/50;!function(e,t){Re.t=e,Re.animationTime=t}(n,ct);const s=ce();Z&&Z.update(e);const a=Math.min(pt/1.5,1),i=dt&&a<1;for(let e=0;e<mt.length;e++){const[t,r]=mt[e],o=s[t];if(o){const e=n,s=o.getPointAt(e);s&&(r.position.copy(s),Ne(t,s));const c="pacman"===t?.05:1;if(ft[t]!==c&&(Ve(r,t,"home"),ft[t]=c),gt.set(0,0,0,1),ht[t]&&e>0){const r=o.getTangentAt(e);if(r&&r.length()>0){const e=ht[t].update(r);me(yt,e,"pacman"===t?"pacman":"ghost"),gt.copy(yt.quaternion)}}if(i&&ut[t]){const e=a*a*(3-2*a),o=ut[t].clone().slerp(gt,e);r.quaternion.copy(o)}else r.quaternion.copy(gt);Xe(t,r.quaternion)}}}(r)})),lt=!0}}const vt={};V().registerPlugin(j());let bt=null,At=null,Pt=!1,xt=!1;const St=new o.Vector3(.55675,.55,1.306),Mt=new o.Vector3(-.14675,1,1.8085);let Et=null;const kt={},Ft={};function Ct(){bt&&(bt.kill(),bt=null),function(){Ft.camera=new ne(new o.Vector3(0,0,-1),.08);for(let e=1;e<=5;e++)Ft[`ghost${e}`]=new ne(new o.Vector3(1,0,0),.08)}(),Object.keys(E.povTriggerPositions).forEach((e=>{kt[e]={hasBeenTriggered:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0}})),bt=V().timeline({scrollTrigger:{id:"povScroll",trigger:M.povSection,start:"top bottom",end:"bottom top",markers:!1,scrub:l,toggleActions:"play none none reverse",onEnter:()=>{_e(),je(!0)},onEnterBack:()=>{_e(),je(!0)}}}).addLabel("pov-animation-start",0).to({progress:0},{progress:1,immediateRender:!1,onStart:Ot,onUpdate:function(){It.call(this)},onReverseComplete:()=>{Vt(),Lt()},onComplete:()=>{Vt(),Lt()}}).addLabel("pov-animation-sequence-phase",p).addLabel("pov-animation-transition-phase",.07).addLabel("pov-animation-end",1)}function Ot(){const e=le();if(Ft.camera&&e.camera){const t=e.camera.getTangentAt(0);t&&Ft.camera.reset(t)}Object.entries(K).forEach((([t,r])=>{if(e[t]&&"pacman"!==t){const o=e[t].getPointAt(0);r.position.copy(o);const n=e[t].getTangentAt(0).normalize();r.lookAt(o.clone().add(n)),r.visible=!1,Ve(r,t,"pov")}})),K.pacman&&(K.pacman.visible=!1)}function It(){const e=this.targets()[0].progress,t=le();if(!t.camera)return;const r=t.camera.getPointAt(e);At?(function(e,t,r){const n=j().getById("introScroll");if(n&&n.isActive)return;k.position.copy(r),k.fov=80;const s=function(e,t){const r=E.povPaths.camera;if(e<=p){const t=r[0];if("lookAtSequence"in t&&t.lookAtSequence?.length){const r=e/p,o=t.lookAtSequence.length,n=1/o,s=Math.floor(r/n),a=r%n/n,i=Math.min(s,o-1),c=Math.min(s+1,o-1);if(i===c)return t.lookAtSequence[i];{const e=t.lookAtSequence[i],r=t.lookAtSequence[c];return e.clone().lerp(r,a)}}}else if(e<=.07){const n=r[0];if("lookAtSequence"in n&&n.lookAtSequence?.length){const r=n.lookAtSequence[n.lookAtSequence.length-1],s=t.camera.getPointAt(e),a=t.camera.getTangentAt(e).normalize(),i=new o.Vector3(a.x,0,a.z).normalize(),c=s.clone().add(i),l=(e-p)/.020000000000000004;return r.clone().lerp(c,l)}}return null}(e,t);if(s)return k.lookAt(s),void k.updateProjectionMatrix();const a=t.camera.getTangentAt(e).normalize();let i=a;Ft.camera&&e>0&&(i=Ft.camera.update(a)),e<=.15&&(i=new o.Vector3(i.x,0,i.z).normalize());(function(e,t){const r=le(),o=jt(r.camera,St),n=jt(r.camera,Mt);(e<o||e>n)&&!xt&&(Et=null,Pt=!1,xt=!1),Pt||xt||k.lookAt(t)})(e,r.clone().add(i)),k.updateProjectionMatrix()}(e,t,r),function(e,t,r){Object.entries(E.povTriggerPositions).forEach((([o,n])=>{const s=K[o],a=r[o];if(!s||!a||"pacman"===o)return;const i=t>n.forceEndProgress.start&&t<n.forceEndProgress.end;!function(e,t,r,o,n,s){const{triggerPos:a,ghostStartFadeIn:i,ghostEndFadeIn:l,ghostStartFadeOut:p,camStartFadeIn:d,camEndFadeIn:h,camStartFadeOut:m,endPosition:y}=n,f=kt[e],w=parseInt(e.replace("ghost",""))-1;let v=vt[w];if(!v){const e=document.querySelectorAll(".cmp--pov.cmp")[w];v={parent:e||null,povElements:e?e.querySelectorAll(".pov"):document.querySelectorAll(".nonexistent"),camElements:e?e.querySelectorAll(".cam"):document.querySelectorAll(".nonexistent")},vt[w]=v}const{parent:b,povElements:A,camElements:P}=v;if(!b||!A.length||!P.length)return;const x=le();null===f.triggerCameraProgress&&(f.triggerCameraProgress=jt(x.camera,a,c),f.ghostStartFadeInProgress=jt(x.camera,i,c),f.ghostEndFadeInProgress=jt(x.camera,l,c),f.ghostStartFadeOutProgress=jt(x.camera,p,c),f.camStartFadeInProgress=jt(x.camera,d,c),f.camEndFadeInProgress=jt(x.camera,h,c),f.camStartFadeOutProgress=jt(x.camera,m,c),f.endCameraProgress=jt(x.camera,y,c));const S=jt(x.camera,o,c);if(S>=f.triggerCameraProgress&&S<=f.endCameraProgress){if(!t.visible&&(t.visible=!0,f.hasBeenTriggered=!0,Ft[e])){const t=r.getTangentAt(0);t&&Ft[e].reset(t)}let o=g((S-f.triggerCameraProgress)/(f.endCameraProgress-f.triggerCameraProgress));void 0===f.currentPathT?f.currentPathT=o:f.currentPathT+=.1*(o-f.currentPathT),o=f.currentPathT;const n=r.getPointAt(o);if(t.position.copy(n),Ft[e]&&o>0){const n=r.getTangentAt(o);n&&n.length()>0&&me(t,Ft[e].update(n),"ghost")}Oe(t,o>.9?1-(o-.9)/.1:1,{preserveTransmission:!0,skipCurrencySymbols:!0})}else t.visible=!1,f.hasBeenTriggered=!1;!function(e,t,r,o,n,s,a=!1){if(a)return o.style.opacity="0",o.classList.add("no-visibility"),Bt(n),void Bt(s);const{targetGhostOpacity:i,targetCamOpacity:c}=function(e,t){let r=0,o=0;if(e>=t.ghostStartFadeInProgress&&e<=t.ghostEndFadeInProgress){const o=(e-t.ghostStartFadeInProgress)/(t.ghostEndFadeInProgress-t.ghostStartFadeInProgress);r=Math.min(1,o)}else if(e>t.ghostEndFadeInProgress&&e<t.ghostStartFadeOutProgress)r=1;else if(e>=t.ghostStartFadeOutProgress&&e<=t.camStartFadeInProgress){const o=(e-t.ghostStartFadeOutProgress)/(t.camStartFadeInProgress-t.ghostStartFadeOutProgress);r=Math.max(0,1-o)}if(e>=t.camStartFadeInProgress&&e<=t.camEndFadeInProgress){const r=(e-t.camStartFadeInProgress)/(t.camEndFadeInProgress-t.camStartFadeInProgress);o=Math.min(1,r)}else if(e>t.camEndFadeInProgress&&e<t.camStartFadeOutProgress)o=1;else if(e>=t.camStartFadeOutProgress&&e<=t.endCameraProgress){const r=(e-t.camStartFadeOutProgress)/(t.endCameraProgress-t.camStartFadeOutProgress);o=Math.max(0,1-r)}return{targetGhostOpacity:r,targetCamOpacity:o}}(t,r);t>=r.camStartFadeOutProgress?o.style.opacity=c.toString():t>=r.ghostStartFadeInProgress&&t<=r.ghostEndFadeInProgress&&(o.style.opacity=i.toString());const l=c>u&&i>u,p=o.classList.contains("no-visibility");l&&!p?o.classList.add("no-visibility"):!l&&p&&o.classList.remove("no-visibility"),i>u?zt(n,i):Bt(n),c>u?zt(s,c):Bt(s)}(0,S,f,b,A,P,s)}(o,s,a,e,n,i)}))}(r,e,t),At.copy(r)):At=r.clone()}function zt(e,t){e.forEach((e=>{const r=e;t>u?(r.classList.remove("no-visibility"),r.style.opacity=t.toString()):t<=u&&!r.classList.contains("no-visibility")&&(r.classList.add("no-visibility"),r.style.opacity="0")}))}function Tt(){Object.keys(Ft).forEach((e=>{if(Ft[e]){const t="camera"===e?new o.Vector3(0,0,-1):new o.Vector3(1,0,0);Ft[e].reset(t)}}))}function Bt(e){e.forEach((e=>{const t=e;t.classList.add("no-visibility"),t.style.opacity="0"}))}function Vt(){Object.entries(K).forEach((([e,t])=>{if("pacman"!==e){t.visible=!1;const r=parseInt(e.replace("ghost",""))-1,o=vt[r];o?.parent&&(Bt(o.povElements),Bt(o.camElements),o.parent.classList.add("no-visibility")),Oe(t,1,{preserveTransmission:!0,skipCurrencySymbols:!0})}})),K.pacman&&(K.pacman.visible=!0),Tt()}function Lt(){K.pacman&&(K.pacman.visible=!0),Pt=!1,Et=null,xt=!1,Object.keys(kt).forEach((e=>{kt[e]={hasBeenTriggered:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0}})),Tt()}function jt(e,t,r=800){if(!e||!t)return 0;let o=0,n=1/0;for(let s=0;s<r;s++)try{const a=s/(r-1),i=e.getPointAt(a);if(!i)continue;const c=i.distanceTo(t);c<n&&(n=c,o=a)}catch(e){}return o}let qt=null,Gt=!1,_t=null,Rt=null,Ht=null,Dt={},Ut=null,Wt=-1,Qt=null;function $t(){Ut=null,Wt=-1,_t=null}function Yt(e){Object.values(K).forEach((t=>{t.userData.introScrollLocked=e}))}function Nt(){const e={visible:!0,opacity:1,transparent:!1};Jt&&Jt.visible===e.visible&&Jt.opacity===e.opacity&&Jt.transparent===e.transparent||(Be(e.visible,e.opacity,e.transparent),Jt=e)}function Xt(){Qt&&(F.remove(Qt),Qt=null);const e=new o.Group;e.name="introGridGuides",Qt=e;const t=-2,r=new o.LineBasicMaterial({color:65280});for(let n=-5;n<=5;n+=.5){const s=(new o.BufferGeometry).setFromPoints([new o.Vector3(-5,t,n),new o.Vector3(5,t,n)]),a=new o.Line(s,r);a.renderOrder=999,e.add(a)}const n=new o.LineBasicMaterial({color:16711680});for(let r=-5;r<=5;r+=.5){const s=(new o.BufferGeometry).setFromPoints([new o.Vector3(r,t,-5),new o.Vector3(r,t,5)]),a=new o.Line(s,n);a.renderOrder=999,e.add(a)}const s=(new o.BufferGeometry).setFromPoints([new o.Vector3(0,-3,0),new o.Vector3(0,-1,0)]),a=new o.LineBasicMaterial({color:16776960}),i=new o.Line(s,a);i.renderOrder=1e3,e.add(i);const c=16777215;for(let r=-Math.floor(5);r<=Math.floor(5);r+=1){if(0===r)continue;const n=new o.SphereGeometry(.05,8,8),s=new o.MeshBasicMaterial({color:c}),a=new o.Mesh(n,s);a.position.set(r,t,0),a.renderOrder=1001,e.add(a);const i=document.createElement("canvas");i.width=64,i.height=64;const l=i.getContext("2d");if(l){l.fillStyle="#ffffff",l.font="Bold 48px Arial",l.textAlign="center",l.textBaseline="middle",l.fillText(r.toString(),32,32);const t=new o.CanvasTexture(i),n=new o.SpriteMaterial({map:t}),s=new o.Sprite(n);s.scale.set(.3,.3,1),s.position.set(r,-1.7,0),s.renderOrder=1001,e.add(s)}}for(let r=-Math.floor(5);r<=Math.floor(5);r+=1){if(0===r)continue;const n=new o.SphereGeometry(.05,8,8),s=new o.MeshBasicMaterial({color:c}),a=new o.Mesh(n,s);a.position.set(0,t,r),a.renderOrder=1001,e.add(a);const i=document.createElement("canvas");i.width=64,i.height=64;const l=i.getContext("2d");if(l){l.fillStyle="#ffffff",l.font="Bold 48px Arial",l.textAlign="center",l.textBaseline="middle",l.fillText(r.toString(),32,32);const t=new o.CanvasTexture(i),n=new o.SpriteMaterial({map:t}),s=new o.Sprite(n);s.scale.set(.3,.3,1),s.position.set(0,-1.7,r),s.renderOrder=1001,e.add(s)}}const l=new o.SphereGeometry(.1,16,16),p=new o.MeshBasicMaterial({color:16776960}),u=new o.Mesh(l,p);u.position.set(0,t,0),u.renderOrder=1001,e.add(u),e.position.set(0,0,0),F.add(e)}function Zt(){Qt&&(F.remove(Qt),Qt=null)}let Jt=null;const Kt=new o.Vector3;let er=null;!async function(){n.F?C.setPixelRatio(Math.min(window.devicePixelRatio,2)):C.setPixelRatio(window.devicePixelRatio),C.shadowMap.enabled=!0,C.shadowMap.type=o.PCFSoftShadowMap,M.mazeContainer?(C.setSize(M.mazeContainer.clientWidth,M.mazeContainer.clientHeight),M.mazeContainer.appendChild(C.domElement)):(C.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(C.domElement)),z(),window.addEventListener("resize",z),C.render(F,k),function(){const e=new o.AmbientLight(16777215);F.add(e);const t=new o.DirectionalLight(16777215,.8);F.add(t),t.position.set(-5,15,10),t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,t.shadow.camera.left=-20,t.shadow.camera.right=20,t.shadow.camera.top=20,t.shadow.camera.bottom=-20,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.001,t.shadow.radius=3,t.castShadow=!0}(),function(){const e=new o.Scene,t=new o.BoxGeometry(100,100,100),r=new o.MeshBasicMaterial({color:6710886,side:o.BackSide}),n=new o.Mesh(t,r);e.add(n);const s=new o.WebGLCubeRenderTarget(256);new o.CubeCamera(.1,1e3,s).update(C,e),F.environment=s.texture}(),function(){const e=(0,E.getStartPosition)(),t=(0,E.getLookAtPosition)();k.position.set(e.x,e.y,e.z),k.lookAt(t.x,t.y,t.z)}(),await re(F),Object.entries(K).forEach((([e,t])=>{const r=ze(t);He[e]={position:t.position.clone(),rotation:t.quaternion.clone(),scale:t.scale.clone(),visible:t.visible,opacity:r}})),window.addEventListener("scroll",(()=>{0===window.scrollY?it||wt():it&&it&&(it=!1,$e(!1),dt=!0,We=ct%50/50,Object.entries(K).forEach((([e,t])=>{Ne(e,t.position.clone(),!0,!0),Xe(e,t.quaternion.clone(),!0)})),at())})),0===window.scrollY&&wt(),Ct(),qt&&(qt.kill(),qt=null),qt=V().timeline({scrollTrigger:{trigger:a,start:"top top",end:"bottom bottom",scrub:l,refreshPriority:1,markers:{startColor:"green",endColor:"red",fontSize:"12px",fontWeight:"bold",indent:60},onEnter:()=>{Gt=!0,$t(),Yt(!0),Xt(),Z&&(Z.timeScale=1.5)},onEnterBack:()=>{Gt=!0,$t(),Yt(!0),Xt(),Z&&(Z.timeScale=1.5)},onLeave:()=>{Gt=!1,$t(),Nt(),Yt(!1),Zt(),Z&&(Z.timeScale=1)},onLeaveBack:()=>{Gt=!1,$t(),Nt(),Yt(!1),Zt(),Z&&(Z.timeScale=1)},onUpdate:e=>{"number"==typeof e.progress&&function(e){if(!Gt)return;if(_t===e)return;_t=e;const t=performance.now();if(!Ut||t-Wt>16){const e=k.position.x,r=k.position.y,n=k.position.z;if(isFinite(e)&&isFinite(r)&&isFinite(n))Ut||(Ut=new o.Vector3),Ut.set(e,r,n),Wt=t,Kt.copy(Ut);else{if(!Ut)return;Kt.copy(Ut)}}else Kt.copy(Ut);(function(){if(Rt&&Ht)return;const e=K.pacman;if(e){Dt.pacman||(Dt.pacman=e.quaternion.clone());let t=Dt.pacman.clone();const r=new o.Object3D;r.quaternion.copy(t),we(r,t,1),t=r.quaternion.clone(),t=ve(t,[{axis:"x",angle:Math.PI/2},{axis:"y",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"y",angle:Math.PI}]),Rt=t}const t=K.ghost1;if(t){Dt.ghost1||(Dt.ghost1=t.quaternion.clone());let e=Dt.ghost1.clone();const r=new o.Object3D;r.quaternion.copy(e),we(r,e,1),e=r.quaternion.clone(),e=ve(e,[{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI}]),Ht=e}Object.keys(K).forEach((e=>{const t=K[e];t&&!Dt[e]&&(Dt[e]=t.quaternion.clone())}))})(),Z&&(Gt&&1.5!==Z.timeScale&&(Z.timeScale=1.5),Z.update(O.getDelta()));const r={visible:!0,opacity:0,transparent:!0};Jt&&Jt.visible===r.visible&&Jt.opacity===r.opacity&&Jt.transparent===r.transparent||(Be(r.visible,r.opacity,r.transparent),Jt=r);const n=Rt,s=Ht,a=Kt.x-10,i=Kt.x+10,c=[{key:"pacman",behindOffset:1.5,zOffset:.5,xOffset:0,yOffset:0,zPhase:0},{key:"ghost1",behindOffset:0,zOffset:.5,xOffset:.5,yOffset:-.5,zPhase:1*Math.PI},{key:"ghost2",behindOffset:-.005,zOffset:.5,xOffset:0,yOffset:-1,zPhase:1.5*Math.PI},{key:"ghost3",behindOffset:-.01,zOffset:.5,xOffset:.5,yOffset:.5,zPhase:1*Math.PI},{key:"ghost4",behindOffset:-.015,zOffset:.5,xOffset:.75,yOffset:.25,zPhase:1*Math.PI},{key:"ghost5",behindOffset:-.02,zOffset:.5,xOffset:0,yOffset:-.5,zPhase:1*Math.PI},{key:"pill",behindOffset:1.1-4.3,zOffset:1.5,xOffset:0,yOffset:0,zPhase:.5*Math.PI}],l=g(e),p=a+(i-a)*l,u=p+4.3,d=Kt.y+-2,h=Kt.z+0;if(!(isFinite(p)&&isFinite(u)&&isFinite(d)&&isFinite(h)))return;const m=l<.2?l/.2:1;c.forEach((({key:e,behindOffset:t,zOffset:r,xOffset:a,yOffset:i,zPhase:c})=>{const p="pill"===e?ee:K[e];if(!p)return;const y="pacman"===e||"pill"===e?0:.01*Math.sin(l*Math.PI*2*20+c);let g,f,w;if("pill"===e?(g=1.5,f=-2,w=1.1):(g=u+t+a,f=d+i-("pacman"===e||"pill"===e?0:1.5*y),w=h+r-y),!isFinite(g)||!isFinite(f)||!isFinite(w)||Math.abs(w)<.01||Math.abs(w)>100)return;if(p.position.set(g,f,w),"pill"===e){const e=be,t=new o.Euler(1.571,e*Math.PI/180,180*Math.PI/180,"XYZ");p.rotation.copy(t),p.scale.set(10,10,10)}else{const t="pacman"===e?n:s;t&&p.quaternion.copy(t),Ve(p,e,"intro")}p.visible=!0;const v="pacman"===e||"pill"===e?1:m;"pill"!==e?p.traverse((t=>{if(t.isMesh){const r=t,o=t.name||"";if(de(o)||"pacman"===e&&he(o))return void(r.visible=!1);r.visible=!0;const n=r.material;n&&(Array.isArray(n)?n:[n]).forEach((e=>{e.opacity=v,void 0!==e.transmission&&e.transmission>0?e.transparent=!0:e.transparent=v<1}))}})):p.traverse((e=>{e.isMesh&&(e.visible=!0)}))}))}(e.progress)},id:"introScroll"}}).addLabel("intro-text-start",0).fromTo(".sc_h--intro",{scale:d,opacity:0},{keyframes:[{scale:d,opacity:0,duration:0},{scale:.8,opacity:1,duration:h},{scale:1.2,opacity:1,duration:m},{scale:1.5,opacity:0,duration:y}]}).addLabel("intro-text-fade-in",0).addLabel("intro-text-hold",.3).addLabel("intro-text-fade-out",.7).fromTo(".sc_b--intro",{scale:d,opacity:0},{keyframes:[{scale:d,opacity:0,duration:0},{scale:.8,opacity:1,duration:h},{scale:1.2,opacity:1,duration:m},{scale:1.5,opacity:0,duration:y}]}).addLabel("intro-text-end",1),er=V().timeline({scrollTrigger:{trigger:i,start:"top center",end:"bottom bottom",scrub:l,markers:!1,onEnter:()=>{_e(),qe(!0)},onEnterBack:()=>{_e(),qe(!0)}}}).addLabel("outro-text-start",0).fromTo(".sc_b--outro",{scale:d,opacity:0},{keyframes:[{scale:d,opacity:0,duration:0},{scale:.8,opacity:1,duration:h},{scale:1.2,opacity:1,duration:m},{scale:1.5,opacity:0,duration:y}]}).addLabel("outro-text-fade-in",0).addLabel("outro-text-hold",.3).addLabel("outro-text-fade-out",.7).addLabel("outro-text-end",1),function(){const e=document.querySelector(".wr_p--skip.wr_p");if(e){const t=document.querySelector(".sc--testimonials");t&&e.addEventListener("click",(()=>{t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}))}}(),function(){if(Ee)return;Ee=document.createElement("div"),Ee.id="pill-debug-hud",Ee.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    width: 300px;\n    background: rgba(20, 20, 20, 0.95);\n    color: #e0e0e0;\n    padding: 20px;\n    border-radius: 8px;\n    font-family: 'Courier New', monospace;\n    font-size: 13px;\n    z-index: 10000;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);\n    border: 2px solid #4CAF50;\n  ";const e=document.createElement("button");e.textContent="Show/Hide Pill Rotation",e.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 340px;\n    padding: 10px 15px;\n    background: #4CAF50;\n    color: white;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    z-index: 10001;\n    font-size: 14px;\n    font-weight: bold;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  ",e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),ke=!ke,Ee&&(Ee.style.display=ke?"block":"none")})),document.body.appendChild(e),document.body.appendChild(Ee),Ee.style.display="none",function(){if(!Ee)return;Ee.innerHTML=`\n    <h3 style="margin-top: 0; color: #4CAF50; font-size: 16px; text-shadow: 0 0 5px rgba(76, 175, 80, 0.5);">Pill Y Rotation</h3>\n    \n    <div style="margin-bottom: 15px; color: #e0e0e0;">\n      <label for="pill-y-rotation-slider" style="display: block; margin-bottom: 10px;">\n        <strong style="color: #ffffff;">Y Rotation (degrees):</strong>\n        <span id="pill-y-rotation-value" style="color: #4CAF50; margin-left: 10px; font-weight: bold;">${be}</span>\n      </label>\n      <input \n        type="range" \n        id="pill-y-rotation-slider" \n        min="0" \n        max="360" \n        value="${be}"\n        step="1"\n        style="width: 100%; height: 8px; border-radius: 5px; outline: none; background: #333; cursor: pointer;"\n      />\n    </div>\n  `;const e=Ee.querySelector("#pill-y-rotation-slider"),t=Ee.querySelector("#pill-y-rotation-value");e&&e.addEventListener("input",(e=>{const r=e.target;be=parseFloat(r.value),t&&(t.textContent=`${be}`),Me()}))}(),Me()}(),function(){if(Fe)return;Fe=document.createElement("div"),Fe.id="pacman-rotation-hud",Fe.style.cssText="\n    position: fixed;\n    top: 20px;\n    left: 20px;\n    width: 320px;\n    background: rgba(20, 20, 20, 0.95);\n    color: #e0e0e0;\n    padding: 20px;\n    border-radius: 8px;\n    font-family: 'Courier New', monospace;\n    font-size: 13px;\n    z-index: 10000;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);\n    border: 2px solid #FFD700;\n    max-height: 90vh;\n    overflow-y: auto;\n  ";const e=document.createElement("button");e.textContent="Show/Hide Pacman Rotation",e.style.cssText="\n    position: fixed;\n    top: 20px;\n    left: 360px;\n    padding: 10px 15px;\n    background: #FFD700;\n    color: #000;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    z-index: 10001;\n    font-size: 14px;\n    font-weight: bold;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  ",e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),Ce=!Ce,Fe&&(Fe.style.display=Ce?"block":"none")})),document.body.appendChild(e),document.body.appendChild(Fe),Fe.style.display="none",function(){if(!Fe)return;Fe.innerHTML=`\n    <h3 style="margin-top: 0; color: #FFD700; font-size: 16px; text-shadow: 0 0 5px rgba(255, 215, 0, 0.5);">Pacman Rotation (Home-Scroll)</h3>\n    \n    <div style="margin-bottom: 15px; color: #e0e0e0;">\n      <label for="pacman-x-rotation-slider" style="display: block; margin-bottom: 10px;">\n        <strong style="color: #ffffff;">X Rotation (degrees):</strong>\n        <span id="pacman-x-rotation-value" style="color: #FFD700; margin-left: 10px; font-weight: bold;">${Ae}</span>\n      </label>\n      <input \n        type="range" \n        id="pacman-x-rotation-slider" \n        min="-180" \n        max="180" \n        value="${Ae}"\n        step="1"\n        style="width: 100%; height: 8px; border-radius: 5px; outline: none; background: #333; cursor: pointer;"\n      />\n    </div>\n    \n    <div style="margin-bottom: 15px; color: #e0e0e0;">\n      <label for="pacman-y-rotation-slider" style="display: block; margin-bottom: 10px;">\n        <strong style="color: #ffffff;">Y Rotation (degrees):</strong>\n        <span id="pacman-y-rotation-value" style="color: #FFD700; margin-left: 10px; font-weight: bold;">${Pe}</span>\n      </label>\n      <input \n        type="range" \n        id="pacman-y-rotation-slider" \n        min="-180" \n        max="180" \n        value="${Pe}"\n        step="1"\n        style="width: 100%; height: 8px; border-radius: 5px; outline: none; background: #333; cursor: pointer;"\n      />\n    </div>\n    \n    <div style="margin-bottom: 15px; color: #e0e0e0;">\n      <label for="pacman-z-rotation-slider" style="display: block; margin-bottom: 10px;">\n        <strong style="color: #ffffff;">Z Rotation (degrees):</strong>\n        <span id="pacman-z-rotation-value" style="color: #FFD700; margin-left: 10px; font-weight: bold;">${xe}</span>\n      </label>\n      <input \n        type="range" \n        id="pacman-z-rotation-slider" \n        min="-180" \n        max="180" \n        value="${xe}"\n        step="1"\n        style="width: 100%; height: 8px; border-radius: 5px; outline: none; background: #333; cursor: pointer;"\n      />\n    </div>\n    \n    <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #444; color: #aaa; font-size: 11px;">\n      <p style="margin: 0;">These values adjust the end rotation of Pacman in the home-scroll animation. Changes are applied instantly.</p>\n    </div>\n  `;const e=Fe.querySelector("#pacman-x-rotation-slider"),t=Fe.querySelector("#pacman-y-rotation-slider"),r=Fe.querySelector("#pacman-z-rotation-slider"),o=Fe.querySelector("#pacman-x-rotation-value"),n=Fe.querySelector("#pacman-y-rotation-value"),s=Fe.querySelector("#pacman-z-rotation-value");e&&e.addEventListener("input",(e=>{const t=e.target;Ae=parseFloat(t.value),o&&(o.textContent=`${Ae}`);const r=j().getById("homeScroll");if(r&&(r.refresh(),r.isActive)){const e=r.progress;r.scroll(e)}})),t&&t.addEventListener("input",(e=>{const t=e.target;Pe=parseFloat(t.value),n&&(n.textContent=`${Pe}`);const r=j().getById("homeScroll");r&&r.refresh()})),r&&r.addEventListener("input",(e=>{const t=e.target;xe=parseFloat(t.value),s&&(s.textContent=`${xe}`);const r=j().getById("homeScroll");r&&r.refresh()}))}()}(),function(){const e=()=>{I.forEach((e=>e())),C.render(F,k),requestAnimationFrame(e)};e()}()}()})();
//# sourceMappingURL=script.js.map