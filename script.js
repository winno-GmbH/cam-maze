(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=THREE,r=window.innerWidth<768,o=".sc--home.sc",n=".sc--intro.sc",s=".sc--outro.sc",a=800,c=.5,i=.05,p=.01,l=.5;function u(e,t=0,r=1){return Math.max(t,Math.min(r,e))}Math.PI,Math.PI,Math.PI;const h=".el--home-maze.el",y="canvas",g=o,m=n,d=".sc--pov.sc",f=s,w=".cr--outro.cr",v=".cmp--pov.cmp",A={mazeContainer:document.querySelector(h),canvas:document.querySelector(y),homeSection:document.querySelector(g),introSection:document.querySelector(m),povSection:document.querySelector(d),finalSection:document.querySelector(f),finalContainer:document.querySelector(w),parentElements:document.querySelectorAll(v)},P={0:-.54875,.5:-.4985,1:-.44825,1.5:-.398,2:-.34775,2.5:-.2975,3:-.24725,3.5:-.197,4:-.14675,4.5:-.0965,5:-.04625,5.5:.004,6:.05425,6.5:.1045,7:.15475,7.5:.205,8:.25525,8.5:.3055,9:.35575,9.5:.406,10:.45625,10.5:.5065,11:.55675,11.5:.607,12:.65725,12.5:.7075,13:.75775,13.5:.808,14:.85825,14.5:.9085,15:.95875,15.5:1.009,16:1.05925,16.5:1.1095,17:1.15975,17.5:1.21,18:1.26025,18.5:1.3105,19:1.36075,19.5:1.411,20:1.46125},b={0:-.302,.5:-.25175,1:-.2015,1.5:-.15125,2:-.101,2.5:-.05075,3:-5e-4,3.5:.04975,4:.1,4.5:.15025,5:.2005,5.5:.25075,6:.301,6.5:.35125,7:.4015,7.5:.45175,8:.502,8.5:.55225,9:.6025,9.5:.65275,10:.703,10.5:.75325,11:.8035,11.5:.85375,12:.904,12.5:.95425,13:1.0045,13.5:1.05475,14:1.105,14.5:1.15525,15:1.2055,15.5:1.25575,16:1.306},S=(e,r)=>new t.Vector3(P[e],.55,b[r]),M=new t.Vector3(.55675,.35,.45175),E={startMobile:new t.Vector3(.5,2.5,2.5),startDesktop:new t.Vector3(-2,2.5,2),secondMobile:new t.Vector3(.5,2.5,2),secondDesktop:new t.Vector3(-1.5,3,.75),mobileLookAt:new t.Vector3(.5,.5,-1.5),desktopLookAt:new t.Vector3(-1.25,.5,.25),cameraLookAtSecondDesktop:new t.Vector3(-.75,.5,-.75),cameraLookAtSecondMobile:new t.Vector3(-.75,.5,-.75),cameraHomeScrollEndLookAt:new t.Vector3(.55675,-5,.35),thirdPosition:new t.Vector3(.55675,3,.45175),cameraHomeScrollEndPathPoint:new t.Vector3(.55675,.5,.45175)},k=r?E.startMobile:E.startDesktop,C=r?E.secondMobile:E.secondDesktop,O=r?E.mobileLookAt:E.desktopLookAt,F=r?E.cameraLookAtSecondMobile:E.cameraLookAtSecondDesktop,I=E.thirdPosition,x=E.cameraHomeScrollEndLookAt,V=E.cameraHomeScrollEndPathPoint,z=[{pos:S("8","9"),type:"straight"},{pos:S("8","6"),type:"curve",arc:"upperArc"},{pos:S("9","5"),type:"curve",arc:"lowerArc"},{pos:S("10","4"),type:"straight"},{pos:S("10","2"),type:"curve",arc:"upperArc"},{pos:S("9","1"),type:"straight"},{pos:S("7","1"),type:"curve",arc:"lowerArc"},{pos:S("6","2"),type:"curve",arc:"upperArc"},{pos:S("5","3"),type:"curve",arc:"lowerArc"},{pos:S("4","2"),type:"curve",arc:"upperArc"},{pos:S("3","1"),type:"straight",curveCheckPoints:[S("2","1"),S("1","2"),S("1","2.5"),S("1.5","3"),S("2","3.5")]},{pos:S("2","4"),type:"curve",arc:"upperArc"},{pos:S("3","5"),type:"straight"},{pos:S("5","5"),type:"curve",arc:"lowerArc"},{pos:S("6","6"),type:"curve",arc:"upperArc"},{pos:S("5","7"),type:"straight"},{pos:S("4","7"),type:"curve",arc:"lowerArc"},{pos:S("3","8"),type:"curve",arc:"upperArc"},{pos:S("4","9"),type:"straight"},{pos:S("5","9"),type:"curve",arc:"lowerArc"},{pos:S("6","10"),type:"curve",arc:"upperArc"},{pos:S("5","11"),type:"straight",curveCheckPoints:[S("3","11"),S("2","12"),S("1.5","13"),S("1","14"),S("2","15"),S("3","15"),S("4","14"),S("5","13")]},{pos:S("6","13"),type:"curve",arc:"lowerArc"},{pos:S("7","14"),type:"curve",arc:"upperArc"},{pos:S("6","15"),type:"straight"},{pos:S("5","15"),type:"curve",arc:"lowerArc"},{pos:S("4","14"),type:"curve",arc:"upperArc"},{pos:S("5","13"),type:"straight",curveCheckPoints:[S("12","13"),S("13","12"),S("12.5","11"),S("12","10.5"),S("11","10"),S("10","10.5"),S("9","11"),S("8","10"),S("8","9.5")]},{pos:S("8","9"),type:"straight"}],T=[{pos:S("1","10"),type:"straight"},{pos:S("1","6"),type:"curve",arc:"upperArc"},{pos:S("2","5"),type:"straight"},{pos:S("3","5"),type:"curve",arc:"lowerArc"},{pos:S("4","4"),type:"curve",arc:"upperArc"},{pos:S("5","3"),type:"straight"},{pos:S("9","3"),type:"curve",arc:"lowerArc"},{pos:S("10","4"),type:"curve",arc:"upperArc"},{pos:S("9","5"),type:"curve",arc:"lowerArc"},{pos:S("8","6"),type:"straight",curveCheckPoints:[S("8","10"),S("9","11"),S("10","10.5"),S("11","10"),S("12","10.5"),S("13","11"),S("15","11"),S("16","10.5"),S("17","10"),S("18","10.5"),S("19","11"),S("20","10")]},{pos:S("20","6"),type:"curve",arc:"upperArc"},{pos:S("19","5"),type:"straight"},{pos:S("9","5"),type:"curve",arc:"lowerArc"},{pos:S("8","6"),type:"straight",curveCheckPoints:[S("8","8"),S("7","9"),S("6","10"),S("5.5","11"),S("5","12"),S("6","13"),S("7","14"),S("6","15"),S("5","15"),S("4","14"),S("4.5","13"),S("5","12"),S("4","11")]},{pos:S("1","10"),type:"straight"}],_=[{pos:S("5","12"),type:"curve",arc:"upperArc",curveCheckPoints:[S("5.5","11")]},{pos:S("6","10"),type:"curve",arc:"upperArc"},{pos:S("5","9"),type:"straight"},{pos:S("4","9"),type:"curve",arc:"lowerArc"},{pos:S("3","8"),type:"curve",arc:"upperArc"},{pos:S("4","7"),type:"straight"},{pos:S("7","7"),type:"curve",arc:"lowerArc"},{pos:S("8","8"),type:"straight"},{pos:S("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[S("8.5","11"),S("9","12")]},{pos:S("10","13"),type:"straight"},{pos:S("12","13"),type:"curve",arc:"lowerArc"},{pos:S("13","14"),type:"curve",arc:"upperArc"},{pos:S("14","15"),type:"straight"},{pos:S("19","15"),type:"curve",arc:"lowerArc"},{pos:S("20","14"),type:"straight"},{pos:S("20","4"),type:"curve",arc:"upperArc"},{pos:S("19","3"),type:"straight"},{pos:S("17","3"),type:"curve",arc:"lowerArc"},{pos:S("16","4"),type:"curve",arc:"upperArc"},{pos:S("15","5"),type:"curve",arc:"lowerArc"},{pos:S("14","4"),type:"straight"},{pos:S("14","2"),type:"curve",arc:"upperArc"},{pos:S("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[S("12","1.5")]},{pos:S("11","2"),type:"curve",arc:"lowerArc"},{pos:S("10","3"),type:"straight"},{pos:S("10","4"),type:"curve",arc:"upperArc"},{pos:S("9","5"),type:"curve",arc:"lowerArc"},{pos:S("8","6"),type:"straight"},{pos:S("8","10"),type:"curve",arc:"upperArc",curveCheckPoints:[S("8.5","11")]},{pos:S("9","12"),type:"curve",arc:"upperArc"},{pos:S("8","13"),type:"curve",arc:"lowerArc"},{pos:S("7","14"),type:"curve",arc:"upperArc"},{pos:S("6","15"),type:"straight"},{pos:S("5","15"),type:"curve",arc:"lowerArc"},{pos:S("4","14"),type:"curve",arc:"upperArc",curveCheckPoints:[S("4.5","13"),S("5","12")]}],q=[{pos:S("14","10.5"),type:"straight"},{pos:S("14","2"),type:"curve",arc:"upperArc"},{pos:S("13","1"),type:"curve",arc:"lowerArc",curveCheckPoints:[S("12","1.5"),S("11","2"),S("10","1.5")]},{pos:S("9","1"),type:"straight"},{pos:S("7","1"),type:"curve",arc:"lowerArc"},{pos:S("6","2"),type:"curve",arc:"upperArc"},{pos:S("7","3"),type:"straight"},{pos:S("9","3"),type:"curve",arc:"lowerArc"},{pos:S("10","4"),type:"curve",arc:"upperArc"},{pos:S("11","5"),type:"straight"},{pos:S("19","5"),type:"curve",arc:"lowerArc"},{pos:S("20","6"),type:"straight"},{pos:S("20","10"),type:"curve",arc:"upperArc"},{pos:S("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[S("18","10.5"),S("17","10"),S("16","10.5"),S("15.5","11")]},{pos:S("15","12"),type:"straight"},{pos:S("15","14"),type:"curve",arc:"upperArc"},{pos:S("14","15"),type:"curve",arc:"lowerArc"},{pos:S("13","14"),type:"straight"},{pos:S("13","12"),type:"curve",arc:"upperArc",curveCheckPoints:[S("12.5","11"),S("12","10.5"),S("10","10.5")]},{pos:S("9","11"),type:"curve",arc:"lowerArc"},{pos:S("8","10"),type:"curve",arc:"upperArc"},{pos:S("7","9"),type:"curve",arc:"lowerArc"},{pos:S("6","10"),type:"curve",arc:"upperArc",curveCheckPoints:[S("5.5","11")]},{pos:S("5","12"),type:"curve",arc:"upperArc"},{pos:S("6","13"),type:"straight"},{pos:S("12","13"),type:"curve",arc:"lowerArc"},{pos:S("13","12"),type:"curve",arc:"upperArc"},{pos:S("13.5","11"),type:"curve",arc:"lowerArc"},{pos:S("14","10.5"),type:"straight"}],B=[{pos:S("16","7"),type:"straight"},{pos:S("16","10"),type:"curve",arc:"upperArc"},{pos:S("15","11"),type:"straight"},{pos:S("14","11"),type:"curve",arc:"lowerArc"},{pos:S("13","12"),type:"curve",arc:"upperArc"},{pos:S("12","13"),type:"straight"},{pos:S("8","13"),type:"curve",arc:"lowerArc"},{pos:S("7","14"),type:"curve",arc:"upperArc"},{pos:S("6","15"),type:"straight"},{pos:S("2","15"),type:"curve",arc:"lowerArc"},{pos:S("1","14"),type:"curve",arc:"upperArc",curveCheckPoints:[S("1.5","13"),S("2","12"),S("1.5","11")]},{pos:S("1","10"),type:"straight"},{pos:S("1","6"),type:"curve",arc:"upperArc"},{pos:S("2","5"),type:"straight"},{pos:S("5","5"),type:"curve",arc:"lowerArc"},{pos:S("6","6"),type:"curve",arc:"upperArc"},{pos:S("7","7"),type:"curve",arc:"lowerArc"},{pos:S("8","6"),type:"curve",arc:"upperArc"},{pos:S("9","5"),type:"straight"},{pos:S("13","5"),type:"curve",arc:"lowerArc"},{pos:S("14","4"),type:"straight"},{pos:S("14","2"),type:"curve",arc:"upperArc"},{pos:S("15","1"),type:"curve",arc:"lowerArc"},{pos:S("16","2"),type:"curve",arc:"upperArc"},{pos:S("17","3"),type:"straight"},{pos:S("19","3"),type:"curve",arc:"lowerArc"},{pos:S("20","2"),type:"curve",arc:"upperArc"},{pos:S("19","1"),type:"curve",arc:"lowerArc"},{pos:S("18","2"),type:"curve",arc:"upperArc"},{pos:S("19","3"),type:"curve",arc:"lowerArc"},{pos:S("20","4"),type:"straight"},{pos:S("20","10"),type:"curve",arc:"upperArc"},{pos:S("19","11"),type:"curve",arc:"lowerArc",curveCheckPoints:[S("18","10.5")]},{pos:S("17","10"),type:"curve",arc:"lowerArc"},{pos:S("16","9"),type:"straight"},{pos:S("16","7"),type:"straight"}],j=[{pos:S("10","3.5"),type:"curve",arc:"upperArc"},{pos:S("9","3"),type:"straight"},{pos:S("5","3"),type:"curve",arc:"lowerArc"},{pos:S("4","2"),type:"curve",arc:"upperArc"},{pos:S("3","1"),type:"straight"},{pos:S("2","1"),type:"curve",arc:"lowerArc"},{pos:S("1","2"),type:"curve",arc:"upperArc"},{pos:S("1.5","3"),type:"curve",arc:"lowerArc"},{pos:S("2","4"),type:"curve",arc:"upperArc"},{pos:S("3","5"),type:"straight"},{pos:S("5","5"),type:"curve",arc:"lowerArc"},{pos:S("6","6"),type:"curve",arc:"upperArc"},{pos:S("5","7"),type:"straight"},{pos:S("4","7"),type:"curve",arc:"lowerArc"},{pos:S("3","8"),type:"curve",arc:"upperArc"},{pos:S("4","9"),type:"straight"},{pos:S("7","9"),type:"curve",arc:"lowerArc"},{pos:S("8","10"),type:"curve",arc:"upperArc"},{pos:S("8.5","11"),type:"curve",arc:"lowerArc"},{pos:S("9","12"),type:"curve",arc:"upperArc"},{pos:S("10","13"),type:"straight"},{pos:S("12","13"),type:"curve",arc:"lowerArc"},{pos:S("13","12"),type:"curve",arc:"upperArc"},{pos:S("14","11"),type:"curve",arc:"lowerArc"},{pos:S("15","12"),type:"curve",arc:"upperArc"},{pos:S("15","14"),type:"curve",arc:"upperArc"},{pos:S("16","15"),type:"straight"},{pos:S("19","15"),type:"curve",arc:"lowerArc"},{pos:S("20","14"),type:"straight"},{pos:S("20","2"),type:"curve",arc:"upperArc"},{pos:S("19","1"),type:"straight"},{pos:S("17","1"),type:"curve",arc:"lowerArc"},{pos:S("16","2"),type:"straight"},{pos:S("16","4"),type:"curve",arc:"upperArc"},{pos:S("15","5"),type:"curve",arc:"lowerArc"},{pos:S("14","4"),type:"straight"},{pos:S("14","2"),type:"curve",arc:"upperArc"},{pos:S("13","1"),type:"curve",arc:"lowerArc"},{pos:S("12","1.5"),type:"curve",arc:"upperArc"},{pos:S("11","2"),type:"curve",arc:"lowerArc"},{pos:S("10","3.5"),type:"curve",arc:"lowerArc"}],L=[{pos:k,lookAt:O},{pos:C,lookAt:F},{pos:I,lookAt:x},{pos:V,lookAt:x}],G=[{pos:new t.Vector3(P[11],.40625,b[7.5]),type:"straight",lookAtSequence:[new t.Vector3(P[11],.2,b[8]),new t.Vector3(P[11],1.2,b[16]),new t.Vector3(P[11],.55,b[16])]},{pos:S("11","7.5"),type:"curve",arc:"lowerArc"},{pos:S("11","9"),type:"curve",arc:"upperArc",curveCheckPoints:[new t.Vector3(P[11],.55,.6525),S("11.5","10"),S("12","10.5"),S("12.5","11")]},{pos:S("13","11"),type:"straight"},{pos:S("14.5","11"),type:"curve",arc:"lowerArc"},{pos:S("15","11.5"),type:"straight"},{pos:S("15","14.5"),type:"curve",arc:"upperArc"},{pos:S("14.5","15"),type:"straight"},{pos:S("13.5","15"),type:"curve",arc:"lowerArc"},{pos:S("13","14.5"),type:"straight"},{pos:S("13","13.5"),type:"curve",arc:"upperArc"},{pos:S("12.5","13"),type:"straight"},{pos:S("7.5","13"),type:"curve",arc:"lowerArc"},{pos:S("7","13.5"),type:"straight"},{pos:S("7","14.5"),type:"curve",arc:"upperArc"},{pos:S("7.5","15"),type:"straight"},{pos:S("10.5","15"),type:"curve",arc:"lowerArc"},{pos:S("11","16"),type:"curve",arc:"upperArc"}],R=[{pos:S("16","10"),type:"straight"},{pos:S("16","10.5"),type:"curve",arc:"upperArc"},{pos:S("15.5","11"),type:"straight"},{pos:S("14.5","11"),type:"straight"}],W=[{pos:S("16","15"),type:"straight"},{pos:S("15.5","15"),type:"curve",arc:"lowerArc"},{pos:S("15","14.5"),type:"straight"},{pos:S("15","13.5"),type:"straight"}],D=[{pos:S("9","12"),type:"straight"},{pos:S("9","12.5"),type:"curve",arc:"upperArc"},{pos:S("9.5","13"),type:"straight"},{pos:S("10.5","13"),type:"straight"}],H=[{pos:S("7","14"),type:"straight"},{pos:S("7","13.5"),type:"curve",arc:"upperArc"},{pos:S("7.5","13"),type:"straight"},{pos:S("8.5","13"),type:"straight"}],U=[{pos:S("11","16"),type:"straight"},{pos:S("11","15.5"),type:"curve",arc:"upperArc"},{pos:S("10.5","15"),type:"straight"},{pos:S("9.5","15"),type:"straight"}],Y={ghost1:{triggerPos:new t.Vector3(.65725,.55,.75325),ghostStartFadeIn:new t.Vector3(.7075,.55,.8035),ghostEndFadeIn:new t.Vector3(.725,.55,.8035),ghostStartFadeOut:new t.Vector3(.75,.55,.8035),camStartFadeIn:new t.Vector3(.75775,.55,.8035),camEndFadeIn:new t.Vector3(.775,.55,.8035),camStartFadeOut:new t.Vector3(.84,.55,.8035),endPosition:new t.Vector3(.85825,.55,.8035),forceEndProgress:{start:.1,end:.16}},ghost2:{triggerPos:new t.Vector3(.9085,.55,.8035),ghostStartFadeIn:new t.Vector3(.95875,.55,.85375),ghostEndFadeIn:new t.Vector3(.95875,.55,.875),ghostStartFadeOut:new t.Vector3(.95875,.55,.89),camStartFadeIn:new t.Vector3(.95875,.55,.904),camEndFadeIn:new t.Vector3(.95875,.55,.93),camStartFadeOut:new t.Vector3(.95875,.55,.9975),endPosition:new t.Vector3(.95875,.55,1.0045),forceEndProgress:{start:.17,end:.22}},ghost3:{triggerPos:new t.Vector3(.75775,.55,1.05475),ghostStartFadeIn:new t.Vector3(.7075,.55,1.0045),ghostEndFadeIn:new t.Vector3(.7075,.55,1.0045),ghostStartFadeOut:new t.Vector3(.6825,.55,1.0045),camStartFadeIn:new t.Vector3(.65725,.55,1.0045),camEndFadeIn:new t.Vector3(.65725,.55,1.0045),camStartFadeOut:new t.Vector3(.6065,.55,1.0045),endPosition:new t.Vector3(.55675,.55,1.0045),forceEndProgress:{start:.23,end:.33}},ghost4:{triggerPos:new t.Vector3(.65725,.55,1.0045),ghostStartFadeIn:new t.Vector3(.5565,.55,1.0045),ghostEndFadeIn:new t.Vector3(.5065,.55,1.0045),ghostStartFadeOut:new t.Vector3(.4815,.55,1.0045),camStartFadeIn:new t.Vector3(.45625,.55,1.0045),camEndFadeIn:new t.Vector3(.45625,.55,1.0045),camStartFadeOut:new t.Vector3(.4065,.55,1.0045),endPosition:new t.Vector3(.35575,.55,1.0045),forceEndProgress:{start:.38,end:.47}},ghost5:{triggerPos:new t.Vector3(.15475,.55,1.15525),ghostStartFadeIn:new t.Vector3(.1795,.55,1.18),ghostEndFadeIn:new t.Vector3(.205,.55,1.2055),ghostStartFadeOut:new t.Vector3(.23025,.55,1.2055),camStartFadeIn:new t.Vector3(.25525,.55,1.2055),camEndFadeIn:new t.Vector3(.25525,.55,1.2055),camStartFadeOut:new t.Vector3(.3055,.55,1.2055),endPosition:new t.Vector3(.35575,.55,1.2055),forceEndProgress:{start:.52,end:.59}}};function N(){return k}function Q(){return O}const X={pacman:z,ghost1:T,ghost2:_,ghost3:q,ghost4:B,ghost5:j},Z={camera:G,ghost1:R,ghost2:W,ghost3:D,ghost4:H,ghost5:U};function $(){return L}const K=new t.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,100),J=new t.Scene,ee=new t.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),te=new t.Clock,re=[];function oe(){const e=Math.min(window.devicePixelRatio,r?2:3);ee.setPixelRatio(e),A.mazeContainer?(ee.setSize(A.mazeContainer.clientWidth,A.mazeContainer.clientHeight),K.aspect=A.mazeContainer.clientWidth/A.mazeContainer.clientHeight):(ee.setSize(window.innerWidth,window.innerHeight),K.aspect=window.innerWidth/window.innerHeight),K.updateProjectionMatrix()}const ne=(new t.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),se=new t.MeshMatcapMaterial({matcap:ne}),ae=new t.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),ce=new t.MeshPhysicalMaterial({color:16777215,opacity:.9999,transparent:!0,depthWrite:!1,depthTest:!0,blending:t.NormalBlending,side:t.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),ie=new t.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),pe={blue:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new t.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new t.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},le={CAM_Pacman_Backframe:pe.blue,"CAM-Pacman_Bitcoin_1":pe.white,"CAM-Pacman_Bitcoin_2":pe.white,"CAM-Pacman_Bottom":pe.blue,"CAM-Pacman_Top":pe.blue,"CAM-Pacman_Eye":pe.white,CAM_Pacman_Logo_1:pe.white,CAM_Pacman_Logo_2:pe.white,"CAM-Pacman_Shell_Boolean":pe.blue,"CAM-Pacman_Shell":pe.blue,"CAM-Pacman_Bottom_electronic":pe.white,"CAM-Pacman_Top_electronic":pe.white,"CAM-Pacman_Bottom_Text":pe.white,"CAM-Pacman_Top_Text":pe.white,default:pe.blue},ue=new t.GLTFLoader;let he;const ye=new t.Group,ge={pacman:ye,ghost1:new t.Mesh(new t.BufferGeometry,ce),ghost2:new t.Mesh(new t.BufferGeometry,ce),ghost3:new t.Mesh(new t.BufferGeometry,ce),ghost4:new t.Mesh(new t.BufferGeometry,ce),ghost5:new t.Mesh(new t.BufferGeometry,ce)},me={Ghost_EUR:ge.ghost1,Ghost_CHF:ge.ghost2,Ghost_YEN:ge.ghost3,Ghost_USD:ge.ghost4,Ghost_GBP:ge.ghost5},de=new Map;class fe{constructor(e,t=.06){this.currentTangent=e.clone(),this.smoothing=t}update(e){return this.currentTangent.lerp(e,this.smoothing),this.currentTangent.normalize()}reset(e){this.currentTangent.copy(e)}getCurrentTangent(){return this.currentTangent.clone()}setSmoothingFactor(e){this.smoothing=Math.max(.001,Math.min(1,e))}}function we(e){const r=e.map((e=>`${e.pos.x},${e.pos.y},${e.pos.z},${e.type},${e.arc||""}`)).join("|");if(de.has(r))return de.get(r);const o=new t.CurvePath;let n=0;for(;n<e.length-1;){const r=e[n],s=e[n+1];if(r.curveCheckPoints?.length){const e=[r.pos,...r.curveCheckPoints,s.pos];o.add(new t.CatmullRomCurve3(e,!1,"centripetal",0))}else if("straight"===r.type)o.add(new t.LineCurve3(r.pos,s.pos));else{const e=ve(r,s);o.add(new t.QuadraticBezierCurve3(r.pos,e,s.pos))}n++}return de.set(r,o),o}function ve(e,r){if(e.arc){const o=e.arc;if("upperArc"===o)return new t.Vector3(e.pos.x,e.pos.y,r.pos.z);if("lowerArc"===o)return new t.Vector3(r.pos.x,e.pos.y,e.pos.z);if("forwardDownArc"===o)return new t.Vector3(e.pos.x,r.pos.y,e.pos.z)}return new t.Vector3(e.pos.x,e.pos.y,r.pos.z)}function Ae(e){const r=new t.CurvePath;if(4===e.length){const o=new t.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);r.add(o)}return r}function Pe(){const e={};return Object.entries(X).forEach((([t,r])=>{e[t]=we(r)})),e}function be(){const e={};return Object.entries(Z).forEach((([t,r])=>{e[t]=we(r)})),e}const Se=gsap;var Me=e.n(Se);const Ee=["pacman","ghost1","ghost2","ghost3","ghost4","ghost5"],ke=["EUR","CHF","YEN","USD","GBP"];function Ce(e){return ke.some((t=>e===t||e.includes(t)))}function Oe(e){return e.includes("Shell")||e.includes("Bitcoin_1")||e.includes("Bitcoin_2")}function Fe(e,t,r="ghost"){if(!t?.length())return;const o=Math.atan2(t.x,t.z);if("pacman"===r)e.rotation.set(-Math.PI/2,Math.PI,-(o+Math.PI/2));else if("ghost"===r)e.rotation.set(0,o,0);else if("camera"===r){const r=e.position.clone().add(t);e.lookAt(r)}}const Ie=(new t.Quaternion).setFromEuler(new t.Euler(Math.PI/2,0,0)),xe=(new t.Quaternion).setFromAxisAngle(new t.Vector3(0,1,0),Math.PI).clone().multiply(Ie),Ve=(new t.Quaternion).setFromEuler(new t.Euler(-Math.PI/2,0,0));function ze(e,t,r){const o=t.angleTo(xe)<t.angleTo(Ve)?xe:Ve;e.quaternion.copy(t.clone().slerp(o,r))}function Te(e,r){let o=e.clone();return r.forEach((({axis:e,angle:r})=>{o=function(e,r,o){const n="x"===r?new t.Vector3(1,0,0):"y"===r?new t.Vector3(0,1,0):new t.Vector3(0,0,1),s=(new t.Quaternion).setFromAxisAngle(n,o);return e.clone().multiply(s)}(o,e,r)})),o}function _e(e,t,r){const o=!1!==r?.preserveTransmission;je(e,(e=>{qe(e,t,o)}),{skipCurrencySymbols:!0===r?.skipCurrencySymbols})}function qe(e,t,r=!0){const o=e;o.opacity=t,r&&void 0!==o.transmission&&o.transmission>0?o.transparent=!0:o.transparent=t<1,void 0!==o.needsUpdate&&(o.needsUpdate=!0)}function Be(e){let t=1,r=!1;return je(e,(e=>{r||(t=e.opacity??1,r=!0)}),{skipCurrencySymbols:!1}),t}function je(e,t,r){const o=!0===r?.skipCurrencySymbols,n=!0===r?.skipPacmanParts,s=r?.objectKey;e.traverse((e=>{if(e.isMesh&&e.material){const r=e,a=e.name||"";if(o&&Ce(a))return;if(n&&"pacman"===s&&Oe(a))return;Array.isArray(r.material)?r.material.forEach((e=>{t(e,r,a)})):t(r.material,r,a)}}))}function Le(e,r=1,o=!1){J.traverse((n=>{if("CAM-Floor"===n.name&&(n.visible=e,n instanceof t.Mesh&&n.material)){const e=n.material;e.color.setHex(16777215),e.opacity=r,e.transparent=o}}))}function Ge(e,t,r){let o;o="pacman"===t?"intro"===r?.1:.05:"intro"===r?1.5:"pov"===r?.5:1,e.scale.set(o,o,o),e.updateMatrixWorld(!0),Me().set(e.scale,{x:o,y:o,z:o})}function Re(e){Me().killTweensOf(e),Me().killTweensOf(e.scale),Me().killTweensOf(e.position),Me().killTweensOf(e.rotation),Me().killTweensOf(e.quaternion),je(e,(e=>{Me().killTweensOf(e),Me().killTweensOf(e.opacity)}),{skipCurrencySymbols:!1})}let We=null,De=null,He={};function Ue(e,t){e&&(ge.pacman&&Me().set(ge.pacman,{visible:!1}),Object.entries(ge).forEach((([e,t])=>{"pacman"!==e&&(Me().set(t,{visible:!1}),Ge(t,e,"pov"),je(t,(e=>{qe(e,1,!0)}),{skipCurrencySymbols:!1}))})),Le(!0,1,!1))}function Ye(e,t){e&&Le(!0,1,!1)}let Ne=window.scrollY;function Qe(){const e=window.scrollY,t=e>Ne?"down":"up";return Ne=e,t}const Xe={t:0,pausedT:0,animationTime:0},Ze={};let $e={},Ke={},Je=null,et=!1;function tt(e){et=e}function rt(){const e={};return Object.entries(Ze).forEach((([t,r])=>{e[t]=r.rotation.clone()})),e}function ot(e,t,r=!1,o=!1){(et||r)&&(Ze[e]&&Ze[e].position.copy(t),o&&($e[e]=t.clone()))}function nt(e,t,r=!1){Ze[e]&&Ze[e].rotation.copy(t),r&&(Ke[e]=t.clone())}function st(){return Object.entries(Ke).reduce(((e,[t,r])=>(e[t]=r.clone(),e)),{})}let at=null,ct={};function it(){at&&(at.kill(),at=null);const e=$(),r=new t.CurvePath;if(4===e.length){const o=new t.CubicBezierCurve3(e[0].pos,e[1].pos,e[2].pos,e[3].pos);r.add(o)}const n=()=>{requestAnimationFrame((()=>{const e={...$e},t=st();Qe(),Object.entries(ge).forEach((([r,o])=>{if(e[r])o.position.copy(e[r]),ct[r]=e[r].clone();else{const e=function(){const e={};return Object.entries(Ze).forEach((([t,r])=>{e[t]=r.position.clone()})),e}();e[r]?(o.position.copy(e[r]),ct[r]=e[r].clone()):ct[r]=o.position.clone()}t[r]&&o.quaternion.copy(t[r])}));const r=Object.keys(t).length>0?t:rt();var o;(o=ct)&&r&&Object.entries(ge).forEach((([e,t])=>{o[e]&&(t.position.set(o[e].x,o[e].y,o[e].z),Me().set(t.position,{x:o[e].x,y:o[e].y,z:o[e].z})),Me().set(t,{visible:!0}),Ge(t,e,"home"),je(t,((e,t,r)=>{Ce(r)?t.visible=!1:(t.visible=!0,function(e,t,r=!0){const o=e;r&&void 0!==o.transmission&&o.transmission>0?o.transparent=!0:o.transparent=t,void 0!==o.needsUpdate&&(o.needsUpdate=!0)}(e,!0,!0))}),{skipCurrencySymbols:!1})})),Le(!0,1,!1),a(),p()}))};at=Me().timeline({scrollTrigger:{id:"homeScroll",trigger:o,start:"top top",end:"bottom top",scrub:c,onEnter:n,onEnterBack:n}});const s=Object.entries(ge);s.forEach((([e,t])=>{ct[e]=t.position.clone()}));const a=()=>{at&&at.clear(),s.forEach((([e,t])=>{Re(t)}));const e=function(e){const r=function(e){const r={};return Object.entries(e).forEach((([e,o])=>{const n=new t.Vector3(o.x*(1/4)+M.x*(3/4),1.5,o.z*(1/4)+M.z*(3/4));r[e]=[{pos:o.clone()},{pos:n},{pos:M}]})),r}(e),o={camera:Ae($())};return Object.entries(r).forEach((([e,r])=>{o[e]=function(e){const r=new t.CurvePath;if(3===e.length){const o=new t.QuadraticBezierCurve3(e[0].pos,e[1].pos,e[2].pos);r.add(o)}return r}(r)})),o}(ct),r=[],o=[];s.forEach((([n,s])=>{const a=Be(s);je(s,((e,t)=>{const r=e.clone();if(qe(r,a,!0),Array.isArray(t.material)){const o=t.material.indexOf(e);if(-1!==o){const e=[...t.material];e[o]=r,t.material=e}}else t.material=r}),{skipCurrencySymbols:!1});const c=st()[n]||rt()[n]||s.quaternion.clone(),i=(new t.Euler).setFromQuaternion(c),p=(new t.Euler).setFromQuaternion(xe),l=e[n];if(!l)return;const u={progress:0,rotX:i.x,rotY:i.y,rotZ:i.z,opacity:a};r.push(u),o.push({key:n,object:s,path:l,startEuler:i,endEuler:p})})),o.length,o.forEach(((e,t)=>{const o=r[t],n=1+.15*t,s=e.path.getPointAt(0);e.object.position.copy(s),at.fromTo(o,{progress:0,rotX:e.startEuler.x,rotY:e.startEuler.y,rotZ:e.startEuler.z,opacity:o.opacity},{progress:1,rotX:e.endEuler.x,rotY:e.endEuler.y,rotZ:e.endEuler.z,opacity:0,ease:"power1.out",immediateRender:!1,duration:n,onUpdate:function(){const t=e.path.getPointAt(o.progress);e.object.position.copy(t),e.object.rotation.set(o.rotX,o.rotY,o.rotZ),e.object.quaternion.setFromEuler(e.object.rotation),_e(e.object,o.opacity,{preserveTransmission:!0,skipCurrencySymbols:!0})}},0)}))};let i=null;const p=()=>{i&&Me().killTweensOf(i),i={value:0},r&&r.curves.length&&at.fromTo(i,{value:0},{value:1,immediateRender:!1,onUpdate:function(){const o=this.targets()[0].value;if(r&&r.curves.length){const n=r.getPointAt(o);K.position.copy(n);const s=[];if(e.forEach((e=>{"lookAt"in e&&e.lookAt&&s.push(e.lookAt)})),s.length>=4){const e=new t.CubicBezierCurve3(s[0],s[1],s[2],s[3]).getPoint(o);K.lookAt(e)}K.fov=50,K.updateProjectionMatrix()}}},0)};a(),p()}let pt=!0,lt=0,ut=!1,ht=0,yt={},gt=!1;const mt={};function dt(){pt=!0,tt(!0);const e=Pe(),r=st(),o=Je;if(gt&&null!==o&&(lt=50*o),ht=0,yt={},!0&&(Object.entries(ge).forEach((([e,t])=>{Me().set(t,{visible:!0}),Ge(t,e,"home"),je(t,((e,t,r)=>{Ce(r)?t.visible=!1:t.visible=!0}),{skipCurrencySymbols:!1}),function(e){_e(e,1,{preserveTransmission:!0,skipCurrencySymbols:!0})}(t)})),Le(!0,1,!1)),function(){const e=new t.Vector3(1,0,0);Ee.forEach((t=>{mt[t]=new fe(e.clone(),.06)}))}(),Object.entries(ge).forEach((([t,n])=>{const s=e[t];if(s){if(gt&&null!==o){const e=s.getPointAt(o);e&&(n.position.copy(e),ot(t,e))}const e=r[t];if(e?(n.quaternion.copy(e),nt(t,e),gt&&(yt[t]=e.clone())):(nt(t,n.quaternion),gt&&(yt[t]=n.quaternion.clone())),"pacman"!==t&&(n.visible=!0),Ge(n,t,"home"),mt[t]&&null!==o){const e=s.getTangentAt(o);e&&mt[t].reset(e)}}})),!ut){let e=te.getElapsedTime();n=()=>{if(document.hidden)return void(e=te.getElapsedTime());const r=te.getElapsedTime(),o=r-e;e=r,function(e){if(!pt)return;const r=Math.min(e,.1);lt+=r,ht+=r;const o=lt%50/50;!function(e,t){Xe.t=e,Xe.animationTime=t}(o,lt);const n=Pe();he&&he.update(e);const s=Math.min(ht/1.5,1),a=gt&&s<1;Object.entries(ge).forEach((([e,r])=>{const c=n[e];if(c){const n=o,i=c.getPointAt(n);i&&(r.position.copy(i),ot(e,i)),Ge(r,e,"home");const p=new t.Quaternion;if(mt[e]&&n>0){const r=c.getTangentAt(n);if(r&&r.length()>0){const o=mt[e].update(r),n="pacman"===e?"pacman":"ghost",s=new t.Object3D;Fe(s,o,n),p.copy(s.quaternion)}}if(a&&yt[e]){const t=s*s*(3-2*s);r.quaternion.copy(yt[e].clone().slerp(p,t))}else r.quaternion.copy(p);nt(e,r.quaternion)}}))}(o)},re.push(n),ut=!0}var n}const ft=ScrollTrigger;var wt=e.n(ft);const vt={};Me().registerPlugin(wt());let At=null,Pt=null,bt=!1,St=!1;const Mt=new t.Vector3(.55675,.55,1.306),Et=new t.Vector3(-.14675,1,1.8085);let kt=null;const Ct={},Ot={};function Ft(){At&&(At.kill(),At=null),function(){Ot.camera=new fe(new t.Vector3(0,0,-1),.08);for(let e=1;e<=5;e++)Ot[`ghost${e}`]=new fe(new t.Vector3(1,0,0),.08)}(),Object.keys(Y).forEach((e=>{Ct[e]={hasBeenTriggered:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0}})),At=Me().timeline({scrollTrigger:{id:"povScroll",trigger:A.povSection,start:"top bottom",end:"bottom top",markers:!0,scrub:c,toggleActions:"play none none reverse",onEnter:()=>{Qe(),Ue(!0)},onEnterBack:()=>{Qe(),Ue(!0)}}}).to({progress:0},{progress:1,immediateRender:!1,onStart:It,onUpdate:function(){xt.call(this)},onReverseComplete:()=>{_t(),qt()},onComplete:()=>{_t(),qt()}})}function It(){const e=be();if(Ot.camera&&e.camera){const t=e.camera.getTangentAt(0);t&&Ot.camera.reset(t)}Object.entries(ge).forEach((([t,r])=>{if(e[t]&&"pacman"!==t){const o=e[t].getPointAt(0);r.position.copy(o);const n=e[t].getTangentAt(0).normalize();r.lookAt(o.clone().add(n)),r.visible=!1,Ge(r,t,"pov")}})),ge.pacman&&(ge.pacman.visible=!1)}function xt(){const e=this.targets()[0].progress,r=be();if(!r.camera)return;const o=r.camera.getPointAt(e);Pt?(function(e,r,o){const n=wt().getById("introScroll");if(n&&n.isActive)return;K.position.copy(o),K.fov=80;const s=function(e,r){const o=Z.camera;if(e<=i){const t=o[0];if("lookAtSequence"in t&&t.lookAtSequence?.length){const r=e/i,o=t.lookAtSequence.length,n=1/o,s=Math.floor(r/n),a=r%n/n,c=Math.min(s,o-1),p=Math.min(s+1,o-1);if(c===p)return t.lookAtSequence[c];{const e=t.lookAtSequence[c],r=t.lookAtSequence[p];return e.clone().lerp(r,a)}}}else if(e<=.07){const n=o[0];if("lookAtSequence"in n&&n.lookAtSequence?.length){const o=n.lookAtSequence[n.lookAtSequence.length-1],s=r.camera.getPointAt(e),a=r.camera.getTangentAt(e).normalize(),c=new t.Vector3(a.x,0,a.z).normalize(),p=s.clone().add(c),l=(e-i)/.020000000000000004;return o.clone().lerp(p,l)}}return null}(e,r);if(s)return K.lookAt(s),void K.updateProjectionMatrix();const a=r.camera.getTangentAt(e).normalize();let c=a;Ot.camera&&e>0&&(c=Ot.camera.update(a)),e<=.15&&(c=new t.Vector3(c.x,0,c.z).normalize());(function(e,t){const r=be(),o=Bt(r.camera,Mt),n=Bt(r.camera,Et);(e<o||e>n)&&!St&&(kt=null,bt=!1,St=!1),bt||St||K.lookAt(t)})(e,o.clone().add(c)),K.updateProjectionMatrix()}(e,r,o),function(e,t,r){Object.entries(Y).forEach((([o,n])=>{const s=ge[o],c=r[o];if(!s||!c||"pacman"===o)return;const i=t>n.forceEndProgress.start&&t<n.forceEndProgress.end;!function(e,t,r,o,n,s){const{triggerPos:c,ghostStartFadeIn:i,ghostEndFadeIn:l,ghostStartFadeOut:h,camStartFadeIn:y,camEndFadeIn:g,camStartFadeOut:m,endPosition:d}=n,f=Ct[e],w=parseInt(e.replace("ghost",""))-1;let v=vt[w];if(!v){const e=document.querySelectorAll(".cmp--pov.cmp")[w];v={parent:e||null,povElements:e?e.querySelectorAll(".pov"):document.querySelectorAll(".nonexistent"),camElements:e?e.querySelectorAll(".cam"):document.querySelectorAll(".nonexistent")},vt[w]=v}const{parent:A,povElements:P,camElements:b}=v;if(!A||!P.length||!b.length)return;const S=be();null===f.triggerCameraProgress&&(f.triggerCameraProgress=Bt(S.camera,c,a),f.ghostStartFadeInProgress=Bt(S.camera,i,a),f.ghostEndFadeInProgress=Bt(S.camera,l,a),f.ghostStartFadeOutProgress=Bt(S.camera,h,a),f.camStartFadeInProgress=Bt(S.camera,y,a),f.camEndFadeInProgress=Bt(S.camera,g,a),f.camStartFadeOutProgress=Bt(S.camera,m,a),f.endCameraProgress=Bt(S.camera,d,a));const M=Bt(S.camera,o,a);if(M>=f.triggerCameraProgress&&M<=f.endCameraProgress){if(!t.visible&&(t.visible=!0,f.hasBeenTriggered=!0,Ot[e])){const t=r.getTangentAt(0);t&&Ot[e].reset(t)}let o=u((M-f.triggerCameraProgress)/(f.endCameraProgress-f.triggerCameraProgress));void 0===f.currentPathT?f.currentPathT=o:f.currentPathT+=.1*(o-f.currentPathT),o=f.currentPathT;const n=r.getPointAt(o);if(t.position.copy(n),Ot[e]&&o>0){const n=r.getTangentAt(o);n&&n.length()>0&&Fe(t,Ot[e].update(n),"ghost")}_e(t,o>.9?1-(o-.9)/.1:1,{preserveTransmission:!0,skipCurrencySymbols:!0})}else t.visible=!1,f.hasBeenTriggered=!1;!function(e,t,r,o,n,s,a=!1){if(a)return o.style.opacity="0",o.classList.add("no-visibility"),Tt(n),void Tt(s);const{targetGhostOpacity:c,targetCamOpacity:i}=function(e,t){let r=0,o=0;if(e>=t.ghostStartFadeInProgress&&e<=t.ghostEndFadeInProgress){const o=(e-t.ghostStartFadeInProgress)/(t.ghostEndFadeInProgress-t.ghostStartFadeInProgress);r=Math.min(1,o)}else if(e>t.ghostEndFadeInProgress&&e<t.ghostStartFadeOutProgress)r=1;else if(e>=t.ghostStartFadeOutProgress&&e<=t.camStartFadeInProgress){const o=(e-t.ghostStartFadeOutProgress)/(t.camStartFadeInProgress-t.ghostStartFadeOutProgress);r=Math.max(0,1-o)}if(e>=t.camStartFadeInProgress&&e<=t.camEndFadeInProgress){const r=(e-t.camStartFadeInProgress)/(t.camEndFadeInProgress-t.camStartFadeInProgress);o=Math.min(1,r)}else if(e>t.camEndFadeInProgress&&e<t.camStartFadeOutProgress)o=1;else if(e>=t.camStartFadeOutProgress&&e<=t.endCameraProgress){const r=(e-t.camStartFadeOutProgress)/(t.endCameraProgress-t.camStartFadeOutProgress);o=Math.max(0,1-r)}return{targetGhostOpacity:r,targetCamOpacity:o}}(t,r);t>=r.camStartFadeOutProgress?o.style.opacity=i.toString():t>=r.ghostStartFadeInProgress&&t<=r.ghostEndFadeInProgress&&(o.style.opacity=c.toString());const l=i>p&&c>p,u=o.classList.contains("no-visibility");l&&!u?o.classList.add("no-visibility"):!l&&u&&o.classList.remove("no-visibility"),c>p?Vt(n,c):Tt(n),i>p?Vt(s,i):Tt(s)}(0,M,f,A,P,b,s)}(o,s,c,e,n,i)}))}(o,e,r),Pt.copy(o)):Pt=o.clone()}function Vt(e,t){e.forEach((e=>{const r=e;t>p?(r.classList.remove("no-visibility"),r.style.opacity=t.toString()):t<=p&&!r.classList.contains("no-visibility")&&(r.classList.add("no-visibility"),r.style.opacity="0")}))}function zt(){Object.keys(Ot).forEach((e=>{if(Ot[e]){const r="camera"===e?new t.Vector3(0,0,-1):new t.Vector3(1,0,0);Ot[e].reset(r)}}))}function Tt(e){e.forEach((e=>{const t=e;t.classList.add("no-visibility"),t.style.opacity="0"}))}function _t(){Object.entries(ge).forEach((([e,t])=>{if("pacman"!==e){t.visible=!1;const r=parseInt(e.replace("ghost",""))-1,o=vt[r];o?.parent&&(Tt(o.povElements),Tt(o.camElements),o.parent.classList.add("no-visibility")),_e(t,1,{preserveTransmission:!0,skipCurrencySymbols:!0})}})),ge.pacman&&(ge.pacman.visible=!0),zt()}function qt(){ge.pacman&&(ge.pacman.visible=!0),bt=!1,kt=null,St=!1,Object.keys(Ct).forEach((e=>{Ct[e]={hasBeenTriggered:!1,triggerCameraProgress:null,ghostStartFadeInProgress:null,ghostEndFadeInProgress:null,ghostStartFadeOutProgress:null,camStartFadeInProgress:null,camEndFadeInProgress:null,camStartFadeOutProgress:null,endCameraProgress:null,currentPathT:0}})),zt()}function Bt(e,t,r=800){if(!e||!t)return 0;let o=0,n=1/0;for(let s=0;s<r;s++)try{const a=s/(r-1),c=e.getPointAt(a);if(!c)continue;const i=c.distanceTo(t);i<n&&(n=i,o=a)}catch(e){}return o}let jt=null,Lt=!1,Gt=0,Rt=!1;function Wt(){!function(){const e=Me().getById("homeScroll");if(e){const t=e.timeline;t?.pause&&t.pause()}const t=wt().getById("povScroll");if(t){const e=t.timeline;e?.pause&&e.pause()}}(),function(){if(!We||!De){const e=ge.pacman;if(e){He.pacman||(He.pacman=e.quaternion.clone());let t=He.pacman.clone();ze(e,t,1),t=e.quaternion.clone(),t=Te(t,[{axis:"x",angle:Math.PI/2},{axis:"y",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"y",angle:Math.PI}]),We=t,e.quaternion.copy(He.pacman)}const t=ge.ghost1;if(t){He.ghost1||(He.ghost1=t.quaternion.clone());let e=He.ghost1.clone();ze(t,e,1),e=t.quaternion.clone(),e=Te(e,[{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"y",angle:Math.PI},{axis:"x",angle:Math.PI},{axis:"x",angle:Math.PI}]),De=e,t.quaternion.copy(He.ghost1)}Ee.forEach((e=>{const t=ge[e];t&&!He[e]&&(He[e]=t.quaternion.clone())}))}const e=K.position.x+-5,r=new t.Vector3(e+4.3,K.position.y+-2,K.position.z+0);Ee.forEach(((e,o)=>{const n=ge[e];if(!n)return;Re(n);const s=0===o?0:-.5*o,a=new t.Vector3(r.x+s,r.y,r.z);Me().set(n.position,{x:a.x,y:a.y,z:a.z}),"pacman"===e&&We?n.quaternion.copy(We):De&&n.quaternion.copy(De),Ge(n,e,"intro"),Me().set(n,{visible:!0}),je(n,((t,r,o)=>{Ce(o)||"pacman"===e&&Oe(o)?r.visible=!1:(r.visible=!0,qe(t,1,!0))}),{skipCurrencySymbols:!1,skipPacmanParts:!1,objectKey:e}),n.updateMatrixWorld(!0)})),Le(!0,0,!0)}(Qe()),Rt=!1;const e=wt().getById("introScroll"),r=e&&"number"==typeof e.progress?e.progress:0;Gt=r,Ht(r)}function Dt(){Le(!0,1,!1)}function Ht(e){if(Lt&&!Rt){Rt=!0;try{he&&he.update(te.getDelta()),Le(!0,0,!0);const r=new t.Vector3(K.position.x,K.position.y,K.position.z),o=r.x-10,n=r.x+10,s=[{key:"pacman",behindOffset:1.5,zOffset:.5,xOffset:0,yOffset:0,zPhase:0},{key:"ghost1",behindOffset:0,zOffset:.5,xOffset:.5,yOffset:-.5,zPhase:1*Math.PI},{key:"ghost2",behindOffset:-.005,zOffset:.5,xOffset:0,yOffset:-1,zPhase:1.5*Math.PI},{key:"ghost3",behindOffset:-.01,zOffset:.5,xOffset:.5,yOffset:.5,zPhase:1*Math.PI},{key:"ghost4",behindOffset:-.015,zOffset:.5,xOffset:.75,yOffset:.25,zPhase:1*Math.PI},{key:"ghost5",behindOffset:-.02,zOffset:.5,xOffset:1,yOffset:0,zPhase:1*Math.PI}],a=u(e),c=o+(n-o)*a+4.3,i=r.y+-2,p=r.z+0,l=a<.2?a/.2:1;s.forEach((({key:e,behindOffset:t,zOffset:r,xOffset:o,yOffset:n,zPhase:s})=>{const u=ge[e];if(!u)return void("ghost5"===e&&console.warn("ghost5 object is missing!"));Re(u);const h="pacman"===e?0:.01*Math.sin(a*Math.PI*2*20+s),y=c+t+(o||0),g=i+(n||0)-("pacman"===e?0:1.5*h),m=p+r-h;u.position.set(y,g,m),"ghost5"===e&&(isNaN(y)||isNaN(g)||isNaN(m))&&console.warn("ghost5 has NaN position:",{finalX:y,finalY:g,finalZ:m,pacmanX:c,pacmanY:i,pacmanZ:p,behindOffset:t,xOffset:o,staticYOffset:n,zOffset:r,zBounce:h});const d=We,f=De;"pacman"===e&&d?u.quaternion.copy(d):f&&u.quaternion.copy(f),u.visible=!0,Ge(u,e,"intro");let w="pacman"===e?1:l;"ghost5"===e&&(w=Math.max(w,.3));let v=!1,A=0,P=0;const b=[];if(je(u,((t,r,o)=>{if(A++,b.push(r),Ce(o)||"pacman"===e&&Oe(o))return r.visible=!1,void(Ce(o)&&P++);r.visible=!0,v=!0,qe(t,w,!0)}),{skipCurrencySymbols:!1,skipPacmanParts:!1,objectKey:e}),"ghost5"===e){if(!v&&(console.warn("ghost5 has no visible meshes! Total meshes:",A,"Currency meshes:",P,"targetOpacity:",w,"ghostOpacity:",l,"normalizedProgress:",a),console.warn("ghost5 mesh names:",b.map((e=>e.name||"unnamed"))),A>0&&A===P)){console.warn("ghost5: All meshes are currency symbols! Making first non-currency mesh visible.");const e=b.find((e=>!Ce(e.name||"")));if(e){e.visible=!0,v=!0;const t=e.material;t&&qe(Array.isArray(t)?t[0]:t,w,!0)}else if(console.error("ghost5: No non-currency mesh found! Making first mesh visible as fallback."),b.length>0){b[0].visible=!0,v=!0;const e=b[0].material;e&&qe(Array.isArray(e)?e[0]:e,w,!0)}}0===A&&console.warn("ghost5 has no meshes at all!"),w<=0&&console.warn("ghost5 targetOpacity is 0 or negative:",w)}u.updateMatrixWorld(!0)}))}finally{Rt=!1}}}let Ut=null;!async function(){r?ee.setPixelRatio(Math.min(window.devicePixelRatio,2)):ee.setPixelRatio(window.devicePixelRatio),ee.shadowMap.enabled=!0,ee.shadowMap.type=t.PCFSoftShadowMap,A.mazeContainer?(ee.setSize(A.mazeContainer.clientWidth,A.mazeContainer.clientHeight),A.mazeContainer.appendChild(ee.domElement)):(ee.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(ee.domElement)),oe(),window.addEventListener("resize",oe),ee.render(J,K),function(){const e=new t.AmbientLight(16777215);J.add(e);const r=new t.DirectionalLight(16777215,.8);J.add(r),r.position.set(-5,15,10),r.shadow.mapSize.width=4096,r.shadow.mapSize.height=4096,r.shadow.camera.left=-20,r.shadow.camera.right=20,r.shadow.camera.top=20,r.shadow.camera.bottom=-20,r.shadow.camera.near=.1,r.shadow.camera.far=50,r.shadow.bias=-.001,r.shadow.radius=3,r.castShadow=!0}(),function(){const e=N(),t=Q();K.position.set(e.x,e.y,e.z),K.lookAt(t.x,t.y,t.z)}(),function(){const e=(new t.BufferGeometry).setFromPoints([new t.Vector3(-5,-.55,0),new t.Vector3(5,-.55,0)]),r=new t.LineBasicMaterial({color:16711680,linewidth:3}),o=new t.Line(e,r);o.renderOrder=999,J.add(o);const n=(new t.BufferGeometry).setFromPoints([new t.Vector3(-5,-.55,.75),new t.Vector3(5,-.55,.75)]),s=new t.LineBasicMaterial({color:65280,linewidth:3}),a=new t.Line(n,s);a.renderOrder=999,J.add(a)}(),await async function(e){return Object.values(ge).forEach((t=>e.add(t))),e.add(ye),new Promise(((r,o)=>{ue.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(o){const n=o.scene;n.traverse((r=>{if("CAM-Pacman"===r.name){const e=[];r.traverse((t=>{if(t.isMesh&&"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name&&"CAM-Pacman_Bitcoin_1"!==t.name&&"CAM-Pacman_Bitcoin_2"!==t.name){const r=le[t.name]||le.default;t.material=r,e.push(t)}else"CAM-Pacman_Shell"!==t.name&&"CAM-Pacman_Shell_Boolean"!==t.name&&"CAM-Pacman_Bitcoin_1"!==t.name&&"CAM-Pacman_Bitcoin_2"!==t.name||(t.visible=!1)})),e.forEach((e=>ge.pacman.add(e))),ge.pacman.scale.set(.05,.05,.05),ge.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),he=new t.AnimationMixer(ge.pacman);const n={};o.animations.forEach((e=>{const t=he.clipAction(e);t.getMixer().addEventListener("loop",(function(e){e.action.getRoot().traverse((function(e){e.userData&&e.userData.skipAnimation&&(e.updateMorphTargets=function(){})}))})),n[e.name]=t,t.setEffectiveWeight(0),t.play()})),Object.values(n).forEach((e=>{e.setEffectiveWeight(1)}))}else if(r.name&&me[r.name]){const e=me[r.name],o=new t.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const n=[];r.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=ce:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),n.push(e))})),n.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),e&&e.add(o)}if(r.isMesh)if("CAM-Arena_LowRes_Top"===r.name)r.material=ae,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===r.name)r.material=se,r.castShadow=!0;else if("CAM-Floor"===r.name){const o=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new t.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:t.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),o.material=ie,o.position.y=-.5,o.receiveShadow=!0,e.add(o)}else r.visible=!1})),n.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.add(n),n.position.set(.5,.5,.5),r()}),void 0,(function(e){o(e)}))}))}(J),Object.entries(ge).forEach((([e,t])=>{const r=Be(t);Ze[e]={position:t.position.clone(),rotation:t.quaternion.clone(),scale:t.scale.clone(),visible:t.visible,opacity:r}})),window.addEventListener("scroll",(()=>{0===window.scrollY?pt||dt():pt&&pt&&(pt=!1,tt(!1),gt=!0,Je=lt%50/50,Object.entries(ge).forEach((([e,t])=>{ot(e,t.position.clone(),!0,!0),nt(e,t.quaternion.clone(),!0)})),it())})),0===window.scrollY&&dt(),Ft(),jt&&(jt.kill(),jt=null),jt=Me().timeline({scrollTrigger:{trigger:n,start:"top top",end:"bottom bottom",scrub:c,refreshPriority:1,onEnter:()=>{Lt=!0,Wt()},onEnterBack:()=>{Lt=!0,Wt()},onLeave:()=>{Lt=!1,Dt()},onLeaveBack:()=>{Lt=!1,Dt()},onUpdate:e=>{Lt&&"number"==typeof e.progress&&!Rt&&(Gt=e.progress,Ht(e.progress))},id:"introScroll"}}).fromTo(".sc_h--intro",{scale:l,opacity:0},{keyframes:[{scale:l,opacity:0,duration:0},{scale:.8,opacity:1,duration:.3},{scale:1.2,opacity:1,duration:.4},{scale:1.5,opacity:0,duration:.3}]}).fromTo(".sc_b--intro",{scale:l,opacity:0},{keyframes:[{scale:l,opacity:0,duration:0},{scale:.8,opacity:1,duration:.3},{scale:1.2,opacity:1,duration:.4},{scale:1.5,opacity:0,duration:.3}]}).to({progress:0},{progress:1,duration:1,immediateRender:!1,onComplete:()=>{Lt&&Ht(Gt)},onReverseComplete:()=>{Lt&&Ht(Gt)}},0),Ut=Me().timeline({scrollTrigger:{trigger:s,start:"top center",end:"bottom bottom",scrub:c,onEnter:()=>{Qe(),Ye(!0)},onEnterBack:()=>{Qe(),Ye(!0)}}}).fromTo(".sc_b--outro",{scale:l,opacity:0},{keyframes:[{scale:l,opacity:0,duration:0},{scale:.8,opacity:1,duration:.3},{scale:1.2,opacity:1,duration:.4},{scale:1.5,opacity:0,duration:.3}]}),function(){const e=document.querySelector(".wr_p--skip.wr_p");if(e){const t=document.querySelector(".sc--testimonials");t&&e.addEventListener("click",(()=>{t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}))}}(),function(){const e=()=>{re.forEach((e=>e())),ee.render(J,K),requestAnimationFrame(e)};e()}()}()})();
//# sourceMappingURL=script.js.map