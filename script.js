(()=>{"use strict";const e=THREE,r=window.innerWidth<768,t=new e.Vector3(.45175,.5,.55675),o=(new e.Vector3(.65725,.55,.75325),new e.Vector3(.9085,.55,.8035),new e.Vector3(.75775,.55,1.05475),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.15475,.55,1.15525),{startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)}),c=r?o.startMobile:o.startDesktop,p=r?o.secondMobile:o.secondDesktop,n=r?o.mobileLookAt:o.desktopLookAt,s={mazeContainer:document.querySelector(".el--home-maze.el"),canvas:document.querySelector("canvas"),finalSection:document.querySelector(".sc--final.sc"),finalContainer:document.querySelector(".cr--final.cr"),parentElements:document.querySelectorAll(".cmp--pov.cmp")},i=new e.Scene,a=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"});function u(){const e=Math.min(window.devicePixelRatio,r?2:3);a.setPixelRatio(e),s.mazeContainer?a.setSize(s.mazeContainer.clientWidth,s.mazeContainer.clientHeight):a.setSize(window.innerWidth,window.innerHeight)}new e.Clock;const y=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3);function w(){y.position.copy(c),y.lookAt(n)}y.quaternion.clone();const v=(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0)),h=(new e.TextureLoader).load("https://c-am.b-cdn.net/CAM/matcap24.png"),l=new e.MeshMatcapMaterial({matcap:h}),V=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),A=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),m=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),T={blue:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new e.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},g={CAM_Pacman_Backframe:T.blue,"CAM-Pacman_Bitcoin_1":T.white,"CAM-Pacman_Bitcoin_2":T.white,"CAM-Pacman_Bottom":T.blue,"CAM-Pacman_Top":T.blue,"CAM-Pacman_Eye":T.white,CAM_Pacman_Logo_1:T.white,CAM_Pacman_Logo_2:T.white,"CAM-Pacman_Shell_Boolean":T.blue,"CAM-Pacman_Shell":T.blue,"CAM-Pacman_Bottom_electronic":T.white,"CAM-Pacman_Top_electronic":T.white,"CAM-Pacman_Bottom_Text":T.white,"CAM-Pacman_Top_Text":T.white,default:T.blue},d=(Array(5).fill(A),new e.GLTFLoader);let M;const P=new e.Group;i.add(P);const f={pacman:P,ghost1:new e.Mesh(new e.BufferGeometry,A),ghost2:new e.Mesh(new e.BufferGeometry,A),ghost3:new e.Mesh(new e.BufferGeometry,A),ghost4:new e.Mesh(new e.BufferGeometry,A),ghost5:new e.Mesh(new e.BufferGeometry,A)},C={Ghost_EUR:f.ghost1,Ghost_CHF:f.ghost2,Ghost_YEN:f.ghost3,Ghost_USD:f.ghost4,Ghost_GBP:f.ghost5};Object.values(f).forEach((e=>i.add(e)));const S=[{pos:new e.Vector3(.25525,.55,.6025),type:"straight"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"straight"},{pos:new e.Vector3(.45625,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(-.04625,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.8035),type:"straight"},{pos:new e.Vector3(-.24725,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.24725,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,.6025),type:"straight"}],H=[{pos:new e.Vector3(-.44825,.55,.502),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.24725,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,.8035),type:"straight"},{pos:new e.Vector3(.95875,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.703),type:"straight"},{pos:new e.Vector3(1.46125,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.2005),type:"straight"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.8035),type:"straight"},{pos:new e.Vector3(-.34775,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.502),type:"straight"}],_=[{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.6025),type:"straight"},{pos:new e.Vector3(-.14675,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.4015),type:"straight"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.502),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-5e-4),type:"straight"},{pos:new e.Vector3(1.15975,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"straight"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.04625,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.0965,.55,1.0045),type:"curve",curveType:"lowerArc"}],z=[{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.703),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,-.2015),type:"straight"},{pos:new e.Vector3(.15475,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,-5e-4),type:"straight"},{pos:new e.Vector3(.35575,.55,-5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.2005),type:"straight"},{pos:new e.Vector3(1.36075,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.301),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"straight"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.105),type:"straight"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.004,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.04625,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.808,.55,.8035),type:"curve",curveType:"upperArc"}],b=[{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"},{pos:new e.Vector3(1.05925,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.8035),type:"straight"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.65725,.55,1.0045),type:"straight"},{pos:new e.Vector3(.25525,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.05425,.55,1.2055),type:"straight"},{pos:new e.Vector3(-.34775,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,.703),type:"straight"},{pos:new e.Vector3(-.44825,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.34775,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.15475,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,.2005),type:"straight"},{pos:new e.Vector3(.75775,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,5e-4),type:"straight"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,.1),type:"straight"},{pos:new e.Vector3(1.46125,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.26025,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.15975,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,.6025),type:"straight"},{pos:new e.Vector3(1.05925,.55,.4015),type:"straight"}],E=[{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.35575,.55,5e-4),type:"straight"},{pos:new e.Vector3(-.04625,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.14675,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,-.2015),type:"straight"},{pos:new e.Vector3(-.34775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.44825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.398,.55,5e-4),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.34775,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.24725,.55,.2005),type:"straight"},{pos:new e.Vector3(-.04625,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.05425,.55,.301),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.04625,.55,.4015),type:"straight"},{pos:new e.Vector3(-.14675,.55,.4015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(-.24725,.55,.502),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.14675,.55,.6025),type:"straight"},{pos:new e.Vector3(.15475,.55,.6025),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.25525,.55,.703),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.3055,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.35575,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.45625,.55,1.0045),type:"straight"},{pos:new e.Vector3(.65725,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.85825,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.904),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,1.105),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.36075,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.46125,.55,1.105),type:"straight"},{pos:new e.Vector3(1.46125,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.36075,.55,-.2015),type:"straight"},{pos:new e.Vector3(1.15975,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(1.05925,.55,-.101),type:"straight"},{pos:new e.Vector3(1.05925,.55,.1),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.95875,.55,.2005),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.85825,.55,.1),type:"straight"},{pos:new e.Vector3(.85825,.55,-.101),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.75775,.55,-.2015),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,-.15125),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.55675,.55,-.101),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.45625,.55,-.04975),type:"curve",curveType:"lowerArc"}],O=[{pos:new e.Vector3(.55675,-.5,.45175),type:"curve",curveType:"forwardDownArc"},{pos:new e.Vector3(.55675,.55,.6025),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.607,.55,.703),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.65725,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,.85375),type:"straight"},{pos:new e.Vector3(.95875,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.9085,.55,1.2055),type:"straight"},{pos:new e.Vector3(.808,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.75775,.55,1.15525),type:"straight"},{pos:new e.Vector3(.75775,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.7075,.55,1.0045),type:"straight"},{pos:new e.Vector3(.205,.55,1.0045),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.15475,.55,1.05475),type:"straight"},{pos:new e.Vector3(.15475,.55,1.15525),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.2055),type:"straight"},{pos:new e.Vector3(.5065,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.55675,.55,1.306),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(-.44825,1,2.0095),type:"straight"}],R=[{pos:new e.Vector3(1.05925,.55,.703),type:"straight"},{pos:new e.Vector3(1.05925,.55,.75325),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(1.009,.55,.8035),type:"straight"},{pos:new e.Vector3(.9085,.55,.8035),type:"straight"}],x=[{pos:new e.Vector3(1.05925,.55,1.2055),type:"straight"},{pos:new e.Vector3(1.009,.55,1.2055),type:"curve",curveType:"lowerArc"},{pos:new e.Vector3(.95875,.55,1.15525),type:"straight"},{pos:new e.Vector3(.95875,.55,1.05475),type:"straight"}],B=[{pos:new e.Vector3(.35575,.55,.904),type:"straight"},{pos:new e.Vector3(.35575,.55,.95425),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.406,.55,1.0045),type:"straight"},{pos:new e.Vector3(.5065,.55,1.0045),type:"straight"}],L=[{pos:new e.Vector3(.15475,.55,1.105),type:"straight"},{pos:new e.Vector3(.15475,.55,1.05475),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.205,.55,1.0045),type:"straight"},{pos:new e.Vector3(.3055,.55,1.0045),type:"straight"}],I=[{pos:new e.Vector3(.55675,.55,1.306),type:"straight"},{pos:new e.Vector3(.55675,.55,1.25575),type:"curve",curveType:"upperArc"},{pos:new e.Vector3(.5065,.55,1.2055),type:"straight"},{pos:new e.Vector3(.406,.55,1.2055),type:"straight"}],G=(new e.CubicBezierCurve3(c,p,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175)),{pacmanHome:D(S),ghost1Home:D(H),ghost2Home:D(_),ghost3Home:D(z),ghost4Home:D(b),ghost5Home:D(E),cameraPOV:D(O),ghost1POV:D(R),ghost2POV:D(x),ghost3POV:D(B),ghost4POV:D(L),ghost5POV:D(I)});function D(r){const t=new e.CurvePath;for(let o=0;o<r.length-1;o++){const c=r[o],p=r[o+1];if("straight"===c.type){const r=new e.LineCurve3(c.pos,p.pos);t.add(r)}else if("curve"===c.type){let r;r="upperArc"===c.curveType?new e.Vector3(c.pos.x,c.pos.y,p.pos.z):"lowerArc"===c.curveType?new e.Vector3(p.pos.x,c.pos.y,c.pos.z):"forwardDownArc"===c.curveType?new e.Vector3(c.pos.x,p.pos.y,c.pos.z):new e.Vector3(c.pos.x,c.pos.y,p.pos.z);const o=new e.QuadraticBezierCurve3(c.pos,r,p.pos);t.add(o)}}return t}const N={ghost1:1.25,ghost2:1.14,ghost3:1.05,ghost4:.97,ghost5:.89,pacman:.8},k=window.innerWidth<768,q=k?new e.Vector3(.5,2.5,2.5):new e.Vector3(-2,2.5,2),W=k?new e.Vector3(.5,2.5,2):new e.Vector3(-1.5,3,2),j=new e.CubicBezierCurve3(q,W,new e.Vector3(.55675,3,.45175),new e.Vector3(.55675,.5,.45175));let F=y.position.clone(),Q=y.quaternion.clone(),U=null,Z=null;const Y=new class{constructor(){this.state="IDLE",this.animationTime=0,this.animationDuration=33,this.animationRunning=!0,this.timeOffset=0,this.bezierCurves={},this.capturedPositions={},this.capturedRotations={},this.scrollProgress=0,this.savedHomeProgress=0,this.originalHomePositions={},this.originalHomeRotations={},this.originalHomeScales={},this.homePositionsCaptured=!1,console.log("AnimationSystem: Initializing..."),console.log("AnimationSystem: MAZE_CENTER:",t),this.captureOriginalHomePositions()}captureOriginalHomePositions(){this.homePositionsCaptured||(Object.entries(f).forEach((([e,r])=>{this.originalHomePositions[e]=r.position.clone(),this.originalHomeRotations[e]=r.rotation.clone(),this.originalHomeScales[e]=r.scale.clone()})),this.homePositionsCaptured=!0,console.log("AnimationSystem: Original home positions captured"))}startHomeAnimation(){this.state="HOME_ANIMATION",this.animationTime=0,this.animationRunning=!0,this.timeOffset=Date.now(),F=y.position.clone(),Q=y.quaternion.clone()}pauseHomeAnimation(){const e=(Date.now()-this.timeOffset)/1e3;this.savedHomeProgress=e/this.animationDuration%1,this.animationRunning=!1,console.log("AnimationSystem: Home animation paused at progress:",this.savedHomeProgress)}resumeHomeAnimation(){this.state="HOME_ANIMATION",this.animationRunning=!0,this.timeOffset=Date.now()-this.savedHomeProgress*this.animationDuration*1e3,console.log("AnimationSystem: Home animation resumed from progress:",this.savedHomeProgress)}captureGhostPositions(){Object.entries(f).forEach((([e,r])=>{this.capturedPositions[e]=r.position.clone(),this.capturedRotations[e]=r.rotation.clone()})),console.log("AnimationSystem: Ghost positions captured for scroll animation")}createBezierCurves(){this.bezierCurves={},Object.entries(this.capturedPositions).forEach((([r,o])=>{const c=t.clone(),p=new e.Vector3((o.x+c.x)/2,2,(o.z+c.z)/2);this.bezierCurves[r]=new e.QuadraticBezierCurve3(o,p,c)})),console.log("AnimationSystem: Bezier curves created")}startScrollToCenter(){"SCROLL_TO_CENTER"!==this.state&&(this.pauseHomeAnimation(),this.captureGhostPositions(),this.createBezierCurves(),U=new e.CubicBezierCurve3(y.position.clone(),new e.Vector3((y.position.x+t.x)/2,2,(y.position.z+t.z)/2),new e.Vector3(.55675,3,.45175),t.clone()),Z=y.quaternion.clone(),this.state="SCROLL_TO_CENTER",console.log("AnimationSystem: Started scroll-to-center animation"))}setScrollProgress(e){this.scrollProgress=Math.max(0,Math.min(1,e))}update(){if("HOME_ANIMATION"===this.state&&this.animationRunning){const e=(Date.now()-this.timeOffset)/1e3;let r=(this.savedHomeProgress+.03*e)%1,t=r;if(r>.95){const e=(r-.95)/.05;t=(1-e)*r+0*e}this.animateHomePaths(t)}else"SCROLL_TO_CENTER"===this.state&&(this.animateScrollToCenter(this.scrollProgress),this.animateCameraScrollToCenter(this.scrollProgress))}animateHomePaths(e){const r="home"=="home"?{pacman:G.pacmanHome,ghost1:G.ghost1Home,ghost2:G.ghost2Home,ghost3:G.ghost3Home,ghost4:G.ghost4Home,ghost5:G.ghost5Home}:{};P.visible||(P.visible=!0),Object.entries(f).forEach((([t,o])=>{const c=r[t];if(c){const r=c.getPointAt(e);o.position.copy(r);const p=c.getTangentAt(e).normalize();if(o.lookAt(r.clone().add(p)),"pacman"===t){const e=Math.atan2(p.x,p.z);void 0===o.previousZRotation&&(o.previousZRotation=e);let r=e-o.previousZRotation;r>Math.PI?r-=2*Math.PI:r<-Math.PI&&(r+=2*Math.PI);const t=.1,c=o.previousZRotation+r*t;o.previousZRotation=c,o.rotation.set(Math.PI/2,Math.PI,c+Math.PI/2)}this.setGhostOpacity(o,1)}}))}animateCameraHome(r){const t=j.getPointAt(r);if(y.position.copy(t),y.fov=50,y.updateProjectionMatrix(),0===r)y.quaternion.copy(Q);else{const t=new e.Quaternion;t.slerpQuaternions(Q,v,r),y.quaternion.copy(t)}}animateScrollToCenter(r){Object.entries(f).forEach((([t,o])=>{const c=N[t]||1;let p=Math.min(r*c/.8,1);p="pacman"!==t?Math.max(0,Math.min(1,(r-.15*(parseInt(t.replace("ghost",""))-1))*c/.8)):Math.max(0,Math.min(1,(r-.3)*c/.8));const n=this.bezierCurves[t];if(!n)return;const s=n.getPoint(p);o.position.copy(s);const i=this.capturedRotations[t],a=new e.Euler(Math.PI/-2,0,0),u=new e.Euler(i.x+(a.x-i.x)*p,i.y+(a.y-i.y)*p,i.z+(a.z-i.z)*p);o.rotation.copy(u);let y=1;p>=.9&&(y=1-(p-.9)/(1-.9),y=Math.max(0,y)),this.setGhostOpacity(o,y)}))}animateCameraScrollToCenter(r){if(!U||!Z)return;const t=U.getPoint(Math.min(r,1));y.position.copy(t),y.fov=50,y.updateProjectionMatrix();const o=new e.Quaternion;o.slerpQuaternions(Z,v,Math.min(r,1)),y.quaternion.copy(o)}setGhostOpacity(r,t){r instanceof e.Mesh&&r.material&&"opacity"in r.material?r.material.opacity=t:r instanceof e.Group&&r.traverse((r=>{r instanceof e.Mesh&&r.material&&"opacity"in r.material&&(r.material.opacity=t)}))}resetToHome(e=!1){this.state="HOME_ANIMATION",this.animationRunning=!0,this.timeOffset=Date.now(),e?(this.savedHomeProgress=0,y.position.copy(F),y.quaternion.copy(Q),Object.entries(this.originalHomePositions).forEach((([e,r])=>{const t=f[e],o=this.originalHomeRotations[e],c=this.originalHomeScales[e];t&&r&&o&&c&&(t.position.copy(r),t.rotation.copy(o),t.scale.copy(c),t.visible=!0,this.setGhostOpacity(t,1))})),console.log("AnimationSystem: Full reset to initial state")):console.log("AnimationSystem: Resuming from saved progress:",this.savedHomeProgress),U=null,Z=null,y.fov=50,y.updateProjectionMatrix()}getState(){return this.state}getHomeProgress(){return this.savedHomeProgress}render(){a.render(i,y)}};function J(){requestAnimationFrame(J),Y.update(),Y.render()}!async function(){try{r?a.setPixelRatio(Math.min(window.devicePixelRatio,2)):a.setPixelRatio(window.devicePixelRatio),a.shadowMap.enabled=!0,a.shadowMap.type=e.PCFSoftShadowMap,a.shadowMap.enabled=!0,a.shadowMap.type=e.PCFSoftShadowMap,s.mazeContainer?(console.log("Found maze container, using it for renderer"),a.setSize(s.mazeContainer.clientWidth,s.mazeContainer.clientHeight),s.mazeContainer.appendChild(a.domElement)):(console.log("Maze container not found, using body for renderer"),a.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(a.domElement)),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",u):u(),window.addEventListener("resize",u),function(){const r=new e.AmbientLight(16777215);i.add(r);const t=new e.DirectionalLight(16777215,.8);i.add(t),t.position.set(-5,15,10),t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,t.shadow.camera.left=-20,t.shadow.camera.right=20,t.shadow.camera.top=20,t.shadow.camera.bottom=-20,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.001,t.shadow.radius=3,t.castShadow=!0}(),w(),window.addEventListener("resize",(()=>{y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix()})),await async function(){return new Promise(((r,t)=>{d.load("https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",(function(t){const o=t.scene;o.traverse((r=>{if("CAM-Pacman"===r.name){const o=[];r.traverse((e=>{if(e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name){const r=g[e.name]||g.default;e.material=r,o.push(e)}else"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1)})),o.forEach((e=>f.pacman.add(e))),f.pacman.scale.set(.05,.05,.05),f.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),M=new e.AnimationMixer(f.pacman);const c={};t.animations.forEach((e=>{const r=M.clipAction(e);c[e.name]=r,r.setEffectiveWeight(1),r.play()}))}else if(r.name&&C[r.name]){const t=C[r.name],o=new e.Group;r.rotation.z=Math.PI,r.rotation.x=Math.PI/2,r.scale.set(.75,.75,.75);const c=[];r.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=A:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),c.push(e))})),c.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),o.add(e)})),t.add(o)}if(r.isMesh)if("CAM-Arena_LowRes_Top"===r.name)r.material=V,r.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===r.name)r.material=l,r.castShadow=!0;else if("CAM-Floor"===r.name){const t=r.clone();r.position.y=-.1,r.position.x=0,r.position.z=0,r.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),r.receiveShadow=!1,r.castShadow=!0,r.scale.set(.5,.5,.5),t.material=m,t.position.y=-.5,t.receiveShadow=!0,i.add(t)}})),o.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),i.add(o),o.position.set(.5,.5,.5),r()}),(function(e){}),(function(e){t(e)}))}))}(),console.log("AnimationSystem: Initializing animation system..."),w(),console.log("AnimationSystem: Starting animation loop..."),J(),setTimeout((()=>{console.log("AnimationSystem: Auto-starting home animation..."),Y.startHomeAnimation()}),1e3),gsap.registerPlugin(ScrollTrigger),ScrollTrigger.create({trigger:".sc--home",start:"top top",end:"bottom top",scrub:.5,onUpdate:e=>{"SCROLL_TO_CENTER"!==Y.getState()&&Y.startScrollToCenter(),Y.setScrollProgress(e.progress)},onLeaveBack:()=>{const e=window.scrollY<=10;Y.resetToHome(e)}}),window.addEventListener("scroll",(()=>{window.scrollY<=10&&Y.resetToHome(!0)})),window.animationSystem=Y}catch(e){console.error("Initialization error:",e)}}()})();
//# sourceMappingURL=script.js.map