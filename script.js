(()=>{"use strict";const e=THREE,o=window.innerWidth<768,t={startMobile:new e.Vector3(.5,2.5,2.5),startDesktop:new e.Vector3(-2,2.5,2),secondMobile:new e.Vector3(.5,2.5,2),secondDesktop:new e.Vector3(-1.5,3,2),mobileLookAt:new e.Vector3(.5,.5,-1.5),desktopLookAt:new e.Vector3(-1.25,.5,.25)},a=o?t.startMobile:t.startDesktop,n=o?t.mobileLookAt:t.desktopLookAt,i=(new e.Vector3(.45175,.5,.55675),"https://c-am.b-cdn.net/CAM/matcap24.png"),s="https://c-am.b-cdn.net/CAM/c-am-assets-3.glb",r=(new e.Vector3(.65725,.55,.75325),new e.Vector3(.9085,.55,.8035),new e.Vector3(.75775,.55,1.05475),new e.Vector3(.65725,.55,1.0045),new e.Vector3(.15475,.55,1.15525),new e.Scene),c=new e.WebGLRenderer({antialias:!0,alpha:!0,powerPreference:"high-performance",precision:"highp"}),l=document.querySelector(".el--home-maze.el");l||console.error("Container .el--home-maze.el not found!");const d=new e.Clock;function h(){const e=Math.min(window.devicePixelRatio,o?2:3);c.setPixelRatio(e),c.setSize(l.clientWidth,l.clientHeight)}document.querySelector("canvas");const m=document.querySelector(".sc--final.sc"),w=(m?.querySelector(".cr--final.cr"),document.querySelectorAll(".cmp--pov.cmp"),new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.001,1e3));w.quaternion.clone(),(new e.Quaternion).setFromEuler(new e.Euler(-1.5708,0,0)),window.setCamera=function(o){if("string"==typeof o){const[t,a,n]=o.split(",").map(Number);o=new e.Vector3(t,a,n)}w.lookAt(o),w.updateProjectionMatrix(),w.updateMatrix(),w.updateMatrixWorld()};const p=(new e.TextureLoader).load(i),M=new e.MeshMatcapMaterial({matcap:p}),u=new e.MeshStandardMaterial({color:15923705,metalness:.4,roughness:0,envMapIntensity:10}),g=new e.MeshPhysicalMaterial({color:16777215,opacity:1,transparent:!0,depthWrite:!1,depthTest:!0,blending:e.NormalBlending,side:e.DoubleSide,roughness:.75,metalness:.2,transmission:.5}),f=new e.MeshStandardMaterial({color:16777215,opacity:.8,transparent:!0,roughness:.5,metalness:.1}),C={blue:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1}),white:new e.MeshBasicMaterial({color:16777215,transparent:!0,opacity:1}),default:new e.MeshBasicMaterial({color:1337811,transparent:!0,opacity:1})},_={CAM_Pacman_Backframe:C.blue,"CAM-Pacman_Bitcoin_1":C.white,"CAM-Pacman_Bitcoin_2":C.white,"CAM-Pacman_Bottom":C.blue,"CAM-Pacman_Top":C.blue,"CAM-Pacman_Eye":C.white,CAM_Pacman_Logo_1:C.white,CAM_Pacman_Logo_2:C.white,"CAM-Pacman_Shell_Boolean":C.blue,"CAM-Pacman_Shell":C.blue,"CAM-Pacman_Bottom_electronic":C.white,"CAM-Pacman_Top_electronic":C.white,"CAM-Pacman_Bottom_Text":C.white,"CAM-Pacman_Top_Text":C.white,default:C.blue},P=(Array(5).fill(g),new e.GLTFLoader);let A;const S=new e.Group;r.add(S);const y={pacman:S,ghost1:new e.Mesh(new e.BufferGeometry,g),ghost2:new e.Mesh(new e.BufferGeometry,g),ghost3:new e.Mesh(new e.BufferGeometry,g),ghost4:new e.Mesh(new e.BufferGeometry,g),ghost5:new e.Mesh(new e.BufferGeometry,g)},b={Ghost_EUR:y.ghost1,Ghost_CHF:y.ghost2,Ghost_YEN:y.ghost3,Ghost_USD:y.ghost4,Ghost_GBP:y.ghost5};async function L(){console.log("Starting CAM 3D Animation...");try{function t(){if(A){const e=d.getDelta();A.update(e)}c.render(r,w),requestAnimationFrame(t)}o?c.setPixelRatio(Math.min(window.devicePixelRatio,2)):c.setPixelRatio(window.devicePixelRatio),c.shadowMap.enabled=!0,c.shadowMap.type=e.PCFSoftShadowMap,c.shadowMap.enabled=!0,c.shadowMap.type=e.PCFSoftShadowMap,l?(c.setSize(l.clientWidth,l.clientHeight),l.appendChild(c.domElement)):(c.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(c.domElement)),console.log("Renderer initialized"),window.addEventListener("load",h),window.addEventListener("resize",h),console.log("Renderer initialized"),function(){const o=new e.AmbientLight(16777215);r.add(o);const t=new e.DirectionalLight(16777215,.8);r.add(t),t.position.set(-5,15,10),t.shadow.mapSize.width=4096,t.shadow.mapSize.height=4096,t.shadow.camera.left=-20,t.shadow.camera.right=20,t.shadow.camera.top=20,t.shadow.camera.bottom=-20,t.shadow.camera.near=.1,t.shadow.camera.far=50,t.shadow.bias=-.001,t.shadow.radius=3,t.castShadow=!0,console.log("Lighting setup complete")}(),console.log("Lighting setup complete"),console.log("Camera start position:",a),console.log("Camera look at position:",n),w.position.copy(a),w.lookAt(n),console.log("Camera initialized at position:",w.position),console.log("Camera looking at:",n),console.log("Camera initialized"),window.addEventListener("resize",(()=>{w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix()})),console.log("Camera resize setup complete"),console.log("Loading 3D model..."),await async function(){return new Promise(((o,t)=>{console.log("Loading model from:",s),P.load(s,(function(t){console.log("GLTF model loaded successfully");const a=t.scene;a.traverse((o=>{if("CAM-Pacman"===o.name){const a=[];o.traverse((e=>{if(e.isMesh&&"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name){const o=_[e.name]||_.default;e.material=o,a.push(e)}else"CAM-Pacman_Shell"!==e.name&&"CAM-Pacman_Shell_Boolean"!==e.name||(e.visible=!1)})),a.forEach((e=>y.pacman.add(e))),y.pacman.scale.set(.05,.05,.05),y.pacman.rotation.set(Math.PI/2,Math.PI/2,Math.PI/4),A=new e.AnimationMixer(y.pacman);const n={};t.animations.forEach((e=>{const o=A.clipAction(e);n[e.name]=o,o.setEffectiveWeight(1),o.play()}))}else if(o.name&&b[o.name]){const t=b[o.name],a=new e.Group;o.rotation.z=Math.PI,o.rotation.x=Math.PI/2,o.scale.set(.75,.75,.75);const n=[];o.traverse((e=>{e.isMesh&&(e.name&&e.name.startsWith("Ghost_Mesh")?e.material=g:e.name&&["EUR","CHF","YEN","USD","GBP"].includes(e.name)&&(e.visible=!1),n.push(e))})),n.forEach((e=>{e.name&&(e.name.includes("EUR")||e.name.startsWith("Ghost_Mesh"))?(e.rotation.z=Math.PI,e.rotation.x=Math.PI/2):e.rotation.set(0,0,0),a.add(e)})),t.add(a)}if(o.isMesh)if("CAM-Arena_LowRes_Top"===o.name)console.log("Found maze top mesh:",o.name),o.material=u,o.castShadow=!0;else if("CAM-Arena_LowRes_Bottom"===o.name)console.log("Found maze bottom mesh:",o.name),o.material=M,o.castShadow=!0;else if("CAM-Floor"===o.name){const t=o.clone();o.position.y=-.1,o.position.x=0,o.position.z=0,o.material=new e.MeshBasicMaterial({color:16777215,opacity:1,transparent:!1,depthWrite:!0,depthTest:!0,side:e.FrontSide}),o.receiveShadow=!1,o.castShadow=!0,o.scale.set(.5,.5,.5),t.material=f,t.position.y=-.5,t.receiveShadow=!0,r.add(t)}})),a.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),r.add(a),a.position.set(.5,.5,.5),console.log("Model added to scene with",r.children.length,"total children"),o()}),(function(e){console.log("Loading progress:",e)}),(function(e){console.error("Error loading 3D model:",e),t(e)}))}))}(),console.log("Model loading complete"),console.log("Starting animation loop"),t(),console.log("Scene children count:",r.children.length),r.children.forEach(((e,o)=>{console.log(`Child ${o}:`,e.type,e.name||"unnamed")}))}catch(i){console.error("Initialization error:",i)}}Object.values(y).forEach((e=>r.add(e))),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",L):L()})();
//# sourceMappingURL=script.js.map