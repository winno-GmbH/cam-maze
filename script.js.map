{"version":3,"file":"script.js","mappings":"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","sources":["webpack://cam-3d-animation/webpack/bootstrap","webpack://cam-3d-animation/webpack/runtime/compat get default export","webpack://cam-3d-animation/webpack/runtime/define property getters","webpack://cam-3d-animation/webpack/runtime/hasOwnProperty shorthand","webpack://cam-3d-animation/external var \"THREE\"","webpack://cam-3d-animation/./src/config/config.ts","webpack://cam-3d-animation/./src/config/dom-elements.ts","webpack://cam-3d-animation/external var \"gsap\"","webpack://cam-3d-animation/external var \"ScrollTrigger\"","webpack://cam-3d-animation/./src/paths/coordinates.ts","webpack://cam-3d-animation/./src/paths/pathpoints.ts","webpack://cam-3d-animation/./src/core/camera.ts","webpack://cam-3d-animation/./src/core/scene.ts","webpack://cam-3d-animation/./src/core/materials.ts","webpack://cam-3d-animation/./src/core/objects.ts","webpack://cam-3d-animation/./src/paths/paths.ts","webpack://cam-3d-animation/./src/animation/util.ts","webpack://cam-3d-animation/./src/animation/home-scroll.ts","webpack://cam-3d-animation/./src/animation/home-loop.ts","webpack://cam-3d-animation/./src/animation/pov-scroll.ts","webpack://cam-3d-animation/./src/main.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = THREE;","export const isMobile = window.innerWidth < 768;\n\nexport const ASSETS = {\n  mazeTexture: \"https://c-am.b-cdn.net/CAM/matcap24.png\",\n  mazeModel: \"https://c-am.b-cdn.net/CAM/c-am-assets-3.glb\",\n};\n","const SELECTORS = {\n  mazeContainer: \".el--home-maze.el\",\n  canvas: \"canvas\",\n\n  homeSection: \".sc--home.sc\",\n  introSection: \".sc--intro.sc\",\n  povSection: \".sc--pov.sc\",\n  finalSection: \".sc--final.sc\",\n  finalContainer: \".cr--final.cr\",\n\n  scrollComponent: \".cmp--scroll.cmp\",\n  parentElements: \".cmp--pov.cmp\",\n\n  pov: \".pov\",\n  cam: \".cam\",\n};\n\nexport const DOM_ELEMENTS = {\n  mazeContainer: document.querySelector(SELECTORS.mazeContainer) as HTMLElement,\n  canvas: document.querySelector(SELECTORS.canvas) as HTMLCanvasElement,\n\n  homeSection: document.querySelector(SELECTORS.homeSection) as HTMLElement,\n  introSection: document.querySelector(SELECTORS.introSection) as HTMLElement,\n  povSection: document.querySelector(SELECTORS.povSection) as HTMLElement,\n  finalSection: document.querySelector(SELECTORS.finalSection) as HTMLElement,\n  finalContainer: document.querySelector(\n    SELECTORS.finalContainer\n  ) as HTMLElement,\n\n  parentElements: document.querySelectorAll(\n    SELECTORS.parentElements\n  ) as NodeListOf<Element>,\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = gsap;","const __WEBPACK_NAMESPACE_OBJECT__ = ScrollTrigger;","export type XCoordKey =\n  | \"0\"\n  | \"0.5\"\n  | \"1\"\n  | \"1.5\"\n  | \"2\"\n  | \"2.5\"\n  | \"3\"\n  | \"3.5\"\n  | \"4\"\n  | \"4.5\"\n  | \"5\"\n  | \"5.5\"\n  | \"6\"\n  | \"6.5\"\n  | \"7\"\n  | \"7.5\"\n  | \"8\"\n  | \"8.5\"\n  | \"9\"\n  | \"9.5\"\n  | \"10\"\n  | \"10.5\"\n  | \"11\"\n  | \"11.5\"\n  | \"12\"\n  | \"12.5\"\n  | \"13\"\n  | \"13.5\"\n  | \"14\"\n  | \"14.5\"\n  | \"15\"\n  | \"15.5\"\n  | \"16\"\n  | \"16.5\"\n  | \"17\"\n  | \"17.5\"\n  | \"18\"\n  | \"18.5\"\n  | \"19\"\n  | \"19.5\"\n  | \"20\"\n\nexport type ZCoordKey =\n  | \"0\"\n  | \"0.5\"\n  | \"1\"\n  | \"1.5\"\n  | \"2\"\n  | \"2.5\"\n  | \"3\"\n  | \"3.5\"\n  | \"4\"\n  | \"4.5\"\n  | \"5\"\n  | \"5.5\"\n  | \"6\"\n  | \"6.5\"\n  | \"7\"\n  | \"7.5\"\n  | \"8\"\n  | \"8.5\"\n  | \"9\"\n  | \"9.5\"\n  | \"10\"\n  | \"10.5\"\n  | \"11\"\n  | \"11.5\"\n  | \"12\"\n  | \"12.5\"\n  | \"13\"\n  | \"13.5\"\n  | \"14\"\n  | \"14.5\"\n  | \"15\"\n  | \"15.5\"\n  | \"16\"\n\nexport const Y = 0.55;\n\nexport const X: Record<XCoordKey, number> = {\n  \"0\": -0.54875,\n  \"0.5\": -0.4985,\n  \"1\": -0.44825,\n  \"1.5\": -0.398,\n  \"2\": -0.34775,\n  \"2.5\": -0.2975,\n  \"3\": -0.24725,\n  \"3.5\": -0.197,\n  \"4\": -0.14675,\n  \"4.5\": -0.0965,\n  \"5\": -0.04625,\n  \"5.5\": 0.004,\n  \"6\": 0.05425,\n  \"6.5\": 0.1045,\n  \"7\": 0.15475,\n  \"7.5\": 0.205,\n  \"8\": 0.25525,\n  \"8.5\": 0.3055,\n  \"9\": 0.35575,\n  \"9.5\": 0.406,\n  \"10\": 0.45625,\n  \"10.5\": 0.5065,\n  \"11\": 0.55675,\n  \"11.5\": 0.607,\n  \"12\": 0.65725,\n  \"12.5\": 0.7075,\n  \"13\": 0.75775,\n  \"13.5\": 0.808,\n  \"14\": 0.85825,\n  \"14.5\": 0.9085,\n  \"15\": 0.95875,\n  \"15.5\": 1.009,\n  \"16\": 1.05925,\n  \"16.5\": 1.1095,\n  \"17\": 1.15975,\n  \"17.5\": 1.21,\n  \"18\": 1.26025,\n  \"18.5\": 1.3105,\n  \"19\": 1.36075,\n  \"19.5\": 1.411,\n  \"20\": 1.46125,\n};\n\nexport const Z: Record<ZCoordKey, number> = {\n  \"0\": -0.302,\n  \"0.5\": -0.25175,\n  \"1\": -0.2015,\n  \"1.5\": -0.15125,\n  \"2\": -0.101,\n  \"2.5\": -0.05075,\n  \"3\": -0.0005,\n  \"3.5\": 0.04975,\n  \"4\": 0.1,\n  \"4.5\": 0.15025,\n  \"5\": 0.2005,\n  \"5.5\": 0.25075,\n  \"6\": 0.301,\n  \"6.5\": 0.35125,\n  \"7\": 0.4015,\n  \"7.5\": 0.45175,\n  \"8\": 0.502,\n  \"8.5\": 0.55225,\n  \"9\": 0.6025,\n  \"9.5\": 0.65275,\n  \"10\": 0.703,\n  \"10.5\": 0.75325,\n  \"11\": 0.8035,\n  \"11.5\": 0.85375,\n  \"12\": 0.904,\n  \"12.5\": 0.95425,\n  \"13\": 1.0045,\n  \"13.5\": 1.05475,\n  \"14\": 1.105,\n  \"14.5\": 1.15525,\n  \"15\": 1.2055,\n  \"15.5\": 1.25575,\n  \"16\": 1.306,\n}\n\nexport const getCoord = (x: XCoordKey, z: ZCoordKey) => {\n  return new THREE.Vector3(X[x], Y, Z[z])\n};","import * as THREE from \"three\";\nimport { MazePathPoint, PathPoint, CameraPathPoint } from \"../types/types\";\nimport { isMobile } from \"../config/config\";\nimport { getCoord, X, Y, Z } from \"./coordinates\";\n\n// TODO - add curveCheckPoints to all curves where needed\n\nconst objectHomeScrollEndPathPoint = new THREE.Vector3(0.55675, 0.35, 0.45175);\n\nconst cameraPathPointsConfig = {\n  startMobile: new THREE.Vector3(0.5, 2.5, 2.5),\n  startDesktop: new THREE.Vector3(-2, 2.5, 2),\n  secondMobile: new THREE.Vector3(0.5, 2.5, 2),\n  secondDesktop: new THREE.Vector3(-1.5, 3, 0.75),\n  mobileLookAt: new THREE.Vector3(0.5, 0.5, -1.5),\n  desktopLookAt: new THREE.Vector3(-1.25, 0.5, 0.25),\n  cameraLookAtSecondDesktop: new THREE.Vector3(-0.75, 0.5, -0.75),\n  cameraLookAtSecondMobile: new THREE.Vector3(-0.75, 0.5, -0.75), // TODO\n\n  cameraHomeScrollEndLookAt: new THREE.Vector3(0.55675, -5, 0.35),\n  thirdPosition: new THREE.Vector3(0.55675, 3, 0.45175),\n\n  cameraHomeScrollEndPathPoint: new THREE.Vector3(0.55675, 0.5, 0.45175),\n};\n\n// determine positions and look at - changed if is mobile\nconst startPosition = isMobile\n  ? cameraPathPointsConfig.startMobile\n  : cameraPathPointsConfig.startDesktop;\nconst secondPosition = isMobile\n  ? cameraPathPointsConfig.secondMobile\n  : cameraPathPointsConfig.secondDesktop;\nconst lookAtPosition = isMobile\n  ? cameraPathPointsConfig.mobileLookAt\n  : cameraPathPointsConfig.desktopLookAt;\nconst cameraLookAtSecondPosition = isMobile\n  ? cameraPathPointsConfig.cameraLookAtSecondMobile\n  : cameraPathPointsConfig.cameraLookAtSecondDesktop;\n\nconst thirdPosition = cameraPathPointsConfig.thirdPosition;\nconst cameraHomeScrollEndLookAt =\n  cameraPathPointsConfig.cameraHomeScrollEndLookAt;\nconst cameraHomeScrollEndPathPoint =\n  cameraPathPointsConfig.cameraHomeScrollEndPathPoint;\n\nconst pacmanHomePathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"8\", \"9\"), type: \"straight\" },\n  {\n    pos: getCoord(\"8\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"9\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"10\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"10\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"9\", \"1\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"5\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"3\", \"1\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"2\", \"1\"),\n      getCoord(\"1\", \"2\"),\n      getCoord(\"1\", \"2.5\"),\n      getCoord(\"1.5\", \"3\"),\n      getCoord(\"2\", \"3.5\"),\n    ],\n  },\n  {\n    pos: getCoord(\"2\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"3\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"5\", \"7\"), type: \"straight\" },\n  {\n    pos: getCoord(\"4\", \"7\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"3\", \"8\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"4\", \"9\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"9\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"5\", \"11\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"3\", \"11\"),\n      getCoord(\"2\", \"12\"),\n      getCoord(\"1.5\", \"13\"),\n      getCoord(\"1\", \"14\"),\n      getCoord(\"2\", \"15\"),\n      getCoord(\"3\", \"15\"),\n      getCoord(\"4\", \"14\"),\n      getCoord(\"5\", \"13\"),\n    ],\n  },\n  {\n    pos: getCoord(\"6\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"6\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"5\", \"13\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"12\", \"13\"),\n      getCoord(\"13\", \"12\"),\n      getCoord(\"12.5\", \"11\"),\n      getCoord(\"12\", \"10.5\"),\n      getCoord(\"11\", \"10\"),\n      getCoord(\"10\", \"10.5\"),\n      getCoord(\"9\", \"11\"),\n      getCoord(\"8\", \"10\"),\n      getCoord(\"8\", \"9.5\"),\n    ],\n  },\n  {\n    pos: getCoord(\"8\", \"9\"),\n    type: \"straight\",\n  },\n];\n\nconst ghost1HomePathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"1\", \"10\"), type: \"straight\" },\n  {\n    pos: getCoord(\"1\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"2\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"3\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"5\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"9\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"10\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"9\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"6\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"8\", \"10\"),\n      getCoord(\"9\", \"11\"),\n      getCoord(\"10\", \"10.5\"),\n      getCoord(\"11\", \"10\"),\n      getCoord(\"12\", \"10.5\"),\n      getCoord(\"13\", \"11\"),\n      getCoord(\"15\", \"11\"),\n      getCoord(\"16\", \"10.5\"),\n      getCoord(\"17\", \"10\"),\n      getCoord(\"18\", \"10.5\"),\n      getCoord(\"19\", \"11\"),\n      getCoord(\"20\", \"10\"),\n    ],\n  },\n  {\n    pos: getCoord(\"20\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"19\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"9\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"6\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"8\", \"8\"),\n      getCoord(\"7\", \"9\"),\n      getCoord(\"6\", \"10\"),\n      getCoord(\"5.5\", \"11\"),\n      getCoord(\"5\", \"12\"),\n      getCoord(\"6\", \"13\"),\n      getCoord(\"7\", \"14\"),\n      getCoord(\"6\", \"15\"),\n      getCoord(\"5\", \"15\"),\n      getCoord(\"4\", \"14\"),\n      getCoord(\"4.5\", \"13\"),\n      getCoord(\"5\", \"12\"),\n      getCoord(\"4\", \"11\"),\n    ],\n  },\n  { pos: getCoord(\"1\", \"10\"), type: \"straight\" },\n];\n\nconst ghost2HomePathPoints: MazePathPoint[] = [\n  {\n    pos: getCoord(\"5\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [getCoord(\"5.5\", \"11\")],\n  },\n  {\n    pos: getCoord(\"6\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"5\", \"9\"), type: \"straight\" },\n  {\n    pos: getCoord(\"4\", \"9\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"3\", \"8\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"4\", \"7\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"7\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"8\", \"8\"), type: \"straight\" },\n  {\n    pos: getCoord(\"8\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [\n      getCoord(\"8.5\", \"11\"),\n      getCoord(\"9\", \"12\"),\n    ],\n  },\n  { pos: getCoord(\"10\", \"13\"), type: \"straight\" },\n  {\n    pos: getCoord(\"12\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"14\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"19\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"20\", \"14\"), type: \"straight\" },\n  {\n    pos: getCoord(\"20\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"19\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"17\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"16\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"14\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n    curveCheckPoints: [getCoord(\"12\", \"1.5\")],\n  },\n  {\n    pos: getCoord(\"11\", \"2\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"10\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"10\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"9\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"8\", \"6\"), type: \"straight\" },\n  {\n    pos: getCoord(\"8\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [getCoord(\"8.5\", \"11\")],\n  },\n  {\n    pos: getCoord(\"9\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"6\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [\n      getCoord(\"4.5\", \"13\"),\n      getCoord(\"5\", \"12\"),\n    ],\n  },\n];\n\nconst ghost3HomePathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"14\", \"10.5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n    curveCheckPoints: [\n      getCoord(\"12\", \"1.5\"),\n      getCoord(\"11\", \"2\"),\n      getCoord(\"10\", \"1.5\"),\n    ],\n  },\n  { pos: getCoord(\"9\", \"1\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"7\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"9\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"10\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"11\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"19\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"20\", \"6\"), type: \"straight\" },\n  {\n    pos: getCoord(\"20\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"19\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n    curveCheckPoints: [\n      getCoord(\"18\", \"10.5\"),\n      getCoord(\"17\", \"10\"),\n      getCoord(\"16\", \"10.5\"),\n      getCoord(\"15.5\", \"11\"),\n    ],\n  },\n  { pos: getCoord(\"15\", \"12\"), type: \"straight\" },\n  {\n    pos: getCoord(\"15\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"14\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"13\", \"14\"), type: \"straight\" },\n  {\n    pos: getCoord(\"13\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [\n      getCoord(\"12.5\", \"11\"),\n      getCoord(\"12\", \"10.5\"),\n      getCoord(\"10\", \"10.5\"),\n    ],\n  },\n  {\n    pos: getCoord(\"9\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"9\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [getCoord(\"5.5\", \"11\")],\n  },\n  {\n    pos: getCoord(\"5\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"6\", \"13\"), type: \"straight\" },\n  {\n    pos: getCoord(\"12\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"13.5\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"14\", \"10.5\"), type: \"straight\" },\n];\n\nconst ghost4HomePathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"16\", \"7\"), type: \"straight\" },\n  {\n    pos: getCoord(\"16\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"15\", \"11\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"12\", \"13\"), type: \"straight\" },\n  {\n    pos: getCoord(\"8\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"6\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"2\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"1\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [\n      getCoord(\"1.5\", \"13\"),\n      getCoord(\"2\", \"12\"),\n      getCoord(\"1.5\", \"11\"),\n    ],\n  },\n  { pos: getCoord(\"1\", \"10\"), type: \"straight\" },\n  {\n    pos: getCoord(\"1\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"2\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"7\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"9\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"13\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"14\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"16\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"17\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"19\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"20\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"19\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"18\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"19\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"20\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"20\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"19\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n    curveCheckPoints: [getCoord(\"18\", \"10.5\")],\n  },\n  {\n    pos: getCoord(\"17\", \"10\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"16\", \"9\"), type: \"straight\" },\n  { pos: getCoord(\"16\", \"7\"), type: \"straight\" },\n];\n\nconst ghost5HomePathPoints: MazePathPoint[] = [\n  {\n    pos: getCoord(\"10\", \"3.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"9\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"3\", \"1\"), type: \"straight\" },\n  {\n    pos: getCoord(\"2\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"1\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"1.5\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"2\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"3\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"5\", \"7\"), type: \"straight\" },\n  {\n    pos: getCoord(\"4\", \"7\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"3\", \"8\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"4\", \"9\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"9\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"8.5\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"9\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"10\", \"13\"), type: \"straight\" },\n  {\n    pos: getCoord(\"12\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"14\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"16\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"19\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"20\", \"14\"), type: \"straight\" },\n  {\n    pos: getCoord(\"20\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"19\", \"1\"), type: \"straight\" },\n  {\n    pos: getCoord(\"17\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"16\", \"2\"), type: \"straight\" },\n  {\n    pos: getCoord(\"16\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"14\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"12\", \"1.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"11\", \"2\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"10\", \"3.5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n];\n\nconst cameraHomeScrollPathPoints: CameraPathPoint[] = [\n  { pos: startPosition, lookAt: lookAtPosition },\n  // { pos: thirdPosition, lookAt: cameraHomeScrollEndLookAt },\n  { pos: secondPosition, lookAt: cameraLookAtSecondPosition },\n  { pos: thirdPosition, lookAt: cameraHomeScrollEndLookAt },\n  { pos: cameraHomeScrollEndPathPoint, lookAt: cameraHomeScrollEndLookAt },\n];\n\nconst cameraPOVPathPoints: MazePathPoint[] = [\n  {\n    pos: new THREE.Vector3(X[\"11\"], 0.5, Z[\"7.5\"]),\n    type: \"straight\",\n    lookAtSequence: [\n      new THREE.Vector3(X[\"11\"], 0.2, Z[\"8\"]), // Look forward first\n      new THREE.Vector3(X[\"11\"], 1.2, Z[\"16\"]), // Look up\n      new THREE.Vector3(X[\"11\"], 0.55, Z[\"16\"]), // Look forward again\n    ],\n  },\n  {\n    pos: getCoord(\"11\", \"7.5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"11\", \"9\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [\n      new THREE.Vector3(X[\"11\"], Y, 0.6525),\n      getCoord(\"11.5\", \"10\"),\n      getCoord(\"12\", \"10.5\"),\n      getCoord(\"12.5\", \"11\"),\n    ],\n  },\n  {\n    pos: getCoord(\"13\", \"11\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"14.5\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"11.5\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"15\", \"14.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"14.5\", \"15\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"13.5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"14.5\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"13\", \"13.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"12.5\", \"13\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"7.5\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"13.5\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"7\", \"14.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"7.5\", \"15\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"10.5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"11\", \"16\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(X[\"1\"], 1, 2.0095),\n    type: \"straight\",\n  },\n];\n\nconst ghost1POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"16\", \"10\"), type: \"straight\" },\n  {\n    pos: getCoord(\"16\", \"10.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"15.5\", \"11\"), type: \"straight\" },\n  { pos: getCoord(\"14.5\", \"11\"), type: \"straight\" },\n];\n\nconst ghost2POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"16\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"15.5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"15\", \"14.5\"), type: \"straight\" },\n  { pos: getCoord(\"15\", \"13.5\"), type: \"straight\" },\n];\n\nconst ghost3POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"9\", \"12\"), type: \"straight\" },\n  {\n    pos: getCoord(\"9\", \"12.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"9.5\", \"13\"), type: \"straight\" },\n  { pos: getCoord(\"10.5\", \"13\"), type: \"straight\" },\n];\n\nconst ghost4POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"7\", \"14\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"13.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"7.5\", \"13\"), type: \"straight\" },\n  { pos: getCoord(\"8.5\", \"13\"), type: \"straight\" },\n];\n\nconst ghost5POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"11\", \"16\"), type: \"straight\" },\n  {\n    pos: getCoord(\"11\", \"15.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"10.5\", \"15\"), type: \"straight\" },\n  { pos: getCoord(\"9.5\", \"15\"), type: \"straight\" },\n];\n\n// start position, end position, ghost fade: 10, 20, cam fade: 50, 60, text start fade out: 90\n\n// @philipp - check ghost 3 - 5\n\nexport const povTriggerPositions = {\n  ghost1: {\n    triggerPos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n    ghostStartFadeIn: new THREE.Vector3(0.7075, 0.55, 0.8035),\n    ghostEndFadeIn: new THREE.Vector3(0.725, 0.55, 0.8035),\n    ghostStartFadeOut: new THREE.Vector3(0.75, 0.55, 0.8035),\n    camStartFadeIn: new THREE.Vector3(0.75775, 0.55, 0.8035),\n    camEndFadeIn: new THREE.Vector3(0.775, 0.55, 0.8035),\n    camStartFadeOut: new THREE.Vector3(0.84, 0.55, 0.8035),\n    endPosition: new THREE.Vector3(0.85825, 0.55, 0.8035),\n  },\n  ghost2: {\n    triggerPos: new THREE.Vector3(0.9085, 0.55, 0.8035),\n    ghostStartFadeIn: new THREE.Vector3(0.95875, 0.55, 0.85375),\n    ghostEndFadeIn: new THREE.Vector3(0.95875, 0.55, 0.875),\n    ghostStartFadeOut: new THREE.Vector3(0.95875, 0.55, 0.89),\n    camStartFadeIn: new THREE.Vector3(0.95875, 0.55, 0.904),\n    camEndFadeIn: new THREE.Vector3(0.95875, 0.55, 0.93),\n    camStartFadeOut: new THREE.Vector3(0.95875, 0.55, 0.9975),\n    endPosition: new THREE.Vector3(0.95875, 0.55, 1.0045),\n  },\n  ghost3: {\n    triggerPos: new THREE.Vector3(0.75775, 0.55, 1.05475),\n    ghostStartFadeIn: new THREE.Vector3(0.7075, 0.55, 1.05475),\n    ghostEndFadeIn: new THREE.Vector3(0.7075, 0.55, 1.0045),\n    ghostStartFadeOut: new THREE.Vector3(0.6825, 0.55, 1.0045),\n    camStartFadeIn: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    camEndFadeIn: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    camStartFadeOut: new THREE.Vector3(0.6065, 0.55, 1.0045),\n    endPosition: new THREE.Vector3(0.55675, 0.55, 1.0045),\n  },\n  ghost4: {\n    triggerPos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    ghostStartFadeIn: new THREE.Vector3(0.5565, 0.55, 1.0045),\n    ghostEndFadeIn: new THREE.Vector3(0.5065, 0.55, 1.0045),\n    ghostStartFadeOut: new THREE.Vector3(0.4815, 0.55, 1.0045),\n    camStartFadeIn: new THREE.Vector3(0.45625, 0.55, 1.0045),\n    camEndFadeIn: new THREE.Vector3(0.45625, 0.55, 1.0045),\n    camStartFadeOut: new THREE.Vector3(0.4065, 0.55, 1.0045),\n    endPosition: new THREE.Vector3(0.35575, 0.55, 1.0045),\n  },\n  ghost5: {\n    triggerPos: new THREE.Vector3(0.15475, 0.55, 1.15525),\n    ghostStartFadeIn: new THREE.Vector3(0.1795, 0.55, 1.18),\n    ghostEndFadeIn: new THREE.Vector3(0.205, 0.55, 1.2055),\n    ghostStartFadeOut: new THREE.Vector3(0.23025, 0.55, 1.2055),\n    camStartFadeIn: new THREE.Vector3(0.25525, 0.55, 1.2055),\n    camEndFadeIn: new THREE.Vector3(0.25525, 0.55, 1.2055),\n    camStartFadeOut: new THREE.Vector3(0.3055, 0.55, 1.2055),\n    endPosition: new THREE.Vector3(0.35575, 0.55, 1.2055),\n  },\n};\n\nexport function getStartPosition() {\n  return startPosition;\n}\n\nexport function getSecondPosition() {\n  return secondPosition;\n}\n\nexport function getLookAtPosition() {\n  return lookAtPosition;\n}\n\nexport const homePaths = {\n  pacman: pacmanHomePathPoints,\n  ghost1: ghost1HomePathPoints,\n  ghost2: ghost2HomePathPoints,\n  ghost3: ghost3HomePathPoints,\n  ghost4: ghost4HomePathPoints,\n  ghost5: ghost5HomePathPoints,\n} as const;\n\nexport const povPaths = {\n  camera: cameraPOVPathPoints,\n  ghost1: ghost1POVPathPoints,\n  ghost2: ghost2POVPathPoints,\n  ghost3: ghost3POVPathPoints,\n  ghost4: ghost4POVPathPoints,\n  ghost5: ghost5POVPathPoints,\n} as const;\n\nexport function createHomeScrollPathPoints(\n  pausedPositions: Record<string, THREE.Vector3>\n): Record<string, PathPoint[]> {\n  const scrollPaths: Record<string, PathPoint[]> = {};\n\n  Object.entries(pausedPositions).forEach(([key, pausedPos]) => {\n    const arcPoint = new THREE.Vector3(\n      pausedPos.x * (1 / 4) + objectHomeScrollEndPathPoint.x * (3 / 4),\n      1.5,\n      pausedPos.z * (1 / 4) + objectHomeScrollEndPathPoint.z * (3 / 4)\n    );\n\n    scrollPaths[key] = [\n      { pos: pausedPos.clone() },\n      { pos: arcPoint },\n      { pos: objectHomeScrollEndPathPoint },\n    ];\n  });\n\n  return scrollPaths;\n}\n\nexport function getCameraHomeScrollPathPoints(): CameraPathPoint[] {\n  return cameraHomeScrollPathPoints;\n}\n","import * as THREE from \"three\";\nimport gsap from \"gsap\";\nimport ScrollTrigger from \"gsap/ScrollTrigger\";\nimport { getLookAtPosition, getStartPosition } from \"../paths/pathpoints\";\n\ngsap.registerPlugin(ScrollTrigger);\n\nconst CAMERA_CONFIG = {\n  originalFOV: 50,\n  wideFOV: 80,\n  near: 0.001,\n  far: 100,\n};\n\nexport const camera = new THREE.PerspectiveCamera(\n  50,\n  window.innerWidth / window.innerHeight,\n  CAMERA_CONFIG.near,\n  CAMERA_CONFIG.far\n);\n\nexport function setupCamera(): void {\n  const startPosition = getStartPosition();\n  const lookAtPosition = getLookAtPosition();\n  camera.position.set(startPosition.x, startPosition.y, startPosition.z);\n  camera.lookAt(lookAtPosition.x, lookAtPosition.y, lookAtPosition.z);\n}\n","import * as THREE from \"three\";\nimport { isMobile } from \"../config/config\";\nimport { DOM_ELEMENTS } from \"../config/dom-elements\";\nimport { camera } from \"./camera\";\n\nexport const scene = new THREE.Scene();\n\nconst renderer = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n  powerPreference: \"high-performance\",\n  precision: \"highp\",\n});\n\nconst clock = new THREE.Clock();\nconst frameCallbacks: (() => void)[] = [];\n\nexport function initRenderer(): void {\n  enhanceAntiAliasing();\n\n  if (DOM_ELEMENTS.mazeContainer) {\n    renderer.setSize(\n      DOM_ELEMENTS.mazeContainer.clientWidth,\n      DOM_ELEMENTS.mazeContainer.clientHeight\n    );\n    DOM_ELEMENTS.mazeContainer.appendChild(renderer.domElement);\n  } else {\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(renderer.domElement);\n  }\n\n  setPixelRatio();\n  window.addEventListener(\"resize\", setPixelRatio);\n\n  renderer.render(scene, camera);\n}\n\nfunction enhanceAntiAliasing(): void {\n  if (isMobile) {\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n  } else {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  renderer.shadowMap.enabled = true;\n  renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n}\n\nfunction setPixelRatio(): void {\n  const pixelRatio = Math.min(window.devicePixelRatio, isMobile ? 2 : 3);\n  renderer.setPixelRatio(pixelRatio);\n\n  if (DOM_ELEMENTS.mazeContainer) {\n    renderer.setSize(\n      DOM_ELEMENTS.mazeContainer.clientWidth,\n      DOM_ELEMENTS.mazeContainer.clientHeight\n    );\n    camera.aspect =\n      DOM_ELEMENTS.mazeContainer.clientWidth /\n      DOM_ELEMENTS.mazeContainer.clientHeight;\n  } else {\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    camera.aspect = window.innerWidth / window.innerHeight;\n  }\n\n  camera.updateProjectionMatrix();\n}\n\nexport function setupLighting(): void {\n  const ambientLight = new THREE.AmbientLight(0xffffff);\n  scene.add(ambientLight);\n\n  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n  scene.add(directionalLight);\n  directionalLight.position.set(-5, 15, 10);\n  directionalLight.shadow.mapSize.width = 4096;\n  directionalLight.shadow.mapSize.height = 4096;\n  directionalLight.shadow.camera.left = -20;\n  directionalLight.shadow.camera.right = 20;\n  directionalLight.shadow.camera.top = 20;\n  directionalLight.shadow.camera.bottom = -20;\n  directionalLight.shadow.camera.near = 0.1;\n  directionalLight.shadow.camera.far = 50;\n  directionalLight.shadow.bias = -0.001;\n  directionalLight.shadow.radius = 3;\n  directionalLight.castShadow = true;\n}\n\nexport function startRenderLoop(): void {\n  const render = () => {\n    frameCallbacks.forEach((callback) => callback());\n\n    renderer.render(scene, camera);\n\n    requestAnimationFrame(render);\n  };\n  render();\n}\n\nexport function onFrame(callback: () => void): void {\n  frameCallbacks.push(callback);\n}\n\nexport { renderer, clock };\n","import * as THREE from \"three\";\nimport { ASSETS } from \"../config/config\";\n\nconst textureLoader = new THREE.TextureLoader();\n\nconst mazeTexture = textureLoader.load(ASSETS.mazeTexture);\n\nexport const mazeMaterial = new THREE.MeshMatcapMaterial({\n  matcap: mazeTexture,\n});\n\nexport const topMaterial = new THREE.MeshStandardMaterial({\n  color: 0xf2f9f9,\n  metalness: 0.4,\n  roughness: 0,\n  envMapIntensity: 10,\n});\n\nexport const ghostMaterial = new THREE.MeshPhysicalMaterial({\n  color: 0xffffff,\n  opacity: 1,\n  transparent: true,\n  depthWrite: false,\n  depthTest: true,\n  blending: THREE.NormalBlending,\n  side: THREE.DoubleSide,\n  roughness: 0.75,\n  metalness: 0.2,\n  transmission: 0.5,\n});\n\nexport const floorMaterial = new THREE.MeshStandardMaterial({\n  color: 0xffffff,\n  opacity: 0.8,\n  transparent: true,\n  roughness: 0.5,\n  metalness: 0.1,\n});\n\nconst pacmanMaterials = {\n  blue: new THREE.MeshBasicMaterial({\n    color: 0x1469d3,\n    transparent: true,\n    opacity: 1,\n  }),\n  white: new THREE.MeshBasicMaterial({\n    color: 0xffffff,\n    transparent: true,\n    opacity: 1,\n  }),\n  default: new THREE.MeshBasicMaterial({\n    color: 0x1469d3,\n    transparent: true,\n    opacity: 1,\n  }),\n};\n\n// @philipp - comment out the comments to change colors\n\nexport const materialMap = {\n  CAM_Pacman_Backframe: pacmanMaterials.blue,\n  \"CAM-Pacman_Bitcoin_1\": pacmanMaterials.white,\n  \"CAM-Pacman_Bitcoin_2\": pacmanMaterials.white,\n  \"CAM-Pacman_Bottom\": pacmanMaterials.blue,\n  \"CAM-Pacman_Top\": pacmanMaterials.blue,\n  \"CAM-Pacman_Eye\": pacmanMaterials.white,\n  // CAM_Pacman_Logo_1: pacmanMaterials.blue, // logo in the back, left side\n  // CAM_Pacman_Logo_2: pacmanMaterials.blue, // logo in the back, right side\n  CAM_Pacman_Logo_1: pacmanMaterials.white,\n  CAM_Pacman_Logo_2: pacmanMaterials.white,\n  \"CAM-Pacman_Shell_Boolean\": pacmanMaterials.blue,\n  \"CAM-Pacman_Shell\": pacmanMaterials.blue,\n  \"CAM-Pacman_Bottom_electronic\": pacmanMaterials.blue,\n  \"CAM-Pacman_Top_electronic\": pacmanMaterials.blue,\n  // \"CAM-Pacman_Bottom_electronic\": pacmanMaterials.white, // bitcoin in the middle, left side\n  // \"CAM-Pacman_Top_electronic\": pacmanMaterials.white, // bitcoin in the middle, right side\n  \"CAM-Pacman_Bottom_Text\": pacmanMaterials.white,\n  \"CAM-Pacman_Top_Text\": pacmanMaterials.white,\n  // \"CAM-Pacman_Bottom_Text\": pacmanMaterials.blue, // text on the bottom of pacman\n  // \"CAM-Pacman_Top_Text\": pacmanMaterials.blue, // text on the top of pacman\n  default: pacmanMaterials.blue,\n};\n","import * as THREE from \"three\";\nimport { ASSETS } from \"../config/config\";\nimport { GhostContainer } from \"../types/types\";\nimport { clock } from \"./scene\";\nimport {\n  mazeMaterial,\n  topMaterial,\n  ghostMaterial,\n  floorMaterial,\n  materialMap,\n} from \"./materials\";\n\nexport { clock };\n\nconst loader = new THREE.GLTFLoader();\n\nexport let pacmanMixer: THREE.AnimationMixer;\n\nexport const pacman = new THREE.Group();\n\nexport const ghosts: GhostContainer = {\n  pacman: pacman,\n  ghost1: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost2: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost3: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost4: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost5: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n};\n\nconst ghostContainers = {\n  Ghost_EUR: ghosts.ghost1,\n  Ghost_CHF: ghosts.ghost2,\n  Ghost_YEN: ghosts.ghost3,\n  Ghost_USD: ghosts.ghost4,\n  Ghost_GBP: ghosts.ghost5,\n};\n\n// CAM-Pacman_Shell -> should not be visible\n// CAM-Pacman_Shell_Boolean -> should not be visible\n// CAM-Pacman_Backframe -> should be visible (below the logo)\n// CAM-Pacman_Bottom -> should be visible (bottom)\n// CAM-Pacman_Bitcoin_1 -> should be visible (bitcoin in logo - left)\n// CAM-Pacman_Bitcoin_2 -> should be visible (bitcoin in logo - right)\n// CAM_Pacman_Logo_1 -> should be visible (octagon background of logo - left)\n// CAM_Pacman_Logo_2 -> should be visible (octagon background of logo - right)\n// CAM-Pacman_Eye -> should be visible (eyes)\n// CAM-Pacman_Bottom_electronic -> should be visible (bottom of bitcoin on pacman)\n// CAM-Pacman_Top_electronic -> should be visible (top of bitcoin on pacman)\n// CAM-Pacman_Bottom_Text -> should be visible (text on bottom of pacman)\n// CAM-Pacman_Top_Text -> should be visible (text on top of pacman)\n// CAM-Pacman_Top -> should be visible (top)  \n\nconst greenMaterial = new THREE.MeshBasicMaterial({\n  color: 0x00ff00,\n  opacity: 1,\n  transparent: false,\n  depthWrite: true,\n  depthTest: true,\n});\n\nexport async function loadModel(scene: THREE.Scene): Promise<void> {\n  Object.values(ghosts).forEach((ghost) => scene.add(ghost));\n  scene.add(pacman);\n  return new Promise((resolve, reject) => {\n    loader.load(\n      ASSETS.mazeModel,\n      function (gltf) {\n        const model = gltf.scene;\n\n\n        // Print all elements in the 3D model\n        console.log(\"=== 3D Model Hierarchy ===\");\n        model.traverse((obj: THREE.Object3D) => {\n          console.log(`[${obj.type}] ${obj.name}`);\n        });\n        console.log(\"=========================\");\n\n        model.traverse((child: THREE.Object3D) => {\n          if (child.name === \"CAM-Pacman\") {\n            const children: THREE.Object3D[] = [];\n            child.traverse((subChild: THREE.Object3D) => {\n              if (\n                (subChild as any).isMesh &&\n                subChild.name !== \"CAM-Pacman_Shell\" &&\n                subChild.name !== \"CAM-Pacman_Shell_Boolean\" &&\n                subChild.name !== \"CAM-Pacman_Bitcoin_1\" &&\n                subChild.name !== \"CAM-Pacman_Bitcoin_2\"\n              ) {\n                const material =\n                  materialMap[subChild.name as keyof typeof materialMap] ||\n                  materialMap.default;\n                (subChild as THREE.Mesh).material = material;\n                children.push(subChild);\n              } else if (\n                subChild.name === \"CAM-Pacman_Shell\" ||\n                subChild.name === \"CAM-Pacman_Shell_Boolean\" ||\n                subChild.name === \"CAM-Pacman_Bitcoin_1\" ||\n                subChild.name === \"CAM-Pacman_Bitcoin_2\"\n              ) {\n                subChild.visible = false;\n              }\n            });\n\n            children.forEach((item) => ghosts.pacman.add(item));\n            ghosts.pacman.scale.set(0.05, 0.05, 0.05);\n            ghosts.pacman.rotation.set(Math.PI / 2, Math.PI / 2, Math.PI / 4);\n\n            pacmanMixer = new THREE.AnimationMixer(ghosts.pacman);\n            const pacmanActions: { [key: string]: THREE.AnimationAction } = {};\n\n            gltf.animations.forEach((clip: THREE.AnimationClip) => {\n              const action = pacmanMixer.clipAction(clip);\n\n              action.getMixer().addEventListener('loop', function (e) {\n                e.action.getRoot().traverse(function (obj) {\n                  if (obj.userData && obj.userData.skipAnimation) {\n                    (obj as any).updateMorphTargets = function () { };\n                  }\n                });\n              });\n\n              pacmanActions[clip.name] = action;\n              action.setEffectiveWeight(0);\n              action.play();\n            });\n            Object.values(pacmanActions).forEach((action) => {\n              action.setEffectiveWeight(1);\n            });\n          } else if (\n            child.name &&\n            ghostContainers[child.name as keyof typeof ghostContainers]\n          ) {\n            const ghostContainer =\n              ghostContainers[child.name as keyof typeof ghostContainers];\n            const ghostGroup = new THREE.Group();\n\n            child.rotation.z = Math.PI;\n            child.rotation.x = Math.PI / 2;\n            child.scale.set(0.75, 0.75, 0.75);\n\n            const children: THREE.Object3D[] = [];\n            child.traverse((subChild: THREE.Object3D) => {\n              if ((subChild as any).isMesh) {\n                if (subChild.name && subChild.name.startsWith(\"Ghost_Mesh\")) {\n                  (subChild as THREE.Mesh).material = ghostMaterial;\n                } else if (\n                  subChild.name &&\n                  [\"EUR\", \"CHF\", \"YEN\", \"USD\", \"GBP\"].includes(subChild.name)\n                ) {\n                  subChild.visible = false;\n                }\n                children.push(subChild);\n              }\n            });\n\n            children.forEach((item) => {\n              if (\n                item.name &&\n                (item.name.includes(\"EUR\") ||\n                  item.name.startsWith(\"Ghost_Mesh\"))\n              ) {\n                item.rotation.z = Math.PI;\n                item.rotation.x = Math.PI / 2;\n              } else {\n                item.rotation.set(0, 0, 0);\n              }\n              ghostGroup.add(item);\n            });\n\n            if (ghostContainer) {\n              ghostContainer.add(ghostGroup);\n            } else {\n              console.warn(`ghostContainer for ${child.name} is undefined!`);\n            }\n          }\n\n          if ((child as any).isMesh) {\n            if (child.name === \"CAM-Arena_LowRes_Top\") {\n              (child as THREE.Mesh).material = topMaterial;\n              child.castShadow = true;\n            } else if (child.name === \"CAM-Arena_LowRes_Bottom\") {\n              (child as THREE.Mesh).material = mazeMaterial;\n              child.castShadow = true;\n            } else if (child.name === \"CAM-Floor\") {\n              const clonedChild = child.clone();\n              child.position.y = -0.1;\n              child.position.x = 0;\n              child.position.z = 0;\n              (child as THREE.Mesh).material = new THREE.MeshBasicMaterial({\n                color: 0xffffff,\n                opacity: 1,\n                transparent: false,\n                depthWrite: true,\n                depthTest: true,\n                side: THREE.FrontSide,\n              });\n              child.receiveShadow = false;\n              child.castShadow = true;\n              child.scale.set(0.5, 0.5, 0.5);\n\n              (clonedChild as THREE.Mesh).material = floorMaterial;\n              clonedChild.position.y = -0.5;\n              clonedChild.receiveShadow = true;\n              scene.add(clonedChild);\n            } else {\n              (child as THREE.Mesh).visible = false;\n            }\n          }\n        });\n\n        model.traverse(function (node: THREE.Object3D) {\n          if ((node as any).isMesh) {\n            node.castShadow = true;\n            node.receiveShadow = true;\n          }\n        });\n\n        scene.add(model);\n        model.position.set(0.5, 0.5, 0.5);\n\n        resolve();\n      },\n      function (progress: any) { },\n      function (error: any) {\n        reject(error);\n      }\n    );\n  });\n}\n","import * as THREE from \"three\";\nimport { MazePathPoint, PathPoint, CameraPathPoint } from \"../types/types\";\nimport {\n  homePaths,\n  povPaths,\n  createHomeScrollPathPoints,\n  getCameraHomeScrollPathPoints,\n} from \"./pathpoints\";\n\n// Cache for created paths\nconst pathCache = new Map<string, THREE.CurvePath<THREE.Vector3>>();\n\n// Optional utility for smoothing tangent directions when following paths\nexport class TangentSmoother {\n  private currentTangent: THREE.Vector3;\n  private smoothing: number;\n\n  constructor(initialTangent: THREE.Vector3, smoothing: number = 0.06) {\n    this.currentTangent = initialTangent.clone();\n    this.smoothing = smoothing;\n  }\n\n  update(targetTangent: THREE.Vector3): THREE.Vector3 {\n    this.currentTangent.lerp(targetTangent, this.smoothing);\n    return this.currentTangent.normalize();\n  }\n\n  reset(newTangent: THREE.Vector3): void {\n    this.currentTangent.copy(newTangent);\n  }\n\n  setSmoothingFactor(smoothing: number): void {\n    this.smoothing = Math.max(0.001, Math.min(1, smoothing));\n  }\n}\n\nfunction createMazePath(\n  pathPoints: MazePathPoint[],\n  pathName?: string\n): THREE.CurvePath<THREE.Vector3> {\n  const cacheKey = pathPoints\n    .map((p) => `${p.pos.x},${p.pos.y},${p.pos.z},${p.type},${p.arc || \"\"}`)\n    .join(\"|\");\n\n  if (pathCache.has(cacheKey)) {\n    return pathCache.get(cacheKey)!;\n  }\n\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  let i = 0;\n  while (i < pathPoints.length - 1) {\n    const current = pathPoints[i];\n    const next = pathPoints[i + 1];\n\n    // Check if current point has curveCheckPoints\n    if (current.curveCheckPoints && current.curveCheckPoints.length > 0) {\n      // Create CatmullRomCurve3 with start point, checkpoints, and end point\n      const catmullPoints = [\n        current.pos,\n        ...current.curveCheckPoints,\n        next.pos,\n      ];\n      console.log(\n        `Creating CatmullRomCurve3 for ${pathName} with curveCheckPoints:`,\n        catmullPoints.map((p) => `(${p.x}, ${p.y}, ${p.z})`)\n      );\n      path.add(\n        new THREE.CatmullRomCurve3(catmullPoints, false, \"centripetal\", 0)\n      );\n    } else if (current.type === \"straight\") {\n      console.log(\n        \"Creating LineCurve3 from\",\n        `(${current.pos.x}, ${current.pos.y}, ${current.pos.z})`,\n        \"to\",\n        `(${next.pos.x}, ${next.pos.y}, ${next.pos.z})`\n      );\n      path.add(new THREE.LineCurve3(current.pos, next.pos));\n    } else {\n      // Create curve using existing logic\n      const midPoint = createNormalCurveMidPoint(current, next);\n      console.log(\n        \"Creating QuadraticBezierCurve3 from\",\n        `(${current.pos.x}, ${current.pos.y}, ${current.pos.z})`,\n        \"via\",\n        `(${midPoint.x}, ${midPoint.y}, ${midPoint.z})`,\n        \"to\",\n        `(${next.pos.x}, ${next.pos.y}, ${next.pos.z})`\n      );\n      path.add(\n        new THREE.QuadraticBezierCurve3(current.pos, midPoint, next.pos)\n      );\n    }\n\n    i++;\n  }\n\n  pathCache.set(cacheKey, path);\n  return path;\n}\n\nfunction createNormalCurveMidPoint(\n  current: MazePathPoint,\n  next: MazePathPoint\n): THREE.Vector3 {\n  if (current.arc) {\n    const curveType = current.arc;\n\n    if (curveType === \"upperArc\") {\n      return new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n    } else if (curveType === \"lowerArc\") {\n      return new THREE.Vector3(next.pos.x, current.pos.y, current.pos.z);\n    } else if (curveType === \"forwardDownArc\") {\n      return new THREE.Vector3(current.pos.x, next.pos.y, current.pos.z);\n    }\n  }\n\n  return new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n}\n\nfunction createHomeScrollPath(\n  pathPoints: PathPoint[]\n): THREE.CurvePath<THREE.Vector3> {\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  if (pathPoints.length === 3) {\n    const curve = new THREE.QuadraticBezierCurve3(\n      pathPoints[0].pos,\n      pathPoints[1].pos,\n      pathPoints[2].pos\n    );\n    path.add(curve);\n  }\n\n  return path;\n}\n\nfunction createCameraHomeScrollPath(\n  pathPoints: CameraPathPoint[]\n): THREE.CurvePath<THREE.Vector3> {\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  if (pathPoints.length === 4) {\n    const curve = new THREE.CubicBezierCurve3(\n      pathPoints[0].pos,\n      pathPoints[1].pos,\n      pathPoints[2].pos,\n      pathPoints[3].pos\n    );\n    path.add(curve);\n  }\n\n  return path;\n}\n\nfunction createCameraPath(\n  pathPoints: CameraPathPoint[]\n): THREE.CurvePath<THREE.Vector3> {\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  for (let i = 0; i < pathPoints.length - 1; i++) {\n    const current = pathPoints[i];\n    const next = pathPoints[i + 1];\n\n    // Check if it's a MazePathPoint-like structure\n    if (\"type\" in current && current.type === \"straight\") {\n      path.add(new THREE.LineCurve3(current.pos, next.pos));\n    } else if (\n      \"type\" in current &&\n      current.type === \"curve\" &&\n      \"arc\" in current\n    ) {\n      // Create curve using existing logic\n      const midPoint = createCameraCurveMidPoint(current, next);\n      path.add(\n        new THREE.QuadraticBezierCurve3(current.pos, midPoint, next.pos)\n      );\n    } else {\n      // Default to straight line for other types\n      path.add(new THREE.LineCurve3(current.pos, next.pos));\n    }\n  }\n\n  return path;\n}\n\nfunction createCameraCurveMidPoint(\n  current: CameraPathPoint,\n  next: CameraPathPoint\n): THREE.Vector3 {\n  if (\"arc\" in current && current.arc) {\n    const curveType = current.arc;\n\n    if (curveType === \"upperArc\") {\n      return new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n    } else if (curveType === \"lowerArc\") {\n      return new THREE.Vector3(next.pos.x, current.pos.y, current.pos.z);\n    } else if (curveType === \"forwardDownArc\") {\n      return new THREE.Vector3(current.pos.x, next.pos.y, current.pos.z);\n    }\n  }\n\n  return new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n}\n\nexport function getHomePaths(): Record<string, THREE.CurvePath<THREE.Vector3>> {\n  const paths: Record<string, THREE.CurvePath<THREE.Vector3>> = {};\n\n  Object.entries(homePaths).forEach(([key, pathPoints]) => {\n    paths[key] = createMazePath(pathPoints, key);\n  });\n\n  return paths;\n}\n\n// when scrolling, this is where the ghosts are going into the void\nexport function getHomeScrollPaths(\n  pausedPositions: Record<string, THREE.Vector3>\n): Record<string, THREE.CurvePath<THREE.Vector3>> {\n  const scrollPathPoints = createHomeScrollPathPoints(pausedPositions);\n  const cameraPathPoints = getCameraHomeScrollPathPoints();\n\n  const paths: Record<string, THREE.CurvePath<THREE.Vector3>> = {\n    camera: createCameraHomeScrollPath(cameraPathPoints),\n  };\n\n  Object.entries(scrollPathPoints).forEach(([key, pathPoints]) => {\n    paths[key] = createHomeScrollPath(pathPoints);\n  });\n\n  return paths;\n}\n\nexport function getPovPaths(): Record<string, THREE.CurvePath<THREE.Vector3>> {\n  const paths: Record<string, THREE.CurvePath<THREE.Vector3>> = {};\n\n  Object.entries(povPaths).forEach(([key, pathPoints]) => {\n    if (key === \"camera\") {\n      // Camera path uses CameraPathPoint[] and needs special handling\n      paths[key] = createMazePath(pathPoints as MazePathPoint[], key);\n    } else {\n      // Ghost paths use MazePathPoint[]\n      paths[key] = createMazePath(pathPoints as MazePathPoint[], key);\n    }\n  });\n\n  return paths;\n}\n","import * as THREE from \"three\";\n\nexport function calculateObjectOrientation(\n  object: THREE.Object3D,\n  tangent: THREE.Vector3,\n  objectType: \"pacman\" | \"ghost\" | \"camera\" = \"ghost\"\n): void {\n  if (!tangent || tangent.length() === 0) return;\n\n  const targetRotation = Math.atan2(tangent.x, tangent.z);\n\n  if (objectType === \"pacman\") {\n    object.rotation.set(-(Math.PI / 2), Math.PI, -(targetRotation + Math.PI / 2));\n  } else if (objectType === \"ghost\") {\n    object.rotation.set(0, targetRotation, 0);\n  } else if (objectType === \"camera\") {\n    const lookAtPoint = object.position.clone().add(tangent);\n    object.lookAt(lookAtPoint);\n  }\n}\n\nexport function slerpToLayDown(\n  object: THREE.Object3D,\n  startQuat: THREE.Quaternion,\n  progress: number\n) {\n  const layDownQuat1 = new THREE.Quaternion().setFromEuler(\n    new THREE.Euler(Math.PI / 2, 0, 0)\n  );\n  const layDownQuat2 = new THREE.Quaternion().setFromEuler(\n    new THREE.Euler(-Math.PI / 2, 0, 0)\n  );\n\n  const d1 = startQuat.angleTo(layDownQuat1);\n  const d2 = startQuat.angleTo(layDownQuat2);\n  const targetQuat = d1 < d2 ? layDownQuat1 : layDownQuat2;\n\n  object.quaternion.copy(startQuat.clone().slerp(targetQuat, progress));\n}\n","import gsap from \"gsap\";\nimport * as THREE from \"three\";\nimport { camera } from \"../core/camera\";\nimport { ghosts, pacman } from \"../core/objects\";\nimport { getCameraHomeScrollPathPoints } from \"../paths/pathpoints\";\nimport { getHomeScrollPaths } from \"../paths/paths\";\nimport { homeLoopHandler } from \"./home-loop\";\nimport { slerpToLayDown } from \"./util\";\n\nlet homeScrollTimeline: gsap.core.Timeline | null = null;\n\nconst characterSpeeds: Record<string, number> = {\n  pacman: 0.9,\n  ghost1: 1,\n  ghost2: 1.1,\n  ghost3: 1.2,\n  ghost4: 1.3,\n  ghost5: 1.4,\n};\n\nexport function initHomeScrollAnimation(\n  pausedPositions: Record<string, THREE.Vector3>,\n  pausedRotations: Record<string, THREE.Quaternion>\n) {\n  if (homeScrollTimeline) {\n    homeScrollTimeline.kill();\n    homeScrollTimeline = null;\n  }\n\n  const scrollPaths = getHomeScrollPaths(pausedPositions);\n  const cameraPathPoints = getCameraHomeScrollPathPoints();\n\n  homeScrollTimeline = gsap\n    .timeline({\n      scrollTrigger: {\n        id: \"homeScroll\",\n        trigger: \".sc--home\",\n        start: \"top top\",\n        end: \"bottom top\",\n        scrub: 0.5,\n        onScrubComplete: () => {\n          // on scroll complete, check home loop handler\n          homeLoopHandler();\n        },\n      },\n    })\n    .to(\n      { progress: 0 },\n      {\n        progress: 1,\n        immediateRender: false,\n        onUpdate: function () {\n          const progress = this.targets()[0].progress;\n          console.log(\"home-scroll\");\n          updateScrollAnimation(\n            progress,\n            scrollPaths,\n            pausedRotations,\n            cameraPathPoints\n          );\n        },\n      }\n    );\n}\n\nfunction updateScrollAnimation(\n  progress: number,\n  paths: Record<string, THREE.CurvePath<THREE.Vector3>>,\n  pausedRotations: Record<string, THREE.Quaternion>,\n  cameraPathPoints: any[]\n) {\n  if (paths.camera) {\n    const cameraPoint = paths.camera.getPointAt(progress);\n    camera.position.copy(cameraPoint);\n\n    const lookAtCurve = new THREE.CubicBezierCurve3(\n      cameraPathPoints[0].lookAt,\n      cameraPathPoints[1].lookAt,\n      cameraPathPoints[2].lookAt,\n      cameraPathPoints[3].lookAt\n    );\n    const lookAtPoint = lookAtCurve.getPoint(progress);\n    camera.lookAt(lookAtPoint);\n    camera.updateProjectionMatrix();\n  }\n\n  const fadeStartProgress = 0.85;\n  const fadeEndProgress = 0.95;\n  const opacity =\n    progress < fadeStartProgress\n      ? 1\n      : progress > fadeEndProgress\n        ? 0\n        : 1 -\n        (progress - fadeStartProgress) / (fadeEndProgress - fadeStartProgress);\n\n  // Pacman (slowest)\n  if (paths.pacman && pacman) {\n    const pacmanSpeed = characterSpeeds[\"pacman\"] ?? 1.0;\n    const rawPacmanProgress = Math.min(progress * pacmanSpeed, 1);\n    const easedPacmanProgress = Math.pow(rawPacmanProgress, 1.25);\n    const pacmanPoint = paths.pacman.getPointAt(easedPacmanProgress);\n    if (pacmanPoint) {\n      pacman.position.copy(pacmanPoint);\n      slerpToLayDown(pacman, pausedRotations[\"pacman\"], easedPacmanProgress);\n      // Animate pacman opacity\n      pacman.traverse((child) => {\n        if ((child as any).isMesh && (child as any).material) {\n          (child as any).material.opacity = opacity;\n        }\n      });\n    }\n  }\n\n  // Ghosts (each with their own speed)\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    const path = paths[key];\n    if (path) {\n      const ghostSpeed = characterSpeeds[key] ?? 1.0;\n      const rawGhostProgress = Math.min(progress * ghostSpeed, 1);\n      const easedGhostProgress = Math.pow(rawGhostProgress, 1.25);\n      const ghostPoint = path.getPointAt(easedGhostProgress);\n      if (ghostPoint) {\n        ghost.position.copy(ghostPoint);\n        slerpToLayDown(ghost, pausedRotations[key], easedGhostProgress);\n        // Animate ghost opacity\n        if ((ghost as any).material) {\n          (ghost as any).material.opacity = opacity;\n        }\n      }\n    }\n  });\n}\n","import { ghosts, pacmanMixer } from \"../core/objects\";\nimport { getHomePaths, TangentSmoother } from \"../paths/paths\";\nimport { onFrame, clock } from \"../core/scene\";\nimport * as THREE from \"three\";\nimport { calculateObjectOrientation } from \"./util\";\nimport { initHomeScrollAnimation } from \"./home-scroll\";\n\nconst LOOP_DURATION = 50;\nlet isHomeLoopActive = true;\nlet animationTime = 0;\nlet pausedT = 0;\nlet pausedPositions: Record<string, THREE.Vector3> = {};\nlet pausedRotations: Record<string, THREE.Quaternion> = {};\nlet homeLoopFrameRegistered = false;\n\n// Tangent smoothers for home loop (separate from scroll smoothers)\nconst homeLoopTangentSmoothers: Record<string, TangentSmoother> = {};\n\n// Initialize home loop tangent smoothers\nfunction initializeHomeLoopTangentSmoothers() {\n  homeLoopTangentSmoothers.pacman = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.06);\n  homeLoopTangentSmoothers.ghost1 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.06);\n  homeLoopTangentSmoothers.ghost2 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.06);\n  homeLoopTangentSmoothers.ghost3 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.06);\n  homeLoopTangentSmoothers.ghost4 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.06);\n  homeLoopTangentSmoothers.ghost5 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.06);\n}\n\nfunction stopHomeLoop() {\n  if (!isHomeLoopActive) return;\n  isHomeLoopActive = false;\n  pausedT = (animationTime % LOOP_DURATION) / LOOP_DURATION;\n  pausedPositions = {};\n  pausedRotations = {};\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    pausedPositions[key] = ghost.position.clone();\n    pausedRotations[key] = ghost.quaternion.clone();\n  });\n  initHomeScrollAnimation(pausedPositions, pausedRotations);\n}\n\nfunction startHomeLoop() {\n  isHomeLoopActive = true;\n  animationTime = pausedT * LOOP_DURATION;\n\n  // Initialize smooth tangent smoothers for home loop\n  initializeHomeLoopTangentSmoothers();\n\n  const homePaths = getHomePaths();\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    const path = homePaths[key];\n    if (path) {\n      const position = path.getPointAt(0);\n      if (position) ghost.position.copy(position);\n      if (key !== \"pacman\") {\n        ghost.visible = true;\n        ghost.scale.set(1, 1, 1);\n      }\n\n      // Reset the smoother with initial tangent\n      if (homeLoopTangentSmoothers[key]) {\n        const initialTangent = path.getTangentAt(0);\n        if (initialTangent) {\n          homeLoopTangentSmoothers[key].reset(initialTangent);\n        }\n      }\n    }\n  });\n\n  if (!homeLoopFrameRegistered) {\n    onFrame(() => updateHomeLoop(clock.getDelta()));\n    homeLoopFrameRegistered = true;\n  }\n}\n\nfunction updateHomeLoop(delta: number) {\n  if (!isHomeLoopActive) return;\n  animationTime += delta;\n  const t = (animationTime % LOOP_DURATION) / LOOP_DURATION;\n  const homePaths = getHomePaths();\n  if (pacmanMixer) {\n    pacmanMixer.update(delta);\n  }\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    const path = homePaths[key];\n    if (path) {\n      const position = path.getPointAt(t);\n      if (position) ghost.position.copy(position);\n\n      // Apply smooth tangent-based orientation\n      if (homeLoopTangentSmoothers[key] && t > 0) {\n        const rawTangent = path.getTangentAt(t);\n        if (rawTangent && rawTangent.length() > 0) {\n          const smoothTangent = homeLoopTangentSmoothers[key].update(rawTangent);\n          const objectType = key === \"pacman\" ? \"pacman\" : \"ghost\";\n          calculateObjectOrientation(ghost, smoothTangent, objectType);\n        }\n      }\n    }\n  });\n}\n\n// when scroll is 0 - home loop is running.\n// Home= pacman and ghosts moving on their paths - scroll doesn't mattermatter\nexport function homeLoopHandler() {\n  if (window.scrollY === 0) {\n    startHomeLoop();\n  }\n}\n\nexport function setupHomeLoopScrollHandler() {\n  window.addEventListener(\"scroll\", () => {\n    if (window.scrollY !== 0) {\n      stopHomeLoop();\n    }\n  });\n}\n","import gsap from \"gsap\";\nimport * as THREE from \"three\";\nimport { camera } from \"../core/camera\";\nimport { ghosts } from \"../core/objects\";\nimport { getPovPaths, TangentSmoother } from \"../paths/paths\";\nimport { povTriggerPositions, povPaths as pathPointsData } from \"../paths/pathpoints\";\nimport { DOM_ELEMENTS } from \"../config/dom-elements\";\nimport { calculateObjectOrientation } from \"./util\";\n\nlet povScrollTimeline: gsap.core.Timeline | null = null;\n\n// Animation state\nlet isInPovSection = false;\nlet previousCameraPosition: THREE.Vector3 | null = null;\nlet animationStarted = false;\nlet rotationStarted = false;\nlet startedInitEndScreen = false;\nlet endScreenPassed = false;\nlet startEndProgress = 0;\n\n// Camera rotation constants\nconst startRotationPoint = new THREE.Vector3(0.55675, 0.55, 1.306);\nconst endRotationPoint = new THREE.Vector3(-0.14675, 1, 1.8085);\nconst targetLookAt = new THREE.Vector3(0.55675, 0.1, 1.306);\nconst finalLookAt = new THREE.Vector3(-0.14675, 0, 1.8085);\nconst reverseFinalLookAt = new THREE.Vector3(\n  7.395407041377711,\n  0.9578031302345096,\n  -4.312450290270135\n);\n\n// Animation timing constants\nconst originalFOV = 50;\nconst wideFOV = 80;\nconst startEndScreenSectionProgress = 0.8;\nconst rotationStartingPoint = 0.973;\n\n// Cached values\nlet cachedStartYAngle: number | null = null;\nlet isMovingForward = true;\n\n// Ghost trigger state\nconst ghostStates: Record<string, any> = {};\n\n// Tangent smoothers for POV scroll (separate from home loop smoothers)\nconst povTangentSmoothers: Record<string, TangentSmoother> = {};\n\n// Helper function to get custom lookAt for a specific progress\nfunction getCustomLookAtForProgress(progress: number, povPaths: Record<string, THREE.CurvePath<THREE.Vector3>>): THREE.Vector3 | null {\n  const cameraPathPoints = pathPointsData.camera;\n\n  // Define the sequence phase (first 5%) and transition phase (next 2%)\n  const sequencePhaseEnd = 0.05;\n  const transitionPhaseEnd = 0.07;\n\n  // For the very first point (progress close to 0), check for lookAtSequence\n  if (progress <= sequencePhaseEnd) { // Check first 5% of path\n    const firstPoint = cameraPathPoints[0];\n\n    // Handle lookAtSequence - cycle through multiple lookAt targets\n    if ('lookAtSequence' in firstPoint && firstPoint.lookAtSequence && firstPoint.lookAtSequence.length > 0) {\n      const sequenceProgress = progress / sequencePhaseEnd; // Normalize to 0-1 within first 5%\n      const sequenceLength = firstPoint.lookAtSequence.length;\n\n      // Calculate which lookAt target to use and interpolation\n      const segmentSize = 1 / sequenceLength;\n      const currentSegment = Math.floor(sequenceProgress / segmentSize);\n      const segmentProgress = (sequenceProgress % segmentSize) / segmentSize;\n\n      // Clamp to valid range\n      const fromIndex = Math.min(currentSegment, sequenceLength - 1);\n      const toIndex = Math.min(currentSegment + 1, sequenceLength - 1);\n\n      if (fromIndex === toIndex) {\n        // At the end, use last target\n        return firstPoint.lookAtSequence[fromIndex];\n      } else {\n        // Interpolate between current and next target for smooth transitions\n        const fromTarget = firstPoint.lookAtSequence[fromIndex];\n        const toTarget = firstPoint.lookAtSequence[toIndex];\n        return fromTarget.clone().lerp(toTarget, segmentProgress);\n      }\n    }\n  }\n\n  // Transition phase: smoothly blend from final sequence lookAt to default tangent lookAt\n  else if (progress <= transitionPhaseEnd) {\n    const firstPoint = cameraPathPoints[0];\n\n    if ('lookAtSequence' in firstPoint && firstPoint.lookAtSequence && firstPoint.lookAtSequence.length > 0) {\n      // Get the final lookAt from the sequence\n      const finalSequenceLookAt = firstPoint.lookAtSequence[firstPoint.lookAtSequence.length - 1];\n\n      // Get the default tangent-based lookAt, but constrain Y to avoid looking up\n      const position = povPaths.camera.getPointAt(progress);\n      const tangent = povPaths.camera.getTangentAt(progress).normalize();\n\n      // Constrain Y component of tangent to prevent looking up/down during transition\n      const constrainedTangent = new THREE.Vector3(tangent.x, 0, tangent.z).normalize();\n      const defaultLookAt = position.clone().add(constrainedTangent);\n\n      // Calculate transition progress (0 to 1 over the 2% transition phase)\n      const transitionProgress = (progress - sequencePhaseEnd) / (transitionPhaseEnd - sequencePhaseEnd);\n\n      // Smooth interpolation from sequence lookAt to constrained default lookAt\n      return finalSequenceLookAt.clone().lerp(defaultLookAt, transitionProgress);\n    }\n  }\n\n  return null;\n}\n\n// Initialize POV tangent smoothers\nfunction initializePovTangentSmoothers() {\n  // Camera smoother - most important for smooth user experience\n  povTangentSmoothers.camera = new TangentSmoother(new THREE.Vector3(0, 0, -1), 0.08);\n\n  // Ghost smoothers\n  povTangentSmoothers.ghost1 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.08);\n  povTangentSmoothers.ghost2 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.08);\n  povTangentSmoothers.ghost3 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.08);\n  povTangentSmoothers.ghost4 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.08);\n  povTangentSmoothers.ghost5 = new TangentSmoother(new THREE.Vector3(1, 0, 0), 0.08);\n}\n\nexport function initPovScrollAnimation() {\n  if (povScrollTimeline) {\n    povScrollTimeline.kill();\n    povScrollTimeline = null;\n  }\n\n  // Initialize tangent smoothers for POV scroll\n  initializePovTangentSmoothers();\n\n  // Initialize ghost states\n  Object.keys(povTriggerPositions).forEach((key) => {\n    ghostStates[key] = {\n      hasBeenTriggered: false,\n      hasBeenDeactivated: false,\n      triggerCameraProgress: null,\n      ghostStartFadeInProgress: null,\n      ghostEndFadeInProgress: null,\n      ghostStartFadeOutProgress: null,\n      camStartFadeInProgress: null,\n      camEndFadeInProgress: null,\n      camStartFadeOutProgress: null,\n      endCameraProgress: null,\n      currentPathT: 0,\n      ghostTextOpacity: 0,\n      camTextOpacity: 0,\n      lastProgress: 0,\n    };\n  });\n\n  povScrollTimeline = gsap\n    .timeline({\n      scrollTrigger: {\n        id: \"povScroll\",\n        trigger: DOM_ELEMENTS.povSection,\n        start: \"top bottom\",\n        end: \"bottom top\",\n        endTrigger: \".sc--final\",\n        scrub: 0.5,\n        toggleActions: \"play none none reverse\",\n        onEnter: () => {\n          isInPovSection = true;\n        },\n      },\n    })\n    .to(\n      { progress: 0 },\n      {\n        progress: 1,\n        immediateRender: false,\n        onStart: handleAnimationStart,\n        onUpdate: function (this: gsap.core.Tween) {\n          handleAnimationUpdate.call(this);\n        },\n        onReverseComplete: () => {\n          handleLeavePOV();\n          resetState(true);\n        },\n        onComplete: () => {\n          handleLeavePOV();\n          resetState();\n        },\n      }\n    );\n}\n\nfunction handleAnimationStart() {\n  const povPaths = getPovPaths();\n\n  // Reset camera tangent smoother with initial camera tangent\n  if (povTangentSmoothers.camera && povPaths.camera) {\n    const initialCameraTangent = povPaths.camera.getTangentAt(0);\n    if (initialCameraTangent) {\n      povTangentSmoothers.camera.reset(initialCameraTangent);\n    }\n  }\n\n  // Position all ghosts at start of their paths\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    if (povPaths[key] && key !== \"pacman\") {\n      const position = povPaths[key].getPointAt(0);\n      ghost.position.copy(position);\n      const tangent = povPaths[key].getTangentAt(0).normalize();\n      ghost.lookAt(position.clone().add(tangent));\n      ghost.visible = false;\n      ghost.scale.set(0.5, 0.5, 0.5);\n    }\n  });\n\n  // Hide pacman during POV section\n  if (ghosts.pacman) {\n    ghosts.pacman.visible = false;\n  }\n\n  animationStarted = true;\n}\n\nfunction handleAnimationUpdate(this: gsap.core.Tween) {\n  const overallProgress = (this.targets()[0] as any).progress;\n  console.log(overallProgress);\n  const povPaths = getPovPaths();\n\n  if (!povPaths.camera) return;\n\n  const cameraPosition = povPaths.camera.getPointAt(overallProgress);\n\n  if (previousCameraPosition) {\n    updateCamera(overallProgress, povPaths);\n    updateGhosts(cameraPosition, overallProgress, povPaths);\n    previousCameraPosition.copy(cameraPosition);\n  } else {\n    previousCameraPosition = cameraPosition.clone();\n  }\n}\n\nfunction updateCamera(progress: number, povPaths: Record<string, THREE.CurvePath<THREE.Vector3>>) {\n  const position = povPaths.camera.getPointAt(progress);\n  camera.position.copy(position);\n  camera.fov = wideFOV;\n\n  // Show canvas if hidden\n  const canvas = document.querySelector(\"canvas\") as HTMLCanvasElement;\n  if (canvas && canvas.style.display === \"none\" && progress < 0.99) {\n    canvas.style.display = \"block\";\n  }\n\n  // Check for custom lookAt at current path point\n  const customLookAt = getCustomLookAtForProgress(progress, povPaths);\n  if (customLookAt) {\n    camera.lookAt(customLookAt);\n    camera.updateProjectionMatrix();\n    return;\n  }\n\n  // Get smooth tangent for camera orientation\n  const rawTangent = povPaths.camera.getTangentAt(progress).normalize();\n  let smoothTangent = rawTangent;\n\n  if (povTangentSmoothers.camera && progress > 0) {\n    smoothTangent = povTangentSmoothers.camera.update(rawTangent);\n  }\n\n  // Constrain Y component to prevent looking up/down during early path following\n  if (progress <= 0.15) { // Extend constraint for first 15% of path\n    smoothTangent = new THREE.Vector3(smoothTangent.x, 0, smoothTangent.z).normalize();\n    console.log(`Constraining tangent at progress ${progress.toFixed(4)}:`, smoothTangent);\n  }\n\n  const defaultLookAt = position.clone().add(smoothTangent);\n\n  // Handle different camera phases\n  // if (progress === 0) {\n  //   camera.lookAt(new THREE.Vector3(camera.position.x, 2, camera.position.z));\n  // } else if (progress < 0.1) {\n  //   handleInitialTransition(progress, position);\n  // } else \n  if (progress >= rotationStartingPoint) {\n    handleRotationPhase(progress, position, defaultLookAt);\n  } else if (progress > startEndScreenSectionProgress && endScreenPassed) {\n    handleEndSequence(progress);\n  } else {\n    handleDefaultOrientation(progress, defaultLookAt);\n  }\n\n  camera.updateProjectionMatrix();\n}\n\nfunction handleInitialTransition(progress: number, position: THREE.Vector3) {\n  const transitionProgress = progress / 0.1;\n  const upLookAt = new THREE.Vector3(position.x, 1, position.z);\n  const frontLookAt = new THREE.Vector3(position.x, 0.5, position.z + 1);\n\n  const interpolatedLookAt = new THREE.Vector3();\n  interpolatedLookAt.lerpVectors(upLookAt, frontLookAt, smoothStep(transitionProgress));\n\n  camera.lookAt(interpolatedLookAt);\n}\n\nfunction handleRotationPhase(progress: number, position: THREE.Vector3, defaultLookAt: THREE.Vector3) {\n  const startRotationProgress = findClosestProgressOnPath(getPovPaths().camera, startRotationPoint);\n  const endRotationProgress = findClosestProgressOnPath(getPovPaths().camera, endRotationPoint);\n\n  if (progress >= startRotationProgress && progress <= endRotationProgress) {\n    const sectionProgress = (progress - startRotationProgress) / (endRotationProgress - startRotationProgress);\n\n    if (cachedStartYAngle === null) {\n      const startDir = new THREE.Vector2(defaultLookAt.x - position.x, defaultLookAt.z - position.z).normalize();\n      cachedStartYAngle = Math.atan2(startDir.y, startDir.x);\n      cachedStartYAngle = cachedStartYAngle > 3 ? cachedStartYAngle / 2 : cachedStartYAngle;\n    }\n\n    const targetDir = new THREE.Vector2(targetLookAt.x - position.x, targetLookAt.z - position.z).normalize();\n    let targetYAngle = Math.atan2(targetDir.y, targetDir.x);\n\n    let angleDiff = targetYAngle - cachedStartYAngle;\n    if (angleDiff > Math.PI) angleDiff -= Math.PI * 2;\n    else if (angleDiff < -Math.PI) angleDiff += Math.PI * 2;\n\n    angleDiff = -angleDiff * 1.75;\n    targetYAngle = cachedStartYAngle + angleDiff;\n\n    const easedProgress = smoothStep(sectionProgress);\n    const newYAngle = cachedStartYAngle * (1 - easedProgress) + targetYAngle * easedProgress;\n\n    const radius = 1.0;\n    const newLookAt = new THREE.Vector3(\n      position.x + Math.cos(newYAngle) * radius,\n      position.y,\n      position.z + Math.sin(newYAngle) * radius\n    );\n\n    camera.lookAt(newLookAt);\n    rotationStarted = true;\n\n    if (progress >= startEndScreenSectionProgress && !startedInitEndScreen) {\n      startedInitEndScreen = true;\n      initEndScreen();\n    }\n  }\n}\n\nfunction handleEndSequence(progress: number) {\n  if (startEndProgress === 0 && progress !== 1) {\n    const truncatedProgress = Math.floor(progress * 100) / 100;\n    startEndProgress = truncatedProgress === 0.99 ? rotationStartingPoint : progress;\n  }\n\n  const animationProgress = (progress - startEndProgress) / (1 - startEndProgress);\n\n  if (isMovingForward && animationProgress > 0) {\n    const currentLookAt = getCameraLookAtPoint();\n    const interpolatedLookAt = new THREE.Vector3().lerpVectors(\n      currentLookAt,\n      finalLookAt,\n      smoothStep(animationProgress)\n    );\n\n    const startFOV = wideFOV;\n    const targetFOV = wideFOV / 4;\n    camera.fov = startFOV + (targetFOV - startFOV) * smoothStep(animationProgress);\n\n    camera.lookAt(interpolatedLookAt);\n  } else if (animationProgress > 0) {\n    const interpolatedLookAt = new THREE.Vector3().lerpVectors(\n      reverseFinalLookAt,\n      finalLookAt,\n      smoothStep(animationProgress)\n    );\n\n    const startFOV = wideFOV / 4;\n    const targetFOV = wideFOV;\n    camera.fov = targetFOV - (targetFOV - startFOV) * smoothStep(animationProgress);\n\n    camera.lookAt(interpolatedLookAt);\n  }\n}\n\nfunction handleDefaultOrientation(progress: number, defaultLookAt: THREE.Vector3) {\n  const startRotationProgress = findClosestProgressOnPath(getPovPaths().camera, startRotationPoint);\n  const endRotationProgress = findClosestProgressOnPath(getPovPaths().camera, endRotationPoint);\n\n  if ((progress < startRotationProgress || progress > endRotationProgress) && !startedInitEndScreen) {\n    cachedStartYAngle = null;\n    rotationStarted = false;\n    endScreenPassed = false;\n    startedInitEndScreen = false;\n\n    const finalSection = document.querySelector(\".sc--final.sc\") as HTMLElement;\n    if (finalSection) {\n      finalSection.style.opacity = \"0\";\n    }\n  }\n\n  if (!rotationStarted && !startedInitEndScreen) {\n    camera.lookAt(defaultLookAt);\n  }\n\n  if (!(endScreenPassed && progress > 0.8)) {\n    startEndProgress = 0;\n  }\n}\n\nfunction updateGhosts(\n  cameraPosition: THREE.Vector3,\n  overallProgress: number,\n  povPaths: Record<string, THREE.CurvePath<THREE.Vector3>>\n) {\n  Object.entries(povTriggerPositions).forEach(([key, triggerData]) => {\n    const ghost = ghosts[key];\n    const path = povPaths[key];\n\n    if (!ghost || !path || key === \"pacman\") return;\n\n    updateGhost(key, ghost, path, cameraPosition, triggerData);\n  });\n}\n\nfunction updateGhost(\n  key: string,\n  ghost: THREE.Object3D,\n  path: THREE.CurvePath<THREE.Vector3>,\n  cameraPosition: THREE.Vector3,\n  triggerData: any\n) {\n  const { triggerPos, ghostStartFadeIn, ghostEndFadeIn, ghostStartFadeOut, camStartFadeIn, camEndFadeIn, camStartFadeOut, endPosition } = triggerData;\n  const state = ghostStates[key];\n\n  // Get DOM elements specific to this ghost\n  const parentElements = document.querySelectorAll(\".cmp--pov.cmp\");\n  const ghostIndex = parseInt(key.replace(\"ghost\", \"\")) - 1;\n  const parent = parentElements[ghostIndex] as HTMLElement;\n\n  if (!parent) return;\n\n  // Get POV and CAM elements specifically within this ghost's parent container\n  const povElements = parent.querySelectorAll(\".pov\");\n  const camElements = parent.querySelectorAll(\".cam\");\n\n  if (!povElements || !camElements || povElements.length === 0 || camElements.length === 0) return;\n\n  // Initialize state if needed\n  if (state.triggerCameraProgress === null) {\n    state.triggerCameraProgress = findClosestProgressOnPath(getPovPaths().camera, triggerPos, 800);\n    state.ghostStartFadeInProgress = findClosestProgressOnPath(getPovPaths().camera, ghostStartFadeIn, 800);\n    state.ghostEndFadeInProgress = findClosestProgressOnPath(getPovPaths().camera, ghostEndFadeIn, 800);\n    state.ghostStartFadeOutProgress = findClosestProgressOnPath(getPovPaths().camera, ghostStartFadeOut, 800);\n    state.camStartFadeInProgress = findClosestProgressOnPath(getPovPaths().camera, camStartFadeIn, 800);\n    state.camEndFadeInProgress = findClosestProgressOnPath(getPovPaths().camera, camEndFadeIn, 800);\n    state.camStartFadeOutProgress = findClosestProgressOnPath(getPovPaths().camera, camStartFadeOut, 800);\n    state.endCameraProgress = findClosestProgressOnPath(getPovPaths().camera, endPosition, 800);\n  }\n\n  const currentCameraProgress = findClosestProgressOnPath(getPovPaths().camera, cameraPosition, 800);\n\n  // Update ghost visibility and position\n  if (currentCameraProgress >= state.triggerCameraProgress && currentCameraProgress <= state.endCameraProgress) {\n    if (!ghost.visible) {\n      ghost.visible = true;\n      state.hasBeenTriggered = true;\n\n      // Reset tangent smoother with initial tangent when ghost becomes visible\n      if (povTangentSmoothers[key]) {\n        const initialTangent = path.getTangentAt(0);\n        if (initialTangent) {\n          povTangentSmoothers[key].reset(initialTangent);\n        }\n      }\n    }\n\n    // Update ghost position\n    const normalizedProgress = (currentCameraProgress - state.triggerCameraProgress) /\n      (state.endCameraProgress - state.triggerCameraProgress);\n    let ghostProgress = Math.max(0, Math.min(1, normalizedProgress));\n\n    // Smooth the parameter\n    if (state.currentPathT === undefined) {\n      state.currentPathT = ghostProgress;\n    } else {\n      const parameterSmoothingFactor = 0.1;\n      state.currentPathT += (ghostProgress - state.currentPathT) * parameterSmoothingFactor;\n    }\n\n    ghostProgress = state.currentPathT;\n\n    // Update ghost position and rotation\n    const pathPoint = path.getPointAt(ghostProgress);\n    ghost.position.copy(pathPoint);\n\n    // Apply smooth tangent-based orientation\n    if (povTangentSmoothers[key] && ghostProgress > 0) {\n      const rawTangent = path.getTangentAt(ghostProgress);\n      if (rawTangent && rawTangent.length() > 0) {\n        const smoothTangent = povTangentSmoothers[key].update(rawTangent);\n        calculateObjectOrientation(ghost, smoothTangent, \"ghost\");\n      }\n    }\n\n    // Handle fade out at the end\n    if (ghostProgress > 0.9) {\n      const mesh = ghost as THREE.Mesh;\n      if (mesh.material && 'opacity' in mesh.material) {\n        (mesh.material as THREE.Material & { opacity: number }).opacity = 1 - (ghostProgress - 0.9) / 0.1;\n      }\n    } else {\n      const mesh = ghost as THREE.Mesh;\n      if (mesh.material && 'opacity' in mesh.material) {\n        (mesh.material as THREE.Material & { opacity: number }).opacity = 1;\n      }\n    }\n  } else {\n    ghost.visible = false;\n    state.hasBeenTriggered = false;\n  }\n\n  // Update text visibility\n  updateTextVisibility(key, currentCameraProgress, state, parent, povElements, camElements);\n}\n\nfunction updateTextVisibility(\n  key: string,\n  currentCameraProgress: number,\n  state: any,\n  parent: HTMLElement,\n  povElements: NodeListOf<Element>,\n  camElements: NodeListOf<Element>\n) {\n  // Calculate target opacities using precise fade timing positions\n  let targetGhostOpacity = 0;\n  let targetCamOpacity = 0;\n\n  // Ghost text fade in (ghostStartFadeIn -> ghostEndFadeIn)\n  if (currentCameraProgress >= state.ghostStartFadeInProgress && currentCameraProgress <= state.ghostEndFadeInProgress) {\n    const fadeProgress = (currentCameraProgress - state.ghostStartFadeInProgress) /\n      (state.ghostEndFadeInProgress - state.ghostStartFadeInProgress);\n    targetGhostOpacity = Math.min(1, fadeProgress);\n    parent.style.opacity = targetGhostOpacity.toString();\n  }\n  // Ghost text stays fully visible (ghostEndFadeIn -> ghostStartFadeOut)\n  else if (currentCameraProgress > state.ghostEndFadeInProgress && currentCameraProgress < state.ghostStartFadeOutProgress) {\n    targetGhostOpacity = 1;\n  }\n  // Ghost text fade out (ghostStartFadeOut -> camStartFadeIn) - finishes exactly when cam starts fading in\n  else if (currentCameraProgress >= state.ghostStartFadeOutProgress && currentCameraProgress <= state.camStartFadeInProgress) {\n    const fadeOutProgress = (currentCameraProgress - state.ghostStartFadeOutProgress) /\n      (state.camStartFadeInProgress - state.ghostStartFadeOutProgress);\n    targetGhostOpacity = Math.max(0, 1 - fadeOutProgress);\n  }\n\n  // CAM text fade in (camStartFadeIn -> camEndFadeIn)\n  if (currentCameraProgress >= state.camStartFadeInProgress && currentCameraProgress <= state.camEndFadeInProgress) {\n    const fadeProgress = (currentCameraProgress - state.camStartFadeInProgress) /\n      (state.camEndFadeInProgress - state.camStartFadeInProgress);\n    targetCamOpacity = Math.min(1, fadeProgress);\n  }\n  // CAM text stays visible (camEndFadeIn -> camStartFadeOut)\n  else if (currentCameraProgress > state.camEndFadeInProgress && currentCameraProgress < state.camStartFadeOutProgress) {\n    targetCamOpacity = 1;\n  }\n  // CAM text fade out (camStartFadeOut -> endPosition)\n  else if (currentCameraProgress >= state.camStartFadeOutProgress && currentCameraProgress <= state.endCameraProgress) {\n    const fadeOutProgress = (currentCameraProgress - state.camStartFadeOutProgress) /\n      (state.endCameraProgress - state.camStartFadeOutProgress);\n    targetCamOpacity = Math.max(0, 1 - fadeOutProgress);\n    parent.style.opacity = targetCamOpacity.toString();\n  }\n\n  const isPassed = targetCamOpacity > 0.01 && targetGhostOpacity > 0.01;\n\n  if (isPassed) {\n    if (!parent.classList.contains(\"no-visibility\")) {\n      parent.classList.add(\"no-visibility\");\n    }\n  } else {\n    if (!parent.classList.contains(\"no-visibility\")) {\n      parent.classList.remove(\"no-visibility\");\n    }\n  }\n\n  // Update all POV elements (ghost text)\n  povElements.forEach((povElement) => {\n    const element = povElement as HTMLElement;\n    if (targetGhostOpacity > 0.01) {\n      element.classList.remove(\"no-visibility\");\n      element.style.opacity = targetGhostOpacity.toString();\n    } else if (targetGhostOpacity <= 0.01 && !element.classList.contains(\"no-visibility\")) {\n      element.classList.add(\"no-visibility\");\n      element.style.opacity = \"0\";\n    }\n  });\n\n  // Update all CAM elements\n  camElements.forEach((camElement) => {\n    const element = camElement as HTMLElement;\n    if (targetCamOpacity > 0.01) {\n      element.classList.remove(\"no-visibility\");\n      element.style.opacity = targetCamOpacity.toString();\n    } else if (targetCamOpacity <= 0.01 && !element.classList.contains(\"no-visibility\")) {\n      element.classList.add(\"no-visibility\");\n      element.style.opacity = \"0\";\n    }\n  });\n}\n\nfunction handleLeavePOV() {\n  isInPovSection = false;\n\n  console.log(\"handleLeavePOV\");\n\n  // Reset all ghost states\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    if (key !== \"pacman\") {\n      ghost.visible = false;\n\n      const ghostIndex = parseInt(key.replace(\"ghost\", \"\")) - 1;\n      const parentElements = document.querySelectorAll(\".cmp--pov.cmp\");\n      const parent = parentElements[ghostIndex] as HTMLElement;\n\n      if (parent) {\n        // Hide all POV and CAM elements\n        const povElements = document.querySelectorAll(\".pov\");\n        const camElements = document.querySelectorAll(\".cam\");\n\n        povElements.forEach((povElement) => {\n          const element = povElement as HTMLElement;\n          element.classList.add(\"no-visibility\");\n          element.style.opacity = \"0\";\n        });\n\n        camElements.forEach((camElement) => {\n          const element = camElement as HTMLElement;\n          element.classList.add(\"no-visibility\");\n          element.style.opacity = \"0\";\n        });\n      }\n\n      if (!parent.classList.contains(\"no-visibility\")) {\n        parent.classList.add(\"no-visibility\");\n      }\n\n      // Reset ghost material opacity\n      const mesh = ghost as THREE.Mesh;\n      if (mesh.material && 'opacity' in mesh.material) {\n        (mesh.material as THREE.Material & { opacity: number }).opacity = 1;\n      }\n    }\n  });\n\n  // Show pacman again\n  if (ghosts.pacman) {\n    ghosts.pacman.visible = true;\n  }\n\n  // Reset camera\n  camera.fov = originalFOV;\n  camera.updateProjectionMatrix();\n\n  // Reset tangent smoothers\n  Object.keys(povTangentSmoothers).forEach((key) => {\n    if (povTangentSmoothers[key]) {\n      const resetVector = key === \"camera\" ? new THREE.Vector3(0, 0, -1) : new THREE.Vector3(1, 0, 0);\n      povTangentSmoothers[key].reset(resetVector);\n    }\n  });\n}\n\nfunction resetState(isReverse: boolean = false) {\n  // Reset camera state\n  if (ghosts.pacman) {\n    ghosts.pacman.visible = true;\n  }\n\n  rotationStarted = false;\n  cachedStartYAngle = null;\n  startEndProgress = 0;\n  startedInitEndScreen = false;\n\n  if (!isReverse) {\n    const canvas = document.querySelector(\"canvas\") as HTMLCanvasElement;\n    if (canvas) {\n      canvas.style.display = \"none\";\n    }\n    camera.lookAt(finalLookAt);\n    endScreenPassed = true;\n  } else {\n    endScreenPassed = false;\n  }\n\n  // Reset all ghost states\n  Object.keys(ghostStates).forEach((key) => {\n    ghostStates[key] = {\n      hasBeenTriggered: false,\n      hasBeenDeactivated: false,\n      triggerCameraProgress: null,\n      ghostStartFadeInProgress: null,\n      ghostEndFadeInProgress: null,\n      ghostStartFadeOutProgress: null,\n      camStartFadeInProgress: null,\n      camEndFadeInProgress: null,\n      camStartFadeOutProgress: null,\n      endCameraProgress: null,\n      currentPathT: 0,\n      ghostTextOpacity: 0,\n      camTextOpacity: 0,\n      lastProgress: 0,\n    };\n\n    // Reset tangent smoothers\n    if (povTangentSmoothers[key]) {\n      povTangentSmoothers[key].reset(new THREE.Vector3(1, 0, 0));\n    }\n  });\n\n  // Reset camera tangent smoother\n  if (povTangentSmoothers.camera) {\n    povTangentSmoothers.camera.reset(new THREE.Vector3(0, 0, -1));\n  }\n}\n\nfunction initEndScreen() {\n  const finalSection = document.querySelector(\".sc--final.sc\") as HTMLElement;\n  if (!finalSection) return;\n\n  const tl = gsap.timeline({\n    scrollTrigger: {\n      trigger: \".sc--final\",\n      start: \"top top\",\n      end: \"bottom bottom\",\n      scrub: 0.5,\n      toggleActions: \"play none none reverse\",\n    },\n  });\n\n  tl.to(finalSection, {\n    opacity: 1,\n    ease: \"power2.inOut\",\n    onComplete: () => {\n      endScreenPassed = true;\n      startedInitEndScreen = false;\n    },\n  });\n}\n\n// Utility functions\nfunction smoothStep(x: number): number {\n  return x * x * (3 - 2 * x);\n}\n\nfunction getCameraLookAtPoint(): THREE.Vector3 {\n  const direction = new THREE.Vector3(0, 0, -1);\n  direction.applyQuaternion(camera.quaternion);\n  const lookAtPoint = new THREE.Vector3();\n  lookAtPoint.copy(camera.position).add(direction.multiplyScalar(10));\n  return lookAtPoint;\n}\n\nfunction findClosestProgressOnPath(\n  path: THREE.CurvePath<THREE.Vector3>,\n  targetPoint: THREE.Vector3,\n  samples: number = 2000\n): number {\n  if (!path || !targetPoint) return 0;\n\n  let closestProgress = 0;\n  let closestDistance = Infinity;\n\n  for (let i = 0; i < samples; i++) {\n    try {\n      const t = i / (samples - 1);\n      const pointOnPath = path.getPointAt(t);\n      if (!pointOnPath) continue;\n\n      const distance = pointOnPath.distanceTo(targetPoint);\n      if (distance < closestDistance) {\n        closestDistance = distance;\n        closestProgress = t;\n      }\n    } catch (error) {\n      // Continue on error\n    }\n  }\n\n  return closestProgress;\n}\n\n// Track scroll direction\nlet oldTop = 0;\nwindow.addEventListener(\"scroll\", () => {\n  const top = window.scrollY;\n  isMovingForward = top > oldTop;\n  oldTop = top;\n});\n","import {\n  startRenderLoop,\n  initRenderer,\n  setupLighting,\n  scene,\n} from \"./core/scene\";\nimport {\n  homeLoopHandler,\n  setupHomeLoopScrollHandler,\n} from \"./animation/home-loop\";\nimport { initPovScrollAnimation } from \"./animation/pov-scroll\";\nimport { loadModel } from \"./core/objects\";\nimport { setupCamera, camera } from \"./core/camera\";\nimport * as THREE from \"three\";\nimport { X, XCoordKey, Z, ZCoordKey } from \"./paths/coordinates\";\n\n// Declare global window interface for debug commands\ndeclare global {\n  interface Window {\n    lookAt: (x: XCoordKey, y: number, z: ZCoordKey) => void;\n  }\n}\n\nasync function main() {\n  initRenderer();\n  setupLighting();\n  setupCamera();\n  await loadModel(scene);\n\n  homeLoopHandler();\n  setupHomeLoopScrollHandler();\n\n  initPovScrollAnimation();\n\n  // Add public window command for setting camera lookAt\n  window.lookAt = (x: XCoordKey, y: number, z: ZCoordKey) => {\n    const lookAtTarget = new THREE.Vector3(X[x], y, Z[z]);\n    camera.lookAt(lookAtTarget);\n    console.log(`Camera now looking at: (${x}, ${y}, ${z})`);\n  };\n\n  console.log(\"Debug commands available:\");\n  console.log(\"- window.lookAt(x, y, z) - Set camera lookAt direction\");\n\n  startRenderLoop();\n}\n\nmain();\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","THREE","isMobile","window","innerWidth","DOM_ELEMENTS","mazeContainer","document","querySelector","canvas","homeSection","introSection","povSection","finalSection","finalContainer","parentElements","querySelectorAll","gsap","ScrollTrigger","X","Z","getCoord","x","z","Vector3","objectHomeScrollEndPathPoint","cameraPathPointsConfig","startMobile","startDesktop","secondMobile","secondDesktop","mobileLookAt","desktopLookAt","cameraLookAtSecondDesktop","cameraLookAtSecondMobile","cameraHomeScrollEndLookAt","thirdPosition","cameraHomeScrollEndPathPoint","startPosition","secondPosition","lookAtPosition","cameraLookAtSecondPosition","pacmanHomePathPoints","pos","type","arc","curveCheckPoints","ghost1HomePathPoints","ghost2HomePathPoints","ghost3HomePathPoints","ghost4HomePathPoints","ghost5HomePathPoints","cameraHomeScrollPathPoints","lookAt","cameraPOVPathPoints","lookAtSequence","ghost1POVPathPoints","ghost2POVPathPoints","ghost3POVPathPoints","ghost4POVPathPoints","ghost5POVPathPoints","povTriggerPositions","ghost1","triggerPos","ghostStartFadeIn","ghostEndFadeIn","ghostStartFadeOut","camStartFadeIn","camEndFadeIn","camStartFadeOut","endPosition","ghost2","ghost3","ghost4","ghost5","getStartPosition","getLookAtPosition","homePaths","pacman","camera","getCameraHomeScrollPathPoints","innerHeight","scene","renderer","antialias","alpha","powerPreference","precision","clock","frameCallbacks","setPixelRatio","pixelRatio","Math","min","devicePixelRatio","setSize","clientWidth","clientHeight","aspect","updateProjectionMatrix","mazeTexture","load","mazeMaterial","matcap","topMaterial","color","metalness","roughness","envMapIntensity","ghostMaterial","opacity","transparent","depthWrite","depthTest","blending","side","transmission","floorMaterial","pacmanMaterials","blue","white","default","materialMap","CAM_Pacman_Backframe","CAM_Pacman_Logo_1","CAM_Pacman_Logo_2","loader","pacmanMixer","ghosts","ghostContainers","Ghost_EUR","Ghost_CHF","Ghost_YEN","Ghost_USD","Ghost_GBP","pathCache","Map","TangentSmoother","constructor","initialTangent","smoothing","this","currentTangent","clone","update","targetTangent","lerp","normalize","reset","newTangent","copy","setSmoothingFactor","max","createMazePath","pathPoints","pathName","cacheKey","map","p","y","join","has","path","i","length","current","next","catmullPoints","console","log","add","midPoint","createNormalCurveMidPoint","set","curveType","createCameraHomeScrollPath","curve","getHomePaths","paths","entries","forEach","getPovPaths","calculateObjectOrientation","object","tangent","objectType","targetRotation","atan2","rotation","PI","lookAtPoint","position","slerpToLayDown","startQuat","progress","layDownQuat1","setFromEuler","layDownQuat2","targetQuat","angleTo","quaternion","slerp","homeScrollTimeline","characterSpeeds","initHomeScrollAnimation","pausedPositions","pausedRotations","kill","scrollPaths","scrollPathPoints","pausedPos","arcPoint","createHomeScrollPathPoints","createHomeScrollPath","getHomeScrollPaths","cameraPathPoints","scrollTrigger","id","trigger","start","end","scrub","onScrubComplete","homeLoopHandler","to","immediateRender","onUpdate","targets","cameraPoint","getPointAt","getPoint","fadeStartProgress","pacmanSpeed","rawPacmanProgress","easedPacmanProgress","pow","pacmanPoint","traverse","child","isMesh","material","ghost","ghostSpeed","rawGhostProgress","easedGhostProgress","ghostPoint","updateScrollAnimation","LOOP_DURATION","isHomeLoopActive","animationTime","pausedT","homeLoopFrameRegistered","homeLoopTangentSmoothers","scrollY","callback","visible","scale","getTangentAt","delta","t","rawTangent","updateHomeLoop","getDelta","push","startHomeLoop","povScrollTimeline","isInPovSection","previousCameraPosition","animationStarted","rotationStarted","startedInitEndScreen","endScreenPassed","startEndProgress","startRotationPoint","endRotationPoint","targetLookAt","finalLookAt","reverseFinalLookAt","cachedStartYAngle","isMovingForward","ghostStates","povTangentSmoothers","initPovScrollAnimation","keys","hasBeenTriggered","hasBeenDeactivated","triggerCameraProgress","ghostStartFadeInProgress","ghostEndFadeInProgress","ghostStartFadeOutProgress","camStartFadeInProgress","camEndFadeInProgress","camStartFadeOutProgress","endCameraProgress","currentPathT","ghostTextOpacity","camTextOpacity","lastProgress","endTrigger","toggleActions","onEnter","onStart","handleAnimationStart","handleAnimationUpdate","onReverseComplete","handleLeavePOV","resetState","onComplete","povPaths","initialCameraTangent","overallProgress","cameraPosition","fov","style","display","customLookAt","sequencePhaseEnd","firstPoint","sequenceProgress","sequenceLength","segmentSize","currentSegment","floor","segmentProgress","fromIndex","toIndex","fromTarget","toTarget","finalSequenceLookAt","constrainedTangent","defaultLookAt","transitionProgress","getCustomLookAtForProgress","smoothTangent","toFixed","startRotationProgress","findClosestProgressOnPath","endRotationProgress","sectionProgress","startDir","targetDir","targetYAngle","angleDiff","easedProgress","smoothStep","newYAngle","radius","newLookAt","cos","sin","ease","initEndScreen","handleRotationPhase","truncatedProgress","animationProgress","currentLookAt","direction","applyQuaternion","multiplyScalar","getCameraLookAtPoint","interpolatedLookAt","lerpVectors","startFOV","targetFOV","wideFOV","handleEndSequence","handleDefaultOrientation","updateCamera","triggerData","state","parent","parseInt","replace","povElements","camElements","currentCameraProgress","normalizedProgress","ghostProgress","undefined","parameterSmoothingFactor","pathPoint","mesh","targetGhostOpacity","targetCamOpacity","fadeProgress","toString","fadeOutProgress","classList","contains","remove","povElement","element","camElement","updateTextVisibility","updateGhost","updateGhosts","ghostIndex","resetVector","isReverse","targetPoint","samples","closestProgress","closestDistance","Infinity","pointOnPath","distance","distanceTo","error","oldTop","addEventListener","top","async","shadowMap","enabled","appendChild","domElement","body","render","ambientLight","directionalLight","shadow","mapSize","width","height","left","right","bottom","near","far","bias","castShadow","setupLighting","setupCamera","values","Promise","resolve","reject","gltf","model","name","children","subChild","item","pacmanActions","animations","clip","action","clipAction","getMixer","e","getRoot","userData","skipAnimation","updateMorphTargets","setEffectiveWeight","play","ghostContainer","ghostGroup","startsWith","includes","warn","clonedChild","receiveShadow","node","loadModel","lookAtTarget","requestAnimationFrame","startRenderLoop","main"],"sourceRoot":""}