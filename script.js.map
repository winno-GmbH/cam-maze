{"version":3,"file":"script.js","mappings":"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","sources":["webpack://cam-3d-animation/./src/core/performance-profiler.ts","webpack://cam-3d-animation/webpack/bootstrap","webpack://cam-3d-animation/webpack/runtime/compat get default export","webpack://cam-3d-animation/webpack/runtime/define property getters","webpack://cam-3d-animation/webpack/runtime/hasOwnProperty shorthand","webpack://cam-3d-animation/webpack/runtime/make namespace object","webpack://cam-3d-animation/external var \"THREE\"","webpack://cam-3d-animation/./src/config/config.ts","webpack://cam-3d-animation/./src/animation/constants.ts","webpack://cam-3d-animation/./src/config/dom-elements.ts","webpack://cam-3d-animation/./src/paths/coordinates.ts","webpack://cam-3d-animation/./src/paths/pathpoints.ts","webpack://cam-3d-animation/./src/core/camera.ts","webpack://cam-3d-animation/./src/core/scene.ts","webpack://cam-3d-animation/./src/core/performance-monitor.ts","webpack://cam-3d-animation/external var \"ScrollTrigger\"","webpack://cam-3d-animation/./src/core/materials.ts","webpack://cam-3d-animation/./src/core/objects.ts","webpack://cam-3d-animation/./src/paths/paths.ts","webpack://cam-3d-animation/external var \"gsap\"","webpack://cam-3d-animation/./src/animation/util.ts","webpack://cam-3d-animation/./src/core/material-utils.ts","webpack://cam-3d-animation/./src/animation/scene-utils.ts","webpack://cam-3d-animation/./src/animation/scene-presets.ts","webpack://cam-3d-animation/./src/core/object-pool.ts","webpack://cam-3d-animation/./src/animation/object-state.ts","webpack://cam-3d-animation/./src/animation/home-scroll.ts","webpack://cam-3d-animation/./src/paths/path-cache.ts","webpack://cam-3d-animation/./src/animation/home-loop.ts","webpack://cam-3d-animation/./src/core/throttle.ts","webpack://cam-3d-animation/./src/animation/pov-scroll.ts","webpack://cam-3d-animation/./src/animation/intro-scroll.ts","webpack://cam-3d-animation/./src/animation/outro-scroll.ts","webpack://cam-3d-animation/./src/main.ts"],"sourcesContent":["interface ProfileEntry {\n  name: string;\n  totalTime: number;\n  callCount: number;\n  maxTime: number;\n  minTime: number;\n}\n\nclass PerformanceProfiler {\n  private profiles: Map<string, ProfileEntry> = new Map();\n  private activeTimers: Map<string, number> = new Map();\n  private enabled: boolean = true;\n  private reportInterval: number = 5000;\n  private lastReportTime: number = 0;\n  private displayElement: HTMLDivElement | null = null;\n\n  constructor() {\n    this.lastReportTime = performance.now();\n    if (typeof window !== \"undefined\") {\n      (window as any).enableProfiler = () => this.enable();\n      (window as any).disableProfiler = () => this.disable();\n      (window as any).resetProfiler = () => this.reset();\n      (window as any).getProfilerStats = () => this.getStats();\n    }\n  }\n\n  enable(): void {\n    this.enabled = true;\n    this.createDisplay();\n    console.log(\"Performance Profiler enabled\");\n  }\n\n  disable(): void {\n    this.enabled = false;\n    if (this.displayElement) {\n      this.displayElement.remove();\n      this.displayElement = null;\n    }\n    console.log(\"Performance Profiler disabled\");\n  }\n\n  start(name: string): void {\n    if (!this.enabled) return;\n    this.activeTimers.set(name, performance.now());\n  }\n\n  end(name: string): void {\n    if (!this.enabled) return;\n    const startTime = this.activeTimers.get(name);\n    if (startTime === undefined) return;\n\n    const duration = performance.now() - startTime;\n    this.activeTimers.delete(name);\n\n    let entry = this.profiles.get(name);\n    if (!entry) {\n      entry = {\n        name,\n        totalTime: 0,\n        callCount: 0,\n        maxTime: 0,\n        minTime: Infinity,\n      };\n      this.profiles.set(name, entry);\n    }\n\n    entry.totalTime += duration;\n    entry.callCount++;\n    entry.maxTime = Math.max(entry.maxTime, duration);\n    entry.minTime = Math.min(entry.minTime, duration);\n\n    const now = performance.now();\n    if (now - this.lastReportTime >= this.reportInterval) {\n      this.report();\n      this.lastReportTime = now;\n    }\n  }\n\n  measure<T>(name: string, fn: () => T): T {\n    this.start(name);\n    try {\n      return fn();\n    } finally {\n      this.end(name);\n    }\n  }\n\n  private report(): void {\n    const entries = Array.from(this.profiles.values())\n      .sort((a, b) => b.totalTime - a.totalTime)\n      .slice(0, 20);\n\n    console.group(\" Performance Profiler Report\");\n    console.table(\n      entries.map((entry) => ({\n        Name: entry.name,\n        \"Total Time (ms)\": entry.totalTime.toFixed(2),\n        Calls: entry.callCount,\n        \"Avg Time (ms)\": (entry.totalTime / entry.callCount).toFixed(3),\n        \"Max Time (ms)\": entry.maxTime.toFixed(3),\n        \"Min Time (ms)\": entry.minTime.toFixed(3),\n        \"% of Total\": (\n          (entry.totalTime / this.getTotalTime()) *\n          100\n        ).toFixed(1),\n      }))\n    );\n    console.groupEnd();\n\n    this.updateDisplay(entries);\n  }\n\n  private getTotalTime(): number {\n    return Array.from(this.profiles.values()).reduce(\n      (sum, entry) => sum + entry.totalTime,\n      0\n    );\n  }\n\n  private createDisplay(): void {\n    if (this.displayElement) return;\n\n    this.displayElement = document.createElement(\"div\");\n    this.displayElement.id = \"performance-profiler-display\";\n    this.displayElement.style.cssText = `\n      position: fixed;\n      bottom: 10px;\n      left: 10px;\n      background: rgba(0, 0, 0, 0.9);\n      color: #0f0;\n      font-family: monospace;\n      font-size: 11px;\n      padding: 10px;\n      border-radius: 5px;\n      max-width: 500px;\n      max-height: 400px;\n      overflow-y: auto;\n      z-index: 10000;\n      border: 2px solid #0f0;\n    `;\n    document.body.appendChild(this.displayElement);\n  }\n\n  private updateDisplay(entries: ProfileEntry[]): void {\n    if (!this.displayElement) return;\n\n    const totalTime = this.getTotalTime();\n    const html = `\n      <div style=\"font-weight: bold; margin-bottom: 10px; color: #0ff;\">\n        Performance Profiler (Last 5s)\n      </div>\n      <table style=\"width: 100%; border-collapse: collapse;\">\n        <thead>\n          <tr style=\"border-bottom: 1px solid #0f0;\">\n            <th style=\"text-align: left; padding: 4px;\">Name</th>\n            <th style=\"text-align: right; padding: 4px;\">Avg (ms)</th>\n            <th style=\"text-align: right; padding: 4px;\">Total (ms)</th>\n            <th style=\"text-align: right; padding: 4px;\">%</th>\n            <th style=\"text-align: right; padding: 4px;\">Calls</th>\n          </tr>\n        </thead>\n        <tbody>\n          ${entries\n            .map(\n              (entry) => `\n            <tr style=\"border-bottom: 1px solid #333;\">\n              <td style=\"padding: 2px;\">${entry.name}</td>\n              <td style=\"text-align: right; padding: 2px; color: ${\n                entry.totalTime / entry.callCount > 5 ? \"#f00\" : \"#0f0\"\n              }\">\n                ${(entry.totalTime / entry.callCount).toFixed(2)}\n              </td>\n              <td style=\"text-align: right; padding: 2px;\">\n                ${entry.totalTime.toFixed(1)}\n              </td>\n              <td style=\"text-align: right; padding: 2px; color: ${\n                (entry.totalTime / totalTime) * 100 > 10 ? \"#ff0\" : \"#0f0\"\n              }\">\n                ${((entry.totalTime / totalTime) * 100).toFixed(1)}%\n              </td>\n              <td style=\"text-align: right; padding: 2px;\">\n                ${entry.callCount}\n              </td>\n            </tr>\n          `\n            )\n            .join(\"\")}\n        </tbody>\n      </table>\n      <div style=\"margin-top: 10px; font-size: 10px; color: #888;\">\n        Total: ${totalTime.toFixed(1)}ms | \n        <button onclick=\"window.disableProfiler()\" style=\"background: #f00; color: #fff; border: none; padding: 2px 6px; cursor: pointer; border-radius: 3px;\">Disable</button>\n        <button onclick=\"window.resetProfiler()\" style=\"background: #ff0; color: #000; border: none; padding: 2px 6px; cursor: pointer; border-radius: 3px; margin-left: 5px;\">Reset</button>\n      </div>\n    `;\n    this.displayElement.innerHTML = html;\n  }\n\n  reset(): void {\n    this.profiles.clear();\n    this.activeTimers.clear();\n    this.lastReportTime = performance.now();\n    if (this.displayElement) {\n      this.displayElement.innerHTML = \"<div>Profiler reset. Waiting for data...</div>\";\n    }\n    console.log(\"Performance Profiler reset\");\n  }\n\n  getStats(): Record<string, any> {\n    const entries = Array.from(this.profiles.values());\n    return {\n      totalTime: this.getTotalTime(),\n      entries: entries.map((entry) => ({\n        name: entry.name,\n        totalTime: entry.totalTime,\n        callCount: entry.callCount,\n        avgTime: entry.totalTime / entry.callCount,\n        maxTime: entry.maxTime,\n        minTime: entry.minTime,\n        percentage: (entry.totalTime / this.getTotalTime()) * 100,\n      })),\n    };\n  }\n}\n\nexport const performanceProfiler = new PerformanceProfiler();\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = THREE;","export const isMobile = window.innerWidth < 768;\n\nexport const ASSETS = {\n  mazeTexture: \"https://c-am.b-cdn.net/CAM/matcap24.png\",\n  mazeModel: \"https://c-am.b-cdn.net/CAM/c-am-assets-3.glb\",\n};\n","export const SCALE = {\n  PACMAN_HOME: 0.05,\n  PACMAN_INTRO: 0.1,\n  GHOST_NORMAL: 1.0,\n  GHOST_INTRO: 1.5,\n  GHOST_POV: 0.5,\n} as const;\n\nexport const OPACITY = {\n  FULL: 1.0,\n  HIDDEN: 0.0,\n} as const;\n\nexport const SCROLL_SELECTORS = {\n  HOME: \".sc--home.sc\",\n  INTRO: \".sc--intro.sc\",\n  POV: \".sc--pov.sc\",\n  OUTRO: \".sc--outro.sc\",\n} as const;\n\nexport const TANGENT_SMOOTHING = {\n  HOME_LOOP: 0.06,\n  POV: 0.08,\n} as const;\n\nexport const PARAMETER_SMOOTHING_FACTOR = 0.1;\nexport const GHOST_FADE_THRESHOLD = 0.9;\nexport const GHOST_FADE_OUT_DURATION = 0.1;\n\nexport const INTRO_WALK_DISTANCE = 10.0;\nexport const INTRO_FADE_IN_DURATION = 0.2;\nexport const INTRO_POSITION_OFFSET = {\n  x: 4.3,\n  y: -2.0,\n  z: 0.0,\n} as const;\n\nexport const FIND_CLOSEST_SAMPLES = 800;\n\nexport const SCRUB_DURATION = 0.5;\nexport const STAGGER_AMOUNT = 0.15;\nexport const ROTATION_TRANSITION_DURATION = 1.5;\n\nexport const POV_SEQUENCE_PHASE_END = 0.05;\nexport const POV_TRANSITION_PHASE_END = 0.07;\nexport const POV_Y_CONSTRAINT_THRESHOLD = 0.15;\nexport const OPACITY_VISIBILITY_THRESHOLD = 0.01;\n\nexport const KEYFRAME_SCALE = {\n  START: 0.5,\n  MID: 0.8,\n  LARGE: 1.2,\n  END: 1.5,\n} as const;\n\nexport const KEYFRAME_DURATION = {\n  NONE: 0,\n  FADE_IN: 0.3,\n  HOLD: 0.4,\n  FADE_OUT: 0.3,\n} as const;\n\nexport const INTRO_GHOST_OFFSETS = {\n  GHOST1: 0.0,\n  GHOST2: -0.005,\n  GHOST3: -0.01,\n  GHOST4: -0.015,\n  GHOST5: -0.02,\n} as const;\n\nexport function clamp(value: number, min: number = 0, max: number = 1): number {\n  return Math.max(min, Math.min(max, value));\n}\n","import { SCROLL_SELECTORS } from \"../animation/constants\";\n\nconst SELECTORS = {\n  mazeContainer: \".el--home-maze.el\",\n  canvas: \"canvas\",\n\n  homeSection: SCROLL_SELECTORS.HOME,\n  introSection: SCROLL_SELECTORS.INTRO,\n  povSection: SCROLL_SELECTORS.POV,\n  finalSection: SCROLL_SELECTORS.OUTRO,\n  finalContainer: \".cr--outro.cr\",\n\n  scrollComponent: \".cmp--scroll.cmp\",\n  parentElements: \".cmp--pov.cmp\",\n\n  pov: \".pov\",\n  cam: \".cam\",\n};\n\nexport const DOM_ELEMENTS = {\n  mazeContainer: document.querySelector(SELECTORS.mazeContainer) as HTMLElement,\n  canvas: document.querySelector(SELECTORS.canvas) as HTMLCanvasElement,\n\n  homeSection: document.querySelector(SELECTORS.homeSection) as HTMLElement,\n  introSection: document.querySelector(SELECTORS.introSection) as HTMLElement,\n  povSection: document.querySelector(SELECTORS.povSection) as HTMLElement,\n  finalSection: document.querySelector(SELECTORS.finalSection) as HTMLElement,\n  finalContainer: document.querySelector(\n    SELECTORS.finalContainer\n  ) as HTMLElement,\n\n  parentElements: document.querySelectorAll(\n    SELECTORS.parentElements\n  ) as NodeListOf<Element>,\n};\n","import * as THREE from \"three\";\n\nexport type XCoordKey =\n  | \"0\"\n  | \"0.5\"\n  | \"1\"\n  | \"1.5\"\n  | \"2\"\n  | \"2.5\"\n  | \"3\"\n  | \"3.5\"\n  | \"4\"\n  | \"4.5\"\n  | \"5\"\n  | \"5.5\"\n  | \"6\"\n  | \"6.5\"\n  | \"7\"\n  | \"7.5\"\n  | \"8\"\n  | \"8.5\"\n  | \"9\"\n  | \"9.5\"\n  | \"10\"\n  | \"10.5\"\n  | \"11\"\n  | \"11.5\"\n  | \"12\"\n  | \"12.5\"\n  | \"13\"\n  | \"13.5\"\n  | \"14\"\n  | \"14.5\"\n  | \"15\"\n  | \"15.5\"\n  | \"16\"\n  | \"16.5\"\n  | \"17\"\n  | \"17.5\"\n  | \"18\"\n  | \"18.5\"\n  | \"19\"\n  | \"19.5\"\n  | \"20\"\n\nexport type ZCoordKey =\n  | \"0\"\n  | \"0.5\"\n  | \"1\"\n  | \"1.5\"\n  | \"2\"\n  | \"2.5\"\n  | \"3\"\n  | \"3.5\"\n  | \"4\"\n  | \"4.5\"\n  | \"5\"\n  | \"5.5\"\n  | \"6\"\n  | \"6.5\"\n  | \"7\"\n  | \"7.5\"\n  | \"8\"\n  | \"8.5\"\n  | \"9\"\n  | \"9.5\"\n  | \"10\"\n  | \"10.5\"\n  | \"11\"\n  | \"11.5\"\n  | \"12\"\n  | \"12.5\"\n  | \"13\"\n  | \"13.5\"\n  | \"14\"\n  | \"14.5\"\n  | \"15\"\n  | \"15.5\"\n  | \"16\"\n\nexport const Y = 0.55;\n\nexport const X: Record<XCoordKey, number> = {\n  \"0\": -0.54875,\n  \"0.5\": -0.4985,\n  \"1\": -0.44825,\n  \"1.5\": -0.398,\n  \"2\": -0.34775,\n  \"2.5\": -0.2975,\n  \"3\": -0.24725,\n  \"3.5\": -0.197,\n  \"4\": -0.14675,\n  \"4.5\": -0.0965,\n  \"5\": -0.04625,\n  \"5.5\": 0.004,\n  \"6\": 0.05425,\n  \"6.5\": 0.1045,\n  \"7\": 0.15475,\n  \"7.5\": 0.205,\n  \"8\": 0.25525,\n  \"8.5\": 0.3055,\n  \"9\": 0.35575,\n  \"9.5\": 0.406,\n  \"10\": 0.45625,\n  \"10.5\": 0.5065,\n  \"11\": 0.55675,\n  \"11.5\": 0.607,\n  \"12\": 0.65725,\n  \"12.5\": 0.7075,\n  \"13\": 0.75775,\n  \"13.5\": 0.808,\n  \"14\": 0.85825,\n  \"14.5\": 0.9085,\n  \"15\": 0.95875,\n  \"15.5\": 1.009,\n  \"16\": 1.05925,\n  \"16.5\": 1.1095,\n  \"17\": 1.15975,\n  \"17.5\": 1.21,\n  \"18\": 1.26025,\n  \"18.5\": 1.3105,\n  \"19\": 1.36075,\n  \"19.5\": 1.411,\n  \"20\": 1.46125,\n};\n\nexport const Z: Record<ZCoordKey, number> = {\n  \"0\": -0.302,\n  \"0.5\": -0.25175,\n  \"1\": -0.2015,\n  \"1.5\": -0.15125,\n  \"2\": -0.101,\n  \"2.5\": -0.05075,\n  \"3\": -0.0005,\n  \"3.5\": 0.04975,\n  \"4\": 0.1,\n  \"4.5\": 0.15025,\n  \"5\": 0.2005,\n  \"5.5\": 0.25075,\n  \"6\": 0.301,\n  \"6.5\": 0.35125,\n  \"7\": 0.4015,\n  \"7.5\": 0.45175,\n  \"8\": 0.502,\n  \"8.5\": 0.55225,\n  \"9\": 0.6025,\n  \"9.5\": 0.65275,\n  \"10\": 0.703,\n  \"10.5\": 0.75325,\n  \"11\": 0.8035,\n  \"11.5\": 0.85375,\n  \"12\": 0.904,\n  \"12.5\": 0.95425,\n  \"13\": 1.0045,\n  \"13.5\": 1.05475,\n  \"14\": 1.105,\n  \"14.5\": 1.15525,\n  \"15\": 1.2055,\n  \"15.5\": 1.25575,\n  \"16\": 1.306,\n}\n\nexport const getCoord = (x: XCoordKey, z: ZCoordKey) => {\n  return new THREE.Vector3(X[x], Y, Z[z])\n};","import * as THREE from \"three\";\nimport { MazePathPoint, PathPoint, CameraPathPoint } from \"../types/types\";\nimport { isMobile } from \"../config/config\";\nimport { getCoord, X, Y, Z } from \"./coordinates\";\n\nexport const objectHomeScrollEndPathPoint = new THREE.Vector3(\n  0.55675,\n  0.35,\n  0.45175\n);\n\nconst cameraPathPointsConfig = {\n  startMobile: new THREE.Vector3(0.5, 2.5, 2.5),\n  startDesktop: new THREE.Vector3(-2, 2.5, 2),\n  secondMobile: new THREE.Vector3(0.5, 2.5, 2),\n  secondDesktop: new THREE.Vector3(-1.5, 3, 0.75),\n  mobileLookAt: new THREE.Vector3(0.5, 0.5, -1.5),\n  desktopLookAt: new THREE.Vector3(-1.25, 0.5, 0.25),\n  cameraLookAtSecondDesktop: new THREE.Vector3(-0.75, 0.5, -0.75),\n  cameraLookAtSecondMobile: new THREE.Vector3(-0.75, 0.5, -0.75),\n\n  cameraHomeScrollEndLookAt: new THREE.Vector3(0.55675, -5, 0.35),\n  thirdPosition: new THREE.Vector3(0.55675, 3, 0.45175),\n\n  cameraHomeScrollEndPathPoint: new THREE.Vector3(0.55675, 0.5, 0.45175),\n};\n\nconst startPosition = isMobile\n  ? cameraPathPointsConfig.startMobile\n  : cameraPathPointsConfig.startDesktop;\nconst secondPosition = isMobile\n  ? cameraPathPointsConfig.secondMobile\n  : cameraPathPointsConfig.secondDesktop;\nconst lookAtPosition = isMobile\n  ? cameraPathPointsConfig.mobileLookAt\n  : cameraPathPointsConfig.desktopLookAt;\nconst cameraLookAtSecondPosition = isMobile\n  ? cameraPathPointsConfig.cameraLookAtSecondMobile\n  : cameraPathPointsConfig.cameraLookAtSecondDesktop;\n\nconst thirdPosition = cameraPathPointsConfig.thirdPosition;\nconst cameraHomeScrollEndLookAt =\n  cameraPathPointsConfig.cameraHomeScrollEndLookAt;\nconst cameraHomeScrollEndPathPoint =\n  cameraPathPointsConfig.cameraHomeScrollEndPathPoint;\n\nconst pacmanHomePathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"8\", \"9\"), type: \"straight\" },\n  {\n    pos: getCoord(\"8\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"9\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"10\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"10\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"9\", \"1\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"5\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"3\", \"1\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"2\", \"1\"),\n      getCoord(\"1\", \"2\"),\n      getCoord(\"1\", \"2.5\"),\n      getCoord(\"1.5\", \"3\"),\n      getCoord(\"2\", \"3.5\"),\n    ],\n  },\n  {\n    pos: getCoord(\"2\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"3\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"5\", \"7\"), type: \"straight\" },\n  {\n    pos: getCoord(\"4\", \"7\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"3\", \"8\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"4\", \"9\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"9\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"5\", \"11\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"3\", \"11\"),\n      getCoord(\"2\", \"12\"),\n      getCoord(\"1.5\", \"13\"),\n      getCoord(\"1\", \"14\"),\n      getCoord(\"2\", \"15\"),\n      getCoord(\"3\", \"15\"),\n      getCoord(\"4\", \"14\"),\n      getCoord(\"5\", \"13\"),\n    ],\n  },\n  {\n    pos: getCoord(\"6\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"6\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"5\", \"13\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"12\", \"13\"),\n      getCoord(\"13\", \"12\"),\n      getCoord(\"12.5\", \"11\"),\n      getCoord(\"12\", \"10.5\"),\n      getCoord(\"11\", \"10\"),\n      getCoord(\"10\", \"10.5\"),\n      getCoord(\"9\", \"11\"),\n      getCoord(\"8\", \"10\"),\n      getCoord(\"8\", \"9.5\"),\n    ],\n  },\n  {\n    pos: getCoord(\"8\", \"9\"),\n    type: \"straight\",\n  },\n];\n\nconst ghost1HomePathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"1\", \"10\"), type: \"straight\" },\n  {\n    pos: getCoord(\"1\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"2\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"3\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"5\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"9\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"10\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"9\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"6\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"8\", \"10\"),\n      getCoord(\"9\", \"11\"),\n      getCoord(\"10\", \"10.5\"),\n      getCoord(\"11\", \"10\"),\n      getCoord(\"12\", \"10.5\"),\n      getCoord(\"13\", \"11\"),\n      getCoord(\"15\", \"11\"),\n      getCoord(\"16\", \"10.5\"),\n      getCoord(\"17\", \"10\"),\n      getCoord(\"18\", \"10.5\"),\n      getCoord(\"19\", \"11\"),\n      getCoord(\"20\", \"10\"),\n    ],\n  },\n  {\n    pos: getCoord(\"20\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"19\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"9\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"6\"),\n    type: \"straight\",\n    curveCheckPoints: [\n      getCoord(\"8\", \"8\"),\n      getCoord(\"7\", \"9\"),\n      getCoord(\"6\", \"10\"),\n      getCoord(\"5.5\", \"11\"),\n      getCoord(\"5\", \"12\"),\n      getCoord(\"6\", \"13\"),\n      getCoord(\"7\", \"14\"),\n      getCoord(\"6\", \"15\"),\n      getCoord(\"5\", \"15\"),\n      getCoord(\"4\", \"14\"),\n      getCoord(\"4.5\", \"13\"),\n      getCoord(\"5\", \"12\"),\n      getCoord(\"4\", \"11\"),\n    ],\n  },\n  { pos: getCoord(\"1\", \"10\"), type: \"straight\" },\n];\n\nconst ghost2HomePathPoints: MazePathPoint[] = [\n  {\n    pos: getCoord(\"5\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [getCoord(\"5.5\", \"11\")],\n  },\n  {\n    pos: getCoord(\"6\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"5\", \"9\"), type: \"straight\" },\n  {\n    pos: getCoord(\"4\", \"9\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"3\", \"8\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"4\", \"7\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"7\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"8\", \"8\"), type: \"straight\" },\n  {\n    pos: getCoord(\"8\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [getCoord(\"8.5\", \"11\"), getCoord(\"9\", \"12\")],\n  },\n  { pos: getCoord(\"10\", \"13\"), type: \"straight\" },\n  {\n    pos: getCoord(\"12\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"14\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"19\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"20\", \"14\"), type: \"straight\" },\n  {\n    pos: getCoord(\"20\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"19\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"17\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"16\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"14\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n    curveCheckPoints: [getCoord(\"12\", \"1.5\")],\n  },\n  {\n    pos: getCoord(\"11\", \"2\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"10\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"10\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"9\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"8\", \"6\"), type: \"straight\" },\n  {\n    pos: getCoord(\"8\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [getCoord(\"8.5\", \"11\")],\n  },\n  {\n    pos: getCoord(\"9\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"6\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [getCoord(\"4.5\", \"13\"), getCoord(\"5\", \"12\")],\n  },\n];\n\nconst ghost3HomePathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"14\", \"10.5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n    curveCheckPoints: [\n      getCoord(\"12\", \"1.5\"),\n      getCoord(\"11\", \"2\"),\n      getCoord(\"10\", \"1.5\"),\n    ],\n  },\n  { pos: getCoord(\"9\", \"1\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"7\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"9\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"10\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"11\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"19\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"20\", \"6\"), type: \"straight\" },\n  {\n    pos: getCoord(\"20\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"19\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n    curveCheckPoints: [\n      getCoord(\"18\", \"10.5\"),\n      getCoord(\"17\", \"10\"),\n      getCoord(\"16\", \"10.5\"),\n      getCoord(\"15.5\", \"11\"),\n    ],\n  },\n  { pos: getCoord(\"15\", \"12\"), type: \"straight\" },\n  {\n    pos: getCoord(\"15\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"14\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"13\", \"14\"), type: \"straight\" },\n  {\n    pos: getCoord(\"13\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [\n      getCoord(\"12.5\", \"11\"),\n      getCoord(\"12\", \"10.5\"),\n      getCoord(\"10\", \"10.5\"),\n    ],\n  },\n  {\n    pos: getCoord(\"9\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"9\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [getCoord(\"5.5\", \"11\")],\n  },\n  {\n    pos: getCoord(\"5\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"6\", \"13\"), type: \"straight\" },\n  {\n    pos: getCoord(\"12\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"13.5\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"14\", \"10.5\"), type: \"straight\" },\n];\n\nconst ghost4HomePathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"16\", \"7\"), type: \"straight\" },\n  {\n    pos: getCoord(\"16\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"15\", \"11\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"12\", \"13\"), type: \"straight\" },\n  {\n    pos: getCoord(\"8\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"6\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"2\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"1\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [\n      getCoord(\"1.5\", \"13\"),\n      getCoord(\"2\", \"12\"),\n      getCoord(\"1.5\", \"11\"),\n    ],\n  },\n  { pos: getCoord(\"1\", \"10\"), type: \"straight\" },\n  {\n    pos: getCoord(\"1\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"2\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"7\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"9\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"13\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"14\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"16\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"17\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"19\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"20\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"19\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"18\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"19\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"20\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"20\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"19\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n    curveCheckPoints: [getCoord(\"18\", \"10.5\")],\n  },\n  {\n    pos: getCoord(\"17\", \"10\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"16\", \"9\"), type: \"straight\" },\n  { pos: getCoord(\"16\", \"7\"), type: \"straight\" },\n];\n\nconst ghost5HomePathPoints: MazePathPoint[] = [\n  {\n    pos: getCoord(\"10\", \"3.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"9\", \"3\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"4\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"3\", \"1\"), type: \"straight\" },\n  {\n    pos: getCoord(\"2\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"1\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"1.5\", \"3\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"2\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"3\", \"5\"), type: \"straight\" },\n  {\n    pos: getCoord(\"5\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"6\", \"6\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"5\", \"7\"), type: \"straight\" },\n  {\n    pos: getCoord(\"4\", \"7\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"3\", \"8\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"4\", \"9\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"9\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"8\", \"10\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"8.5\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"9\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"10\", \"13\"), type: \"straight\" },\n  {\n    pos: getCoord(\"12\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"14\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"12\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"14\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"16\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"19\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"20\", \"14\"), type: \"straight\" },\n  {\n    pos: getCoord(\"20\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"19\", \"1\"), type: \"straight\" },\n  {\n    pos: getCoord(\"17\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"16\", \"2\"), type: \"straight\" },\n  {\n    pos: getCoord(\"16\", \"4\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"14\", \"4\"), type: \"straight\" },\n  {\n    pos: getCoord(\"14\", \"2\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"1\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"12\", \"1.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"11\", \"2\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"10\", \"3.5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n];\n\nconst cameraHomeScrollPathPoints: CameraPathPoint[] = [\n  { pos: startPosition, lookAt: lookAtPosition },\n  { pos: secondPosition, lookAt: cameraLookAtSecondPosition },\n  { pos: thirdPosition, lookAt: cameraHomeScrollEndLookAt },\n  { pos: cameraHomeScrollEndPathPoint, lookAt: cameraHomeScrollEndLookAt },\n];\n\nconst cameraPOVPathPoints: MazePathPoint[] = [\n  {\n    pos: new THREE.Vector3(X[\"11\"], 0.40625, Z[\"7.5\"]),\n    type: \"straight\",\n    lookAtSequence: [\n      new THREE.Vector3(X[\"11\"], 0.2, Z[\"8\"]),\n      new THREE.Vector3(X[\"11\"], 1.2, Z[\"16\"]),\n      new THREE.Vector3(X[\"11\"], 0.55, Z[\"16\"]),\n    ],\n  },\n  {\n    pos: getCoord(\"11\", \"7.5\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"11\", \"9\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n    curveCheckPoints: [\n      new THREE.Vector3(X[\"11\"], Y, 0.6525),\n      getCoord(\"11.5\", \"10\"),\n      getCoord(\"12\", \"10.5\"),\n      getCoord(\"12.5\", \"11\"),\n    ],\n  },\n  {\n    pos: getCoord(\"13\", \"11\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"14.5\", \"11\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"15\", \"11.5\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"15\", \"14.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"14.5\", \"15\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"13.5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"13\", \"14.5\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"13\", \"13.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"12.5\", \"13\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"7.5\", \"13\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"7\", \"13.5\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"7\", \"14.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  {\n    pos: getCoord(\"7.5\", \"15\"),\n    type: \"straight\",\n  },\n  {\n    pos: getCoord(\"10.5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  {\n    pos: getCoord(\"11\", \"16\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n];\n\nconst ghost1POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"16\", \"10\"), type: \"straight\" },\n  {\n    pos: getCoord(\"16\", \"10.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"15.5\", \"11\"), type: \"straight\" },\n  { pos: getCoord(\"14.5\", \"11\"), type: \"straight\" },\n];\n\nconst ghost2POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"16\", \"15\"), type: \"straight\" },\n  {\n    pos: getCoord(\"15.5\", \"15\"),\n    type: \"curve\",\n    arc: \"lowerArc\",\n  },\n  { pos: getCoord(\"15\", \"14.5\"), type: \"straight\" },\n  { pos: getCoord(\"15\", \"13.5\"), type: \"straight\" },\n];\n\nconst ghost3POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"9\", \"12\"), type: \"straight\" },\n  {\n    pos: getCoord(\"9\", \"12.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"9.5\", \"13\"), type: \"straight\" },\n  { pos: getCoord(\"10.5\", \"13\"), type: \"straight\" },\n];\n\nconst ghost4POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"7\", \"14\"), type: \"straight\" },\n  {\n    pos: getCoord(\"7\", \"13.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"7.5\", \"13\"), type: \"straight\" },\n  { pos: getCoord(\"8.5\", \"13\"), type: \"straight\" },\n];\n\nconst ghost5POVPathPoints: MazePathPoint[] = [\n  { pos: getCoord(\"11\", \"16\"), type: \"straight\" },\n  {\n    pos: getCoord(\"11\", \"15.5\"),\n    type: \"curve\",\n    arc: \"upperArc\",\n  },\n  { pos: getCoord(\"10.5\", \"15\"), type: \"straight\" },\n  { pos: getCoord(\"9.5\", \"15\"), type: \"straight\" },\n];\n\nexport const povTriggerPositions = {\n  ghost1: {\n    triggerPos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n    ghostStartFadeIn: new THREE.Vector3(0.7075, 0.55, 0.8035),\n    ghostEndFadeIn: new THREE.Vector3(0.725, 0.55, 0.8035),\n    ghostStartFadeOut: new THREE.Vector3(0.75, 0.55, 0.8035),\n    camStartFadeIn: new THREE.Vector3(0.75775, 0.55, 0.8035),\n    camEndFadeIn: new THREE.Vector3(0.775, 0.55, 0.8035),\n    camStartFadeOut: new THREE.Vector3(0.84, 0.55, 0.8035),\n    endPosition: new THREE.Vector3(0.85825, 0.55, 0.8035),\n    forceEndProgress: {\n      start: 0.1,\n      end: 0.16,\n    },\n  },\n  ghost2: {\n    triggerPos: new THREE.Vector3(0.9085, 0.55, 0.8035),\n    ghostStartFadeIn: new THREE.Vector3(0.95875, 0.55, 0.85375),\n    ghostEndFadeIn: new THREE.Vector3(0.95875, 0.55, 0.875),\n    ghostStartFadeOut: new THREE.Vector3(0.95875, 0.55, 0.89),\n    camStartFadeIn: new THREE.Vector3(0.95875, 0.55, 0.904),\n    camEndFadeIn: new THREE.Vector3(0.95875, 0.55, 0.93),\n    camStartFadeOut: new THREE.Vector3(0.95875, 0.55, 0.9975),\n    endPosition: new THREE.Vector3(0.95875, 0.55, 1.0045),\n    forceEndProgress: {\n      start: 0.17,\n      end: 0.22,\n    },\n  },\n  ghost3: {\n    triggerPos: new THREE.Vector3(0.75775, 0.55, 1.05475),\n    ghostStartFadeIn: new THREE.Vector3(0.7075, 0.55, 1.0045),\n    ghostEndFadeIn: new THREE.Vector3(0.7075, 0.55, 1.0045),\n    ghostStartFadeOut: new THREE.Vector3(0.6825, 0.55, 1.0045),\n    camStartFadeIn: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    camEndFadeIn: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    camStartFadeOut: new THREE.Vector3(0.6065, 0.55, 1.0045),\n    endPosition: new THREE.Vector3(0.55675, 0.55, 1.0045),\n    forceEndProgress: {\n      start: 0.23,\n      end: 0.33,\n    },\n  },\n  ghost4: {\n    triggerPos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    ghostStartFadeIn: new THREE.Vector3(0.5565, 0.55, 1.0045),\n    ghostEndFadeIn: new THREE.Vector3(0.5065, 0.55, 1.0045),\n    ghostStartFadeOut: new THREE.Vector3(0.4815, 0.55, 1.0045),\n    camStartFadeIn: new THREE.Vector3(0.45625, 0.55, 1.0045),\n    camEndFadeIn: new THREE.Vector3(0.45625, 0.55, 1.0045),\n    camStartFadeOut: new THREE.Vector3(0.4065, 0.55, 1.0045),\n    endPosition: new THREE.Vector3(0.35575, 0.55, 1.0045),\n    forceEndProgress: {\n      start: 0.38,\n      end: 0.47,\n    },\n  },\n  ghost5: {\n    triggerPos: new THREE.Vector3(0.15475, 0.55, 1.15525),\n    ghostStartFadeIn: new THREE.Vector3(0.1795, 0.55, 1.18),\n    ghostEndFadeIn: new THREE.Vector3(0.205, 0.55, 1.2055),\n    ghostStartFadeOut: new THREE.Vector3(0.23025, 0.55, 1.2055),\n    camStartFadeIn: new THREE.Vector3(0.25525, 0.55, 1.2055),\n    camEndFadeIn: new THREE.Vector3(0.25525, 0.55, 1.2055),\n    camStartFadeOut: new THREE.Vector3(0.3055, 0.55, 1.2055),\n    endPosition: new THREE.Vector3(0.35575, 0.55, 1.2055),\n    forceEndProgress: {\n      start: 0.52,\n      end: 0.59,\n    },\n  },\n};\n\nexport function getStartPosition() {\n  return startPosition;\n}\n\nexport function getLookAtPosition() {\n  return lookAtPosition;\n}\n\nexport const homePaths = {\n  pacman: pacmanHomePathPoints,\n  ghost1: ghost1HomePathPoints,\n  ghost2: ghost2HomePathPoints,\n  ghost3: ghost3HomePathPoints,\n  ghost4: ghost4HomePathPoints,\n  ghost5: ghost5HomePathPoints,\n} as const;\n\nexport const povPaths = {\n  camera: cameraPOVPathPoints,\n  ghost1: ghost1POVPathPoints,\n  ghost2: ghost2POVPathPoints,\n  ghost3: ghost3POVPathPoints,\n  ghost4: ghost4POVPathPoints,\n  ghost5: ghost5POVPathPoints,\n} as const;\n\nexport function createHomeScrollPathPoints(\n  pausedPositions: Record<string, THREE.Vector3>\n): Record<string, PathPoint[]> {\n  const scrollPaths: Record<string, PathPoint[]> = {};\n\n  Object.entries(pausedPositions).forEach(([key, pausedPos]) => {\n    const arcPoint = new THREE.Vector3(\n      pausedPos.x * (1 / 4) + objectHomeScrollEndPathPoint.x * (3 / 4),\n      1.5,\n      pausedPos.z * (1 / 4) + objectHomeScrollEndPathPoint.z * (3 / 4)\n    );\n\n    scrollPaths[key] = [\n      { pos: pausedPos.clone() },\n      { pos: arcPoint },\n      { pos: objectHomeScrollEndPathPoint },\n    ];\n  });\n\n  return scrollPaths;\n}\n\nexport function getCameraHomeScrollPathPoints(): CameraPathPoint[] {\n  return cameraHomeScrollPathPoints;\n}\n","import * as THREE from \"three\";\nimport { getLookAtPosition, getStartPosition } from \"../paths/pathpoints\";\n\nconst CAMERA_NEAR = 0.001;\nconst CAMERA_FAR = 100;\n\nexport const camera = new THREE.PerspectiveCamera(\n  50,\n  window.innerWidth / window.innerHeight,\n  CAMERA_NEAR,\n  CAMERA_FAR\n);\n\nexport function setupCamera(): void {\n  const startPosition = getStartPosition();\n  const lookAtPosition = getLookAtPosition();\n  camera.position.set(startPosition.x, startPosition.y, startPosition.z);\n  camera.lookAt(lookAtPosition.x, lookAtPosition.y, lookAtPosition.z);\n}\n","import * as THREE from \"three\";\nimport { isMobile } from \"../config/config\";\nimport { DOM_ELEMENTS } from \"../config/dom-elements\";\nimport { camera } from \"./camera\";\n\nexport const scene = new THREE.Scene();\n\nconst renderer = new THREE.WebGLRenderer({\n  antialias: false,\n  alpha: true,\n  powerPreference: \"high-performance\",\n  precision: \"lowp\",\n  logarithmicDepthBuffer: false,\n  stencil: false,\n  depth: true,\n});\n\nconst clock = new THREE.Clock();\nconst frameCallbacks: (() => void)[] = [];\n\nexport function initRenderer(): void {\n  enhanceAntiAliasing();\n\n  if (DOM_ELEMENTS.mazeContainer) {\n    renderer.setSize(\n      DOM_ELEMENTS.mazeContainer.clientWidth,\n      DOM_ELEMENTS.mazeContainer.clientHeight\n    );\n    DOM_ELEMENTS.mazeContainer.appendChild(renderer.domElement);\n  } else {\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(renderer.domElement);\n  }\n\n  setPixelRatio();\n  window.addEventListener(\"resize\", setPixelRatio);\n\n  renderer.render(scene, camera);\n}\n\nfunction enhanceAntiAliasing(): void {\n  if (isMobile) {\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1));\n  } else {\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));\n  }\n  renderer.shadowMap.enabled = true;\n  renderer.shadowMap.type = THREE.BasicShadowMap;\n}\n\nfunction setPixelRatio(): void {\n  const pixelRatio = Math.min(window.devicePixelRatio, isMobile ? 1 : 1.5);\n  renderer.setPixelRatio(pixelRatio);\n\n  if (DOM_ELEMENTS.mazeContainer) {\n    renderer.setSize(\n      DOM_ELEMENTS.mazeContainer.clientWidth,\n      DOM_ELEMENTS.mazeContainer.clientHeight\n    );\n    camera.aspect =\n      DOM_ELEMENTS.mazeContainer.clientWidth /\n      DOM_ELEMENTS.mazeContainer.clientHeight;\n  } else {\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    camera.aspect = window.innerWidth / window.innerHeight;\n  }\n\n  camera.updateProjectionMatrix();\n}\n\nexport function setupLighting(): void {\n  const ambientLight = new THREE.AmbientLight(0xffffff);\n  scene.add(ambientLight);\n\n  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n  scene.add(directionalLight);\n  directionalLight.position.set(-5, 15, 10);\n  directionalLight.shadow.mapSize.width = 2048;\n  directionalLight.shadow.mapSize.height = 2048;\n  directionalLight.shadow.camera.left = -20;\n  directionalLight.shadow.camera.right = 20;\n  directionalLight.shadow.camera.top = 20;\n  directionalLight.shadow.camera.bottom = -20;\n  directionalLight.shadow.camera.near = 0.1;\n  directionalLight.shadow.camera.far = 50;\n  directionalLight.shadow.bias = -0.001;\n  directionalLight.shadow.radius = 2;\n  directionalLight.castShadow = true;\n}\n\nexport function startRenderLoop(): void {\n  const { performanceProfiler } = require(\"./performance-profiler\");\n\n  const render = () => {\n    performanceProfiler.start(\"frame-callbacks\");\n    for (let i = 0; i < frameCallbacks.length; i++) {\n      frameCallbacks[i]();\n    }\n    performanceProfiler.end(\"frame-callbacks\");\n\n    performanceProfiler.start(\"renderer-render\");\n    renderer.render(scene, camera);\n    performanceProfiler.end(\"renderer-render\");\n\n    requestAnimationFrame(render);\n  };\n  render();\n}\n\nexport function onFrame(callback: () => void): void {\n  frameCallbacks.push(callback);\n}\n\nexport { renderer, clock };\n","import * as THREE from \"three\";\n\ninterface PerformanceStats {\n  fps: number;\n  frameTime: number;\n  memoryUsed: number;\n  memoryTotal: number;\n  drawCalls: number;\n  triangles: number;\n  geometries: number;\n  textures: number;\n}\n\nclass PerformanceMonitor {\n  private enabled: boolean = false;\n  private statsElement: HTMLDivElement | null = null;\n  private frameCount: number = 0;\n  private lastTime: number = performance.now();\n  private fps: number = 0;\n  private frameTime: number = 0;\n  private renderer: THREE.WebGLRenderer | null = null;\n\n  enable(renderer: THREE.WebGLRenderer): void {\n    this.enabled = true;\n    this.renderer = renderer;\n    this.createStatsPanel();\n    this.startMonitoring();\n  }\n\n  disable(): void {\n    this.enabled = false;\n    if (this.statsElement) {\n      this.statsElement.remove();\n      this.statsElement = null;\n    }\n  }\n\n  toggle(renderer: THREE.WebGLRenderer): void {\n    if (this.enabled) {\n      this.disable();\n    } else {\n      this.enable(renderer);\n    }\n  }\n\n  private createStatsPanel(): void {\n    if (this.statsElement) {\n      return;\n    }\n\n    this.statsElement = document.createElement(\"div\");\n    this.statsElement.id = \"performance-monitor\";\n    this.statsElement.style.cssText = `\n      position: fixed;\n      top: 10px;\n      right: 10px;\n      background: rgba(0, 0, 0, 0.8);\n      color: #0f0;\n      font-family: 'Courier New', monospace;\n      font-size: 12px;\n      padding: 10px;\n      border-radius: 5px;\n      z-index: 10000;\n      min-width: 200px;\n      line-height: 1.6;\n    `;\n    document.body.appendChild(this.statsElement);\n  }\n\n  private startMonitoring(): void {\n    if (!this.enabled || !this.statsElement) return;\n\n    const currentTime = performance.now();\n    const delta = currentTime - this.lastTime;\n    this.lastTime = currentTime;\n\n    this.frameCount++;\n    this.frameTime = delta;\n\n    if (this.frameCount % 60 === 0) {\n      this.fps = Math.round(1000 / (delta || 1));\n      this.updateStats();\n    }\n\n    requestAnimationFrame(() => this.startMonitoring());\n  }\n\n  private updateStats(): void {\n    if (!this.statsElement || !this.renderer) return;\n\n    const stats: PerformanceStats = {\n      fps: this.fps,\n      frameTime: Math.round(this.frameTime * 100) / 100,\n      memoryUsed: 0,\n      memoryTotal: 0,\n      drawCalls: this.renderer.info.render.calls,\n      triangles: this.renderer.info.render.triangles,\n      geometries: this.renderer.info.memory.geometries,\n      textures: this.renderer.info.memory.textures,\n    };\n\n    if ((performance as any).memory) {\n      stats.memoryUsed = Math.round(\n        (performance as any).memory.usedJSHeapSize / 1048576\n      );\n      stats.memoryTotal = Math.round(\n        (performance as any).memory.totalJSHeapSize / 1048576\n      );\n    }\n\n    const fpsColor = stats.fps >= 55 ? \"#0f0\" : stats.fps >= 30 ? \"#ff0\" : \"#f00\";\n    const frameTimeColor = stats.frameTime < 16.67 ? \"#0f0\" : stats.frameTime < 33.33 ? \"#ff0\" : \"#f00\";\n\n    this.statsElement.innerHTML = `\n      <div style=\"font-weight: bold; margin-bottom: 5px; border-bottom: 1px solid #0f0; padding-bottom: 5px;\">\n        Performance Monitor\n      </div>\n      <div>FPS: <span style=\"color: ${fpsColor}\">${stats.fps}</span></div>\n      <div>Frame Time: <span style=\"color: ${frameTimeColor}\">${stats.frameTime}ms</span></div>\n      ${stats.memoryUsed > 0 ? `<div>Memory: ${stats.memoryUsed}MB / ${stats.memoryTotal}MB</div>` : \"\"}\n      <div>Draw Calls: ${stats.drawCalls}</div>\n      <div>Triangles: ${stats.triangles.toLocaleString()}</div>\n      <div>Geometries: ${stats.geometries}</div>\n      <div>Textures: ${stats.textures}</div>\n    `;\n  }\n\n  getStats(): PerformanceStats | null {\n    if (!this.renderer) return null;\n\n    return {\n      fps: this.fps,\n      frameTime: this.frameTime,\n      memoryUsed: (performance as any).memory\n        ? Math.round((performance as any).memory.usedJSHeapSize / 1048576)\n        : 0,\n      memoryTotal: (performance as any).memory\n        ? Math.round((performance as any).memory.totalJSHeapSize / 1048576)\n        : 0,\n      drawCalls: this.renderer.info.render.calls,\n      triangles: this.renderer.info.render.triangles,\n      geometries: this.renderer.info.memory.geometries,\n      textures: this.renderer.info.memory.textures,\n    };\n  }\n}\n\nexport const performanceMonitor = new PerformanceMonitor();\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = ScrollTrigger;","import * as THREE from \"three\";\nimport { ASSETS } from \"../config/config\";\n\nconst textureLoader = new THREE.TextureLoader();\n\nconst mazeTexture = textureLoader.load(ASSETS.mazeTexture);\n\nexport const mazeMaterial = new THREE.MeshMatcapMaterial({\n  matcap: mazeTexture,\n});\n\nexport const topMaterial = new THREE.MeshStandardMaterial({\n  color: 0xf2f9f9,\n  metalness: 0.4,\n  roughness: 0,\n  envMapIntensity: 10,\n});\n\nexport const ghostMaterial = new THREE.MeshStandardMaterial({\n  color: 0xffffff,\n  opacity: 0.9999,\n  transparent: true,\n  depthWrite: false,\n  depthTest: true,\n  blending: THREE.NormalBlending,\n  side: THREE.DoubleSide,\n  roughness: 0.75,\n  metalness: 0.2,\n});\n\nexport const floorMaterial = new THREE.MeshStandardMaterial({\n  color: 0xffffff,\n  opacity: 0.8,\n  transparent: true,\n  roughness: 0.5,\n  metalness: 0.1,\n});\n\nconst pacmanMaterials = {\n  blue: new THREE.MeshBasicMaterial({\n    color: 0x1469d3,\n    transparent: true,\n    opacity: 1,\n  }),\n  white: new THREE.MeshBasicMaterial({\n    color: 0xffffff,\n    transparent: true,\n    opacity: 1,\n  }),\n  default: new THREE.MeshBasicMaterial({\n    color: 0x1469d3,\n    transparent: true,\n    opacity: 1,\n  }),\n};\n\nexport const materialMap = {\n  CAM_Pacman_Backframe: pacmanMaterials.blue,\n  \"CAM-Pacman_Bitcoin_1\": pacmanMaterials.white,\n  \"CAM-Pacman_Bitcoin_2\": pacmanMaterials.white,\n  \"CAM-Pacman_Bottom\": pacmanMaterials.blue,\n  \"CAM-Pacman_Top\": pacmanMaterials.blue,\n  \"CAM-Pacman_Eye\": pacmanMaterials.white,\n  CAM_Pacman_Logo_1: pacmanMaterials.white,\n  CAM_Pacman_Logo_2: pacmanMaterials.white,\n  \"CAM-Pacman_Shell_Boolean\": pacmanMaterials.blue,\n  \"CAM-Pacman_Shell\": pacmanMaterials.blue,\n  \"CAM-Pacman_Bottom_electronic\": pacmanMaterials.white,\n  \"CAM-Pacman_Top_electronic\": pacmanMaterials.white,\n  \"CAM-Pacman_Bottom_Text\": pacmanMaterials.white,\n  \"CAM-Pacman_Top_Text\": pacmanMaterials.white,\n  default: pacmanMaterials.blue,\n};\n","import * as THREE from \"three\";\nimport { ASSETS } from \"../config/config\";\nimport { GhostContainer } from \"../types/types\";\nimport { clock } from \"./scene\";\nimport {\n  mazeMaterial,\n  topMaterial,\n  ghostMaterial,\n  floorMaterial,\n  materialMap,\n} from \"./materials\";\n\nexport { clock };\n\nconst loader = new THREE.GLTFLoader();\n\nexport let pacmanMixer: THREE.AnimationMixer;\n\nexport const pacman = new THREE.Group();\n\nexport const ghosts: GhostContainer = {\n  pacman: pacman,\n  ghost1: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost2: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost3: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost4: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost5: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n};\n\nconst ghostContainers = {\n  Ghost_EUR: ghosts.ghost1,\n  Ghost_CHF: ghosts.ghost2,\n  Ghost_YEN: ghosts.ghost3,\n  Ghost_USD: ghosts.ghost4,\n  Ghost_GBP: ghosts.ghost5,\n};\n\nexport async function loadModel(scene: THREE.Scene): Promise<void> {\n  Object.values(ghosts).forEach((ghost) => scene.add(ghost));\n  scene.add(pacman);\n  return new Promise((resolve, reject) => {\n    loader.load(\n      ASSETS.mazeModel,\n      function (gltf) {\n        const model = gltf.scene;\n\n        model.traverse((child: THREE.Object3D) => {\n          if (child.name === \"CAM-Pacman\") {\n            const children: THREE.Object3D[] = [];\n            child.traverse((subChild: THREE.Object3D) => {\n              if (\n                (subChild as any).isMesh &&\n                subChild.name !== \"CAM-Pacman_Shell\" &&\n                subChild.name !== \"CAM-Pacman_Shell_Boolean\" &&\n                subChild.name !== \"CAM-Pacman_Bitcoin_1\" &&\n                subChild.name !== \"CAM-Pacman_Bitcoin_2\"\n              ) {\n                const material =\n                  materialMap[subChild.name as keyof typeof materialMap] ||\n                  materialMap.default;\n                (subChild as THREE.Mesh).material = material;\n                children.push(subChild);\n              } else if (\n                subChild.name === \"CAM-Pacman_Shell\" ||\n                subChild.name === \"CAM-Pacman_Shell_Boolean\" ||\n                subChild.name === \"CAM-Pacman_Bitcoin_1\" ||\n                subChild.name === \"CAM-Pacman_Bitcoin_2\"\n              ) {\n                subChild.visible = false;\n              }\n            });\n\n            children.forEach((item) => ghosts.pacman.add(item));\n            ghosts.pacman.scale.set(0.05, 0.05, 0.05);\n            ghosts.pacman.rotation.set(Math.PI / 2, Math.PI / 2, Math.PI / 4);\n\n            pacmanMixer = new THREE.AnimationMixer(ghosts.pacman);\n            const pacmanActions: { [key: string]: THREE.AnimationAction } = {};\n\n            gltf.animations.forEach((clip: THREE.AnimationClip) => {\n              const action = pacmanMixer.clipAction(clip);\n\n              action.getMixer().addEventListener(\"loop\", function (e) {\n                e.action.getRoot().traverse(function (obj) {\n                  if (obj.userData && obj.userData.skipAnimation) {\n                    (obj as any).updateMorphTargets = function () {};\n                  }\n                });\n              });\n\n              pacmanActions[clip.name] = action;\n              action.setEffectiveWeight(0);\n              action.play();\n            });\n            Object.values(pacmanActions).forEach((action) => {\n              action.setEffectiveWeight(1);\n            });\n          } else if (\n            child.name &&\n            ghostContainers[child.name as keyof typeof ghostContainers]\n          ) {\n            const ghostContainer =\n              ghostContainers[child.name as keyof typeof ghostContainers];\n            const ghostGroup = new THREE.Group();\n\n            child.rotation.z = Math.PI;\n            child.rotation.x = Math.PI / 2;\n            child.scale.set(0.75, 0.75, 0.75);\n\n            const children: THREE.Object3D[] = [];\n            child.traverse((subChild: THREE.Object3D) => {\n              if ((subChild as any).isMesh) {\n                if (subChild.name && subChild.name.startsWith(\"Ghost_Mesh\")) {\n                  (subChild as THREE.Mesh).material = ghostMaterial;\n                } else if (\n                  subChild.name &&\n                  [\"EUR\", \"CHF\", \"YEN\", \"USD\", \"GBP\"].includes(subChild.name)\n                ) {\n                  subChild.visible = false;\n                }\n                children.push(subChild);\n              }\n            });\n\n            children.forEach((item) => {\n              if (\n                item.name &&\n                (item.name.includes(\"EUR\") ||\n                  item.name.startsWith(\"Ghost_Mesh\"))\n              ) {\n                item.rotation.z = Math.PI;\n                item.rotation.x = Math.PI / 2;\n              } else {\n                item.rotation.set(0, 0, 0);\n              }\n              ghostGroup.add(item);\n            });\n\n            if (ghostContainer) {\n              ghostContainer.add(ghostGroup);\n            }\n          }\n\n          if ((child as any).isMesh) {\n            if (child.name === \"CAM-Arena_LowRes_Top\") {\n              (child as THREE.Mesh).material = topMaterial;\n              child.castShadow = true;\n            } else if (child.name === \"CAM-Arena_LowRes_Bottom\") {\n              (child as THREE.Mesh).material = mazeMaterial;\n              child.castShadow = true;\n            } else if (child.name === \"CAM-Floor\") {\n              const clonedChild = child.clone();\n              child.position.y = -0.1;\n              child.position.x = 0;\n              child.position.z = 0;\n              (child as THREE.Mesh).material = new THREE.MeshBasicMaterial({\n                color: 0xffffff,\n                opacity: 1,\n                transparent: false,\n                depthWrite: true,\n                depthTest: true,\n                side: THREE.FrontSide,\n              });\n              child.receiveShadow = false;\n              child.castShadow = true;\n              child.scale.set(0.5, 0.5, 0.5);\n\n              (clonedChild as THREE.Mesh).material = floorMaterial;\n              clonedChild.position.y = -0.5;\n              clonedChild.receiveShadow = true;\n              scene.add(clonedChild);\n            } else {\n              (child as THREE.Mesh).visible = false;\n            }\n          }\n        });\n\n        model.traverse(function (node: THREE.Object3D) {\n          if ((node as any).isMesh) {\n            const mesh = node as THREE.Mesh;\n            if (\n              mesh.name &&\n              (mesh.name.includes(\"Arena\") || mesh.name.includes(\"Floor\"))\n            ) {\n              mesh.castShadow = true;\n              mesh.receiveShadow = true;\n            } else {\n              mesh.castShadow = false;\n              mesh.receiveShadow = false;\n            }\n          }\n        });\n\n        scene.add(model);\n        model.position.set(0.5, 0.5, 0.5);\n\n        resolve();\n      },\n      undefined,\n      function (error: any) {\n        reject(error);\n      }\n    );\n  });\n}\n","import * as THREE from \"three\";\nimport { MazePathPoint, PathPoint, CameraPathPoint } from \"../types/types\";\nimport {\n  homePaths,\n  povPaths,\n  createHomeScrollPathPoints,\n  getCameraHomeScrollPathPoints,\n} from \"./pathpoints\";\n\nconst pathCache = new Map<string, THREE.CurvePath<THREE.Vector3>>();\n\nexport class TangentSmoother {\n  private currentTangent: THREE.Vector3;\n  private smoothing: number;\n\n  constructor(initialTangent: THREE.Vector3, smoothing: number = 0.06) {\n    this.currentTangent = initialTangent.clone();\n    this.smoothing = smoothing;\n  }\n\n  update(targetTangent: THREE.Vector3): THREE.Vector3 {\n    const { performanceProfiler } = require(\"../core/performance-profiler\");\n    return performanceProfiler.measure(\"tangent-smoother-update\", () => {\n      this.currentTangent.lerp(targetTangent, this.smoothing);\n      this.currentTangent.normalize();\n      return this.currentTangent;\n    });\n  }\n\n  reset(newTangent: THREE.Vector3): void {\n    this.currentTangent.copy(newTangent);\n  }\n\n  getCurrentTangent(): THREE.Vector3 {\n    return this.currentTangent.clone();\n  }\n\n  setSmoothingFactor(smoothing: number): void {\n    this.smoothing = Math.max(0.001, Math.min(1, smoothing));\n  }\n}\n\nfunction createMazePath(\n  pathPoints: MazePathPoint[]\n): THREE.CurvePath<THREE.Vector3> {\n  const cacheKey = pathPoints\n    .map((p) => `${p.pos.x},${p.pos.y},${p.pos.z},${p.type},${p.arc || \"\"}`)\n    .join(\"|\");\n\n  if (pathCache.has(cacheKey)) {\n    return pathCache.get(cacheKey)!;\n  }\n\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  let i = 0;\n  while (i < pathPoints.length - 1) {\n    const current = pathPoints[i];\n    const next = pathPoints[i + 1];\n\n    if (current.curveCheckPoints?.length) {\n      const catmullPoints = [\n        current.pos,\n        ...current.curveCheckPoints,\n        next.pos,\n      ];\n      path.add(\n        new THREE.CatmullRomCurve3(catmullPoints, false, \"centripetal\", 0)\n      );\n    } else if (current.type === \"straight\") {\n      path.add(new THREE.LineCurve3(current.pos, next.pos));\n    } else {\n      const midPoint = createNormalCurveMidPoint(current, next);\n      path.add(\n        new THREE.QuadraticBezierCurve3(current.pos, midPoint, next.pos)\n      );\n    }\n\n    i++;\n  }\n\n  pathCache.set(cacheKey, path);\n  return path;\n}\n\nfunction createNormalCurveMidPoint(\n  current: MazePathPoint,\n  next: MazePathPoint\n): THREE.Vector3 {\n  if (current.arc) {\n    const curveType = current.arc;\n\n    if (curveType === \"upperArc\") {\n      return new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n    } else if (curveType === \"lowerArc\") {\n      return new THREE.Vector3(next.pos.x, current.pos.y, current.pos.z);\n    } else if (curveType === \"forwardDownArc\") {\n      return new THREE.Vector3(current.pos.x, next.pos.y, current.pos.z);\n    }\n  }\n\n  return new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n}\n\nfunction createHomeScrollPath(\n  pathPoints: PathPoint[]\n): THREE.CurvePath<THREE.Vector3> {\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  if (pathPoints.length === 3) {\n    const curve = new THREE.QuadraticBezierCurve3(\n      pathPoints[0].pos,\n      pathPoints[1].pos,\n      pathPoints[2].pos\n    );\n    path.add(curve);\n  }\n\n  return path;\n}\n\nfunction createCameraHomeScrollPath(\n  pathPoints: CameraPathPoint[]\n): THREE.CurvePath<THREE.Vector3> {\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  if (pathPoints.length === 4) {\n    const curve = new THREE.CubicBezierCurve3(\n      pathPoints[0].pos,\n      pathPoints[1].pos,\n      pathPoints[2].pos,\n      pathPoints[3].pos\n    );\n    path.add(curve);\n  }\n\n  return path;\n}\n\nexport function getHomePaths(): Record<string, THREE.CurvePath<THREE.Vector3>> {\n  const paths: Record<string, THREE.CurvePath<THREE.Vector3>> = {};\n\n  Object.entries(homePaths).forEach(([key, pathPoints]) => {\n    paths[key] = createMazePath(pathPoints);\n  });\n\n  return paths;\n}\n\nexport function getHomeScrollPaths(\n  pausedPositions: Record<string, THREE.Vector3>\n): Record<string, THREE.CurvePath<THREE.Vector3>> {\n  const scrollPathPoints = createHomeScrollPathPoints(pausedPositions);\n  const cameraPathPoints = getCameraHomeScrollPathPoints();\n\n  const paths: Record<string, THREE.CurvePath<THREE.Vector3>> = {\n    camera: createCameraHomeScrollPath(cameraPathPoints),\n  };\n\n  Object.entries(scrollPathPoints).forEach(([key, pathPoints]) => {\n    paths[key] = createHomeScrollPath(pathPoints);\n  });\n\n  return paths;\n}\n\nexport function getPovPaths(): Record<string, THREE.CurvePath<THREE.Vector3>> {\n  const paths: Record<string, THREE.CurvePath<THREE.Vector3>> = {};\n\n  Object.entries(povPaths).forEach(([key, pathPoints]) => {\n    paths[key] = createMazePath(pathPoints as MazePathPoint[]);\n  });\n\n  return paths;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = gsap;","import * as THREE from \"three\";\nimport { performanceProfiler } from \"../core/performance-profiler\";\n\nexport const OBJECT_KEYS = [\n  \"pacman\",\n  \"ghost1\",\n  \"ghost2\",\n  \"ghost3\",\n  \"ghost4\",\n  \"ghost5\",\n] as const;\n\nconst CURRENCY_SYMBOLS = [\"EUR\", \"CHF\", \"YEN\", \"USD\", \"GBP\"] as const;\n\nexport function isCurrencySymbol(name: string): boolean {\n  return CURRENCY_SYMBOLS.some(\n    (symbol) => name === symbol || name.includes(symbol)\n  );\n}\n\nexport function isPacmanPart(name: string): boolean {\n  return (\n    name.includes(\"Shell\") ||\n    name.includes(\"Bitcoin_1\") ||\n    name.includes(\"Bitcoin_2\")\n  );\n}\n\nexport function calculateObjectOrientation(\n  object: THREE.Object3D,\n  tangent: THREE.Vector3,\n  objectType: \"pacman\" | \"ghost\" | \"camera\" = \"ghost\"\n): void {\n  if (!tangent?.length()) return;\n\n  performanceProfiler.measure(`calculate-orientation-${objectType}`, () => {\n    const targetRotation = Math.atan2(tangent.x, tangent.z);\n\n    if (objectType === \"pacman\") {\n      object.rotation.set(\n        -(Math.PI / 2),\n        Math.PI,\n        -(targetRotation + Math.PI / 2)\n      );\n    } else if (objectType === \"ghost\") {\n      object.rotation.set(0, targetRotation, 0);\n    } else if (objectType === \"camera\") {\n      const lookAtPoint = object.position.clone().add(tangent);\n      object.lookAt(lookAtPoint);\n    }\n  });\n}\n\nconst baseLayDownQuat = new THREE.Quaternion().setFromEuler(\n  new THREE.Euler(Math.PI / 2, 0, 0)\n);\nconst yAxis180 = new THREE.Quaternion().setFromAxisAngle(\n  new THREE.Vector3(0, 1, 0),\n  Math.PI\n);\nexport const LAY_DOWN_QUAT_1 = yAxis180.clone().multiply(baseLayDownQuat);\n\nexport const LAY_DOWN_QUAT_2 = new THREE.Quaternion().setFromEuler(\n  new THREE.Euler(-Math.PI / 2, 0, 0)\n);\n\nexport function slerpToLayDown(\n  object: THREE.Object3D,\n  startQuat: THREE.Quaternion,\n  progress: number\n) {\n  const d1 = startQuat.angleTo(LAY_DOWN_QUAT_1);\n  const d2 = startQuat.angleTo(LAY_DOWN_QUAT_2);\n  const targetQuat = d1 < d2 ? LAY_DOWN_QUAT_1 : LAY_DOWN_QUAT_2;\n\n  object.quaternion.copy(startQuat.clone().slerp(targetQuat, progress));\n}\n\nexport function rotateQuaternionAroundAxis(\n  quat: THREE.Quaternion,\n  axis: \"x\" | \"y\" | \"z\",\n  angle: number\n): THREE.Quaternion {\n  const axisVector =\n    axis === \"x\"\n      ? new THREE.Vector3(1, 0, 0)\n      : axis === \"y\"\n      ? new THREE.Vector3(0, 1, 0)\n      : new THREE.Vector3(0, 0, 1);\n\n  const rotation = new THREE.Quaternion().setFromAxisAngle(axisVector, angle);\n\n  return quat.clone().multiply(rotation);\n}\n\nexport function applyRotations(\n  quat: THREE.Quaternion,\n  rotations: Array<{ axis: \"x\" | \"y\" | \"z\"; angle: number }>\n): THREE.Quaternion {\n  let result = quat.clone();\n  rotations.forEach(({ axis, angle }) => {\n    result = rotateQuaternionAroundAxis(result, axis, angle);\n  });\n  return result;\n}\n","import * as THREE from \"three\";\nimport { isCurrencySymbol, isPacmanPart } from \"../animation/util\";\nimport { performanceProfiler } from \"./performance-profiler\";\n\nexport function setObjectOpacity(\n  object: THREE.Object3D,\n  opacity: number,\n  options?: {\n    preserveTransmission?: boolean;\n    skipCurrencySymbols?: boolean;\n  }\n): void {\n  const preserveTransmission = options?.preserveTransmission !== false;\n\n  forEachMaterial(\n    object,\n    (mat: any) => {\n      setMaterialOpacity(mat, opacity, preserveTransmission);\n    },\n    {\n      skipCurrencySymbols: options?.skipCurrencySymbols === true,\n    }\n  );\n}\n\nexport function setMaterialOpacity(\n  material: THREE.Material,\n  opacity: number,\n  preserveTransmission: boolean = true\n): void {\n  const mat = material as any;\n  const currentOpacity = mat.opacity ?? 1;\n  const currentTransparent = mat.transparent ?? false;\n\n  if (Math.abs(currentOpacity - opacity) < 0.0001) {\n    return;\n  }\n\n  mat.opacity = opacity;\n\n  const shouldBeTransparent = preserveTransmission && mat.transmission !== undefined && mat.transmission > 0\n    ? true\n    : opacity < 1.0;\n\n  if (currentTransparent !== shouldBeTransparent) {\n    mat.transparent = shouldBeTransparent;\n    if (mat.needsUpdate !== undefined) {\n      mat.needsUpdate = true;\n    }\n  }\n}\n\nexport function setMaterialTransparent(\n  material: THREE.Material,\n  transparent: boolean,\n  preserveTransmission: boolean = true\n): void {\n  const mat = material as any;\n  const currentTransparent = mat.transparent ?? false;\n\n  const shouldBeTransparent = preserveTransmission && mat.transmission !== undefined && mat.transmission > 0\n    ? true\n    : transparent;\n\n  if (currentTransparent === shouldBeTransparent) {\n    return;\n  }\n\n  mat.transparent = shouldBeTransparent;\n\n  if (mat.needsUpdate !== undefined) {\n    mat.needsUpdate = true;\n  }\n}\n\nexport function getObjectOpacity(object: THREE.Object3D): number {\n  let opacity = 1.0;\n  let found = false;\n\n  forEachMaterial(\n    object,\n    (mat: any) => {\n      if (!found) {\n        opacity = mat.opacity ?? 1.0;\n        found = true;\n      }\n    },\n    { skipCurrencySymbols: false }\n  );\n\n  return opacity;\n}\n\nexport function resetGhostMaterialsToFullOpacity(object: THREE.Object3D): void {\n  setObjectOpacity(object, 1.0, {\n    preserveTransmission: true,\n    skipCurrencySymbols: true,\n  });\n}\n\n\nexport function forEachMaterial(\n  object: THREE.Object3D,\n  callback: (material: THREE.Material, mesh: THREE.Mesh, childName: string) => void,\n  options?: {\n    skipCurrencySymbols?: boolean;\n    skipPacmanParts?: boolean;\n    objectKey?: string;\n  }\n): void {\n  const skipCurrencySymbols = options?.skipCurrencySymbols === true;\n  const skipPacmanParts = options?.skipPacmanParts === true;\n  const objectKey = options?.objectKey;\n\n  object.traverse((child) => {\n    if ((child as any).isMesh && (child as any).material) {\n      const mesh = child as THREE.Mesh;\n      const childName = child.name || \"\";\n\n      if (skipCurrencySymbols && isCurrencySymbol(childName)) {\n        return;\n      }\n\n      if (skipPacmanParts && objectKey === \"pacman\" && isPacmanPart(childName)) {\n        return;\n      }\n\n      if (Array.isArray(mesh.material)) {\n        const materials = mesh.material;\n        for (let i = 0; i < materials.length; i++) {\n          callback(materials[i], mesh, childName);\n        }\n      } else {\n        callback(mesh.material as any, mesh, childName);\n      }\n    }\n  });\n}\n","import gsap from \"gsap\";\nimport * as THREE from \"three\";\nimport { scene } from \"../core/scene\";\nimport { SCALE, OPACITY } from \"./constants\";\nimport { forEachMaterial } from \"../core/material-utils\";\n\nexport function setFloorPlane(\n  visible: boolean,\n  opacity: number = OPACITY.FULL,\n  transparent: boolean = false\n): void {\n  scene.traverse((child) => {\n    if (child.name === \"CAM-Floor\") {\n      child.visible = visible;\n      if (child instanceof THREE.Mesh && child.material) {\n        const material = child.material as THREE.MeshBasicMaterial;\n        material.color.setHex(0xffffff);\n        material.opacity = opacity;\n        material.transparent = transparent;\n      }\n    }\n  });\n}\n\nexport function setObjectScale(\n  object: THREE.Object3D,\n  key: string,\n  sceneType: \"home\" | \"intro\" | \"pov\" | \"outro\"\n): void {\n  let scale: number;\n\n  if (key === \"pacman\") {\n    scale = sceneType === \"intro\" ? SCALE.PACMAN_INTRO : SCALE.PACMAN_HOME;\n  } else {\n    if (sceneType === \"intro\") {\n      scale = SCALE.GHOST_INTRO;\n    } else if (sceneType === \"pov\") {\n      scale = SCALE.GHOST_POV;\n    } else {\n      scale = SCALE.GHOST_NORMAL;\n    }\n  }\n\n  object.scale.set(scale, scale, scale);\n  object.updateMatrixWorld(true);\n  gsap.set(object.scale, { x: scale, y: scale, z: scale });\n}\n\nexport function killObjectAnimations(object: THREE.Object3D): void {\n  gsap.killTweensOf(object);\n  gsap.killTweensOf(object.scale);\n  gsap.killTweensOf(object.position);\n  gsap.killTweensOf(object.rotation);\n  gsap.killTweensOf(object.quaternion);\n\n  forEachMaterial(\n    object,\n    (mat: any) => {\n      gsap.killTweensOf(mat);\n      gsap.killTweensOf(mat.opacity);\n    },\n    { skipCurrencySymbols: false }\n  );\n}\n","import gsap from \"gsap\";\nimport * as THREE from \"three\";\nimport { camera } from \"../core/camera\";\nimport { ghosts } from \"../core/objects\";\nimport {\n  slerpToLayDown,\n  applyRotations,\n  OBJECT_KEYS,\n  isCurrencySymbol,\n  isPacmanPart,\n} from \"./util\";\nimport {\n  setMaterialOpacity,\n  setMaterialTransparent,\n  resetGhostMaterialsToFullOpacity,\n  forEachMaterial,\n} from \"../core/material-utils\";\nimport {\n  setFloorPlane,\n  setObjectScale,\n  killObjectAnimations,\n} from \"./scene-utils\";\nimport { SCALE, OPACITY, INTRO_POSITION_OFFSET } from \"./constants\";\n\nexport function applyHomeLoopPreset(\n  isEntering: boolean,\n  scrollDirection?: \"up\" | \"down\"\n) {\n  if (!isEntering) return;\n\n  Object.entries(ghosts).forEach(([key, object]) => {\n    gsap.set(object, { visible: true });\n    setObjectScale(object, key, \"home\");\n\n    forEachMaterial(\n      object,\n      (mat: any, mesh: THREE.Mesh, childName: string) => {\n        if (isCurrencySymbol(childName)) {\n          mesh.visible = false;\n          return;\n        }\n        mesh.visible = true;\n      },\n      { skipCurrencySymbols: false }\n    );\n\n    resetGhostMaterialsToFullOpacity(object);\n  });\n\n  setFloorPlane(true, OPACITY.FULL, false);\n}\n\nexport function applyHomeScrollPreset(\n  isEntering: boolean,\n  scrollDirection?: \"up\" | \"down\",\n  pausedPositions?: Record<string, THREE.Vector3>,\n  pausedRotations?: Record<string, THREE.Quaternion>\n) {\n  if (!isEntering) return;\n\n  if (pausedPositions && pausedRotations) {\n    Object.entries(ghosts).forEach(([key, object]) => {\n      if (pausedPositions[key]) {\n        object.position.set(\n          pausedPositions[key].x,\n          pausedPositions[key].y,\n          pausedPositions[key].z\n        );\n        gsap.set(object.position, {\n          x: pausedPositions[key].x,\n          y: pausedPositions[key].y,\n          z: pausedPositions[key].z,\n        });\n      }\n\n      gsap.set(object, { visible: true });\n\n      setObjectScale(object, key, \"home\");\n\n      forEachMaterial(\n        object,\n        (mat: any, mesh: THREE.Mesh, childName: string) => {\n          if (isCurrencySymbol(childName)) {\n            mesh.visible = false;\n            return;\n          }\n\n          mesh.visible = true;\n\n          setMaterialTransparent(mat, true, true);\n        },\n        { skipCurrencySymbols: false }\n      );\n    });\n  }\n\n  setFloorPlane(true, OPACITY.FULL, false);\n}\n\nexport { INTRO_POSITION_OFFSET };\n\nlet pacmanTargetQuaternion: THREE.Quaternion | null = null;\nlet ghostTargetQuaternion: THREE.Quaternion | null = null;\nlet introInitialRotations: Record<string, THREE.Quaternion> = {};\n\nexport function applyIntroScrollPreset(\n  isEntering: boolean,\n  scrollDirection?: \"up\" | \"down\"\n) {\n  if (!isEntering) return;\n\n  if (!pacmanTargetQuaternion || !ghostTargetQuaternion) {\n    const pacmanObj = ghosts.pacman;\n    if (pacmanObj) {\n      if (!introInitialRotations[\"pacman\"]) {\n        introInitialRotations[\"pacman\"] = pacmanObj.quaternion.clone();\n      }\n\n      let quat = introInitialRotations[\"pacman\"].clone();\n      slerpToLayDown(pacmanObj, quat, OPACITY.FULL);\n      quat = pacmanObj.quaternion.clone();\n\n      quat = applyRotations(quat, [\n        { axis: \"x\", angle: Math.PI / 2 },\n        { axis: \"y\", angle: Math.PI },\n        { axis: \"y\", angle: Math.PI },\n        { axis: \"x\", angle: Math.PI },\n        { axis: \"x\", angle: Math.PI },\n        { axis: \"y\", angle: Math.PI },\n      ]);\n\n      pacmanTargetQuaternion = quat;\n      pacmanObj.quaternion.copy(introInitialRotations[\"pacman\"]);\n    }\n\n    const ghostObj = ghosts.ghost1;\n    if (ghostObj) {\n      if (!introInitialRotations[\"ghost1\"]) {\n        introInitialRotations[\"ghost1\"] = ghostObj.quaternion.clone();\n      }\n\n      let quat = introInitialRotations[\"ghost1\"].clone();\n      slerpToLayDown(ghostObj, quat, OPACITY.FULL);\n      quat = ghostObj.quaternion.clone();\n\n      quat = applyRotations(quat, [\n        { axis: \"x\", angle: Math.PI },\n        { axis: \"x\", angle: Math.PI },\n        { axis: \"y\", angle: Math.PI },\n        { axis: \"y\", angle: Math.PI },\n        { axis: \"x\", angle: Math.PI },\n        { axis: \"x\", angle: Math.PI },\n      ]);\n\n      ghostTargetQuaternion = quat;\n      ghostObj.quaternion.copy(introInitialRotations[\"ghost1\"]);\n    }\n\n    OBJECT_KEYS.forEach((key) => {\n      const obj = ghosts[key];\n      if (obj && !introInitialRotations[key]) {\n        introInitialRotations[key] = obj.quaternion.clone();\n      }\n    });\n  }\n}\n\nexport function applyPovScrollPreset(\n  isEntering: boolean,\n  scrollDirection?: \"up\" | \"down\"\n) {\n  if (!isEntering) return;\n\n  if (ghosts.pacman) {\n    gsap.set(ghosts.pacman, { visible: false });\n  }\n\n  Object.entries(ghosts).forEach(([key, object]) => {\n    if (key !== \"pacman\") {\n      gsap.set(object, { visible: false });\n      setObjectScale(object, key, \"pov\");\n\n      forEachMaterial(\n        object,\n        (mat: any) => {\n          setMaterialOpacity(mat, 1, true);\n        },\n        { skipCurrencySymbols: false }\n      );\n    }\n  });\n\n  setFloorPlane(true, OPACITY.FULL, false);\n}\n\nexport function applyOutroScrollPreset(\n  isEntering: boolean,\n  scrollDirection?: \"up\" | \"down\"\n) {\n  if (!isEntering) return;\n\n  setFloorPlane(true, OPACITY.FULL, false);\n}\n\nlet lastScrollY = window.scrollY;\nexport function getScrollDirection(): \"up\" | \"down\" {\n  const currentScrollY = window.scrollY;\n  const direction = currentScrollY > lastScrollY ? \"down\" : \"up\";\n  lastScrollY = currentScrollY;\n  return direction;\n}\n","import * as THREE from \"three\";\n\nclass ObjectPool<T> {\n  private pool: T[] = [];\n  private createFn: () => T;\n  private resetFn?: (obj: T) => void;\n\n  constructor(createFn: () => T, resetFn?: (obj: T) => void) {\n    this.createFn = createFn;\n    this.resetFn = resetFn;\n  }\n\n  acquire(): T {\n    if (this.pool.length > 0) {\n      const obj = this.pool.pop()!;\n      if (this.resetFn) {\n        this.resetFn(obj);\n      }\n      return obj;\n    }\n    return this.createFn();\n  }\n\n  release(obj: T): void {\n    if (this.resetFn) {\n      this.resetFn(obj);\n    }\n    this.pool.push(obj);\n  }\n\n  clear(): void {\n    this.pool = [];\n  }\n}\n\nfunction resetVector3(v: THREE.Vector3): void {\n  v.set(0, 0, 0);\n}\n\nfunction resetQuaternion(q: THREE.Quaternion): void {\n  q.set(0, 0, 0, 1);\n}\n\nfunction resetObject3D(obj: THREE.Object3D): void {\n  obj.position.set(0, 0, 0);\n  obj.quaternion.set(0, 0, 0, 1);\n  obj.scale.set(1, 1, 1);\n  obj.rotation.set(0, 0, 0);\n}\n\nexport const vector3Pool = new ObjectPool<THREE.Vector3>(\n  () => new THREE.Vector3(),\n  resetVector3\n);\n\nexport const quaternionPool = new ObjectPool<THREE.Quaternion>(\n  () => new THREE.Quaternion(),\n  resetQuaternion\n);\n\nexport const object3DPool = new ObjectPool<THREE.Object3D>(\n  () => new THREE.Object3D(),\n  resetObject3D\n);\n\nexport const vector3PoolTemp = new ObjectPool<THREE.Vector3>(\n  () => new THREE.Vector3(),\n  resetVector3\n);\n\nexport const quaternionPoolTemp = new ObjectPool<THREE.Quaternion>(\n  () => new THREE.Quaternion(),\n  resetQuaternion\n);\n\n","import * as THREE from \"three\";\nimport { ghosts } from \"../core/objects\";\nimport {\n  setObjectOpacity,\n  forEachMaterial,\n  getObjectOpacity,\n} from \"../core/material-utils\";\nimport { vector3PoolTemp, quaternionPoolTemp } from \"../core/object-pool\";\n\nexport interface ObjectState {\n  position: THREE.Vector3;\n  rotation: THREE.Quaternion;\n  scale: THREE.Vector3;\n  visible: boolean;\n  opacity: number;\n}\n\nexport interface HomeLoopState {\n  t: number;\n  animationTime: number;\n}\n\nexport const homeLoopState: HomeLoopState = {\n  t: 0,\n  animationTime: 0,\n};\n\nexport const currentObjectStates: Record<string, ObjectState> = {};\n\nexport let homeLoopStartPositions: Record<string, THREE.Vector3> = {};\nexport let homeLoopStartRotations: Record<string, THREE.Quaternion> = {};\nexport let homeLoopStartT: number | null = null;\n\nlet isHomeLoopActive = false;\n\nexport function setHomeLoopActive(active: boolean) {\n  isHomeLoopActive = active;\n}\n\nexport function getIsHomeLoopActive(): boolean {\n  return isHomeLoopActive;\n}\n\nexport function updateHomeLoopT(t: number, animationTime: number) {\n  homeLoopState.t = t;\n  homeLoopState.animationTime = animationTime;\n}\n\nexport function initializeObjectStates() {\n  Object.entries(ghosts).forEach(([key, object]) => {\n    const initialOpacity = getObjectOpacity(object);\n\n    const pos = vector3PoolTemp.acquire();\n    pos.copy(object.position);\n    const rot = quaternionPoolTemp.acquire();\n    rot.copy(object.quaternion);\n    const scale = vector3PoolTemp.acquire();\n    scale.copy(object.scale);\n\n    currentObjectStates[key] = {\n      position: pos,\n      rotation: rot,\n      scale: scale,\n      visible: object.visible,\n      opacity: initialOpacity,\n    };\n  });\n}\n\nexport function getCurrentPositions(): Record<string, THREE.Vector3> {\n  const positions: Record<string, THREE.Vector3> = {};\n  Object.entries(currentObjectStates).forEach(([key, state]) => {\n    const tempPos = vector3PoolTemp.acquire();\n    tempPos.copy(state.position);\n    positions[key] = tempPos;\n  });\n  return positions;\n}\n\nexport function getCurrentRotations(): Record<string, THREE.Quaternion> {\n  const rotations: Record<string, THREE.Quaternion> = {};\n  Object.entries(currentObjectStates).forEach(([key, state]) => {\n    const tempRot = quaternionPoolTemp.acquire();\n    tempRot.copy(state.rotation);\n    rotations[key] = tempRot;\n  });\n  return rotations;\n}\n\nexport function updateObjectPosition(\n  key: string,\n  position: THREE.Vector3,\n  force: boolean = false,\n  preserveHomeLoopStart: boolean = false\n) {\n  if (!isHomeLoopActive && !force) {\n    return;\n  }\n\n  if (currentObjectStates[key]) {\n    currentObjectStates[key].position.copy(position);\n  }\n\n  if (preserveHomeLoopStart) {\n    const tempPos = vector3PoolTemp.acquire();\n    tempPos.copy(position);\n    homeLoopStartPositions[key] = tempPos;\n  }\n}\n\nexport function getHomeLoopStartPositions(): Record<string, THREE.Vector3> {\n  const result: Record<string, THREE.Vector3> = {};\n  Object.entries(homeLoopStartPositions).forEach(([key, pos]) => {\n    const tempPos = vector3PoolTemp.acquire();\n    tempPos.copy(pos);\n    result[key] = tempPos;\n  });\n  return result;\n}\n\nexport function updateObjectRotation(\n  key: string,\n  rotation: THREE.Quaternion,\n  preserveHomeLoopStart: boolean = false\n) {\n  if (currentObjectStates[key]) {\n    currentObjectStates[key].rotation.copy(rotation);\n  }\n\n  if (preserveHomeLoopStart) {\n    const tempRot = quaternionPoolTemp.acquire();\n    tempRot.copy(rotation);\n    homeLoopStartRotations[key] = tempRot;\n  }\n}\n\nexport function getHomeLoopStartRotations(): Record<string, THREE.Quaternion> {\n  const result: Record<string, THREE.Quaternion> = {};\n  Object.entries(homeLoopStartRotations).forEach(([key, rot]) => {\n    const tempRot = quaternionPoolTemp.acquire();\n    tempRot.copy(rot);\n    result[key] = tempRot;\n  });\n  return result;\n}\n\nexport function setHomeLoopStartT(t: number): void {\n  homeLoopStartT = t;\n}\n\nexport function getHomeLoopStartT(): number | null {\n  return homeLoopStartT;\n}\n","import gsap from \"gsap\";\nimport ScrollTrigger from \"gsap/ScrollTrigger\";\nimport * as THREE from \"three\";\nimport { camera } from \"../core/camera\";\nimport { ghosts } from \"../core/objects\";\nimport { getCameraHomeScrollPathPoints } from \"../paths/pathpoints\";\nimport { getHomeScrollPaths } from \"../paths/paths\";\nimport { LAY_DOWN_QUAT_1, OBJECT_KEYS } from \"./util\";\nimport { applyHomeScrollPreset, getScrollDirection } from \"./scene-presets\";\nimport {\n  getCurrentRotations,\n  getCurrentPositions,\n  getHomeLoopStartPositions,\n  getHomeLoopStartRotations,\n} from \"./object-state\";\nimport {\n  setObjectOpacity,\n  getObjectOpacity,\n  forEachMaterial,\n  setMaterialOpacity,\n} from \"../core/material-utils\";\nimport { killObjectAnimations } from \"./scene-utils\";\nimport {\n  SCROLL_SELECTORS,\n  SCRUB_DURATION,\n  STAGGER_AMOUNT,\n  OPACITY,\n} from \"./constants\";\nimport { vector3PoolTemp, quaternionPoolTemp } from \"../core/object-pool\";\n\nlet homeScrollTimeline: gsap.core.Timeline | null = null;\nconst originalFOV = 50;\n\nlet startPositions: Record<string, THREE.Vector3> = {};\n\nexport function initHomeScrollAnimation() {\n  if (homeScrollTimeline) {\n    homeScrollTimeline.kill();\n    homeScrollTimeline = null;\n  }\n\n  const cameraPathPoints = getCameraHomeScrollPathPoints();\n\n  const cameraPath = new THREE.CurvePath<THREE.Vector3>();\n  if (cameraPathPoints.length === 4) {\n    const cameraCurve = new THREE.CubicBezierCurve3(\n      cameraPathPoints[0].pos,\n      cameraPathPoints[1].pos,\n      cameraPathPoints[2].pos,\n      cameraPathPoints[3].pos\n    );\n    cameraPath.add(cameraCurve);\n  }\n\n  const handleScrollEnter = () => {\n    requestAnimationFrame(() => {\n      const introScrollTrigger = ScrollTrigger.getById(\"introScroll\");\n      if (introScrollTrigger?.isActive) {\n        return;\n      }\n\n      const homeLoopStartPos = getHomeLoopStartPositions();\n      const homeLoopStartRot = getHomeLoopStartRotations();\n      const scrollDir = getScrollDirection();\n\n      for (const key of OBJECT_KEYS) {\n        const object = ghosts[key];\n        if (homeLoopStartPos[key]) {\n          object.position.copy(homeLoopStartPos[key]);\n          const tempPos = vector3PoolTemp.acquire();\n          tempPos.copy(homeLoopStartPos[key]);\n          startPositions[key] = tempPos;\n        } else {\n          const currentPositions = getCurrentPositions();\n          const position = currentPositions[key] || object.position;\n          object.position.copy(position);\n          const tempPos = vector3PoolTemp.acquire();\n          tempPos.copy(position);\n          startPositions[key] = tempPos;\n        }\n\n        if (homeLoopStartRot[key]) {\n          object.quaternion.copy(homeLoopStartRot[key]);\n        }\n      }\n\n      const rotationsToUse =\n        Object.keys(homeLoopStartRot).length > 0\n          ? homeLoopStartRot\n          : getCurrentRotations();\n\n      applyHomeScrollPreset(true, scrollDir, startPositions, rotationsToUse);\n\n      createObjectAnimations();\n    });\n  };\n\n  homeScrollTimeline = gsap.timeline({\n    scrollTrigger: {\n      id: \"homeScroll\",\n      trigger: SCROLL_SELECTORS.HOME,\n      start: \"top top\",\n      end: \"bottom top\",\n      scrub: SCRUB_DURATION,\n      markers: false,\n      refreshPriority: 0,\n      invalidateOnRefresh: false,\n      onEnter: handleScrollEnter,\n      onEnterBack: handleScrollEnter,\n      onUpdate: (self) => {\n        if (cameraPath && cameraPath.curves.length) {\n          const progress = self.progress;\n          const clampedProgress = Math.min(1, Math.max(0, progress));\n          const cameraPoint = cameraPath.getPointAt(clampedProgress);\n          camera.position.copy(cameraPoint);\n\n          const lookAtPoints: THREE.Vector3[] = [];\n          cameraPathPoints.forEach((point) => {\n            if (\"lookAt\" in point && point.lookAt) {\n              lookAtPoints.push(point.lookAt);\n            }\n          });\n\n          if (lookAtPoints.length >= 4) {\n            const lookAtCurve = new THREE.CubicBezierCurve3(\n              lookAtPoints[0],\n              lookAtPoints[1],\n              lookAtPoints[2],\n              lookAtPoints[3]\n            );\n            const lookAtPoint = lookAtCurve.getPoint(clampedProgress);\n            camera.lookAt(lookAtPoint);\n          }\n          camera.fov = originalFOV;\n          camera.updateProjectionMatrix();\n        }\n      },\n      onLeave: () => {\n        const introScrollTrigger = ScrollTrigger.getById(\"introScroll\");\n        if (!introScrollTrigger?.isActive) {\n          homeScrollTimeline?.resume();\n        }\n      },\n      onLeaveBack: () => {\n        const introScrollTrigger = ScrollTrigger.getById(\"introScroll\");\n        if (!introScrollTrigger?.isActive) {\n          homeScrollTimeline?.resume();\n        }\n      },\n    },\n  });\n\n  for (const key of OBJECT_KEYS) {\n    const object = ghosts[key];\n    const tempPos = vector3PoolTemp.acquire();\n    tempPos.copy(object.position);\n    startPositions[key] = tempPos;\n  }\n\n  const createObjectAnimations = () => {\n    if (homeScrollTimeline) {\n      homeScrollTimeline.clear();\n    }\n\n    for (const key of OBJECT_KEYS) {\n      killObjectAnimations(ghosts[key]);\n    }\n\n    const homeScrollPaths = getHomeScrollPaths(startPositions);\n\n    const animPropsArray: any[] = [];\n    const animationData: Array<{\n      key: string;\n      object: THREE.Object3D;\n      path: THREE.CurvePath<THREE.Vector3>;\n      startEuler: THREE.Euler;\n      endEuler: THREE.Euler;\n    }> = [];\n\n    for (const key of OBJECT_KEYS) {\n      const object = ghosts[key];\n      const currentMaterialOpacity = getObjectOpacity(object);\n\n      forEachMaterial(\n        object,\n        (mat: any, mesh: THREE.Mesh) => {\n          const clonedMat = mat.clone();\n          setMaterialOpacity(clonedMat, currentMaterialOpacity, true);\n\n          if (Array.isArray(mesh.material)) {\n            const index = mesh.material.indexOf(mat);\n            if (index !== -1) {\n              const clonedMaterials = [...mesh.material];\n              clonedMaterials[index] = clonedMat;\n              mesh.material = clonedMaterials;\n            }\n          } else {\n            mesh.material = clonedMat;\n          }\n        },\n        { skipCurrencySymbols: false }\n      );\n\n      const homeLoopStartRot = getHomeLoopStartRotations();\n      const tempQuat = quaternionPoolTemp.acquire();\n      if (homeLoopStartRot[key]) {\n        tempQuat.copy(homeLoopStartRot[key]);\n      } else {\n        const currentRots = getCurrentRotations();\n        if (currentRots[key]) {\n          tempQuat.copy(currentRots[key]);\n        } else {\n          tempQuat.copy(object.quaternion);\n        }\n      }\n      const startEuler = new THREE.Euler().setFromQuaternion(tempQuat);\n      const endEuler = new THREE.Euler().setFromQuaternion(LAY_DOWN_QUAT_1);\n      quaternionPoolTemp.release(tempQuat);\n\n      const path = homeScrollPaths[key];\n      if (!path) {\n        return;\n      }\n\n      const animProps = {\n        progress: 0,\n        rotX: startEuler.x,\n        rotY: startEuler.y,\n        rotZ: startEuler.z,\n        opacity: currentMaterialOpacity,\n      };\n\n      animPropsArray.push(animProps);\n      animationData.push({\n        key,\n        object,\n        path,\n        startEuler,\n        endEuler,\n      });\n    }\n\n    const baseEndTime = 1;\n\n    animationData.forEach((data, index) => {\n      const animProps = animPropsArray[index];\n      const endTime = baseEndTime + index * STAGGER_AMOUNT;\n      const duration = endTime;\n\n      const startPathPoint = data.path.getPointAt(0);\n      data.object.position.copy(startPathPoint);\n\n      homeScrollTimeline!.fromTo(\n        animProps,\n        {\n          progress: 0,\n          rotX: data.startEuler.x,\n          rotY: data.startEuler.y,\n          rotZ: data.startEuler.z,\n          opacity: animProps.opacity,\n        },\n        {\n          progress: 1,\n          rotX: data.endEuler.x,\n          rotY: data.endEuler.y,\n          rotZ: data.endEuler.z,\n          opacity: OPACITY.HIDDEN,\n          ease: \"power2.out\",\n          immediateRender: false,\n          duration: duration,\n          onUpdate: function () {\n            const introScrollTrigger = ScrollTrigger.getById(\"introScroll\");\n            if (introScrollTrigger?.isActive) {\n              return;\n            }\n\n            const pathPoint = data.path.getPointAt(animProps.progress);\n            data.object.position.copy(pathPoint);\n\n            data.object.rotation.set(\n              animProps.rotX,\n              animProps.rotY,\n              animProps.rotZ\n            );\n            data.object.quaternion.setFromEuler(data.object.rotation);\n\n            setObjectOpacity(data.object, animProps.opacity, {\n              preserveTransmission: true,\n              skipCurrencySymbols: true,\n            });\n          },\n        },\n        0\n      );\n    });\n  };\n\n  createObjectAnimations();\n}\n","import * as THREE from \"three\";\nimport { performanceProfiler } from \"../core/performance-profiler\";\n\ninterface PathCacheEntry {\n  point: THREE.Vector3;\n  tangent: THREE.Vector3;\n  t: number;\n}\n\nclass PathCache {\n  private cache: Map<string, PathCacheEntry> = new Map();\n  private readonly cacheSize = 200;\n\n  private getCacheKey(path: THREE.CurvePath<THREE.Vector3>, t: number): string {\n    const pathId = (path as any).uuid || Math.random().toString();\n    return `${pathId}_${t.toFixed(6)}`;\n  }\n\n  getPoint(\n    path: THREE.CurvePath<THREE.Vector3>,\n    t: number,\n    result: THREE.Vector3\n  ): THREE.Vector3 {\n    const roundedT = Math.round(t * 5000) / 5000;\n    const key = this.getCacheKey(path, roundedT);\n    const cached = this.cache.get(key);\n\n    if (cached) {\n      result.copy(cached.point);\n      return result;\n    }\n\n    performanceProfiler.start(\"path-getPointAt\");\n    const point = path.getPointAt(t);\n    performanceProfiler.end(\"path-getPointAt\");\n    result.copy(point);\n\n    if (this.cache.size >= this.cacheSize) {\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey !== undefined) {\n        this.cache.delete(firstKey);\n      }\n    }\n\n    performanceProfiler.start(\"path-getTangentAt\");\n    const tangent = path.getTangentAt(t);\n    performanceProfiler.end(\"path-getTangentAt\");\n    const entry: PathCacheEntry = {\n      point: point.clone(),\n      tangent: tangent.clone(),\n      t: roundedT,\n    };\n    this.cache.set(key, entry);\n\n    return result;\n  }\n\n  getTangent(\n    path: THREE.CurvePath<THREE.Vector3>,\n    t: number,\n    result: THREE.Vector3\n  ): THREE.Vector3 {\n    const roundedT = Math.round(t * 10000) / 10000;\n    const key = this.getCacheKey(path, roundedT);\n    const cached = this.cache.get(key);\n\n    if (cached) {\n      result.copy(cached.tangent);\n      return result;\n    }\n\n    performanceProfiler.start(\"path-getTangentAt\");\n    const tangent = path.getTangentAt(t);\n    performanceProfiler.end(\"path-getTangentAt\");\n    result.copy(tangent);\n\n    if (this.cache.size >= this.cacheSize) {\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey !== undefined) {\n        this.cache.delete(firstKey);\n      }\n    }\n\n    performanceProfiler.start(\"path-getPointAt\");\n    const point = path.getPointAt(t);\n    performanceProfiler.end(\"path-getPointAt\");\n    const entry: PathCacheEntry = {\n      point: point.clone(),\n      tangent: tangent.clone(),\n      t: roundedT,\n    };\n    this.cache.set(key, entry);\n\n    return result;\n  }\n\n  clear(): void {\n    this.cache.clear();\n  }\n}\n\nexport const pathCache = new PathCache();\n","import * as THREE from \"three\";\nimport ScrollTrigger from \"gsap/ScrollTrigger\";\nimport { ghosts, pacmanMixer } from \"../core/objects\";\nimport { clock, onFrame } from \"../core/scene\";\nimport { getHomePaths, TangentSmoother } from \"../paths/paths\";\nimport { initHomeScrollAnimation } from \"./home-scroll\";\nimport { calculateObjectOrientation, OBJECT_KEYS } from \"./util\";\nimport { applyHomeLoopPreset } from \"./scene-presets\";\nimport {\n  SCALE,\n  TANGENT_SMOOTHING,\n  ROTATION_TRANSITION_DURATION,\n} from \"./constants\";\nimport { setObjectScale } from \"./scene-utils\";\nimport {\n  setHomeLoopActive,\n  updateHomeLoopT,\n  getHomeLoopStartRotations,\n  setHomeLoopStartT,\n  getHomeLoopStartT,\n  currentObjectStates,\n  homeLoopStartPositions,\n  homeLoopStartRotations,\n} from \"./object-state\";\nimport { isCurrencySymbol } from \"./util\";\nimport {\n  quaternionPool,\n  object3DPool,\n  vector3PoolTemp,\n  quaternionPoolTemp,\n} from \"../core/object-pool\";\nimport { pathCache } from \"../paths/path-cache\";\nimport { throttle } from \"../core/throttle\";\nimport { performanceProfiler } from \"../core/performance-profiler\";\n\nconst LOOP_DURATION = 50;\nlet isHomeLoopActive = true;\nlet animationTime = 0;\nlet homeLoopFrameRegistered = false;\nlet rotationTransitionTime = 0;\nlet startRotations: Record<string, THREE.Quaternion> = {};\nlet cachedHomePaths: Record<string, THREE.CurvePath<THREE.Vector3>> | null =\n  null;\nconst homeLoopScaleCache: Record<string, string> = {};\nlet hasBeenPausedBefore = false;\n\nconst homeLoopTangentSmoothers: Record<string, TangentSmoother> = {};\n\nfunction initializeHomeLoopTangentSmoothers() {\n  const smoothingFactor = TANGENT_SMOOTHING.HOME_LOOP;\n  const initialVector = new THREE.Vector3(1, 0, 0);\n\n  OBJECT_KEYS.forEach((key) => {\n    homeLoopTangentSmoothers[key] = new TangentSmoother(\n      initialVector.clone(),\n      smoothingFactor\n    );\n  });\n}\n\nfunction stopHomeLoop() {\n  if (!isHomeLoopActive) return;\n  isHomeLoopActive = false;\n  setHomeLoopActive(false);\n  hasBeenPausedBefore = true;\n\n  const exactT = (animationTime % LOOP_DURATION) / LOOP_DURATION;\n  setHomeLoopStartT(exactT);\n\n  for (const key of OBJECT_KEYS) {\n    const ghost = ghosts[key];\n    const tempPos = vector3PoolTemp.acquire();\n    tempPos.copy(ghost.position);\n    if (currentObjectStates[key]) {\n      currentObjectStates[key].position.copy(tempPos);\n    }\n    const tempPos2 = vector3PoolTemp.acquire();\n    tempPos2.copy(tempPos);\n    homeLoopStartPositions[key] = tempPos2;\n    vector3PoolTemp.release(tempPos);\n\n    const tempRot = quaternionPoolTemp.acquire();\n    tempRot.copy(ghost.quaternion);\n    if (currentObjectStates[key]) {\n      currentObjectStates[key].rotation.copy(tempRot);\n    }\n    const tempRot2 = quaternionPoolTemp.acquire();\n    tempRot2.copy(tempRot);\n    homeLoopStartRotations[key] = tempRot2;\n    quaternionPoolTemp.release(tempRot);\n  }\n\n  initHomeScrollAnimation();\n}\n\nexport function startHomeLoop() {\n  isHomeLoopActive = true;\n  setHomeLoopActive(true);\n\n  const homePaths = getHomePaths();\n  const homeLoopStartRot = getHomeLoopStartRotations();\n  const savedT = getHomeLoopStartT();\n\n  if (hasBeenPausedBefore && savedT !== null) {\n    animationTime = savedT * LOOP_DURATION;\n  }\n\n  rotationTransitionTime = 0;\n  startRotations = {};\n\n  applyHomeLoopPreset(true);\n\n  initializeHomeLoopTangentSmoothers();\n\n  for (const key of OBJECT_KEYS) {\n    const ghost = ghosts[key];\n    const path = homePaths[key];\n    if (path) {\n      if (hasBeenPausedBefore && savedT !== null) {\n        const tempPos = vector3PoolTemp.acquire();\n        pathCache.getPoint(path, savedT, tempPos);\n        ghost.position.copy(tempPos);\n        if (currentObjectStates[key]) {\n          currentObjectStates[key].position.copy(tempPos);\n        }\n        vector3PoolTemp.release(tempPos);\n      }\n\n      const savedRotation = homeLoopStartRot[key];\n\n      if (savedRotation) {\n        ghost.quaternion.copy(savedRotation);\n        if (currentObjectStates[key]) {\n          currentObjectStates[key].rotation.copy(savedRotation);\n        }\n        if (hasBeenPausedBefore) {\n          const tempRot = quaternionPoolTemp.acquire();\n          tempRot.copy(savedRotation);\n          startRotations[key] = tempRot;\n        }\n      } else {\n        if (currentObjectStates[key]) {\n          currentObjectStates[key].rotation.copy(ghost.quaternion);\n        }\n        if (hasBeenPausedBefore) {\n          const tempRot = quaternionPoolTemp.acquire();\n          tempRot.copy(ghost.quaternion);\n          startRotations[key] = tempRot;\n        }\n      }\n\n      if (key !== \"pacman\") {\n        ghost.visible = true;\n      }\n      const scaleKey = `${key}-home`;\n      if (homeLoopScaleCache[scaleKey] !== \"home\") {\n        setObjectScale(ghost, key, \"home\");\n        homeLoopScaleCache[scaleKey] = \"home\";\n      }\n\n      if (homeLoopTangentSmoothers[key] && savedT !== null) {\n        const tempTangent = vector3PoolTemp.acquire();\n        pathCache.getTangent(path, savedT, tempTangent);\n        if (tempTangent.length() > 0) {\n          homeLoopTangentSmoothers[key].reset(tempTangent);\n        }\n        vector3PoolTemp.release(tempTangent);\n      }\n    }\n  }\n\n  if (!homeLoopFrameRegistered) {\n    let lastTime = clock.getElapsedTime();\n    onFrame(() => {\n      if (document.hidden) {\n        lastTime = clock.getElapsedTime();\n        return;\n      }\n\n      const currentTime = clock.getElapsedTime();\n      const delta = currentTime - lastTime;\n      lastTime = currentTime;\n\n      performanceProfiler.measure(\"home-loop-update\", () => {\n        updateHomeLoop(delta);\n      });\n    });\n    homeLoopFrameRegistered = true;\n  }\n}\n\nfunction updateHomeLoop(delta: number) {\n  if (!isHomeLoopActive) return;\n\n  const introScrollTrigger = ScrollTrigger.getById(\"introScroll\");\n  if (introScrollTrigger?.isActive) return;\n\n  const maxDelta = 0.1;\n  const clampedDelta = Math.min(delta, maxDelta);\n\n  animationTime += clampedDelta;\n  rotationTransitionTime += clampedDelta;\n\n  const t = (animationTime % LOOP_DURATION) / LOOP_DURATION;\n\n  updateHomeLoopT(t, animationTime);\n\n  if (!cachedHomePaths) {\n    cachedHomePaths = getHomePaths();\n  }\n  const homePaths = cachedHomePaths;\n  if (pacmanMixer) {\n    pacmanMixer.update(clampedDelta);\n  }\n\n  const transitionProgress = Math.min(\n    rotationTransitionTime / ROTATION_TRANSITION_DURATION,\n    1\n  );\n  const isTransitioning = hasBeenPausedBefore && transitionProgress < 1;\n\n  for (const key of OBJECT_KEYS) {\n    const ghost = ghosts[key];\n    const path = homePaths[key];\n    if (path) {\n      const objectT = t;\n\n      const tempPos = vector3PoolTemp.acquire();\n      pathCache.getPoint(path, objectT, tempPos);\n      ghost.position.copy(tempPos);\n      vector3PoolTemp.release(tempPos);\n\n      const scaleKey = `${key}-home`;\n      if (homeLoopScaleCache[scaleKey] !== \"home\") {\n        setObjectScale(ghost, key, \"home\");\n        homeLoopScaleCache[scaleKey] = \"home\";\n      }\n\n      const targetQuat = quaternionPool.acquire();\n      if (homeLoopTangentSmoothers[key] && objectT > 0) {\n        const rawTangent = vector3PoolTemp.acquire();\n        pathCache.getTangent(path, objectT, rawTangent);\n        if (rawTangent.length() > 0) {\n          const smoothTangent =\n            homeLoopTangentSmoothers[key].update(rawTangent);\n          const objectType = key === \"pacman\" ? \"pacman\" : \"ghost\";\n\n          const tempObject = object3DPool.acquire();\n          calculateObjectOrientation(tempObject, smoothTangent, objectType);\n          targetQuat.copy(tempObject.quaternion);\n          object3DPool.release(tempObject);\n        }\n        vector3PoolTemp.release(rawTangent);\n      }\n\n      if (isTransitioning && startRotations[key]) {\n        const easedProgress =\n          transitionProgress *\n          transitionProgress *\n          (3 - 2 * transitionProgress);\n        const tempQuat = quaternionPool.acquire();\n        tempQuat.copy(startRotations[key]).slerp(targetQuat, easedProgress);\n        ghost.quaternion.copy(tempQuat);\n        quaternionPool.release(tempQuat);\n      } else {\n        ghost.quaternion.copy(targetQuat);\n      }\n      quaternionPool.release(targetQuat);\n    }\n  }\n  performanceProfiler.end(\"home-loop-objects\");\n}\n\nexport function homeLoopHandler() {\n  if (window.scrollY === 0) {\n    startHomeLoop();\n  }\n}\n\nexport function setupHomeLoopScrollHandler() {\n  const throttledScrollHandler = throttle(() => {\n    if (window.scrollY === 0) {\n      if (!isHomeLoopActive) {\n        startHomeLoop();\n      }\n    } else {\n      if (isHomeLoopActive) {\n        stopHomeLoop();\n      }\n    }\n  }, 16);\n\n  window.addEventListener(\"scroll\", throttledScrollHandler, { passive: true });\n}\n","export function throttle<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  let previous = 0;\n\n  return function (this: any, ...args: Parameters<T>) {\n    const now = Date.now();\n    const remaining = wait - (now - previous);\n\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      func.apply(this, args);\n    } else if (!timeout) {\n      timeout = setTimeout(() => {\n        previous = Date.now();\n        timeout = null;\n        func.apply(this, args);\n      }, remaining);\n    }\n  };\n}\n\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n\n  return function (this: any, ...args: Parameters<T>) {\n    const later = () => {\n      timeout = null;\n      func.apply(this, args);\n    };\n\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(later, wait);\n  };\n}\n\n","import gsap from \"gsap\";\nimport ScrollTrigger from \"gsap/ScrollTrigger\";\nimport * as THREE from \"three\";\nimport { camera } from \"../core/camera\";\nimport { ghosts } from \"../core/objects\";\nimport { getPovPaths, TangentSmoother } from \"../paths/paths\";\nimport {\n  povTriggerPositions,\n  povPaths as pathPointsData,\n} from \"../paths/pathpoints\";\nimport { DOM_ELEMENTS } from \"../config/dom-elements\";\nimport { calculateObjectOrientation } from \"./util\";\nimport { applyPovScrollPreset, getScrollDirection } from \"./scene-presets\";\nimport {\n  SCALE,\n  TANGENT_SMOOTHING,\n  PARAMETER_SMOOTHING_FACTOR,\n  GHOST_FADE_THRESHOLD,\n  GHOST_FADE_OUT_DURATION,\n  FIND_CLOSEST_SAMPLES,\n  SCRUB_DURATION,\n  POV_SEQUENCE_PHASE_END,\n  POV_TRANSITION_PHASE_END,\n  POV_Y_CONSTRAINT_THRESHOLD,\n  OPACITY_VISIBILITY_THRESHOLD,\n  clamp,\n} from \"./constants\";\nimport { setObjectScale } from \"./scene-utils\";\nimport { setObjectOpacity } from \"../core/material-utils\";\nimport { vector3Pool, vector3PoolTemp } from \"../core/object-pool\";\nimport { pathCache } from \"../paths/path-cache\";\n\nconst domElementCache: Record<\n  number,\n  {\n    parent: HTMLElement | null;\n    povElements: NodeListOf<Element>;\n    camElements: NodeListOf<Element>;\n  }\n> = {};\n\ngsap.registerPlugin(ScrollTrigger);\n\nlet povScrollTimeline: gsap.core.Timeline | null = null;\n\nlet previousCameraPosition: THREE.Vector3 | null = null;\nlet rotationStarted = false;\nlet startedInitEndScreen = false;\n\nconst startRotationPoint = new THREE.Vector3(0.55675, 0.55, 1.306);\nconst endRotationPoint = new THREE.Vector3(-0.14675, 1, 1.8085);\n\nconst wideFOV = 80;\n\nlet cachedStartYAngle: number | null = null;\n\nconst ghostStates: Record<string, any> = {};\n\nconst povTangentSmoothers: Record<string, TangentSmoother> = {};\n\nfunction getCustomLookAtForProgress(\n  progress: number,\n  povPaths: Record<string, THREE.CurvePath<THREE.Vector3>>\n): THREE.Vector3 | null {\n  const cameraPathPoints = pathPointsData.camera;\n\n  if (progress <= POV_SEQUENCE_PHASE_END) {\n    const firstPoint = cameraPathPoints[0];\n\n    if (\"lookAtSequence\" in firstPoint && firstPoint.lookAtSequence?.length) {\n      const sequenceProgress = progress / POV_SEQUENCE_PHASE_END;\n      const sequenceLength = firstPoint.lookAtSequence.length;\n\n      const segmentSize = 1 / sequenceLength;\n      const currentSegment = Math.floor(sequenceProgress / segmentSize);\n      const segmentProgress = (sequenceProgress % segmentSize) / segmentSize;\n\n      const fromIndex = Math.min(currentSegment, sequenceLength - 1);\n      const toIndex = Math.min(currentSegment + 1, sequenceLength - 1);\n\n      if (fromIndex === toIndex) {\n        return firstPoint.lookAtSequence[fromIndex];\n      } else {\n        const fromTarget = firstPoint.lookAtSequence[fromIndex];\n        const toTarget = firstPoint.lookAtSequence[toIndex];\n        const tempResult = vector3Pool.acquire();\n        tempResult.copy(fromTarget).lerp(toTarget, segmentProgress);\n        const result = vector3PoolTemp.acquire();\n        result.copy(tempResult);\n        vector3Pool.release(tempResult);\n        return result;\n      }\n    }\n  } else if (progress <= POV_TRANSITION_PHASE_END) {\n    const firstPoint = cameraPathPoints[0];\n\n    if (\"lookAtSequence\" in firstPoint && firstPoint.lookAtSequence?.length) {\n      const finalSequenceLookAt =\n        firstPoint.lookAtSequence[firstPoint.lookAtSequence.length - 1];\n\n      const tempPos = vector3PoolTemp.acquire();\n      pathCache.getPoint(povPaths.camera, progress, tempPos);\n      const position = tempPos;\n      const tempTan = vector3PoolTemp.acquire();\n      pathCache.getTangent(povPaths.camera, progress, tempTan).normalize();\n      const tangent = tempTan;\n\n      const constrainedTangent = vector3Pool.acquire();\n      constrainedTangent.set(tangent.x, 0, tangent.z).normalize();\n      const defaultLookAt = vector3Pool.acquire();\n      defaultLookAt.copy(position).add(constrainedTangent);\n\n      const transitionProgress =\n        (progress - POV_SEQUENCE_PHASE_END) /\n        (POV_TRANSITION_PHASE_END - POV_SEQUENCE_PHASE_END);\n\n      const tempResult = vector3Pool.acquire();\n      tempResult\n        .copy(finalSequenceLookAt)\n        .lerp(defaultLookAt, transitionProgress);\n      const result = vector3PoolTemp.acquire();\n      result.copy(tempResult);\n\n      vector3Pool.release(constrainedTangent);\n      vector3Pool.release(defaultLookAt);\n      vector3Pool.release(tempResult);\n      vector3PoolTemp.release(tempPos);\n      vector3PoolTemp.release(tempTan);\n\n      return result;\n    }\n  }\n\n  return null;\n}\n\nfunction initializePovTangentSmoothers() {\n  const smoothingFactor = TANGENT_SMOOTHING.POV;\n\n  povTangentSmoothers.camera = new TangentSmoother(\n    new THREE.Vector3(0, 0, -1),\n    smoothingFactor\n  );\n\n  for (let i = 1; i <= 5; i++) {\n    povTangentSmoothers[`ghost${i}`] = new TangentSmoother(\n      new THREE.Vector3(1, 0, 0),\n      smoothingFactor\n    );\n  }\n}\n\nexport function initPovScrollAnimation() {\n  if (povScrollTimeline) {\n    povScrollTimeline.kill();\n    povScrollTimeline = null;\n  }\n\n  initializePovTangentSmoothers();\n\n  Object.keys(povTriggerPositions).forEach((key) => {\n    ghostStates[key] = {\n      hasBeenTriggered: false,\n      triggerCameraProgress: null,\n      ghostStartFadeInProgress: null,\n      ghostEndFadeInProgress: null,\n      ghostStartFadeOutProgress: null,\n      camStartFadeInProgress: null,\n      camEndFadeInProgress: null,\n      camStartFadeOutProgress: null,\n      endCameraProgress: null,\n      currentPathT: 0,\n    };\n  });\n\n  povScrollTimeline = gsap\n    .timeline({\n      scrollTrigger: {\n        id: \"povScroll\",\n        trigger: DOM_ELEMENTS.povSection,\n        start: \"top bottom\",\n        end: \"bottom top\",\n        markers: false,\n        scrub: SCRUB_DURATION,\n        toggleActions: \"play none none reverse\",\n        onEnter: () => {\n          const scrollDir = getScrollDirection();\n          applyPovScrollPreset(true, scrollDir);\n        },\n        onEnterBack: () => {\n          const scrollDir = getScrollDirection();\n          applyPovScrollPreset(true, scrollDir);\n        },\n      },\n    })\n    .addLabel(\"pov-animation-start\", 0)\n    .to(\n      { progress: 0 },\n      {\n        progress: 1,\n        immediateRender: false,\n        onStart: handleAnimationStart,\n        onUpdate: function (this: gsap.core.Tween) {\n          handleAnimationUpdate.call(this);\n        },\n        onReverseComplete: () => {\n          handleLeavePOV();\n          resetState();\n        },\n        onComplete: () => {\n          handleLeavePOV();\n          resetState();\n        },\n      }\n    )\n    .addLabel(\"pov-animation-sequence-phase\", POV_SEQUENCE_PHASE_END)\n    .addLabel(\"pov-animation-transition-phase\", POV_TRANSITION_PHASE_END)\n    .addLabel(\"pov-animation-end\", 1);\n}\n\nfunction handleAnimationStart() {\n  const povPaths = getPovPaths();\n\n  if (povTangentSmoothers.camera && povPaths.camera) {\n    const tempTangent = vector3PoolTemp.acquire();\n    pathCache.getTangent(povPaths.camera, 0, tempTangent);\n    if (tempTangent.length() > 0) {\n      povTangentSmoothers.camera.reset(tempTangent);\n    }\n    vector3PoolTemp.release(tempTangent);\n  }\n\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    if (povPaths[key] && key !== \"pacman\") {\n      const tempPos = vector3PoolTemp.acquire();\n      pathCache.getPoint(povPaths[key], 0, tempPos);\n      ghost.position.copy(tempPos);\n      const tempTan = vector3PoolTemp.acquire();\n      pathCache.getTangent(povPaths[key], 0, tempTan).normalize();\n      const lookAtPoint = vector3Pool.acquire();\n      lookAtPoint.copy(tempPos).add(tempTan);\n      ghost.lookAt(lookAtPoint);\n      vector3Pool.release(lookAtPoint);\n      vector3PoolTemp.release(tempPos);\n      vector3PoolTemp.release(tempTan);\n      ghost.visible = false;\n      setObjectScale(ghost, key, \"pov\");\n    }\n  });\n\n  if (ghosts.pacman) {\n    ghosts.pacman.visible = false;\n  }\n}\n\nfunction handleAnimationUpdate(this: gsap.core.Tween) {\n  const overallProgress = (this.targets()[0] as any).progress;\n\n  const povPaths = getPovPaths();\n\n  if (!povPaths.camera) return;\n\n  const tempCameraPos = vector3PoolTemp.acquire();\n  pathCache.getPoint(povPaths.camera, overallProgress, tempCameraPos);\n  const cameraPosition = tempCameraPos;\n\n  if (previousCameraPosition) {\n    updateCamera(overallProgress, povPaths, cameraPosition);\n    updateGhosts(cameraPosition, overallProgress, povPaths);\n    previousCameraPosition.copy(cameraPosition);\n  } else {\n    const tempPrevPos = vector3PoolTemp.acquire();\n    tempPrevPos.copy(cameraPosition);\n    previousCameraPosition = tempPrevPos;\n  }\n  vector3PoolTemp.release(tempCameraPos);\n}\n\nfunction updateCamera(\n  progress: number,\n  povPaths: Record<string, THREE.CurvePath<THREE.Vector3>>,\n  position: THREE.Vector3\n) {\n  const introScrollTrigger = ScrollTrigger.getById(\"introScroll\");\n  const isIntroScrollActive = introScrollTrigger && introScrollTrigger.isActive;\n\n  if (isIntroScrollActive) {\n    return;\n  }\n\n  camera.position.copy(position);\n  camera.fov = wideFOV;\n\n  const customLookAt = getCustomLookAtForProgress(progress, povPaths);\n  if (customLookAt) {\n    camera.lookAt(customLookAt);\n    camera.updateProjectionMatrix();\n    return;\n  }\n\n  const rawTangent = vector3PoolTemp.acquire();\n  pathCache.getTangent(povPaths.camera, progress, rawTangent).normalize();\n  let smoothTangent = rawTangent;\n  let shouldReleaseRawTangent = true;\n\n  if (povTangentSmoothers.camera && progress > 0) {\n    smoothTangent = povTangentSmoothers.camera.update(rawTangent);\n  }\n\n  if (progress <= POV_Y_CONSTRAINT_THRESHOLD) {\n    const constrainedTangent = vector3Pool.acquire();\n    constrainedTangent.set(smoothTangent.x, 0, smoothTangent.z).normalize();\n    if (smoothTangent === rawTangent) {\n      shouldReleaseRawTangent = false;\n    }\n    smoothTangent = constrainedTangent;\n  }\n\n  const defaultLookAt = vector3Pool.acquire();\n  defaultLookAt.copy(position).add(smoothTangent);\n  handleDefaultOrientation(progress, defaultLookAt);\n\n  if (shouldReleaseRawTangent && smoothTangent !== rawTangent) {\n    vector3PoolTemp.release(rawTangent);\n  }\n\n  if (progress <= POV_Y_CONSTRAINT_THRESHOLD) {\n    vector3Pool.release(smoothTangent as THREE.Vector3);\n  }\n  vector3Pool.release(defaultLookAt);\n\n  camera.updateProjectionMatrix();\n}\n\nfunction handleDefaultOrientation(\n  progress: number,\n  defaultLookAt: THREE.Vector3\n) {\n  const povPaths = getPovPaths();\n  const startRotationProgress = findClosestProgressOnPath(\n    povPaths.camera,\n    startRotationPoint\n  );\n  const endRotationProgress = findClosestProgressOnPath(\n    povPaths.camera,\n    endRotationPoint\n  );\n\n  if (\n    (progress < startRotationProgress || progress > endRotationProgress) &&\n    !startedInitEndScreen\n  ) {\n    cachedStartYAngle = null;\n    rotationStarted = false;\n    startedInitEndScreen = false;\n  }\n\n  if (!rotationStarted && !startedInitEndScreen) {\n    camera.lookAt(defaultLookAt);\n  }\n}\n\nfunction updateGhosts(\n  cameraPosition: THREE.Vector3,\n  overallProgress: number,\n  povPaths: Record<string, THREE.CurvePath<THREE.Vector3>>\n) {\n  Object.entries(povTriggerPositions).forEach(([key, triggerData]) => {\n    const ghost = ghosts[key];\n    const path = povPaths[key];\n\n    if (!ghost || !path || key === \"pacman\") return;\n    const forceEndProgress =\n      overallProgress > triggerData.forceEndProgress.start &&\n      overallProgress < triggerData.forceEndProgress.end;\n\n    updateGhost(\n      key,\n      ghost,\n      path,\n      cameraPosition,\n      triggerData,\n      forceEndProgress\n    );\n  });\n}\n\nfunction updateGhost(\n  key: string,\n  ghost: THREE.Object3D,\n  path: THREE.CurvePath<THREE.Vector3>,\n  cameraPosition: THREE.Vector3,\n  triggerData: any,\n  forceEndProgress: boolean\n) {\n  const {\n    triggerPos,\n    ghostStartFadeIn,\n    ghostEndFadeIn,\n    ghostStartFadeOut,\n    camStartFadeIn,\n    camEndFadeIn,\n    camStartFadeOut,\n    endPosition,\n  } = triggerData;\n  const state = ghostStates[key];\n\n  const ghostIndex = parseInt(key.replace(\"ghost\", \"\")) - 1;\n  let cached = domElementCache[ghostIndex];\n\n  if (!cached) {\n    const parentElements = document.querySelectorAll(\".cmp--pov.cmp\");\n    const parent = parentElements[ghostIndex] as HTMLElement;\n    cached = {\n      parent: parent || null,\n      povElements: parent\n        ? parent.querySelectorAll(\".pov\")\n        : (document.querySelectorAll(\".nonexistent\") as NodeListOf<Element>),\n      camElements: parent\n        ? parent.querySelectorAll(\".cam\")\n        : (document.querySelectorAll(\".nonexistent\") as NodeListOf<Element>),\n    };\n    domElementCache[ghostIndex] = cached;\n  }\n\n  const { parent, povElements, camElements } = cached;\n  if (!parent || !povElements.length || !camElements.length) return;\n\n  const povPaths = getPovPaths();\n  if (state.triggerCameraProgress === null) {\n    state.triggerCameraProgress = findClosestProgressOnPath(\n      povPaths.camera,\n      triggerPos,\n      FIND_CLOSEST_SAMPLES\n    );\n    state.ghostStartFadeInProgress = findClosestProgressOnPath(\n      povPaths.camera,\n      ghostStartFadeIn,\n      FIND_CLOSEST_SAMPLES\n    );\n    state.ghostEndFadeInProgress = findClosestProgressOnPath(\n      povPaths.camera,\n      ghostEndFadeIn,\n      FIND_CLOSEST_SAMPLES\n    );\n    state.ghostStartFadeOutProgress = findClosestProgressOnPath(\n      povPaths.camera,\n      ghostStartFadeOut,\n      FIND_CLOSEST_SAMPLES\n    );\n    state.camStartFadeInProgress = findClosestProgressOnPath(\n      povPaths.camera,\n      camStartFadeIn,\n      FIND_CLOSEST_SAMPLES\n    );\n    state.camEndFadeInProgress = findClosestProgressOnPath(\n      povPaths.camera,\n      camEndFadeIn,\n      FIND_CLOSEST_SAMPLES\n    );\n    state.camStartFadeOutProgress = findClosestProgressOnPath(\n      povPaths.camera,\n      camStartFadeOut,\n      FIND_CLOSEST_SAMPLES\n    );\n    state.endCameraProgress = findClosestProgressOnPath(\n      povPaths.camera,\n      endPosition,\n      FIND_CLOSEST_SAMPLES\n    );\n  }\n\n  const currentCameraProgress = findClosestProgressOnPath(\n    povPaths.camera,\n    cameraPosition,\n    FIND_CLOSEST_SAMPLES\n  );\n\n  if (\n    currentCameraProgress >= state.triggerCameraProgress &&\n    currentCameraProgress <= state.endCameraProgress\n  ) {\n    if (!ghost.visible) {\n      ghost.visible = true;\n      state.hasBeenTriggered = true;\n\n      if (povTangentSmoothers[key]) {\n        const tempTangent = vector3PoolTemp.acquire();\n        pathCache.getTangent(path, 0, tempTangent);\n        if (tempTangent.length() > 0) {\n          povTangentSmoothers[key].reset(tempTangent);\n        }\n        vector3PoolTemp.release(tempTangent);\n      }\n    }\n\n    const normalizedProgress =\n      (currentCameraProgress - state.triggerCameraProgress) /\n      (state.endCameraProgress - state.triggerCameraProgress);\n    let ghostProgress = clamp(normalizedProgress);\n\n    if (state.currentPathT === undefined) {\n      state.currentPathT = ghostProgress;\n    } else {\n      state.currentPathT +=\n        (ghostProgress - state.currentPathT) * PARAMETER_SMOOTHING_FACTOR;\n    }\n\n    ghostProgress = state.currentPathT;\n\n    const tempPathPoint = vector3PoolTemp.acquire();\n    pathCache.getPoint(path, ghostProgress, tempPathPoint);\n    ghost.position.copy(tempPathPoint);\n\n    if (povTangentSmoothers[key] && ghostProgress > 0) {\n      const rawTangent = vector3PoolTemp.acquire();\n      pathCache.getTangent(path, ghostProgress, rawTangent);\n      if (rawTangent.length() > 0) {\n        const smoothTangent = povTangentSmoothers[key].update(rawTangent);\n        calculateObjectOrientation(ghost, smoothTangent, \"ghost\");\n      }\n      vector3PoolTemp.release(rawTangent);\n    }\n    vector3PoolTemp.release(tempPathPoint);\n\n    const targetOpacity =\n      ghostProgress > GHOST_FADE_THRESHOLD\n        ? 1 - (ghostProgress - GHOST_FADE_THRESHOLD) / GHOST_FADE_OUT_DURATION\n        : 1.0;\n    setObjectOpacity(ghost, targetOpacity, {\n      preserveTransmission: true,\n      skipCurrencySymbols: true,\n    });\n  } else {\n    ghost.visible = false;\n    state.hasBeenTriggered = false;\n  }\n\n  updateTextVisibility(\n    key,\n    currentCameraProgress,\n    state,\n    parent,\n    povElements,\n    camElements,\n    forceEndProgress\n  );\n}\n\nfunction calculateTextOpacities(\n  currentCameraProgress: number,\n  state: any\n): { targetGhostOpacity: number; targetCamOpacity: number } {\n  let targetGhostOpacity = 0;\n  let targetCamOpacity = 0;\n\n  if (\n    currentCameraProgress >= state.ghostStartFadeInProgress &&\n    currentCameraProgress <= state.ghostEndFadeInProgress\n  ) {\n    const fadeProgress =\n      (currentCameraProgress - state.ghostStartFadeInProgress) /\n      (state.ghostEndFadeInProgress - state.ghostStartFadeInProgress);\n    targetGhostOpacity = Math.min(1, fadeProgress);\n  } else if (\n    currentCameraProgress > state.ghostEndFadeInProgress &&\n    currentCameraProgress < state.ghostStartFadeOutProgress\n  ) {\n    targetGhostOpacity = 1;\n  } else if (\n    currentCameraProgress >= state.ghostStartFadeOutProgress &&\n    currentCameraProgress <= state.camStartFadeInProgress\n  ) {\n    const fadeOutProgress =\n      (currentCameraProgress - state.ghostStartFadeOutProgress) /\n      (state.camStartFadeInProgress - state.ghostStartFadeOutProgress);\n    targetGhostOpacity = Math.max(0, 1 - fadeOutProgress);\n  }\n\n  if (\n    currentCameraProgress >= state.camStartFadeInProgress &&\n    currentCameraProgress <= state.camEndFadeInProgress\n  ) {\n    const fadeProgress =\n      (currentCameraProgress - state.camStartFadeInProgress) /\n      (state.camEndFadeInProgress - state.camStartFadeInProgress);\n    targetCamOpacity = Math.min(1, fadeProgress);\n  } else if (\n    currentCameraProgress > state.camEndFadeInProgress &&\n    currentCameraProgress < state.camStartFadeOutProgress\n  ) {\n    targetCamOpacity = 1;\n  } else if (\n    currentCameraProgress >= state.camStartFadeOutProgress &&\n    currentCameraProgress <= state.endCameraProgress\n  ) {\n    const fadeOutProgress =\n      (currentCameraProgress - state.camStartFadeOutProgress) /\n      (state.endCameraProgress - state.camStartFadeOutProgress);\n    targetCamOpacity = Math.max(0, 1 - fadeOutProgress);\n  }\n\n  return { targetGhostOpacity, targetCamOpacity };\n}\n\nfunction updateTextElementVisibility(\n  elements: NodeListOf<Element>,\n  targetOpacity: number\n): void {\n  elements.forEach((element) => {\n    const el = element as HTMLElement;\n    if (targetOpacity > OPACITY_VISIBILITY_THRESHOLD) {\n      el.classList.remove(\"no-visibility\");\n      el.style.opacity = targetOpacity.toString();\n    } else if (\n      targetOpacity <= OPACITY_VISIBILITY_THRESHOLD &&\n      !el.classList.contains(\"no-visibility\")\n    ) {\n      el.classList.add(\"no-visibility\");\n      el.style.opacity = \"0\";\n    }\n  });\n}\n\nfunction updateTextVisibility(\n  key: string,\n  currentCameraProgress: number,\n  state: any,\n  parent: HTMLElement,\n  povElements: NodeListOf<Element>,\n  camElements: NodeListOf<Element>,\n  forceEndProgress: boolean = false\n) {\n  if (forceEndProgress) {\n    parent.style.opacity = \"0\";\n    parent.classList.add(\"no-visibility\");\n    hideTextElements(povElements);\n    hideTextElements(camElements);\n    return;\n  }\n\n  const { targetGhostOpacity, targetCamOpacity } = calculateTextOpacities(\n    currentCameraProgress,\n    state\n  );\n\n  if (currentCameraProgress >= state.camStartFadeOutProgress) {\n    parent.style.opacity = targetCamOpacity.toString();\n  } else if (\n    currentCameraProgress >= state.ghostStartFadeInProgress &&\n    currentCameraProgress <= state.ghostEndFadeInProgress\n  ) {\n    parent.style.opacity = targetGhostOpacity.toString();\n  }\n\n  const isPassed =\n    targetCamOpacity > OPACITY_VISIBILITY_THRESHOLD &&\n    targetGhostOpacity > OPACITY_VISIBILITY_THRESHOLD;\n  const hasNoVisibility = parent.classList.contains(\"no-visibility\");\n\n  if (isPassed && !hasNoVisibility) {\n    parent.classList.add(\"no-visibility\");\n  } else if (!isPassed && hasNoVisibility) {\n    parent.classList.remove(\"no-visibility\");\n  }\n\n  if (targetGhostOpacity > OPACITY_VISIBILITY_THRESHOLD) {\n    updateTextElementVisibility(povElements, targetGhostOpacity);\n  } else {\n    hideTextElements(povElements);\n  }\n\n  if (targetCamOpacity > OPACITY_VISIBILITY_THRESHOLD) {\n    updateTextElementVisibility(camElements, targetCamOpacity);\n  } else {\n    hideTextElements(camElements);\n  }\n}\n\nfunction resetTangentSmoothers() {\n  Object.keys(povTangentSmoothers).forEach((key) => {\n    if (povTangentSmoothers[key]) {\n      const resetVector =\n        key === \"camera\"\n          ? new THREE.Vector3(0, 0, -1)\n          : new THREE.Vector3(1, 0, 0);\n      povTangentSmoothers[key].reset(resetVector);\n    }\n  });\n}\n\nfunction hideTextElements(elements: NodeListOf<Element>) {\n  elements.forEach((element) => {\n    const el = element as HTMLElement;\n    el.classList.add(\"no-visibility\");\n    el.style.opacity = \"0\";\n  });\n}\n\nfunction handleLeavePOV() {\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    if (key !== \"pacman\") {\n      ghost.visible = false;\n\n      const ghostIndex = parseInt(key.replace(\"ghost\", \"\")) - 1;\n      const cached = domElementCache[ghostIndex];\n\n      if (cached?.parent) {\n        hideTextElements(cached.povElements);\n        hideTextElements(cached.camElements);\n        cached.parent.classList.add(\"no-visibility\");\n      }\n\n      setObjectOpacity(ghost, 1.0, {\n        preserveTransmission: true,\n        skipCurrencySymbols: true,\n      });\n    }\n  });\n\n  if (ghosts.pacman) {\n    ghosts.pacman.visible = true;\n  }\n\n  resetTangentSmoothers();\n}\n\nfunction resetState() {\n  if (ghosts.pacman) {\n    ghosts.pacman.visible = true;\n  }\n\n  rotationStarted = false;\n  cachedStartYAngle = null;\n  startedInitEndScreen = false;\n\n  Object.keys(ghostStates).forEach((key) => {\n    ghostStates[key] = {\n      hasBeenTriggered: false,\n      triggerCameraProgress: null,\n      ghostStartFadeInProgress: null,\n      ghostEndFadeInProgress: null,\n      ghostStartFadeOutProgress: null,\n      camStartFadeInProgress: null,\n      camEndFadeInProgress: null,\n      camStartFadeOutProgress: null,\n      endCameraProgress: null,\n      currentPathT: 0,\n    };\n  });\n\n  resetTangentSmoothers();\n}\n\nfunction findClosestProgressOnPath(\n  path: THREE.CurvePath<THREE.Vector3>,\n  targetPoint: THREE.Vector3,\n  samples: number = FIND_CLOSEST_SAMPLES\n): number {\n  if (!path || !targetPoint) return 0;\n\n  let closestProgress = 0;\n  let closestDistance = Infinity;\n\n  for (let i = 0; i < samples; i++) {\n    try {\n      const t = i / (samples - 1);\n      const pointOnPath = path.getPointAt(t);\n      if (!pointOnPath) continue;\n\n      const distance = pointOnPath.distanceTo(targetPoint);\n      if (distance < closestDistance) {\n        closestDistance = distance;\n        closestProgress = t;\n      }\n    } catch (error) {}\n  }\n\n  return closestProgress;\n}\n","import gsap from \"gsap\";\nimport ScrollTrigger from \"gsap/ScrollTrigger\";\nimport * as THREE from \"three\";\nimport { camera } from \"../core/camera\";\nimport { ghosts, pacmanMixer } from \"../core/objects\";\nimport { clock } from \"../core/scene\";\nimport { slerpToLayDown, applyRotations } from \"./util\";\nimport { isCurrencySymbol, isPacmanPart } from \"./util\";\nimport {\n  SCROLL_SELECTORS,\n  OPACITY,\n  INTRO_WALK_DISTANCE,\n  INTRO_FADE_IN_DURATION,\n  INTRO_POSITION_OFFSET,\n  SCRUB_DURATION,\n  KEYFRAME_SCALE,\n  KEYFRAME_DURATION,\n  INTRO_GHOST_OFFSETS,\n  clamp,\n} from \"./constants\";\nimport { setFloorPlane, setObjectScale } from \"./scene-utils\";\nimport {\n  quaternionPool,\n  object3DPool,\n  quaternionPoolTemp,\n} from \"../core/object-pool\";\nimport { performanceProfiler } from \"../core/performance-profiler\";\n\nlet introScrollTimeline: gsap.core.Timeline | null = null;\nlet isIntroScrollActive = false;\nlet lastUpdateProgress: number | null = null;\nlet pacmanTargetQuaternion: THREE.Quaternion | null = null;\nlet ghostTargetQuaternion: THREE.Quaternion | null = null;\nlet introInitialRotations: Record<string, THREE.Quaternion> = {};\nlet cachedCameraPosition: THREE.Vector3 | null = null;\nlet lastCameraUpdateFrame = -1;\nconst objectMaterialCache: Record<\n  string,\n  Array<{ mesh: THREE.Mesh; material: THREE.Material; childName: string }>\n> = {};\nconst objectScaleCache: Record<string, { key: string; sceneType: string }> = {};\n\nfunction resetIntroScrollCache() {\n  cachedCameraPosition = null;\n  lastCameraUpdateFrame = -1;\n  lastUpdateProgress = null;\n}\n\nfunction initializeObjectMaterialCache() {\n  Object.entries(ghosts).forEach(([key, object]) => {\n    if (!objectMaterialCache[key]) {\n      objectMaterialCache[key] = [];\n      object.traverse((child) => {\n        if ((child as any).isMesh) {\n          const mesh = child as THREE.Mesh;\n          const childName = child.name || \"\";\n          const mat = mesh.material;\n          if (mat) {\n            const materials = Array.isArray(mat) ? mat : [mat];\n            materials.forEach((material) => {\n              objectMaterialCache[key].push({ mesh, material, childName });\n            });\n          }\n        }\n      });\n    }\n  });\n}\n\nfunction setIntroScrollLocked(locked: boolean) {\n  Object.values(ghosts).forEach((obj) => {\n    obj.userData.introScrollLocked = locked;\n  });\n}\n\nfunction restoreFloor() {\n  const floorState = {\n    visible: true,\n    opacity: OPACITY.FULL,\n    transparent: false,\n  };\n  if (\n    !lastFloorState ||\n    lastFloorState.visible !== floorState.visible ||\n    lastFloorState.opacity !== floorState.opacity ||\n    lastFloorState.transparent !== floorState.transparent\n  ) {\n    setFloorPlane(\n      floorState.visible,\n      floorState.opacity,\n      floorState.transparent\n    );\n    lastFloorState = floorState;\n  }\n}\n\nexport function initIntroScrollAnimation() {\n  if (introScrollTimeline) {\n    introScrollTimeline.kill();\n    introScrollTimeline = null;\n  }\n\n  introScrollTimeline = gsap\n    .timeline({\n      scrollTrigger: {\n        trigger: SCROLL_SELECTORS.INTRO,\n        start: \"top top\",\n        end: \"bottom bottom\",\n        scrub: SCRUB_DURATION,\n        refreshPriority: 1,\n        markers: {\n          startColor: \"green\",\n          endColor: \"red\",\n          fontSize: \"12px\",\n          fontWeight: \"bold\",\n          indent: 60,\n        },\n        onEnter: () => {\n          isIntroScrollActive = true;\n          resetIntroScrollCache();\n          initializeObjectMaterialCache();\n          setIntroScrollLocked(true);\n        },\n        onEnterBack: () => {\n          isIntroScrollActive = true;\n          resetIntroScrollCache();\n          initializeObjectMaterialCache();\n          setIntroScrollLocked(true);\n        },\n        onLeave: () => {\n          isIntroScrollActive = false;\n          resetIntroScrollCache();\n          restoreFloor();\n          setIntroScrollLocked(false);\n        },\n        onLeaveBack: () => {\n          isIntroScrollActive = false;\n          resetIntroScrollCache();\n          restoreFloor();\n          setIntroScrollLocked(false);\n        },\n        onUpdate: (self) => {\n          if (typeof self.progress === \"number\") {\n            updateObjectsWalkBy(self.progress);\n          }\n        },\n        id: \"introScroll\",\n      },\n    })\n    .addLabel(\"intro-text-start\", 0)\n    .fromTo(\n      \".sc_h--intro\",\n      { scale: KEYFRAME_SCALE.START, opacity: OPACITY.HIDDEN },\n      {\n        keyframes: [\n          {\n            scale: KEYFRAME_SCALE.START,\n            opacity: OPACITY.HIDDEN,\n            duration: KEYFRAME_DURATION.NONE,\n          },\n          {\n            scale: KEYFRAME_SCALE.MID,\n            opacity: OPACITY.FULL,\n            duration: KEYFRAME_DURATION.FADE_IN,\n          },\n          {\n            scale: KEYFRAME_SCALE.LARGE,\n            opacity: OPACITY.FULL,\n            duration: KEYFRAME_DURATION.HOLD,\n          },\n          {\n            scale: KEYFRAME_SCALE.END,\n            opacity: OPACITY.HIDDEN,\n            duration: KEYFRAME_DURATION.FADE_OUT,\n          },\n        ],\n      }\n    )\n    .addLabel(\"intro-text-fade-in\", KEYFRAME_DURATION.NONE)\n    .addLabel(\n      \"intro-text-hold\",\n      KEYFRAME_DURATION.NONE + KEYFRAME_DURATION.FADE_IN\n    )\n    .addLabel(\n      \"intro-text-fade-out\",\n      KEYFRAME_DURATION.NONE +\n        KEYFRAME_DURATION.FADE_IN +\n        KEYFRAME_DURATION.HOLD\n    )\n    .fromTo(\n      \".sc_b--intro\",\n      { scale: KEYFRAME_SCALE.START, opacity: OPACITY.HIDDEN },\n      {\n        keyframes: [\n          {\n            scale: KEYFRAME_SCALE.START,\n            opacity: OPACITY.HIDDEN,\n            duration: KEYFRAME_DURATION.NONE,\n          },\n          {\n            scale: KEYFRAME_SCALE.MID,\n            opacity: OPACITY.FULL,\n            duration: KEYFRAME_DURATION.FADE_IN,\n          },\n          {\n            scale: KEYFRAME_SCALE.LARGE,\n            opacity: OPACITY.FULL,\n            duration: KEYFRAME_DURATION.HOLD,\n          },\n          {\n            scale: KEYFRAME_SCALE.END,\n            opacity: OPACITY.HIDDEN,\n            duration: KEYFRAME_DURATION.FADE_OUT,\n          },\n        ],\n      }\n    )\n    .addLabel(\n      \"intro-text-end\",\n      KEYFRAME_DURATION.NONE +\n        KEYFRAME_DURATION.FADE_IN +\n        KEYFRAME_DURATION.HOLD +\n        KEYFRAME_DURATION.FADE_OUT\n    );\n}\n\nfunction initializeQuaternions() {\n  if (pacmanTargetQuaternion && ghostTargetQuaternion) return;\n\n  const pacmanObj = ghosts.pacman;\n  if (pacmanObj) {\n    if (!introInitialRotations[\"pacman\"]) {\n      const tempRot = quaternionPoolTemp.acquire();\n      tempRot.copy(pacmanObj.quaternion);\n      introInitialRotations[\"pacman\"] = tempRot;\n    }\n\n    const quat = quaternionPool.acquire();\n    quat.copy(introInitialRotations[\"pacman\"]);\n    const tempObj = object3DPool.acquire();\n    tempObj.quaternion.copy(quat);\n    slerpToLayDown(tempObj, quat, OPACITY.FULL);\n    quat.copy(tempObj.quaternion);\n    object3DPool.release(tempObj);\n\n    const rotatedQuat = applyRotations(quat, [\n      { axis: \"x\", angle: Math.PI / 2 },\n      { axis: \"y\", angle: Math.PI },\n      { axis: \"y\", angle: Math.PI },\n      { axis: \"x\", angle: Math.PI },\n      { axis: \"x\", angle: Math.PI },\n      { axis: \"y\", angle: Math.PI },\n    ]);\n\n    const finalQuat = quaternionPoolTemp.acquire();\n    finalQuat.copy(rotatedQuat);\n    pacmanTargetQuaternion = finalQuat;\n    quaternionPool.release(quat);\n  }\n\n  const ghostObj = ghosts.ghost1;\n  if (ghostObj) {\n    if (!introInitialRotations[\"ghost1\"]) {\n      const tempRot = quaternionPoolTemp.acquire();\n      tempRot.copy(ghostObj.quaternion);\n      introInitialRotations[\"ghost1\"] = tempRot;\n    }\n\n    const quat = quaternionPool.acquire();\n    quat.copy(introInitialRotations[\"ghost1\"]);\n    const tempObj = object3DPool.acquire();\n    tempObj.quaternion.copy(quat);\n    slerpToLayDown(tempObj, quat, OPACITY.FULL);\n    quat.copy(tempObj.quaternion);\n    object3DPool.release(tempObj);\n\n    const rotatedQuat = applyRotations(quat, [\n      { axis: \"x\", angle: Math.PI },\n      { axis: \"x\", angle: Math.PI },\n      { axis: \"y\", angle: Math.PI },\n      { axis: \"y\", angle: Math.PI },\n      { axis: \"x\", angle: Math.PI },\n      { axis: \"x\", angle: Math.PI },\n    ]);\n\n    const finalQuat = quaternionPoolTemp.acquire();\n    finalQuat.copy(rotatedQuat);\n    ghostTargetQuaternion = finalQuat;\n    quaternionPool.release(quat);\n  }\n\n  Object.keys(ghosts).forEach((key) => {\n    const obj = ghosts[key as keyof typeof ghosts];\n    if (obj && !introInitialRotations[key]) {\n      const tempRot = quaternionPoolTemp.acquire();\n      tempRot.copy(obj.quaternion);\n      introInitialRotations[key] = tempRot;\n    }\n  });\n}\n\nlet lastFloorState: {\n  visible: boolean;\n  opacity: number;\n  transparent: boolean;\n} | null = null;\n\nconst tempVector = new THREE.Vector3();\n\nfunction updateObjectsWalkBy(progress: number) {\n  if (!isIntroScrollActive) return;\n\n  if (lastUpdateProgress === progress) return;\n  lastUpdateProgress = progress;\n\n  performanceProfiler.measure(\"intro-scroll-update\", () => {\n    const currentFrame = performance.now();\n    const shouldUpdateCache =\n      !cachedCameraPosition || currentFrame - lastCameraUpdateFrame > 16;\n\n    if (shouldUpdateCache) {\n      const camX = camera.position.x;\n      const camY = camera.position.y;\n      const camZ = camera.position.z;\n\n      if (!isFinite(camX) || !isFinite(camY) || !isFinite(camZ)) {\n        if (!cachedCameraPosition) {\n          return;\n        }\n        tempVector.copy(cachedCameraPosition);\n      } else {\n        if (!cachedCameraPosition) {\n          cachedCameraPosition = new THREE.Vector3();\n        }\n        cachedCameraPosition.set(camX, camY, camZ);\n        lastCameraUpdateFrame = currentFrame;\n        tempVector.copy(cachedCameraPosition);\n      }\n    } else {\n      tempVector.copy(cachedCameraPosition!);\n    }\n\n    initializeQuaternions();\n\n    if (pacmanMixer) {\n      pacmanMixer.update(clock.getDelta());\n    }\n\n    const floorState = {\n      visible: true,\n      opacity: OPACITY.HIDDEN,\n      transparent: true,\n    };\n    if (\n      !lastFloorState ||\n      lastFloorState.visible !== floorState.visible ||\n      lastFloorState.opacity !== floorState.opacity ||\n      lastFloorState.transparent !== floorState.transparent\n    ) {\n      setFloorPlane(\n        floorState.visible,\n        floorState.opacity,\n        floorState.transparent\n      );\n      lastFloorState = floorState;\n    }\n\n    const pacmanQuat = pacmanTargetQuaternion;\n    const ghostQuat = ghostTargetQuaternion;\n\n    const walkStart = tempVector.x - INTRO_WALK_DISTANCE;\n    const walkEnd = tempVector.x + INTRO_WALK_DISTANCE;\n\n    const objectsToAnimate = [\n      {\n        key: \"pacman\",\n        behindOffset: 1.5,\n        zOffset: 0.5,\n        xOffset: 0,\n        yOffset: 0,\n        zPhase: 0,\n      },\n      {\n        key: \"ghost1\",\n        behindOffset: INTRO_GHOST_OFFSETS.GHOST1,\n        zOffset: 0.5,\n        xOffset: 0.5,\n        yOffset: -0.5,\n        zPhase: Math.PI * 1.0,\n      },\n      {\n        key: \"ghost2\",\n        behindOffset: INTRO_GHOST_OFFSETS.GHOST2,\n        zOffset: 0.5,\n        xOffset: 0,\n        yOffset: -1,\n        zPhase: Math.PI * 1.5,\n      },\n      {\n        key: \"ghost3\",\n        behindOffset: INTRO_GHOST_OFFSETS.GHOST3,\n        zOffset: 0.5,\n        xOffset: 0.5,\n        yOffset: 0.5,\n        zPhase: Math.PI * 1.0,\n      },\n      {\n        key: \"ghost4\",\n        behindOffset: INTRO_GHOST_OFFSETS.GHOST4,\n        zOffset: 0.5,\n        xOffset: 0.75,\n        yOffset: 0.25,\n        zPhase: Math.PI * 1.0,\n      },\n      {\n        key: \"ghost5\",\n        behindOffset: INTRO_GHOST_OFFSETS.GHOST5,\n        zOffset: 0.5,\n        xOffset: 0,\n        yOffset: -0.5,\n        zPhase: Math.PI * 1.0,\n      },\n    ];\n\n    const normalizedProgress = clamp(progress);\n    const baseX = walkStart + (walkEnd - walkStart) * normalizedProgress;\n    const pacmanX = baseX + INTRO_POSITION_OFFSET.x;\n    const pacmanY = tempVector.y + INTRO_POSITION_OFFSET.y;\n    const pacmanZ = tempVector.z + INTRO_POSITION_OFFSET.z;\n\n    if (\n      !isFinite(baseX) ||\n      !isFinite(pacmanX) ||\n      !isFinite(pacmanY) ||\n      !isFinite(pacmanZ)\n    ) {\n      return;\n    }\n\n    const baseGhostOpacity =\n      normalizedProgress < INTRO_FADE_IN_DURATION\n        ? normalizedProgress / INTRO_FADE_IN_DURATION\n        : 1.0;\n\n    objectsToAnimate.forEach(\n      ({\n        key,\n        behindOffset,\n        zOffset,\n        xOffset,\n        yOffset: staticYOffset,\n        zPhase,\n      }) => {\n        const object = ghosts[key];\n        if (!object) return;\n\n        const zBounce =\n          key === \"pacman\"\n            ? 0\n            : Math.sin(normalizedProgress * Math.PI * 2 * 20 + zPhase) * 0.01;\n        const animatedYOffset = key === \"pacman\" ? 0 : zBounce * 1.5;\n        const finalX = pacmanX + behindOffset + xOffset;\n        const finalY = pacmanY + staticYOffset - animatedYOffset;\n        const finalZ = pacmanZ + zOffset - zBounce;\n\n        if (\n          !isFinite(finalX) ||\n          !isFinite(finalY) ||\n          !isFinite(finalZ) ||\n          Math.abs(finalZ) < 0.01 ||\n          Math.abs(finalZ) > 100\n        ) {\n          return;\n        }\n\n        object.position.set(finalX, finalY, finalZ);\n\n        const targetQuat = key === \"pacman\" ? pacmanQuat : ghostQuat;\n        if (targetQuat) {\n          object.quaternion.copy(targetQuat);\n        }\n\n        const scaleKey = `${key}-intro`;\n        if (!objectScaleCache[scaleKey]) {\n          setObjectScale(object, key, \"intro\");\n          objectScaleCache[scaleKey] = { key, sceneType: \"intro\" };\n        }\n\n        object.visible = true;\n\n        const targetOpacity =\n          key === \"pacman\" ? OPACITY.FULL : baseGhostOpacity;\n\n        if (!objectMaterialCache[key]) {\n          initializeObjectMaterialCache();\n        }\n\n        const materialCache = objectMaterialCache[key];\n        if (materialCache) {\n          materialCache.forEach(({ mesh, material, childName }) => {\n            if (\n              isCurrencySymbol(childName) ||\n              (key === \"pacman\" && isPacmanPart(childName))\n            ) {\n              mesh.visible = false;\n              return;\n            }\n\n            mesh.visible = true;\n\n            const mat = material as any;\n            if (Math.abs(mat.opacity - targetOpacity) > 0.001) {\n              mat.opacity = targetOpacity;\n              if (mat.transmission !== undefined && mat.transmission > 0) {\n                mat.transparent = true;\n              } else {\n                mat.transparent = targetOpacity < 1.0;\n              }\n            }\n          });\n        }\n      }\n    );\n  });\n}\n","import gsap from \"gsap\";\nimport { applyOutroScrollPreset, getScrollDirection } from \"./scene-presets\";\nimport {\n  SCROLL_SELECTORS,\n  SCRUB_DURATION,\n  KEYFRAME_SCALE,\n  KEYFRAME_DURATION,\n  OPACITY,\n} from \"./constants\";\n\nlet outroScrollTimeline: gsap.core.Timeline | null = null;\n\nexport function initOutroScrollAnimation() {\n  outroScrollTimeline = gsap\n    .timeline({\n      scrollTrigger: {\n        trigger: SCROLL_SELECTORS.OUTRO,\n        start: \"top center\",\n        end: \"bottom bottom\",\n        scrub: SCRUB_DURATION,\n        markers: false,\n        onEnter: () => {\n          const scrollDir = getScrollDirection();\n          applyOutroScrollPreset(true, scrollDir);\n        },\n        onEnterBack: () => {\n          const scrollDir = getScrollDirection();\n          applyOutroScrollPreset(true, scrollDir);\n        },\n      },\n    })\n    .addLabel(\"outro-text-start\", 0)\n    .fromTo(\n      \".sc_b--outro\",\n      { scale: KEYFRAME_SCALE.START, opacity: OPACITY.HIDDEN },\n      {\n        keyframes: [\n          {\n            scale: KEYFRAME_SCALE.START,\n            opacity: OPACITY.HIDDEN,\n            duration: KEYFRAME_DURATION.NONE,\n          },\n          {\n            scale: KEYFRAME_SCALE.MID,\n            opacity: OPACITY.FULL,\n            duration: KEYFRAME_DURATION.FADE_IN,\n          },\n          {\n            scale: KEYFRAME_SCALE.LARGE,\n            opacity: OPACITY.FULL,\n            duration: KEYFRAME_DURATION.HOLD,\n          },\n          {\n            scale: KEYFRAME_SCALE.END,\n            opacity: OPACITY.HIDDEN,\n            duration: KEYFRAME_DURATION.FADE_OUT,\n          },\n        ],\n      }\n    )\n    .addLabel(\"outro-text-fade-in\", KEYFRAME_DURATION.NONE)\n    .addLabel(\n      \"outro-text-hold\",\n      KEYFRAME_DURATION.NONE + KEYFRAME_DURATION.FADE_IN\n    )\n    .addLabel(\n      \"outro-text-fade-out\",\n      KEYFRAME_DURATION.NONE +\n        KEYFRAME_DURATION.FADE_IN +\n        KEYFRAME_DURATION.HOLD\n    )\n    .addLabel(\n      \"outro-text-end\",\n      KEYFRAME_DURATION.NONE +\n        KEYFRAME_DURATION.FADE_IN +\n        KEYFRAME_DURATION.HOLD +\n        KEYFRAME_DURATION.FADE_OUT\n    );\n}\n","import {\n  startRenderLoop,\n  initRenderer,\n  setupLighting,\n  scene,\n  renderer,\n} from \"./core/scene\";\nimport { performanceMonitor } from \"./core/performance-monitor\";\nimport {\n  setupHomeLoopScrollHandler,\n  startHomeLoop,\n} from \"./animation/home-loop\";\nimport { initPovScrollAnimation } from \"./animation/pov-scroll\";\nimport { loadModel } from \"./core/objects\";\nimport { setupCamera } from \"./core/camera\";\nimport { initIntroScrollAnimation } from \"./animation/intro-scroll\";\nimport { initOutroScrollAnimation } from \"./animation/outro-scroll\";\nimport { initializeObjectStates } from \"./animation/object-state\";\nimport { performanceProfiler } from \"./core/performance-profiler\";\n\nfunction initSkipButton() {\n  const skipButton = document.querySelector(\".wr_p--skip.wr_p\");\n  if (skipButton) {\n    const finalSection = document.querySelector(\".sc--testimonials\");\n    if (finalSection) {\n      skipButton.addEventListener(\"click\", () => {\n        finalSection.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"start\",\n          inline: \"nearest\",\n        });\n      });\n    }\n  }\n}\n\nasync function main() {\n  initRenderer();\n  setupLighting();\n  setupCamera();\n  await loadModel(scene);\n\n  initializeObjectStates();\n\n  setupHomeLoopScrollHandler();\n  if (window.scrollY === 0) {\n    startHomeLoop();\n  }\n\n  initPovScrollAnimation();\n  initIntroScrollAnimation();\n  initOutroScrollAnimation();\n  initSkipButton();\n  startRenderLoop();\n\n  performanceMonitor.enable(renderer);\n  performanceProfiler.enable();\n\n  if (typeof window !== \"undefined\") {\n    (window as any).performanceMonitor = performanceMonitor;\n    (window as any).enablePerformanceMonitor = () => {\n      performanceMonitor.enable(renderer);\n    };\n    (window as any).disablePerformanceMonitor = () => {\n      performanceMonitor.disable();\n    };\n    (window as any).togglePerformanceMonitor = () => {\n      performanceMonitor.toggle(renderer);\n    };\n  }\n}\n\nmain();\n"],"names":["performanceProfiler","constructor","profiles","Map","activeTimers","enabled","reportInterval","lastReportTime","displayElement","this","performance","now","window","enableProfiler","enable","disableProfiler","disable","resetProfiler","reset","getProfilerStats","getStats","createDisplay","console","log","remove","start","name","set","end","startTime","get","undefined","duration","delete","entry","totalTime","callCount","maxTime","minTime","Infinity","Math","max","min","report","measure","fn","entries","Array","from","values","sort","a","b","slice","group","table","map","Name","toFixed","Calls","getTotalTime","groupEnd","updateDisplay","reduce","sum","document","createElement","id","style","cssText","body","appendChild","html","join","innerHTML","clear","avgTime","percentage","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","THREE","isMobile","innerWidth","SCROLL_SELECTORS","FIND_CLOSEST_SAMPLES","SCRUB_DURATION","POV_SEQUENCE_PHASE_END","OPACITY_VISIBILITY_THRESHOLD","KEYFRAME_SCALE","KEYFRAME_DURATION","clamp","SELECTORS","DOM_ELEMENTS","mazeContainer","querySelector","canvas","homeSection","introSection","povSection","finalSection","finalContainer","parentElements","querySelectorAll","X","Z","getCoord","x","z","objectHomeScrollEndPathPoint","cameraPathPointsConfig","startMobile","startDesktop","secondMobile","secondDesktop","mobileLookAt","desktopLookAt","cameraLookAtSecondDesktop","cameraLookAtSecondMobile","cameraHomeScrollEndLookAt","thirdPosition","cameraHomeScrollEndPathPoint","startPosition","secondPosition","lookAtPosition","cameraLookAtSecondPosition","pacmanHomePathPoints","pos","type","arc","curveCheckPoints","ghost1HomePathPoints","ghost2HomePathPoints","ghost3HomePathPoints","ghost4HomePathPoints","ghost5HomePathPoints","cameraHomeScrollPathPoints","lookAt","cameraPOVPathPoints","lookAtSequence","ghost1POVPathPoints","ghost2POVPathPoints","ghost3POVPathPoints","ghost4POVPathPoints","ghost5POVPathPoints","povTriggerPositions","ghost1","triggerPos","ghostStartFadeIn","ghostEndFadeIn","ghostStartFadeOut","camStartFadeIn","camEndFadeIn","camStartFadeOut","endPosition","forceEndProgress","ghost2","ghost3","ghost4","ghost5","getStartPosition","getLookAtPosition","homePaths","pacman","camera","getCameraHomeScrollPathPoints","innerHeight","scene","renderer","antialias","alpha","powerPreference","precision","logarithmicDepthBuffer","stencil","depth","clock","frameCallbacks","setPixelRatio","pixelRatio","devicePixelRatio","setSize","clientWidth","clientHeight","aspect","updateProjectionMatrix","performanceMonitor","statsElement","frameCount","lastTime","fps","frameTime","createStatsPanel","startMonitoring","toggle","currentTime","delta","round","updateStats","requestAnimationFrame","stats","memoryUsed","memoryTotal","drawCalls","info","render","calls","triangles","geometries","memory","textures","usedJSHeapSize","totalJSHeapSize","fpsColor","frameTimeColor","toLocaleString","ScrollTrigger","mazeTexture","load","mazeMaterial","matcap","topMaterial","color","metalness","roughness","envMapIntensity","ghostMaterial","opacity","transparent","depthWrite","depthTest","blending","side","floorMaterial","pacmanMaterials","blue","white","default","materialMap","CAM_Pacman_Backframe","CAM_Pacman_Logo_1","CAM_Pacman_Logo_2","loader","pacmanMixer","ghostContainers","Ghost_EUR","Ghost_CHF","Ghost_YEN","Ghost_USD","Ghost_GBP","pathCache","TangentSmoother","initialTangent","smoothing","currentTangent","clone","update","targetTangent","lerp","normalize","newTangent","copy","getCurrentTangent","setSmoothingFactor","createMazePath","pathPoints","cacheKey","p","y","has","path","i","length","current","next","catmullPoints","add","midPoint","createNormalCurveMidPoint","curveType","createCameraHomeScrollPath","curve","getHomePaths","paths","forEach","getPovPaths","gsap","CURRENCY_SYMBOLS","isCurrencySymbol","some","symbol","includes","isPacmanPart","calculateObjectOrientation","object","tangent","objectType","targetRotation","atan2","rotation","PI","lookAtPoint","position","baseLayDownQuat","setFromEuler","LAY_DOWN_QUAT_1","setFromAxisAngle","multiply","LAY_DOWN_QUAT_2","startQuat","progress","targetQuat","angleTo","quaternion","slerp","quat","rotations","result","axis","angle","axisVector","rotateQuaternionAroundAxis","setObjectOpacity","options","preserveTransmission","forEachMaterial","mat","setMaterialOpacity","skipCurrencySymbols","material","currentOpacity","currentTransparent","abs","shouldBeTransparent","transmission","needsUpdate","getObjectOpacity","found","callback","skipPacmanParts","objectKey","traverse","child","isMesh","mesh","childName","isArray","materials","setFloorPlane","visible","setHex","setObjectScale","sceneType","scale","updateMatrixWorld","applyPovScrollPreset","isEntering","scrollDirection","applyOutroScrollPreset","lastScrollY","scrollY","getScrollDirection","currentScrollY","direction","ObjectPool","createFn","resetFn","pool","acquire","pop","release","push","resetVector3","v","resetQuaternion","q","vector3Pool","quaternionPool","object3DPool","homeLoopState","t","animationTime","currentObjectStates","homeLoopStartPositions","homeLoopStartRotations","homeLoopStartT","isHomeLoopActive","setHomeLoopActive","active","getCurrentPositions","positions","state","tempPos","getCurrentRotations","tempRot","getHomeLoopStartRotations","rot","homeScrollTimeline","startPositions","initHomeScrollAnimation","kill","cameraPathPoints","cameraPath","cameraCurve","handleScrollEnter","introScrollTrigger","isActive","homeLoopStartPos","getHomeLoopStartPositions","homeLoopStartRot","rotationsToUse","keys","pausedPositions","setMaterialTransparent","createObjectAnimations","scrollTrigger","trigger","scrub","markers","refreshPriority","invalidateOnRefresh","onEnter","onEnterBack","onUpdate","self","curves","clampedProgress","cameraPoint","getPointAt","lookAtPoints","point","getPoint","fov","onLeave","resume","onLeaveBack","homeScrollPaths","scrollPathPoints","scrollPaths","pausedPos","arcPoint","createHomeScrollPathPoints","createHomeScrollPath","getHomeScrollPaths","animPropsArray","animationData","currentMaterialOpacity","clonedMat","index","indexOf","clonedMaterials","tempQuat","currentRots","startEuler","setFromQuaternion","endEuler","animProps","rotX","rotY","rotZ","data","startPathPoint","fromTo","ease","immediateRender","pathPoint","cache","cacheSize","getCacheKey","uuid","random","toString","roundedT","cached","size","firstKey","getTangentAt","getTangent","homeLoopFrameRegistered","rotationTransitionTime","startRotations","cachedHomePaths","homeLoopScaleCache","hasBeenPausedBefore","homeLoopTangentSmoothers","startHomeLoop","savedT","resetGhostMaterialsToFullOpacity","initialVector","initializeHomeLoopTangentSmoothers","ghost","savedRotation","scaleKey","tempTangent","getElapsedTime","hidden","clampedDelta","updateHomeLoopT","transitionProgress","isTransitioning","objectT","rawTangent","smoothTangent","tempObject","easedProgress","updateHomeLoop","setupHomeLoopScrollHandler","throttledScrollHandler","func","timeout","previous","args","Date","remaining","clearTimeout","apply","setTimeout","throttle","tempPos2","tempRot2","stopHomeLoop","addEventListener","passive","domElementCache","povScrollTimeline","previousCameraPosition","rotationStarted","startedInitEndScreen","startRotationPoint","endRotationPoint","cachedStartYAngle","ghostStates","povTangentSmoothers","initPovScrollAnimation","initializePovTangentSmoothers","hasBeenTriggered","triggerCameraProgress","ghostStartFadeInProgress","ghostEndFadeInProgress","ghostStartFadeOutProgress","camStartFadeInProgress","camEndFadeInProgress","camStartFadeOutProgress","endCameraProgress","currentPathT","toggleActions","addLabel","to","onStart","handleAnimationStart","handleAnimationUpdate","onReverseComplete","handleLeavePOV","resetState","onComplete","povPaths","tempTan","overallProgress","targets","tempCameraPos","cameraPosition","customLookAt","firstPoint","sequenceProgress","sequenceLength","segmentSize","currentSegment","floor","segmentProgress","fromIndex","toIndex","fromTarget","toTarget","tempResult","finalSequenceLookAt","constrainedTangent","defaultLookAt","getCustomLookAtForProgress","shouldReleaseRawTangent","startRotationProgress","findClosestProgressOnPath","endRotationProgress","handleDefaultOrientation","updateCamera","triggerData","ghostIndex","parseInt","replace","parent","povElements","camElements","currentCameraProgress","ghostProgress","tempPathPoint","classList","hideTextElements","targetGhostOpacity","targetCamOpacity","fadeProgress","fadeOutProgress","calculateTextOpacities","isPassed","hasNoVisibility","contains","updateTextElementVisibility","updateTextVisibility","updateGhost","updateGhosts","tempPrevPos","elements","targetOpacity","element","el","resetTangentSmoothers","resetVector","targetPoint","samples","closestProgress","closestDistance","pointOnPath","distance","distanceTo","error","introScrollTimeline","isIntroScrollActive","lastUpdateProgress","cachedCameraPosition","lastCameraUpdateFrame","objectMaterialCache","objectScaleCache","resetIntroScrollCache","initializeObjectMaterialCache","setIntroScrollLocked","locked","userData","introScrollLocked","restoreFloor","floorState","lastFloorState","tempVector","outroScrollTimeline","async","shadowMap","domElement","ambientLight","directionalLight","shadow","mapSize","width","height","left","right","top","bottom","near","far","bias","radius","castShadow","setupLighting","setupCamera","Promise","resolve","reject","gltf","model","children","subChild","item","pacmanActions","animations","clip","action","clipAction","getMixer","e","getRoot","skipAnimation","updateMorphTargets","setEffectiveWeight","play","ghostContainer","ghostGroup","startsWith","clonedChild","receiveShadow","node","loadModel","initialOpacity","startColor","endColor","fontSize","fontWeight","indent","currentFrame","camX","camY","camZ","isFinite","pacmanObj","tempObj","rotatedQuat","finalQuat","ghostObj","initializeQuaternions","getDelta","pacmanQuat","ghostQuat","walkStart","walkEnd","objectsToAnimate","behindOffset","zOffset","xOffset","yOffset","zPhase","normalizedProgress","baseX","pacmanX","pacmanY","pacmanZ","baseGhostOpacity","staticYOffset","zBounce","sin","finalX","finalY","finalZ","materialCache","keyframes","skipButton","scrollIntoView","behavior","block","inline","initSkipButton","startRenderLoop","enablePerformanceMonitor","disablePerformanceMonitor","togglePerformanceMonitor","main"],"sourceRoot":""}