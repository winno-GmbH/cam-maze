{"version":3,"file":"script.js","mappings":"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","sources":["webpack://cam-3d-animation/external var \"THREE\"","webpack://cam-3d-animation/./src/config.ts","webpack://cam-3d-animation/./src/scene.ts","webpack://cam-3d-animation/./src/camera.ts","webpack://cam-3d-animation/./src/materials.ts","webpack://cam-3d-animation/./src/objects.ts","webpack://cam-3d-animation/./src/paths.ts","webpack://cam-3d-animation/./src/animation-system.ts","webpack://cam-3d-animation/./src/main.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = THREE;","import * as THREE from \"three\";\n\n// Camera Configuration\nexport const CAMERA_CONFIG = {\n  originalFOV: 50,\n  wideFOV: 80,\n  near: 0.001,\n  far: 1000,\n};\n\n// Mobile Detection\nexport const isMobile = window.innerWidth < 768;\n\n// Camera Positions\nexport const CAMERA_POSITIONS = {\n  startMobile: new THREE.Vector3(0.5, 2.5, 2.5),\n  startDesktop: new THREE.Vector3(-2, 2.5, 2),\n  secondMobile: new THREE.Vector3(0.5, 2.5, 2),\n  secondDesktop: new THREE.Vector3(-1.5, 3, 2),\n  mobileLookAt: new THREE.Vector3(0.5, 0.5, -1.5),\n  desktopLookAt: new THREE.Vector3(-1.25, 0.5, 0.25),\n};\n\n// Get correct positions based on device\nexport const startPosition = isMobile\n  ? CAMERA_POSITIONS.startMobile\n  : CAMERA_POSITIONS.startDesktop;\nexport const secondPosition = isMobile\n  ? CAMERA_POSITIONS.secondMobile\n  : CAMERA_POSITIONS.secondDesktop;\nexport const lookAtPosition = isMobile\n  ? CAMERA_POSITIONS.mobileLookAt\n  : CAMERA_POSITIONS.desktopLookAt;\n\n// Maze Center Position for Bezier Curves\nexport const MAZE_CENTER = new THREE.Vector3(0.45175, 0.5, 0.55675);\n\n// Asset URLs\nexport const ASSETS = {\n  mazeTexture: \"https://c-am.b-cdn.net/CAM/matcap24.png\",\n  mazeModel: \"https://c-am.b-cdn.net/CAM/c-am-assets-3.glb\",\n};\n\n// DOM Selectors\nexport const SELECTORS = {\n  mazeContainer: \".el--home-maze.el\",\n  scrollComponent: \".cmp--scroll\",\n  introSection: \".sc--intro\",\n  homeSection: \".sc--home\",\n  povSection: \".sc--pov\",\n  finalSection: \".sc--final.sc\",\n  parentElements: \".cmp--pov.cmp\",\n};\n\n// POV Positions for Ghosts\nexport const POV_POSITIONS = {\n  ghost1: new THREE.Vector3(0.65725, 0.55, 0.75325),\n  ghost2: new THREE.Vector3(0.9085, 0.55, 0.8035),\n  ghost3: new THREE.Vector3(0.75775, 0.55, 1.05475),\n  ghost4: new THREE.Vector3(0.65725, 0.55, 1.0045),\n  ghost5: new THREE.Vector3(0.15475, 0.55, 1.15525),\n};\n\n// Shader Configuration\nexport const SHADER_CONFIG = {\n  vertexShader: `\n    varying vec3 vPosition;\n    void main() {\n      vPosition = position;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  `,\n  fragmentShader: `\n    varying vec3 vPosition;\n    uniform float mixValue;\n    void main() {\n      float factor = (vPosition.y + 1.0) / 2.0;\n      vec3 colorA = vec3(0.0, 0.0, 1.0);\n      vec3 colorB = vec3(0.0, 1.0, 1.0);\n      vec3 colorC = vec3(1.0, 0.0, 0.0);\n      vec3 colorD = vec3(1.0, 1.0, 0.0);\n      \n      vec3 gradientA = mix(colorA, colorB, factor);\n      vec3 gradientB = mix(colorC, colorD, factor);\n      \n      vec3 finalColor = mix(gradientA, gradientB, mixValue);\n      gl_FragColor = vec4(finalColor, 1.0);\n    }\n  `,\n};\n","import * as THREE from \"three\";\nimport { SELECTORS, isMobile } from \"./config\";\n\n// Scene Setup\nexport const scene = new THREE.Scene();\n\n// Renderer Setup\nexport const renderer = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n  powerPreference: \"high-performance\",\n  precision: \"highp\",\n});\n\n// Container\nconst container = document.querySelector(\".el--home-maze.el\") as HTMLElement;\nif (!container) {\n  console.error(\"Container .el--home-maze.el not found!\");\n}\n\n// Clock for animations\nexport const clock = new THREE.Clock();\n\n// Anti-aliasing Enhancement\nfunction enhanceAntiAliasing(): void {\n  if (isMobile) {\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n  } else {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  renderer.shadowMap.enabled = true;\n  renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n}\n\n// Pixel Ratio Setup - ADDED to match backup.js\nfunction setPixelRatio(): void {\n  const pixelRatio = Math.min(window.devicePixelRatio, isMobile ? 2 : 3);\n  renderer.setPixelRatio(pixelRatio);\n  renderer.setSize(container.clientWidth, container.clientHeight);\n}\n\n// Initialize Renderer - FIXED to match backup.js\nexport function initRenderer(): void {\n  enhanceAntiAliasing();\n\n  renderer.shadowMap.enabled = true;\n  renderer.shadowMap.type = THREE.PCFSoftShadowMap;\n\n  if (container) {\n    renderer.setSize(container.clientWidth, container.clientHeight);\n    container.appendChild(renderer.domElement);\n  } else {\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    document.body.appendChild(renderer.domElement);\n  }\n\n  console.log(\"Renderer initialized\");\n\n  // ADD these event listeners to match backup.js:\n  window.addEventListener(\"load\", setPixelRatio);\n  window.addEventListener(\"resize\", setPixelRatio);\n}\n\n// Lighting Setup\nexport function setupLighting(): void {\n  const ambientLight = new THREE.AmbientLight(0xffffff);\n  scene.add(ambientLight);\n\n  const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);\n  scene.add(directionalLight);\n  directionalLight.position.set(-5, 15, 10);\n  directionalLight.shadow.mapSize.width = 4096;\n  directionalLight.shadow.mapSize.height = 4096;\n  directionalLight.shadow.camera.left = -20;\n  directionalLight.shadow.camera.right = 20;\n  directionalLight.shadow.camera.top = 20;\n  directionalLight.shadow.camera.bottom = -20;\n  directionalLight.shadow.camera.near = 0.1;\n  directionalLight.shadow.camera.far = 50;\n  directionalLight.shadow.bias = -0.001;\n  directionalLight.shadow.radius = 3;\n  directionalLight.castShadow = true;\n\n  console.log(\"Lighting setup complete\");\n}\n\n// Canvas and DOM Elements\nexport const canvas = document.querySelector(\"canvas\") as HTMLCanvasElement;\nexport const finalSection = document.querySelector(\n  SELECTORS.finalSection\n) as HTMLElement;\nexport const finalContainer = finalSection?.querySelector(\n  \".cr--final.cr\"\n) as HTMLElement;\nexport const parentElements = document.querySelectorAll(\n  SELECTORS.parentElements\n) as NodeListOf<Element>;\n","import * as THREE from \"three\";\nimport {\n  CAMERA_CONFIG,\n  startPosition,\n  secondPosition,\n  lookAtPosition,\n} from \"./config\";\n\n// Camera Setup\nexport const camera = new THREE.PerspectiveCamera(\n  CAMERA_CONFIG.originalFOV,\n  window.innerWidth / window.innerHeight,\n  CAMERA_CONFIG.near,\n  CAMERA_CONFIG.far\n);\n\n// Initialize Camera\nexport function initCamera(): void {\n  console.log(\"Camera start position:\", startPosition);\n  console.log(\"Camera look at position:\", lookAtPosition);\n\n  camera.position.copy(startPosition);\n  camera.lookAt(lookAtPosition);\n\n  console.log(\"Camera initialized at position:\", camera.position);\n  console.log(\"Camera looking at:\", lookAtPosition);\n}\n\n// Camera Quaternions\nexport const startQuaternion = camera.quaternion.clone();\nexport const endQuaternion = new THREE.Quaternion().setFromEuler(\n  new THREE.Euler(-1.5708, 0, 0)\n);\n\n// Camera Utility Functions\nexport function getCameraLookAtPoint(): THREE.Vector3 {\n  const direction = new THREE.Vector3(0, 0, -1);\n  direction.applyQuaternion(camera.quaternion);\n  const lookAtPoint = new THREE.Vector3();\n  lookAtPoint.copy(camera.position).add(direction.multiplyScalar(10));\n  return lookAtPoint;\n}\n\n// Global camera setter for debugging\n(window as any).setCamera = function (lookAt: string | THREE.Vector3): void {\n  if (typeof lookAt === \"string\") {\n    const [x, y, z] = lookAt.split(\",\").map(Number);\n    lookAt = new THREE.Vector3(x, y, z);\n  }\n  camera.lookAt(lookAt);\n  camera.updateProjectionMatrix();\n  camera.updateMatrix();\n  camera.updateMatrixWorld();\n};\n\n// Setup Camera Resize\nexport function setupCameraResize(): void {\n  const updateCamera = () => {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n  };\n\n  window.addEventListener(\"resize\", updateCamera);\n}\n","import * as THREE from \"three\";\nimport { ASSETS } from \"./config\";\n\n// Texture Loader\nconst textureLoader = new THREE.TextureLoader();\n\n// Load maze texture like in backup.js\nexport const mazeTexture = textureLoader.load(ASSETS.mazeTexture);\n\n// Materials exactly like backup.js\nexport const mazeMaterial = new THREE.MeshMatcapMaterial({\n  matcap: mazeTexture,\n});\n\nexport const topMaterial = new THREE.MeshStandardMaterial({\n  color: 0xf2f9f9,\n  metalness: 0.4,\n  roughness: 0,\n  envMapIntensity: 10,\n});\n\nexport const ghostMaterial = new THREE.MeshPhysicalMaterial({\n  color: 0xffffff,\n  opacity: 1,\n  transparent: true,\n  depthWrite: false,\n  depthTest: true,\n  blending: THREE.NormalBlending,\n  side: THREE.DoubleSide,\n  roughness: 0.75,\n  metalness: 0.2,\n  transmission: 0.5,\n});\n\nexport const floorMaterial = new THREE.MeshStandardMaterial({\n  color: 0xffffff,\n  opacity: 0.8,\n  transparent: true,\n  roughness: 0.5,\n  metalness: 0.1,\n});\n\n// Pacman materials with transparency for opacity changes\nconst pacmanMaterials = {\n  blue: new THREE.MeshBasicMaterial({\n    color: 0x1469d3,\n    transparent: true,\n    opacity: 1,\n  }),\n  white: new THREE.MeshBasicMaterial({\n    color: 0xffffff,\n    transparent: true,\n    opacity: 1,\n  }),\n  default: new THREE.MeshBasicMaterial({\n    color: 0x1469d3,\n    transparent: true,\n    opacity: 1,\n  }),\n};\n\nexport const materialMap = {\n  CAM_Pacman_Backframe: pacmanMaterials.blue,\n  \"CAM-Pacman_Bitcoin_1\": pacmanMaterials.white,\n  \"CAM-Pacman_Bitcoin_2\": pacmanMaterials.white,\n  \"CAM-Pacman_Bottom\": pacmanMaterials.blue,\n  \"CAM-Pacman_Top\": pacmanMaterials.blue,\n  \"CAM-Pacman_Eye\": pacmanMaterials.white,\n  CAM_Pacman_Logo_1: pacmanMaterials.white,\n  CAM_Pacman_Logo_2: pacmanMaterials.white,\n  \"CAM-Pacman_Shell_Boolean\": pacmanMaterials.blue,\n  \"CAM-Pacman_Shell\": pacmanMaterials.blue,\n  \"CAM-Pacman_Bottom_electronic\": pacmanMaterials.white,\n  \"CAM-Pacman_Top_electronic\": pacmanMaterials.white,\n  \"CAM-Pacman_Bottom_Text\": pacmanMaterials.white,\n  \"CAM-Pacman_Top_Text\": pacmanMaterials.white,\n  default: pacmanMaterials.blue,\n};\n\n// Ghost Cover Materials\nexport const ghostCoverMaterials = Array(5).fill(ghostMaterial);\n","import * as THREE from \"three\";\nimport { ASSETS } from \"./config\";\nimport { GhostContainer } from \"./types\";\nimport { scene, clock } from \"./scene\";\nimport {\n  mazeMaterial,\n  topMaterial,\n  ghostMaterial,\n  floorMaterial,\n  materialMap,\n} from \"./materials\";\n\n// Export clock for animation system\nexport { clock };\n\n// GLB Loader - use directly like in backup.js\nconst loader = new THREE.GLTFLoader();\n\n// Animation Mixer\nexport let pacmanMixer: THREE.AnimationMixer;\n\n// Pacman Group\nexport const pacman = new THREE.Group();\nscene.add(pacman);\n\n// Ghost Objects\nexport const ghosts: GhostContainer = {\n  pacman: pacman,\n  ghost1: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost2: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost3: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost4: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n  ghost5: new THREE.Mesh(new THREE.BufferGeometry(), ghostMaterial),\n};\n\n// Ghost containers mapping (like in backup.js)\nconst ghostContainers = {\n  Ghost_EUR: ghosts.ghost1,\n  Ghost_CHF: ghosts.ghost2,\n  Ghost_YEN: ghosts.ghost3,\n  Ghost_USD: ghosts.ghost4,\n  Ghost_GBP: ghosts.ghost5,\n};\n\n// Add ghosts to scene\nObject.values(ghosts).forEach((ghost) => scene.add(ghost));\n\n// Model Loading Function\nexport async function loadModel(): Promise<void> {\n  return new Promise((resolve, reject) => {\n    console.log(\"Loading model from:\", ASSETS.mazeModel);\n\n    loader.load(\n      ASSETS.mazeModel,\n      function (gltf) {\n        console.log(\"GLTF model loaded successfully\");\n        const model = gltf.scene;\n\n        model.traverse((child: THREE.Object3D) => {\n          if (child.name === \"CAM-Pacman\") {\n            const children: THREE.Object3D[] = [];\n            child.traverse((subChild: THREE.Object3D) => {\n              if (\n                (subChild as any).isMesh &&\n                subChild.name !== \"CAM-Pacman_Shell\" &&\n                subChild.name !== \"CAM-Pacman_Shell_Boolean\"\n              ) {\n                const material =\n                  materialMap[subChild.name as keyof typeof materialMap] ||\n                  materialMap.default;\n                (subChild as THREE.Mesh).material = material;\n                children.push(subChild);\n              } else if (\n                subChild.name === \"CAM-Pacman_Shell\" ||\n                subChild.name === \"CAM-Pacman_Shell_Boolean\"\n              ) {\n                subChild.visible = false;\n              }\n            });\n\n            children.forEach((item) => ghosts.pacman.add(item));\n            ghosts.pacman.scale.set(0.05, 0.05, 0.05);\n            ghosts.pacman.rotation.set(Math.PI / 2, Math.PI / 2, Math.PI / 4);\n\n            // Setup Pacman mixer\n            pacmanMixer = new THREE.AnimationMixer(ghosts.pacman);\n            const pacmanActions: { [key: string]: THREE.AnimationAction } = {};\n\n            gltf.animations.forEach((clip: THREE.AnimationClip) => {\n              const action = pacmanMixer.clipAction(clip);\n              pacmanActions[clip.name] = action;\n              action.setEffectiveWeight(1);\n              action.play();\n            });\n          } else if (\n            child.name &&\n            ghostContainers[child.name as keyof typeof ghostContainers]\n          ) {\n            const ghostContainer =\n              ghostContainers[child.name as keyof typeof ghostContainers];\n            const ghostGroup = new THREE.Group();\n\n            child.rotation.z = Math.PI;\n            child.rotation.x = Math.PI / 2;\n            child.scale.set(0.75, 0.75, 0.75);\n\n            const children: THREE.Object3D[] = [];\n            child.traverse((subChild: THREE.Object3D) => {\n              if ((subChild as any).isMesh) {\n                if (subChild.name && subChild.name.startsWith(\"Ghost_Mesh\")) {\n                  (subChild as THREE.Mesh).material = ghostMaterial;\n                } else if (\n                  subChild.name &&\n                  [\"EUR\", \"CHF\", \"YEN\", \"USD\", \"GBP\"].includes(subChild.name)\n                ) {\n                  subChild.visible = false;\n                }\n                children.push(subChild);\n              }\n            });\n\n            children.forEach((item) => {\n              if (\n                item.name &&\n                (item.name.includes(\"EUR\") ||\n                  item.name.startsWith(\"Ghost_Mesh\"))\n              ) {\n                item.rotation.z = Math.PI;\n                item.rotation.x = Math.PI / 2;\n              } else {\n                item.rotation.set(0, 0, 0);\n              }\n              ghostGroup.add(item);\n            });\n\n            ghostContainer.add(ghostGroup);\n          }\n\n          if ((child as any).isMesh) {\n            if (child.name === \"CAM-Arena_LowRes_Top\") {\n              console.log(\"Found maze top mesh:\", child.name);\n              (child as THREE.Mesh).material = topMaterial;\n              child.castShadow = true;\n            } else if (child.name === \"CAM-Arena_LowRes_Bottom\") {\n              console.log(\"Found maze bottom mesh:\", child.name);\n              (child as THREE.Mesh).material = mazeMaterial;\n              child.castShadow = true;\n            } else if (child.name === \"CAM-Floor\") {\n              const clonedChild = child.clone();\n              child.position.y = -0.1;\n              child.position.x = 0;\n              child.position.z = 0;\n              (child as THREE.Mesh).material = new THREE.MeshBasicMaterial({\n                color: 0xffffff,\n                opacity: 1,\n                transparent: false,\n                depthWrite: true,\n                depthTest: true,\n                side: THREE.FrontSide,\n              });\n              child.receiveShadow = false;\n              child.castShadow = true;\n              child.scale.set(0.5, 0.5, 0.5);\n\n              (clonedChild as THREE.Mesh).material = floorMaterial;\n              clonedChild.position.y = -0.5;\n              clonedChild.receiveShadow = true;\n              scene.add(clonedChild);\n            }\n          }\n        });\n\n        // Add shadows to all meshes\n        model.traverse(function (node: THREE.Object3D) {\n          if ((node as any).isMesh) {\n            node.castShadow = true;\n            node.receiveShadow = true;\n          }\n        });\n\n        // Add model to scene and position it like in backup.js\n        scene.add(model);\n        model.position.set(0.5, 0.5, 0.5);\n\n        console.log(\n          \"Model added to scene with\",\n          scene.children.length,\n          \"total children\"\n        );\n        resolve();\n      },\n      function (progress) {\n        console.log(\"Loading progress:\", progress);\n      },\n      function (error) {\n        console.error(\"Error loading 3D model:\", error);\n        reject(error);\n      }\n    );\n  });\n}\n","import * as THREE from \"three\";\nimport { PathPoint, PathData, PathMapping } from \"./types\";\nimport { CAMERA_POSITIONS, isMobile } from \"./config\";\n\n// Path Creation Utility\nexport function createPath(\n  pathPoints: PathPoint[]\n): THREE.CurvePath<THREE.Vector3> {\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  for (let i = 0; i < pathPoints.length - 1; i++) {\n    const current = pathPoints[i];\n    const next = pathPoints[i + 1];\n\n    if (current.type === \"straight\") {\n      const line = new THREE.LineCurve3(current.pos, next.pos);\n      path.add(line);\n    } else if (current.type === \"curve\") {\n      let midPoint: THREE.Vector3;\n      if (current.curveType === \"upperArc\") {\n        midPoint = new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n      } else if (current.curveType === \"lowerArc\") {\n        midPoint = new THREE.Vector3(next.pos.x, current.pos.y, current.pos.z);\n      } else if (current.curveType === \"forwardDownArc\") {\n        midPoint = new THREE.Vector3(current.pos.x, next.pos.y, current.pos.z);\n      } else {\n        midPoint = new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n      }\n      const curve = new THREE.QuadraticBezierCurve3(\n        current.pos,\n        midPoint,\n        next.pos\n      );\n      path.add(curve);\n    }\n  }\n  return path;\n}\n\n// Path Points Definitions (shortened as requested)\nconst pacmanHomePathPoints: PathPoint[] = [\n  { pos: new THREE.Vector3(0.25525, 0.55, 0.6025), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.301),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.45625, 0.55, 0.1), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.35575, 0.55, -0.2015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, -0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.24725, 0.55, -0.2015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.34775, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.44825, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.398, 0.55, -0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.34775, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.24725, 0.55, 0.2005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 0.301),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.04625, 0.55, 0.4015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, 0.4015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.24725, 0.55, 0.502),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.14675, 0.55, 0.6025), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.6025),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.04625, 0.55, 0.8035), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.24725, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.34775, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.398, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.44825, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.34775, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.24725, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.04625, 0.55, 1.0045), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.05425, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.04625, 0.55, 1.0045), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.7075, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.25525, 0.55, 0.6025), type: \"straight\" },\n];\n\nconst ghost1HomePathPoints: PathPoint[] = [\n  { pos: new THREE.Vector3(-0.44825, 0.55, 0.502), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.44825, 0.55, 0.301),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.34775, 0.55, 0.2005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.24725, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.04625, 0.55, -0.0005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, -0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.25525, 0.55, 0.301), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.75775, 0.55, 0.8035), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.05925, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.15975, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.26025, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(1.46125, 0.55, 0.703), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.46125, 0.55, 0.301),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(1.36075, 0.55, 0.2005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.25525, 0.55, 0.301), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.502),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 0.6025),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.004, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.05425, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.0965, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.14675, 0.55, 0.8035), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.34775, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(-0.44825, 0.55, 0.703), type: \"straight\" },\n  { pos: new THREE.Vector3(-0.44825, 0.55, 0.502), type: \"straight\" },\n];\n\nconst ghost2HomePathPoints: PathPoint[] = [\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.004, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.04625, 0.55, 0.6025), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, 0.6025),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.24725, 0.55, 0.502),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.14675, 0.55, 0.4015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 0.4015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.25525, 0.55, 0.502), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.3055, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.45625, 0.55, 1.0045), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.85825, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(1.46125, 0.55, 1.105), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.46125, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(1.36075, 0.55, -0.0005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.15975, 0.55, -0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.05925, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.85825, 0.55, 0.1), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.85825, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, -0.15125),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.45625, 0.55, -0.0005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.25525, 0.55, 0.301), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.3055, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.05425, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.0965, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n];\n\nconst ghost3HomePathPoints: PathPoint[] = [\n  {\n    pos: new THREE.Vector3(0.808, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.85825, 0.55, 0.703), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.85825, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, -0.15125),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, -0.15125),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.35575, 0.55, -0.2015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.15475, 0.55, -0.0005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, -0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.55675, 0.55, 0.2005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(1.46125, 0.55, 0.301), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.46125, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.26025, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.15975, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.05925, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.009, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.95875, 0.55, 0.904), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.85825, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.75775, 0.55, 1.105), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.7075, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 0.6025),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.004, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.05425, 0.55, 1.0045), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.808, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n];\n\nconst ghost4HomePathPoints: PathPoint[] = [\n  { pos: new THREE.Vector3(1.05925, 0.55, 0.4015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.05925, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.95875, 0.55, 0.8035), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.85825, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.65725, 0.55, 1.0045), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.05425, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.34775, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.44825, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.398, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.34775, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.398, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(-0.44825, 0.55, 0.703), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.44825, 0.55, 0.301),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.34775, 0.55, 0.2005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 0.301),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 0.4015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.301),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.35575, 0.55, 0.2005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.85825, 0.55, 0.1), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.85825, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.05925, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(1.15975, 0.55, 0.0005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, 0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.46125, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.26025, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, 0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(1.46125, 0.55, 0.1), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.46125, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.26025, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(1.15975, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(1.05925, 0.55, 0.6025), type: \"straight\" },\n  { pos: new THREE.Vector3(1.05925, 0.55, 0.4015), type: \"straight\" },\n];\n\nconst ghost5HomePathPoints: PathPoint[] = [\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, -0.04975),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.35575, 0.55, 0.0005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.24725, 0.55, -0.2015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.34775, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.44825, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.398, 0.55, 0.0005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.34775, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.24725, 0.55, 0.2005), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.04625, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.05425, 0.55, 0.301),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.04625, 0.55, 0.4015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(-0.14675, 0.55, 0.4015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(-0.24725, 0.55, 0.502),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.14675, 0.55, 0.6025), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 0.6025),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.25525, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.3055, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.45625, 0.55, 1.0045), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.85825, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, 0.904),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, 1.105),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(1.05925, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.36075, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(1.46125, 0.55, 1.105), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.46125, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(1.36075, 0.55, -0.2015), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.15975, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(1.05925, 0.55, -0.101), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.05925, 0.55, 0.1),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, 0.2005),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.85825, 0.55, 0.1), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.85825, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, -0.2015),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, -0.15125),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, -0.101),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.45625, 0.55, -0.04975),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n];\n\nconst cameraPOVPathPoints: PathPoint[] = [\n  {\n    pos: new THREE.Vector3(0.55675, 0.5, 0.45175),\n    type: \"curve\",\n    curveType: \"forwardDownArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 0.6025),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.607, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.7075, 0.55, 0.8035), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.9085, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.95875, 0.55, 0.85375), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, 1.15525),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.9085, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.808, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.75775, 0.55, 1.15525), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 1.05475),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.7075, 0.55, 1.0045), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.205, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.15475, 0.55, 1.05475), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 1.15525),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.205, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.5065, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 1.306),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.44825, 1, 2.0095), type: \"straight\" },\n];\n\nconst ghost1POVPathPoints: PathPoint[] = [\n  { pos: new THREE.Vector3(1.05925, 0.55, 0.703), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.05925, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(1.009, 0.55, 0.8035), type: \"straight\" },\n  { pos: new THREE.Vector3(0.9085, 0.55, 0.8035), type: \"straight\" },\n];\n\nconst ghost2POVPathPoints: PathPoint[] = [\n  { pos: new THREE.Vector3(1.05925, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.009, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.95875, 0.55, 1.15525), type: \"straight\" },\n  { pos: new THREE.Vector3(0.95875, 0.55, 1.05475), type: \"straight\" },\n];\n\nconst ghost3POVPathPoints: PathPoint[] = [\n  { pos: new THREE.Vector3(0.35575, 0.55, 0.904), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.95425),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.406, 0.55, 1.0045), type: \"straight\" },\n  { pos: new THREE.Vector3(0.5065, 0.55, 1.0045), type: \"straight\" },\n];\n\nconst ghost4POVPathPoints: PathPoint[] = [\n  { pos: new THREE.Vector3(0.15475, 0.55, 1.105), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 1.05475),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.205, 0.55, 1.0045), type: \"straight\" },\n  { pos: new THREE.Vector3(0.3055, 0.55, 1.0045), type: \"straight\" },\n];\n\nconst ghost5POVPathPoints: PathPoint[] = [\n  { pos: new THREE.Vector3(0.55675, 0.55, 1.306), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 1.25575),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.5065, 0.55, 1.2055), type: \"straight\" },\n  { pos: new THREE.Vector3(0.406, 0.55, 1.2055), type: \"straight\" },\n];\n\n// Camera Home Path - ensure it uses the correct positions based on device\nconst cameraStartPosition = isMobile\n  ? CAMERA_POSITIONS.startMobile\n  : CAMERA_POSITIONS.startDesktop;\nconst cameraSecondPosition = isMobile\n  ? CAMERA_POSITIONS.secondMobile\n  : CAMERA_POSITIONS.secondDesktop;\n\nexport const cameraHomePath = new THREE.CubicBezierCurve3(\n  cameraStartPosition,\n  cameraSecondPosition,\n  new THREE.Vector3(0.55675, 3, 0.45175),\n  new THREE.Vector3(0.55675, 0.5, 0.45175)\n);\n\n// Path Data Configuration\nexport const pathsData: { [key: string]: PathData } = {\n  pacmanHomePath: {\n    points: pacmanHomePathPoints,\n    color: 0xffff00,\n  },\n  ghost1HomePath: {\n    points: ghost1HomePathPoints,\n    color: 0xff0000,\n  },\n  ghost2HomePath: {\n    points: ghost2HomePathPoints,\n    color: 0xffa500,\n  },\n  ghost3HomePath: {\n    points: ghost3HomePathPoints,\n    color: 0xff69b4,\n  },\n  ghost4HomePath: {\n    points: ghost4HomePathPoints,\n    color: 0x32cd32,\n  },\n  ghost5HomePath: {\n    points: ghost5HomePathPoints,\n    color: 0xffdab9,\n  },\n  cameraPOVPath: {\n    points: cameraPOVPathPoints,\n    color: 0xffffff,\n  },\n  ghost1POVPath: {\n    points: ghost1POVPathPoints,\n    color: 0xff0000,\n  },\n  ghost2POVPath: {\n    points: ghost2POVPathPoints,\n    color: 0xffa500,\n  },\n  ghost3POVPath: {\n    points: ghost3POVPathPoints,\n    color: 0xff69b4,\n  },\n  ghost4POVPath: {\n    points: ghost4POVPathPoints,\n    color: 0x32cd32,\n  },\n  ghost5POVPath: {\n    points: ghost5POVPathPoints,\n    color: 0xffdab9,\n  },\n};\n\n// Path Mapping Functions\nexport function getPathsForSection(section: string): PathMapping {\n  const mapping: PathMapping = {};\n\n  if (section === \"home\") {\n    mapping.pacman = \"pacmanHomePath\";\n    mapping.ghost1 = \"ghost1HomePath\";\n    mapping.ghost2 = \"ghost2HomePath\";\n    mapping.ghost3 = \"ghost3HomePath\";\n    mapping.ghost4 = \"ghost4HomePath\";\n    mapping.ghost5 = \"ghost5HomePath\";\n  } else if (section === \"pov\") {\n    mapping.pacman = \"cameraPOVPath\";\n    mapping.ghost1 = \"ghost1POVPath\";\n    mapping.ghost2 = \"ghost2POVPath\";\n    mapping.ghost3 = \"ghost3POVPath\";\n    mapping.ghost4 = \"ghost4POVPath\";\n    mapping.ghost5 = \"ghost5POVPath\";\n  }\n  return mapping;\n}\n\n// Create all paths\nexport const paths: { [key: string]: THREE.CurvePath<THREE.Vector3> } = {};\n\n// Initialize paths\nObject.entries(pathsData).forEach(([key, data]) => {\n  paths[key] = createPath(data.points);\n});\n\n// Create pathsMap for ghost animation system\nexport const pathsMap: { [key: string]: THREE.CurvePath<THREE.Vector3> } = {\n  pacman: paths.pacmanHomePath,\n  ghost1: paths.ghost1HomePath,\n  ghost2: paths.ghost2HomePath,\n  ghost3: paths.ghost3HomePath,\n  ghost4: paths.ghost4HomePath,\n  ghost5: paths.ghost5HomePath,\n};\n","import * as THREE from \"three\";\nimport { ghosts, pacmanMixer, clock } from \"./objects\";\nimport { pathsMap } from \"./paths\";\nimport { renderer, scene } from \"./scene\";\nimport { camera, startQuaternion, endQuaternion } from \"./camera\";\n\n// 1. STATE MANAGEMENT\ntype AnimationState = \"HOME\" | \"SCROLL_ANIMATION\" | \"POV_ANIMATION\";\nlet currentAnimationState: AnimationState = \"HOME\";\n\n// Debug info for window\ndeclare global {\n  interface Window {\n    animationDebugInfo: {\n      state: AnimationState;\n      capturedPositions: any;\n      bezierCurves: any;\n      scrollProgress?: number;\n      povAnimationActive: boolean;\n    };\n  }\n}\n\n// Constants\nconst MAZE_CENTER = new THREE.Vector3(0.55675, 0.5, 0.45175);\nconst GHOSTS_END_AT = 0.8; // Ghosts finish their animation at 80% scroll\nconst GHOST_OPACITY_FADE_START = 0.8; // Last 20% of GHOST animation (ghostProgress 0.8-1.0)\n\n// FOV Constants (from backup.js)\nconst ORIGINAL_FOV = 50; // Used in HOME state\nconst WIDE_FOV = 80; // Used in POV animation\nconst END_SEQUENCE_FOV = WIDE_FOV / 4; // 20 - Used in end sequence\n\n// 2. POSITION & BEZIER SYSTEM\nconst capturedPositions: { [key: string]: THREE.Vector3 } = {};\nconst capturedRotations: { [key: string]: THREE.Euler } = {};\nconst bezierCurves: { [key: string]: THREE.QuadraticBezierCurve3 } = {};\nlet timeOffset = 0;\nlet pauseTime = 0;\n\nfunction captureGhostPositions() {\n  Object.keys(ghosts).forEach((ghostKey) => {\n    if (ghosts[ghostKey]) {\n      capturedPositions[ghostKey] = ghosts[ghostKey].position.clone();\n      capturedRotations[ghostKey] = ghosts[ghostKey].rotation.clone();\n      console.log(\n        `Captured ${ghostKey} at position:`,\n        ghosts[ghostKey].position,\n        \"rotation:\",\n        ghosts[ghostKey].rotation\n      );\n    }\n  });\n  console.log(\"All ghost positions captured:\", capturedPositions);\n  console.log(\"All ghost rotations captured:\", capturedRotations);\n}\n\nfunction createBezierCurves() {\n  // Use the global MAZE_CENTER constant so it can be changed easily\n  Object.keys(capturedPositions).forEach((ghostKey) => {\n    const startPos = capturedPositions[ghostKey].clone(); // Aktuelle Position der Geister\n    const endPos = MAZE_CENTER.clone(); // Use global MAZE_CENTER constant\n\n    // Control point: Mittelpunkt zwischen Start und Ende in x/z, aber hoch oben bei y=1\n    const controlPoint = new THREE.Vector3(\n      (startPos.x + endPos.x) / 2, // Mittelpunkt x zwischen Start und Maze-Mitte\n      2, // Hoch oben bei y=1\n      (startPos.z + endPos.z) / 2 // Mittelpunkt z zwischen Start und Maze-Mitte\n    );\n\n    bezierCurves[ghostKey] = new THREE.QuadraticBezierCurve3(\n      startPos, // Wo Geist ist wenn Animation stoppt\n      controlPoint, // Hoher Bogen-Punkt\n      endPos // Maze-Mitte\n    );\n\n    console.log(`Created bezier curve for ${ghostKey}:`, {\n      start: startPos,\n      control: controlPoint,\n      end: endPos,\n    });\n  });\n}\n\nfunction moveGhostOnCurve(ghostKey: string, ghostProgress: number) {\n  if (\n    !bezierCurves[ghostKey] ||\n    !ghosts[ghostKey] ||\n    !capturedPositions[ghostKey] ||\n    !capturedRotations[ghostKey]\n  )\n    return;\n\n  const ghost = ghosts[ghostKey];\n\n  // Always use bezier curve for smooth interpolation\n  const position = bezierCurves[ghostKey].getPoint(ghostProgress);\n  ghost.position.copy(position);\n\n  // Simple rotation: interpolate from start rotation to (90°, 0°, 0°)\n  const originalRotation = capturedRotations[ghostKey];\n  const targetRotation = new THREE.Euler(Math.PI / -2, 0, 0); // Target: (90°, 0°, 0°)\n\n  // Interpolate between original and target rotation\n  const currentRotation = new THREE.Euler(\n    originalRotation.x +\n      (targetRotation.x - originalRotation.x) * ghostProgress,\n    originalRotation.y +\n      (targetRotation.y - originalRotation.y) * ghostProgress,\n    originalRotation.z + (targetRotation.z - originalRotation.z) * ghostProgress\n  );\n\n  ghost.rotation.copy(currentRotation);\n\n  // Debug rotation for the problematic ghost\n  if (ghostProgress > 0.9 && (ghostKey === \"ghost1\" || ghostKey === \"pacman\")) {\n    console.log(\n      `${ghostKey} at ${ghostProgress.toFixed(2)}: original=(${(\n        (originalRotation.x * 180) /\n        Math.PI\n      ).toFixed(1)}°, ${((originalRotation.y * 180) / Math.PI).toFixed(1)}°, ${(\n        (originalRotation.z * 180) /\n        Math.PI\n      ).toFixed(1)}°) current=(${((currentRotation.x * 180) / Math.PI).toFixed(\n        1\n      )}°, ${((currentRotation.y * 180) / Math.PI).toFixed(1)}°, ${(\n        (currentRotation.z * 180) /\n        Math.PI\n      ).toFixed(1)}°)`\n    );\n  }\n\n  // Handle opacity fade in last 20% of GHOST animation (not scroll progress!)\n  let opacity = 1;\n  if (ghostProgress >= GHOST_OPACITY_FADE_START) {\n    const fadeProgress =\n      (ghostProgress - GHOST_OPACITY_FADE_START) /\n      (1 - GHOST_OPACITY_FADE_START);\n    opacity = 1 - fadeProgress;\n    opacity = Math.max(0, opacity); // Allow complete invisibility\n  }\n\n  // Set opacity for both Mesh and Group\n  if (ghost instanceof THREE.Mesh && ghost.material) {\n    if (Array.isArray(ghost.material)) {\n      ghost.material.forEach((mat) => {\n        if (\"opacity\" in mat) mat.opacity = opacity;\n      });\n    } else {\n      if (\"opacity\" in ghost.material) ghost.material.opacity = opacity;\n    }\n  } else if (ghost instanceof THREE.Group) {\n    ghost.traverse((child) => {\n      if (child instanceof THREE.Mesh && child.material) {\n        if (Array.isArray(child.material)) {\n          child.material.forEach((mat) => {\n            if (\"opacity\" in mat) mat.opacity = opacity;\n          });\n        } else {\n          if (\"opacity\" in child.material) child.material.opacity = opacity;\n        }\n      }\n    });\n  }\n}\n\n// Create camera path exactly like backup.js but starting from current position\nfunction createCameraPath() {\n  // Use current camera position as start (don't jump) - capture it NOW\n  const startPosition = camera.position.clone();\n\n  // Update the initial camera state to current state for smooth transitions\n  initialCameraPosition.copy(camera.position);\n  initialCameraQuaternion.copy(camera.quaternion);\n  const direction = new THREE.Vector3(0, 0, -1);\n  direction.applyQuaternion(camera.quaternion);\n  initialCameraTarget = camera.position\n    .clone()\n    .add(direction.multiplyScalar(5));\n\n  // Calculate a smooth second position towards backup.js path\n  const isMobile = window.innerWidth < 768;\n  const targetSecondPositionMobile = new THREE.Vector3(0.5, 2.5, 2);\n  const targetSecondPositionDesktop = new THREE.Vector3(-1.5, 3, 2);\n  const targetSecondPosition = isMobile\n    ? targetSecondPositionMobile\n    : targetSecondPositionDesktop;\n\n  // Create a second position between current and target\n  const secondPosition = new THREE.Vector3().lerpVectors(\n    startPosition,\n    targetSecondPosition,\n    0.3\n  );\n\n  // Exact same control and end points as backup.js\n  cameraHomePath = new THREE.CubicBezierCurve3(\n    startPosition, // Current position (no jump)\n    secondPosition, // Interpolated second position\n    new THREE.Vector3(0.55675, 3, 0.45175), // High control point\n    new THREE.Vector3(0.55675, 0.5, 0.45175) // End point (maze center)\n  );\n\n  console.log(\n    `Camera path created starting from current position:`,\n    `${startPosition.x.toFixed(2)}, ${startPosition.y.toFixed(\n      2\n    )}, ${startPosition.z.toFixed(2)}`,\n    \"to maze center (0.55675, 0.5, 0.45175)\"\n  );\n}\n\n// 3. SCROLL MANAGEMENT\nlet initialCameraPosition = new THREE.Vector3();\nlet initialCameraTarget = new THREE.Vector3();\nlet initialCameraQuaternion = new THREE.Quaternion();\nlet cameraHomePath: THREE.CubicBezierCurve3;\n\n// 4. ANIMATION LOOP\nlet animationStartTime = Date.now();\n\nfunction animationLoop() {\n  // Only run home animation if we're in HOME state\n  if (currentAnimationState !== \"HOME\") return;\n\n  const currentTime = Date.now();\n  const elapsedTime = (currentTime - animationStartTime - timeOffset) / 1000; // Convert to seconds\n  const t = (elapsedTime * 0.1) % 1; // Speed control (0.1 = slower, 0.2 = faster)\n\n  // Animate ghosts on their home paths only during HOME state\n  Object.entries(ghosts).forEach(([key, ghost]) => {\n    if (!pathsMap[key]) {\n      // Don't spam warnings, just return\n      return;\n    }\n\n    if (key === \"pacman\") {\n      // Pacman animation\n      const position = pathsMap[key].getPointAt(t);\n      ghost.position.copy(position);\n      const tangent = pathsMap[key].getTangentAt(t).normalize();\n      ghost.lookAt(position.clone().add(tangent));\n\n      // Handle pacman rotation smoothing\n      const zRotation = Math.atan2(tangent.x, tangent.z);\n      if ((ghost as any).previousZRotation === undefined) {\n        (ghost as any).previousZRotation = zRotation;\n      }\n\n      let rotationDiff = zRotation - (ghost as any).previousZRotation;\n      if (rotationDiff > Math.PI) rotationDiff -= 2 * Math.PI;\n      else if (rotationDiff < -Math.PI) rotationDiff += 2 * Math.PI;\n\n      const smoothFactor = 0.1;\n      const smoothedRotation =\n        (ghost as any).previousZRotation + rotationDiff * smoothFactor;\n      (ghost as any).previousZRotation = smoothedRotation;\n\n      ghost.rotation.set(Math.PI / 2, Math.PI, smoothedRotation + Math.PI / 2);\n    } else {\n      // Ghost animation\n      const position = pathsMap[key].getPointAt(t);\n      ghost.position.copy(position);\n      const tangent = pathsMap[key].getTangentAt(t).normalize();\n      ghost.lookAt(position.clone().add(tangent));\n\n      // Ensure full opacity\n      if (\n        ghost instanceof THREE.Mesh &&\n        ghost.material &&\n        \"opacity\" in ghost.material\n      ) {\n        ghost.material.opacity = 1;\n      }\n    }\n  });\n}\n\n// Reset to home state helper\nfunction resetToHomeState() {\n  currentAnimationState = \"HOME\";\n\n  if (pauseTime) {\n    timeOffset += Date.now() - pauseTime;\n    pauseTime = 0;\n  }\n\n  // Reset camera to initial position and rotation\n  camera.position.copy(initialCameraPosition);\n  camera.quaternion.copy(initialCameraQuaternion);\n\n  // Reset all ghosts to their captured positions, rotations and full opacity\n  Object.keys(ghosts).forEach((ghostKey) => {\n    if (\n      capturedPositions[ghostKey] &&\n      capturedRotations[ghostKey] &&\n      ghosts[ghostKey]\n    ) {\n      console.log(\n        `Resetting ${ghostKey} to captured position:`,\n        capturedPositions[ghostKey]\n      );\n      ghosts[ghostKey].position.copy(capturedPositions[ghostKey]);\n      ghosts[ghostKey].rotation.copy(capturedRotations[ghostKey]);\n\n      // Reset opacity to full\n      const ghost = ghosts[ghostKey];\n      if (ghost instanceof THREE.Mesh && ghost.material) {\n        if (Array.isArray(ghost.material)) {\n          ghost.material.forEach((mat) => {\n            if (\"opacity\" in mat) mat.opacity = 1;\n          });\n        } else {\n          if (\"opacity\" in ghost.material) ghost.material.opacity = 1;\n        }\n      } else if (ghost instanceof THREE.Group) {\n        ghost.traverse((child) => {\n          if (child instanceof THREE.Mesh && child.material) {\n            if (Array.isArray(child.material)) {\n              child.material.forEach((mat) => {\n                if (\"opacity\" in mat) mat.opacity = 1;\n              });\n            } else {\n              if (\"opacity\" in child.material) child.material.opacity = 1;\n            }\n          }\n        });\n      }\n    }\n  });\n\n  // Update debug info\n  if (window.animationDebugInfo) {\n    window.animationDebugInfo.state = currentAnimationState;\n    window.animationDebugInfo.scrollProgress = 0;\n  }\n}\n\n// Camera animation helper - smooth transition from current rotation (ONLY FOV FIX)\nfunction animateCamera(progress: number) {\n  if (!cameraHomePath) {\n    console.warn(\"Camera path not created yet\");\n    return;\n  }\n\n  // Keep original FOV (50°) - don't jump to wide FOV immediately!\n  // Only change FOV if backup.js specifically does it\n  camera.fov = 50; // Keep originalFOV, don't jump to 80°!\n  camera.updateProjectionMatrix();\n\n  // Get position on the backup.js curve\n  const position = cameraHomePath.getPointAt(progress);\n  camera.position.copy(position);\n\n  // Calculate target look-at direction (towards maze center)\n  const mazeCenter = new THREE.Vector3(0.55675, 0.5, 0.45175);\n  const targetLookAt = mazeCenter.clone();\n\n  // EXACT backup.js logic: interpolate between startQuaternion and endQuaternion\n  if (progress === 0) {\n    // At progress 0: keep the EXACT current rotation (no jump!)\n    camera.quaternion.copy(initialCameraQuaternion);\n  } else {\n    // Backup.js logic: slerp between startQuaternion and endQuaternion\n    // endQuaternion = looking straight down (-90° on X-axis)\n    const currentQuaternion = new THREE.Quaternion();\n    currentQuaternion.slerpQuaternions(\n      initialCameraQuaternion,\n      endQuaternion,\n      progress\n    );\n    camera.quaternion.copy(currentQuaternion);\n  }\n\n  console.log(\n    `Camera at progress ${progress.toFixed(2)}: position=${position.x.toFixed(\n      2\n    )}, ${position.y.toFixed(2)}, ${position.z.toFixed(2)}`\n  );\n}\n\n// Smooth step function from backup.js\nfunction smoothStep(x: number): number {\n  return x * x * (3 - 2 * x);\n}\n\n// Scroll event handler\nfunction handleScroll() {\n  const homeSection = document.querySelector(\".sc--home\") as HTMLElement;\n  if (!homeSection) {\n    console.warn(\".sc--home element not found\");\n    return;\n  }\n\n  const rect = homeSection.getBoundingClientRect();\n  const windowHeight = window.innerHeight;\n\n  // Check if we're in or approaching the home section animation range\n  const isInHomeSection =\n    rect.top <= windowHeight && rect.bottom > -windowHeight;\n\n  // Calculate scroll progress: LIMITED to \"top top\" -> \"top bottom\"\n  // Animation starts when section top hits viewport top (rect.top = 0)\n  // Animation ends when section top hits viewport bottom (rect.top = -windowHeight)\n\n  let scrollProgress = 0;\n\n  if (rect.top <= 0 && rect.top >= -windowHeight) {\n    // We're in the animation range: top of section is between top and bottom of viewport\n    const animationRange = windowHeight; // Total animation distance\n    const currentPosition = Math.abs(rect.top); // How far past top we are (0 to windowHeight)\n    scrollProgress = currentPosition / animationRange; // 0 to 1\n  } else if (rect.top < -windowHeight) {\n    // Past the animation range - animation complete\n    scrollProgress = 1;\n  }\n  // else scrollProgress stays 0 (before animation range)\n\n  console.log(\n    `Scroll Debug: rect.top=${\n      rect.top\n    }, windowHeight=${windowHeight}, scrollProgress=${scrollProgress}, animationRange=${\n      rect.top <= 0 && rect.top >= -windowHeight ? windowHeight : \"outside\"\n    }`\n  );\n\n  if (isInHomeSection) {\n    // We're in the home section or buffer zone - handle scroll animation\n\n    if (scrollProgress > 0) {\n      // Always animate when scrollProgress > 0, regardless of state\n      // Switch to SCROLL_ANIMATION state if not already\n      if (currentAnimationState === \"HOME\") {\n        currentAnimationState = \"SCROLL_ANIMATION\";\n        console.log(\"Switched to SCROLL_ANIMATION state\");\n\n        // Capture positions immediately when starting scroll animation\n        captureGhostPositions();\n        createBezierCurves();\n        createCameraPath();\n      }\n\n      // Always animate based on scroll progress (no state checks)\n      console.log(`Animating with scrollProgress: ${scrollProgress}`);\n\n      // Animate ghosts along bezier curves (they finish at 80% scroll)\n      Object.keys(ghosts).forEach((ghostKey) => {\n        if (bezierCurves[ghostKey]) {\n          // Compress ghost animation into 0-80% range\n          const ghostProgress = Math.min(scrollProgress / GHOSTS_END_AT, 1);\n          moveGhostOnCurve(ghostKey, ghostProgress);\n        }\n      });\n\n      // Animate camera normally (0% to 100%)\n      animateCamera(scrollProgress);\n\n      // Update debug info\n      if (window.animationDebugInfo) {\n        window.animationDebugInfo.scrollProgress = scrollProgress;\n      }\n    } else if (scrollProgress === 0) {\n      // Back at the beginning of home section - reset to home state\n      if (currentAnimationState !== \"HOME\") {\n        console.log(\"Scroll progress at 0, resetting to home state\");\n        resetToHomeState();\n      }\n    }\n  } else {\n    // We're outside the home section and buffer zone\n\n    // Check if we're at the very top of the page (above home section)\n    if (window.scrollY <= 10) {\n      console.log(\"At top of page - resetting to HOME\");\n      resetToHomeState();\n    }\n  }\n}\n\n// 5. GSAP INTEGRATION - To be called by GSAP ScrollTriggers\n// 6. INTRO TEXT ANIMATIONS (after arriving at maze)\nfunction setupIntroAnimations() {\n  console.log(\"Setting up intro animations...\");\n\n  // Setup intro header animation (.sc_h--intro)\n  const introHeader = document.querySelector(\".sc_h--intro\");\n  if (introHeader) {\n    // Set initial state\n    (introHeader as HTMLElement).style.transform = \"scale(0)\";\n    (introHeader as HTMLElement).style.opacity = \"0\";\n    (introHeader as HTMLElement).style.display = \"none\"; // Hidden initially\n\n    console.log(\"✅ Intro header element found and initialized\");\n  } else {\n    console.warn(\"❌ Intro header element (.sc_h--intro) not found in DOM\");\n  }\n\n  // Setup intro body animation (.sc_b--intro)\n  const introBody = document.querySelector(\".sc_b--intro\");\n  if (introBody) {\n    // Set initial state\n    (introBody as HTMLElement).style.transform = \"scale(0.5)\";\n    (introBody as HTMLElement).style.opacity = \"0\";\n    (introBody as HTMLElement).style.display = \"none\"; // Hidden initially\n\n    console.log(\"✅ Intro body element found and initialized\");\n  } else {\n    console.warn(\"❌ Intro body element (.sc_b--intro) not found in DOM\");\n  }\n\n  // Debug: List all elements in DOM for troubleshooting\n  const allElements = document.querySelectorAll('[class*=\"intro\"]');\n  console.log(\n    `Found ${allElements.length} elements with 'intro' in class name:`,\n    Array.from(allElements).map((el) => el.className)\n  );\n}\n\n// Handle intro section scroll animations (like backup.js)\nfunction handleIntroScroll() {\n  const introSection = document.querySelector(\".sc--intro\") as HTMLElement;\n  if (!introSection) return;\n\n  const rect = introSection.getBoundingClientRect();\n  const windowHeight = window.innerHeight;\n\n  // Calculate if intro section is in view with buffer zone\n  const sectionTop = rect.top;\n  const sectionHeight = rect.height;\n\n  // Add buffer zone for smooth animation completion\n  const animationBuffer = windowHeight * 0.2; // 20% buffer for intro\n  const totalAnimationHeight = sectionHeight + animationBuffer;\n\n  if (\n    sectionTop <= windowHeight &&\n    sectionTop + sectionHeight >= -animationBuffer\n  ) {\n    // Section is in view (including buffer zone) - calculate progress\n    const scrolledIntoSection = Math.max(0, -sectionTop);\n    const progress = Math.min(1, scrolledIntoSection / totalAnimationHeight);\n\n    // Animate intro elements based on progress\n    animateIntroHeader(progress);\n    animateIntroBody(progress);\n  }\n}\n\nfunction animateIntroHeader(progress: number) {\n  const introHeader = document.querySelector(\".sc_h--intro\") as HTMLElement;\n  if (!introHeader) return;\n\n  // Make visible\n  introHeader.style.display = \"block\";\n\n  // Keyframe progress mapping (like backup.js)\n  let scale = 0;\n  let opacity = 0;\n\n  if (progress <= 0.3) {\n    // 0% - 30%: scale 0->0.8, opacity 0->1\n    const localProgress = progress / 0.3;\n    scale = localProgress * 0.8;\n    opacity = localProgress;\n  } else if (progress <= 0.7) {\n    // 30% - 70%: scale 0.8->1.2, opacity stays 1\n    const localProgress = (progress - 0.3) / 0.4;\n    scale = 0.8 + localProgress * 0.4; // 0.8 -> 1.2\n    opacity = 1;\n  } else {\n    // 70% - 100%: scale 1.2->1.5, opacity 1->0\n    const localProgress = (progress - 0.7) / 0.3;\n    scale = 1.2 + localProgress * 0.3; // 1.2 -> 1.5\n    opacity = 1 - localProgress; // 1 -> 0\n  }\n\n  introHeader.style.transform = `scale(${scale})`;\n  introHeader.style.opacity = opacity.toString();\n}\n\nfunction animateIntroBody(progress: number) {\n  const introBody = document.querySelector(\".sc_b--intro\") as HTMLElement;\n  if (!introBody) return;\n\n  // Make visible\n  introBody.style.display = \"block\";\n\n  // Same keyframe logic as header but starting from scale 0.5\n  let scale = 0.5;\n  let opacity = 0;\n\n  if (progress <= 0.3) {\n    // 0% - 30%: scale 0.5->0.8, opacity 0->1\n    const localProgress = progress / 0.3;\n    scale = 0.5 + localProgress * 0.3; // 0.5 -> 0.8\n    opacity = localProgress;\n  } else if (progress <= 0.7) {\n    // 30% - 70%: scale 0.8->1.2, opacity stays 1\n    const localProgress = (progress - 0.3) / 0.4;\n    scale = 0.8 + localProgress * 0.4; // 0.8 -> 1.2\n    opacity = 1;\n  } else {\n    // 70% - 100%: scale 1.2->1.5, opacity 1->0\n    const localProgress = (progress - 0.7) / 0.3;\n    scale = 1.2 + localProgress * 0.3; // 1.2 -> 1.5\n    opacity = 1 - localProgress; // 1 -> 0\n  }\n\n  introBody.style.transform = `scale(${scale})`;\n  introBody.style.opacity = opacity.toString();\n}\n\nexport function setupScrollTriggers() {\n  // Setup intro animations\n  setupIntroAnimations();\n\n  // This will be implemented when GSAP is available\n  // For now, we use basic scroll events\n  window.addEventListener(\"scroll\", handleScroll);\n  window.addEventListener(\"scroll\", handleIntroScroll);\n  window.addEventListener(\"scroll\", handlePOVScroll);\n  console.log(\"Scroll triggers setup complete\");\n}\n\n// Main animation loop\nfunction animate() {\n  // Update FOV based on current animation state\n  updateCameraFOV();\n\n  // Update pacman mixer\n  if (pacmanMixer) {\n    const delta = clock.getDelta();\n    pacmanMixer.update(delta);\n  }\n\n  // Run animation loop if in HOME state\n  animationLoop();\n\n  // Render the scene\n  renderer.render(scene, camera);\n\n  requestAnimationFrame(animate);\n}\n\n// Initialize animation system\nexport function initAnimationSystem() {\n  console.log(\"Initializing animation system...\");\n\n  // FIRST THING: Capture the initial camera state before any animations start\n  initialCameraPosition = camera.position.clone();\n  initialCameraQuaternion = camera.quaternion.clone();\n  const direction = new THREE.Vector3(0, 0, -1);\n  direction.applyQuaternion(camera.quaternion);\n  initialCameraTarget = camera.position\n    .clone()\n    .add(direction.multiplyScalar(5));\n\n  console.log(\"Captured initial camera position:\", initialCameraPosition);\n  console.log(\"Captured initial camera quaternion:\", initialCameraQuaternion);\n  console.log(\"Captured initial camera look-at target:\", initialCameraTarget);\n\n  // Setup debug info\n  window.animationDebugInfo = {\n    state: currentAnimationState,\n    capturedPositions: capturedPositions,\n    bezierCurves: bezierCurves,\n    povAnimationActive: false,\n  };\n\n  // Ensure all ghosts are visible and have full opacity\n  Object.keys(ghosts).forEach((ghostKey) => {\n    if (ghosts[ghostKey]) {\n      ghosts[ghostKey].visible = true;\n      console.log(\n        `Ghost ${ghostKey} set to visible:`,\n        ghosts[ghostKey].visible\n      );\n\n      const ghost = ghosts[ghostKey];\n      if (\n        ghost instanceof THREE.Mesh &&\n        ghost.material &&\n        \"opacity\" in ghost.material\n      ) {\n        ghost.material.opacity = 1;\n      } else if (ghost instanceof THREE.Group) {\n        ghost.traverse((child) => {\n          if (\n            child instanceof THREE.Mesh &&\n            child.material &&\n            \"opacity\" in child.material\n          ) {\n            child.material.opacity = 1;\n          }\n        });\n      }\n    }\n  });\n\n  // Debug: Check if pathsMap is available\n  console.log(\"Available paths:\", Object.keys(pathsMap));\n  console.log(\"Ghosts:\", Object.keys(ghosts));\n\n  setupScrollTriggers();\n  animate();\n\n  // Initialize POV Animation System\n  initializePOVAnimation();\n\n  console.log(\"Animation system initialized\");\n}\n\n// Export functions for external use\nexport { moveGhostOnCurve, captureGhostPositions, createBezierCurves };\n\n/*------------------\nPOV Animation System\n------------------*/\n\n// POV Path Points (from backup.js)\nconst cameraPOVPathPoints = [\n  {\n    pos: new THREE.Vector3(0.55675, 0.5, 0.45175),\n    type: \"curve\",\n    curveType: \"forwardDownArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 0.6025),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.607, 0.55, 0.703),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.7075, 0.55, 0.8035), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.9085, 0.55, 0.8035),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.95875, 0.55, 0.85375), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.95875, 0.55, 1.15525),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.9085, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.808, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.75775, 0.55, 1.15525), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.75775, 0.55, 1.05475),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.7075, 0.55, 1.0045), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.205, 0.55, 1.0045),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.15475, 0.55, 1.05475), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 1.15525),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.205, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.5065, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 1.306),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(-0.44825, 1, 2.0095), type: \"straight\" },\n];\n\nconst ghost1POVPathPoints = [\n  { pos: new THREE.Vector3(1.05925, 0.55, 0.703), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.05925, 0.55, 0.75325),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(1.009, 0.55, 0.8035), type: \"straight\" },\n  { pos: new THREE.Vector3(0.9085, 0.55, 0.8035), type: \"straight\" },\n];\n\nconst ghost2POVPathPoints = [\n  { pos: new THREE.Vector3(1.05925, 0.55, 1.2055), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(1.009, 0.55, 1.2055),\n    type: \"curve\",\n    curveType: \"lowerArc\",\n  },\n  { pos: new THREE.Vector3(0.95875, 0.55, 1.15525), type: \"straight\" },\n  { pos: new THREE.Vector3(0.95875, 0.55, 1.05475), type: \"straight\" },\n];\n\nconst ghost3POVPathPoints = [\n  { pos: new THREE.Vector3(0.35575, 0.55, 0.904), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.35575, 0.55, 0.95425),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.406, 0.55, 1.0045), type: \"straight\" },\n  { pos: new THREE.Vector3(0.5065, 0.55, 1.0045), type: \"straight\" },\n];\n\nconst ghost4POVPathPoints = [\n  { pos: new THREE.Vector3(0.15475, 0.55, 1.105), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.15475, 0.55, 1.05475),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.205, 0.55, 1.0045), type: \"straight\" },\n  { pos: new THREE.Vector3(0.3055, 0.55, 1.0045), type: \"straight\" },\n];\n\nconst ghost5POVPathPoints = [\n  { pos: new THREE.Vector3(0.55675, 0.55, 1.306), type: \"straight\" },\n  {\n    pos: new THREE.Vector3(0.55675, 0.55, 1.25575),\n    type: \"curve\",\n    curveType: \"upperArc\",\n  },\n  { pos: new THREE.Vector3(0.5065, 0.55, 1.2055), type: \"straight\" },\n  { pos: new THREE.Vector3(0.406, 0.55, 1.2055), type: \"straight\" },\n];\n\n// POV Path creation function\nfunction createPOVPath(pathPoints: any[]): THREE.CurvePath<THREE.Vector3> {\n  const path = new THREE.CurvePath<THREE.Vector3>();\n\n  for (let i = 0; i < pathPoints.length - 1; i++) {\n    const current = pathPoints[i];\n    const next = pathPoints[i + 1];\n\n    if (current.type === \"straight\") {\n      const line = new THREE.LineCurve3(current.pos, next.pos);\n      path.add(line);\n    } else if (current.type === \"curve\") {\n      let midPoint: THREE.Vector3;\n      if (current.curveType === \"upperArc\") {\n        midPoint = new THREE.Vector3(current.pos.x, current.pos.y, next.pos.z);\n      } else if (current.curveType === \"lowerArc\") {\n        midPoint = new THREE.Vector3(next.pos.x, current.pos.y, current.pos.z);\n      } else if (current.curveType === \"forwardDownArc\") {\n        midPoint = new THREE.Vector3(current.pos.x, next.pos.y, current.pos.z);\n      } else {\n        midPoint = new THREE.Vector3(\n          (current.pos.x + next.pos.x) / 2,\n          (current.pos.y + next.pos.y) / 2,\n          (current.pos.z + next.pos.z) / 2\n        );\n      }\n      const curve = new THREE.QuadraticBezierCurve3(\n        current.pos,\n        midPoint,\n        next.pos\n      );\n      path.add(curve);\n    }\n  }\n  return path;\n}\n\n// POV Animation State\ninterface POVAnimationState {\n  isActive: boolean;\n  cameraPOVPath: THREE.CurvePath<THREE.Vector3> | null;\n  ghostPOVPaths: { [key: string]: THREE.CurvePath<THREE.Vector3> };\n  triggerPositions: { [key: string]: any };\n  previousCameraPosition: THREE.Vector3 | null;\n  startRotationPoint: THREE.Vector3;\n  endRotationPoint: THREE.Vector3;\n  targetLookAt: THREE.Vector3;\n  finalLookAt: THREE.Vector3;\n  rotationStarted: boolean;\n  cachedStartYAngle: number | null;\n}\n\nconst povAnimationState: POVAnimationState = {\n  isActive: false,\n  cameraPOVPath: null,\n  ghostPOVPaths: {},\n  triggerPositions: {},\n  previousCameraPosition: null,\n  startRotationPoint: new THREE.Vector3(0.55675, 0.55, 1.306),\n  endRotationPoint: new THREE.Vector3(-0.14675, 1, 1.8085),\n  targetLookAt: new THREE.Vector3(0.55675, 0.6, 1.306),\n  finalLookAt: new THREE.Vector3(-0.14675, 0, 1.8085),\n  rotationStarted: false,\n  cachedStartYAngle: null,\n};\n\n// POV Camera Smoothing State\nlet previousCameraRotation: THREE.Quaternion | null = null;\nconst CAMERA_ROTATION_SMOOTHING = 0.15; // Smoothing factor (0 = no smoothing, 1 = immediate)\nconst MAX_ROTATION_SPEED = Math.PI / 6; // Max 30° rotation per frame\nconst LOOK_AHEAD_DISTANCE = 0.02; // How far ahead to look for smooth curves\n\n// POV Text Animation Constants\nconst GHOST_TEXT_START = 0.2;\nconst CAM_TEXT_START = 0.3;\nconst FADE_OUT_START = 0.8;\nconst TRIGGER_DISTANCE = 0.02;\n\n// Get parent elements for POV triggers\nconst parentElements = document.querySelectorAll(\".cmp--pov.cmp\");\n\nconst backupTriggerPositions = {\n  ghost1: {\n    triggerPos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n    ghostTextPos: new THREE.Vector3(0.7075, 0.55, 0.8035),\n    camTextPos: new THREE.Vector3(0.75775, 0.55, 0.8035),\n    endPosition: new THREE.Vector3(0.85825, 0.55, 0.8035),\n    parent: parentElements[0] || null,\n    active: false,\n  },\n  ghost2: {\n    triggerPos: new THREE.Vector3(0.9085, 0.55, 0.8035),\n    ghostTextPos: new THREE.Vector3(0.95875, 0.55, 0.85375),\n    camTextPos: new THREE.Vector3(0.95875, 0.55, 0.904),\n    endPosition: new THREE.Vector3(0.95875, 0.55, 1.0045),\n    parent: parentElements[1] || null,\n    active: false,\n  },\n  ghost3: {\n    triggerPos: new THREE.Vector3(0.75775, 0.55, 1.05475),\n    ghostTextPos: new THREE.Vector3(0.7075, 0.55, 1.0045),\n    camTextPos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    endPosition: new THREE.Vector3(0.55675, 0.55, 1.0045),\n    parent: parentElements[2] || null,\n    active: false,\n  },\n  ghost4: {\n    triggerPos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n    ghostTextPos: new THREE.Vector3(0.5065, 0.55, 1.0045),\n    camTextPos: new THREE.Vector3(0.45625, 0.55, 1.0045),\n    endPosition: new THREE.Vector3(0.35575, 0.55, 1.0045),\n    parent: parentElements[3] || null,\n    active: false,\n  },\n  ghost5: {\n    triggerPos: new THREE.Vector3(0.15475, 0.55, 1.15525),\n    ghostTextPos: new THREE.Vector3(0.205, 0.55, 1.2055),\n    camTextPos: new THREE.Vector3(0.25525, 0.55, 1.2055),\n    endPosition: new THREE.Vector3(0.35575, 0.55, 1.2055),\n    parent: parentElements[4] || null,\n    active: false,\n  },\n};\n\n// Initialize POV Animation System\nfunction initializePOVAnimation() {\n  console.log(\"🎭 Initializing POV Animation System...\");\n\n  // Create camera POV path\n  povAnimationState.cameraPOVPath = createPOVPath(cameraPOVPathPoints);\n\n  // Create ghost POV paths\n  povAnimationState.ghostPOVPaths = {\n    ghost1: createPOVPath(ghost1POVPathPoints),\n    ghost2: createPOVPath(ghost2POVPathPoints),\n    ghost3: createPOVPath(ghost3POVPathPoints),\n    ghost4: createPOVPath(ghost4POVPathPoints),\n    ghost5: createPOVPath(ghost5POVPathPoints),\n  };\n\n  console.log(\n    \"🎭 Created ghost POV paths:\",\n    Object.keys(povAnimationState.ghostPOVPaths)\n  );\n  console.log(\"🎭 Ghost path lengths:\", {\n    ghost1: povAnimationState.ghostPOVPaths.ghost1?.getLength() || 0,\n    ghost2: povAnimationState.ghostPOVPaths.ghost2?.getLength() || 0,\n    ghost3: povAnimationState.ghostPOVPaths.ghost3?.getLength() || 0,\n    ghost4: povAnimationState.ghostPOVPaths.ghost4?.getLength() || 0,\n    ghost5: povAnimationState.ghostPOVPaths.ghost5?.getLength() || 0,\n  });\n\n  // Initialize trigger positions\n  povAnimationState.triggerPositions = {\n    ghost1: {\n      triggerPos: new THREE.Vector3(0.65725, 0.55, 0.75325),\n      ghostTextPos: new THREE.Vector3(0.7075, 0.55, 0.8035),\n      camTextPos: new THREE.Vector3(0.75775, 0.55, 0.8035),\n      endPosition: new THREE.Vector3(0.85825, 0.55, 0.8035),\n      parent: parentElements[0],\n      active: false,\n    },\n    ghost2: {\n      triggerPos: new THREE.Vector3(0.9085, 0.55, 0.8035),\n      ghostTextPos: new THREE.Vector3(0.95875, 0.55, 0.85375),\n      camTextPos: new THREE.Vector3(0.95875, 0.55, 0.904),\n      endPosition: new THREE.Vector3(0.95875, 0.55, 1.0045),\n      parent: parentElements[1],\n      active: false,\n    },\n    ghost3: {\n      triggerPos: new THREE.Vector3(0.75775, 0.55, 1.05475),\n      ghostTextPos: new THREE.Vector3(0.7075, 0.55, 1.0045),\n      camTextPos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n      endPosition: new THREE.Vector3(0.55675, 0.55, 1.0045),\n      parent: parentElements[2],\n      active: false,\n    },\n    ghost4: {\n      triggerPos: new THREE.Vector3(0.65725, 0.55, 1.0045),\n      ghostTextPos: new THREE.Vector3(0.5065, 0.55, 1.0045),\n      camTextPos: new THREE.Vector3(0.45625, 0.55, 1.0045),\n      endPosition: new THREE.Vector3(0.35575, 0.55, 1.0045),\n      parent: parentElements[3],\n      active: false,\n    },\n    ghost5: {\n      triggerPos: new THREE.Vector3(0.15475, 0.55, 1.15525),\n      ghostTextPos: new THREE.Vector3(0.205, 0.55, 1.2055),\n      camTextPos: new THREE.Vector3(0.25525, 0.55, 1.2055),\n      endPosition: new THREE.Vector3(0.35575, 0.55, 1.2055),\n      parent: parentElements[4],\n      active: false,\n    },\n  };\n\n  // POV animation will be handled by handlePOVScroll in setupScrollTriggers\n\n  console.log(\"✅ POV Animation System initialized\");\n}\n\n// POV animation is now handled by handlePOVScroll function in setupScrollTriggers\n\n// POV Animation Start Handler\nfunction onPOVAnimationStart() {\n  console.log(\"🎭 POV Animation Start Handler Called!\");\n  console.log(\n    \"🎭 Available ghost paths:\",\n    Object.keys(povAnimationState.ghostPOVPaths)\n  );\n  console.log(\"🎭 Available ghosts:\", Object.keys(ghosts));\n\n  // Switch to POV state\n  currentAnimationState = \"POV_ANIMATION\";\n\n  // Initialize previous camera position\n  if (povAnimationState.cameraPOVPath) {\n    povAnimationState.previousCameraPosition =\n      povAnimationState.cameraPOVPath.getPointAt(0);\n  }\n\n  // Reset rotation state\n  povAnimationState.rotationStarted = false;\n  povAnimationState.cachedStartYAngle = null;\n\n  // Reset smooth camera rotation state\n  previousCameraRotation = null;\n\n  // Make sure pacman is visible\n  if (ghosts.pacman) {\n    ghosts.pacman.visible = true;\n  }\n\n  // Make sure all ghosts are visible for POV animation\n  Object.entries(ghosts).forEach(([ghostKey, ghost]) => {\n    if (ghostKey !== \"pacman\") {\n      ghost.visible = true;\n      console.log(`🎭 Made ghost ${ghostKey} visible for POV animation`);\n    }\n  });\n\n  // Update debug info\n  if (window.animationDebugInfo) {\n    window.animationDebugInfo.povAnimationActive = true;\n  }\n\n  console.log(\"🎭 POV Animation Start Handler Complete!\");\n}\n\n// Update POV Animation\nfunction updatePOVAnimation(progress: number) {\n  if (!povAnimationState.cameraPOVPath || !povAnimationState.isActive) return;\n\n  // Update camera position and rotation\n  updatePOVCamera(progress);\n\n  // Update ghost positions\n  updatePOVGhosts(progress);\n\n  // Update POV texts\n  updatePOVTexts(progress);\n}\n\n// Update POV Camera\nfunction updatePOVCamera(progress: number) {\n  if (!povAnimationState.cameraPOVPath || !camera) return;\n\n  const cameraPosition = povAnimationState.cameraPOVPath.getPointAt(progress);\n  camera.position.copy(cameraPosition);\n\n  // Handle camera rotation based on progress\n  const rotationStartingPoint = 0.973;\n\n  if (progress >= rotationStartingPoint && !povAnimationState.rotationStarted) {\n    povAnimationState.rotationStarted = true;\n    const lookAtPoint = getCameraLookAtPoint();\n    povAnimationState.cachedStartYAngle = Math.atan2(\n      lookAtPoint.x - camera.position.x,\n      lookAtPoint.z - camera.position.z\n    );\n  }\n\n  if (progress < rotationStartingPoint) {\n    // Before rotation phase - smooth camera rotation\n    const smoothedTangent = getSmoothCameraTangent(progress);\n    const lookAtPoint = camera.position.clone().add(smoothedTangent);\n\n    // Apply smooth rotation\n    applySmoothCameraRotation(lookAtPoint);\n  } else {\n    // Rotation phase - interpolate between start and end look-at\n    const rotationProgress =\n      (progress - rotationStartingPoint) / (1 - rotationStartingPoint);\n    const smoothProgress = smoothStep(rotationProgress);\n\n    const currentLookAt = new THREE.Vector3().lerpVectors(\n      povAnimationState.targetLookAt,\n      povAnimationState.finalLookAt,\n      smoothProgress\n    );\n\n    applySmoothCameraRotation(currentLookAt);\n  }\n\n  // Store previous position\n  if (povAnimationState.previousCameraPosition) {\n    povAnimationState.previousCameraPosition.copy(cameraPosition);\n  }\n}\n\n// Get smoothed tangent for camera movement\nfunction getSmoothCameraTangent(progress: number): THREE.Vector3 {\n  if (!povAnimationState.cameraPOVPath) return new THREE.Vector3(0, 0, -1);\n\n  // Get current tangent\n  const currentTangent = povAnimationState.cameraPOVPath\n    .getTangentAt(progress)\n    .normalize();\n\n  // Get look-ahead tangent for smoothing\n  const lookAheadProgress = Math.min(progress + LOOK_AHEAD_DISTANCE, 1);\n  const lookAheadTangent = povAnimationState.cameraPOVPath\n    .getTangentAt(lookAheadProgress)\n    .normalize();\n\n  // Get look-behind tangent for more context\n  const lookBehindProgress = Math.max(progress - LOOK_AHEAD_DISTANCE, 0);\n  const lookBehindTangent = povAnimationState.cameraPOVPath\n    .getTangentAt(lookBehindProgress)\n    .normalize();\n\n  // Calculate average tangent for smoothing\n  const averageTangent = new THREE.Vector3()\n    .addVectors(lookBehindTangent, currentTangent)\n    .add(lookAheadTangent)\n    .divideScalar(3)\n    .normalize();\n\n  // Detect S-curves: if current and look-ahead have very different directions\n  const dotProduct = currentTangent.dot(lookAheadTangent);\n  const isSCurve = dotProduct < 0.3; // Less than ~70° similarity = S-curve\n\n  if (isSCurve) {\n    // For S-curves, use more aggressive smoothing\n    return new THREE.Vector3()\n      .addVectors(\n        currentTangent.multiplyScalar(0.3),\n        averageTangent.multiplyScalar(0.7)\n      )\n      .normalize();\n  } else {\n    // For normal curves, use light smoothing\n    return new THREE.Vector3()\n      .addVectors(\n        currentTangent.multiplyScalar(0.7),\n        averageTangent.multiplyScalar(0.3)\n      )\n      .normalize();\n  }\n}\n\n// Apply smooth camera rotation with speed limiting\nfunction applySmoothCameraRotation(targetLookAt: THREE.Vector3) {\n  if (!camera) return;\n\n  // Calculate target rotation\n  const tempMatrix = new THREE.Matrix4();\n  tempMatrix.lookAt(camera.position, targetLookAt, camera.up);\n  const targetQuaternion = new THREE.Quaternion().setFromRotationMatrix(\n    tempMatrix\n  );\n\n  if (!previousCameraRotation) {\n    // First frame - set rotation directly\n    camera.quaternion.copy(targetQuaternion);\n    previousCameraRotation = targetQuaternion.clone();\n    return;\n  }\n\n  // Calculate rotation difference\n  const angleDifference = camera.quaternion.angleTo(targetQuaternion);\n\n  // Limit rotation speed\n  if (angleDifference > MAX_ROTATION_SPEED) {\n    // Too fast rotation - limit it\n    const limitedQuaternion = new THREE.Quaternion();\n    const progress = MAX_ROTATION_SPEED / angleDifference;\n    limitedQuaternion.slerpQuaternions(\n      camera.quaternion,\n      targetQuaternion,\n      progress\n    );\n    camera.quaternion.copy(limitedQuaternion);\n  } else {\n    // Normal rotation - apply smoothing\n    const smoothedQuaternion = new THREE.Quaternion();\n    smoothedQuaternion.slerpQuaternions(\n      camera.quaternion,\n      targetQuaternion,\n      CAMERA_ROTATION_SMOOTHING\n    );\n    camera.quaternion.copy(smoothedQuaternion);\n  }\n\n  // Store for next frame\n  previousCameraRotation.copy(camera.quaternion);\n}\n\n// Update POV Ghosts with enhanced triggering (from backup.js)\nfunction updatePOVGhosts(progress: number) {\n  if (!povAnimationState.cameraPOVPath) return;\n\n  const cameraPosition = povAnimationState.cameraPOVPath.getPointAt(progress);\n\n  console.log(\n    `🎭 POV Ghost Update - Progress: ${progress.toFixed(\n      3\n    )}, Camera: ${cameraPosition.x.toFixed(2)}, ${cameraPosition.y.toFixed(\n      2\n    )}, ${cameraPosition.z.toFixed(2)}`\n  );\n  console.log(\n    `🎭 Available ghost paths:`,\n    Object.keys(povAnimationState.ghostPOVPaths)\n  );\n\n  // Update each ghost using enhanced logic\n  Object.entries(ghosts).forEach(([ghostKey, ghost]) => {\n    if (ghostKey === \"pacman\") {\n      // Pacman stays hidden during POV animation\n      ghost.visible = false;\n      return;\n    }\n\n    // Use the ghost key directly since that's how paths are stored\n    if (povAnimationState.ghostPOVPaths[ghostKey]) {\n      console.log(`🎭 Updating ghost ${ghostKey} with path`);\n\n      // For now, make all ghosts visible and positioned along their paths\n      const path = povAnimationState.ghostPOVPaths[ghostKey];\n      const ghostPosition = path.getPointAt(progress);\n      ghost.position.copy(ghostPosition);\n\n      // Make ghost look along its path\n      const tangent = path.getTangentAt(progress).normalize();\n      const lookAtPoint = ghostPosition.clone().add(tangent);\n      ghost.lookAt(lookAtPoint);\n\n      // Make ghost visible\n      ghost.visible = true;\n\n      console.log(\n        `🎭 Ghost ${ghostKey} positioned at: ${ghostPosition.x.toFixed(\n          2\n        )}, ${ghostPosition.y.toFixed(2)}, ${ghostPosition.z.toFixed(\n          2\n        )}, visible: ${ghost.visible}`\n      );\n\n      // updateGhostInPOV(ghostKey, ghost, ghostKey, cameraPosition);\n    } else {\n      console.log(`🎭 No path found for ghost ${ghostKey}`);\n    }\n  });\n}\n\n// Update POV Text Animations\nfunction updatePOVTexts(progress: number) {\n  if (!povAnimationState.cameraPOVPath) return;\n\n  const cameraPosition = povAnimationState.cameraPOVPath.getPointAt(progress);\n\n  Object.entries(povAnimationState.triggerPositions).forEach(\n    ([key, trigger]) => {\n      const currentCameraProgress =\n        findClosestProgressOnPOVPath(cameraPosition);\n\n      // Calculate trigger positions on camera path\n      if (!trigger.triggerCameraProgress) {\n        trigger.triggerCameraProgress = findClosestProgressOnPOVPath(\n          trigger.triggerPos\n        );\n        trigger.ghostTextCameraProgress = findClosestProgressOnPOVPath(\n          trigger.ghostTextPos\n        );\n        trigger.camTextCameraProgress = findClosestProgressOnPOVPath(\n          trigger.camTextPos\n        );\n        trigger.endCameraProgress = findClosestProgressOnPOVPath(\n          trigger.endPosition\n        );\n      }\n\n      // Calculate text opacities\n      let targetGhostOpacity = 0;\n      let targetCamOpacity = 0;\n\n      if (currentCameraProgress >= trigger.triggerCameraProgress) {\n        const ghostTextRange =\n          trigger.camTextCameraProgress - trigger.ghostTextCameraProgress;\n        const ghostTextProgress = Math.max(\n          0,\n          Math.min(\n            1,\n            (currentCameraProgress - trigger.ghostTextCameraProgress) /\n              ghostTextRange\n          )\n        );\n\n        if (ghostTextProgress < FADE_OUT_START) {\n          targetGhostOpacity = 1;\n        } else {\n          targetGhostOpacity =\n            1 - (ghostTextProgress - FADE_OUT_START) / (1 - FADE_OUT_START);\n        }\n\n        if (currentCameraProgress >= trigger.camTextCameraProgress) {\n          const camTextRange =\n            trigger.endCameraProgress - trigger.camTextCameraProgress;\n          const camTextProgress = Math.max(\n            0,\n            Math.min(\n              1,\n              (currentCameraProgress - trigger.camTextCameraProgress) /\n                camTextRange\n            )\n          );\n\n          if (camTextProgress < FADE_OUT_START) {\n            targetCamOpacity = 1;\n          } else {\n            targetCamOpacity =\n              1 - (camTextProgress - FADE_OUT_START) / (1 - FADE_OUT_START);\n          }\n        }\n      }\n\n      // Smooth opacity transitions\n      const fadeInSpeed = 0.2;\n      const fadeOutSpeed = 0.1;\n\n      if (targetGhostOpacity > trigger.ghostTextOpacity) {\n        trigger.ghostTextOpacity +=\n          (targetGhostOpacity - trigger.ghostTextOpacity) * fadeInSpeed;\n      } else {\n        trigger.ghostTextOpacity +=\n          (targetGhostOpacity - trigger.ghostTextOpacity) * fadeOutSpeed;\n      }\n\n      if (targetCamOpacity > trigger.camTextOpacity) {\n        trigger.camTextOpacity +=\n          (targetCamOpacity - trigger.camTextOpacity) * fadeInSpeed;\n      } else {\n        trigger.camTextOpacity +=\n          (targetCamOpacity - trigger.camTextOpacity) * fadeOutSpeed;\n      }\n\n      // Update DOM elements\n      updatePOVTextElements(trigger);\n    }\n  );\n}\n\n// Update POV Text DOM Elements\nfunction updatePOVTextElements(trigger: any) {\n  if (!trigger.parent) return;\n\n  const ghostText = trigger.parent.querySelector(\".cmp--pov-ghost\");\n  const camText = trigger.parent.querySelector(\".cmp--pov-cam\");\n\n  if (ghostText) {\n    const ghostOpacity = Math.max(0, Math.min(1, trigger.ghostTextOpacity));\n    if (ghostOpacity > 0.01) {\n      ghostText.classList.remove(\"hidden\");\n      ghostText.style.opacity = ghostOpacity.toString();\n    } else {\n      ghostText.classList.add(\"hidden\");\n      ghostText.style.opacity = \"0\";\n    }\n  }\n\n  if (camText) {\n    const camOpacity = Math.max(0, Math.min(1, trigger.camTextOpacity));\n    if (camOpacity > 0.01) {\n      camText.classList.remove(\"hidden\");\n      camText.style.opacity = camOpacity.toString();\n    } else {\n      camText.classList.add(\"hidden\");\n      camText.style.opacity = \"0\";\n    }\n  }\n}\n\n// Find closest progress on POV path\nfunction findClosestProgressOnPOVPath(\n  targetPoint: THREE.Vector3,\n  samples: number = 2000\n): number {\n  if (!povAnimationState.cameraPOVPath) return 0;\n\n  let closestProgress = 0;\n  let closestDistance = Infinity;\n\n  for (let i = 0; i <= samples; i++) {\n    const progress = i / samples;\n    const point = povAnimationState.cameraPOVPath.getPointAt(progress);\n    const distance = point.distanceTo(targetPoint);\n\n    if (distance < closestDistance) {\n      closestDistance = distance;\n      closestProgress = progress;\n    }\n  }\n\n  return closestProgress;\n}\n\n// POV Animation End Handler\nfunction onPOVAnimationEnd() {\n  // After POV animation, we want to maintain the scroll animation state\n  // so the camera stays at its last scroll position and FOV returns to original\n  currentAnimationState = \"SCROLL_ANIMATION\";\n\n  // Reset all POV text elements\n  Object.values(povAnimationState.triggerPositions).forEach((trigger: any) => {\n    if (trigger.parent) {\n      trigger.parent.classList.add(\"hidden\");\n      trigger.parent.style.opacity = \"0\";\n\n      const ghostText = trigger.parent.querySelector(\".cmp--pov-ghost\");\n      const camText = trigger.parent.querySelector(\".cmp--pov-cam\");\n\n      if (ghostText) {\n        ghostText.classList.add(\"hidden\");\n        ghostText.style.opacity = \"0\";\n      }\n\n      if (camText) {\n        camText.classList.add(\"hidden\");\n        camText.style.opacity = \"0\";\n      }\n    }\n\n    // Reset trigger state\n    trigger.active = false;\n    trigger.ghostTextOpacity = 0;\n    trigger.camTextOpacity = 0;\n  });\n\n  // Restore ghosts to their home positions\n  restoreGhostsToHomePositions();\n\n  // Make sure pacman is visible and animation is running\n  if (ghosts.pacman) ghosts.pacman.visible = true;\n\n  // Update debug info\n  if (window.animationDebugInfo) {\n    window.animationDebugInfo.povAnimationActive = false;\n  }\n\n  // Reset smooth camera rotation state\n  previousCameraRotation = null;\n}\n\n// Restore ghosts to home positions\nfunction restoreGhostsToHomePositions() {\n  Object.entries(capturedPositions).forEach(\n    ([ghostKey, captured]: [string, any]) => {\n      const ghost = ghosts[ghostKey];\n      if (ghost && captured) {\n        ghost.position.copy(captured.position);\n        ghost.rotation.copy(captured.rotation);\n        ghost.visible = true;\n\n        // Reset material opacity\n        if (\n          ghost instanceof THREE.Mesh &&\n          ghost.material &&\n          \"opacity\" in ghost.material\n        ) {\n          ghost.material.opacity = 1;\n        } else if (ghost instanceof THREE.Group) {\n          ghost.traverse((child) => {\n            if (\n              child instanceof THREE.Mesh &&\n              child.material &&\n              \"opacity\" in child.material\n            ) {\n              child.material.opacity = 1;\n            }\n          });\n        }\n      }\n    }\n  );\n}\n\n// Get camera look-at point (from backup.js)\nfunction getCameraLookAtPoint(): THREE.Vector3 {\n  if (!camera) return new THREE.Vector3();\n\n  const direction = new THREE.Vector3(0, 0, -1);\n  direction.applyQuaternion(camera.quaternion);\n  const lookAtPoint = new THREE.Vector3();\n  lookAtPoint.copy(camera.position).add(direction.multiplyScalar(10));\n  return lookAtPoint;\n}\n\n// Handle POV scroll events\nfunction handlePOVScroll() {\n  const povSection = document.querySelector(\".sc--pov\") as HTMLElement;\n  if (!povSection) return;\n\n  const rect = povSection.getBoundingClientRect();\n  const windowHeight = window.innerHeight;\n\n  // Calculate if POV section is in view with buffer zone\n  const sectionTop = rect.top;\n  const sectionHeight = rect.height;\n\n  // Add buffer zone for smooth animation completion\n  const animationBuffer = windowHeight * 0.3; // 30% buffer for POV\n  const totalAnimationHeight = sectionHeight + animationBuffer;\n\n  if (\n    sectionTop <= windowHeight &&\n    sectionTop + sectionHeight >= -animationBuffer\n  ) {\n    // Section is in view (including buffer zone) - calculate progress\n    const scrolledIntoSection = Math.max(0, -sectionTop);\n    const progress = Math.min(1, scrolledIntoSection / totalAnimationHeight);\n\n    // Start POV animation if not already active and we're in SCROLL_ANIMATION or HOME state\n    if (\n      !povAnimationState.isActive &&\n      progress > 0 &&\n      (currentAnimationState === \"SCROLL_ANIMATION\" ||\n        currentAnimationState === \"HOME\")\n    ) {\n      console.log(\"🎭 POV Animation Started (Scroll)\");\n      povAnimationState.isActive = true;\n      onPOVAnimationStart();\n    }\n\n    // Update POV animation\n    if (povAnimationState.isActive) {\n      updatePOVAnimation(progress);\n    }\n  } else {\n    // Section is out of view (beyond buffer zone) - end POV animation\n    if (povAnimationState.isActive) {\n      console.log(\"🎭 POV Animation Ended (Scroll)\");\n      povAnimationState.isActive = false;\n      onPOVAnimationEnd();\n    }\n  }\n}\n\n// Update Camera FOV based on animation state (INSTANT change)\nfunction updateCameraFOV() {\n  if (!camera) return;\n\n  let targetFOV = ORIGINAL_FOV;\n\n  switch (currentAnimationState) {\n    case \"HOME\":\n      targetFOV = ORIGINAL_FOV;\n      break;\n    case \"SCROLL_ANIMATION\":\n      targetFOV = ORIGINAL_FOV;\n      break;\n    case \"POV_ANIMATION\":\n      targetFOV = WIDE_FOV;\n      break;\n    default:\n      targetFOV = ORIGINAL_FOV;\n  }\n\n  // INSTANT FOV change (no animation)\n  if (camera.fov !== targetFOV) {\n    camera.fov = targetFOV;\n    camera.updateProjectionMatrix();\n    console.log(`🎯 FOV changed instantly to: ${targetFOV}`);\n  }\n}\n\n// Enhanced ghost update function (from backup.js)\nfunction updateGhostInPOV(\n  ghostKey: string,\n  ghost: THREE.Object3D,\n  pathKey: string,\n  cameraPosition: THREE.Vector3\n) {\n  if (!pathKey || !povAnimationState.ghostPOVPaths[pathKey]) return;\n\n  const path = povAnimationState.ghostPOVPaths[pathKey];\n  if (!path) return;\n\n  // Check if ghost has trigger position\n  if (ghostKey in backupTriggerPositions) {\n    const trigger =\n      backupTriggerPositions[ghostKey as keyof typeof backupTriggerPositions];\n    const { triggerPos, ghostTextPos, camTextPos, endPosition } = trigger;\n\n    // Calculate distances\n    const distanceToTrigger = cameraPosition.distanceTo(triggerPos);\n    const distanceToGhostText = cameraPosition.distanceTo(ghostTextPos);\n    const distanceToEnd = cameraPosition.distanceTo(endPosition);\n\n    // Determine if ghost should be active\n    const isInTriggerArea = distanceToTrigger <= TRIGGER_DISTANCE;\n    const isInActiveArea = distanceToGhostText <= TRIGGER_DISTANCE * 3;\n\n    if (isInTriggerArea || isInActiveArea) {\n      ghost.visible = true;\n\n      // Calculate progress along the ghost's path\n      const closestProgress = findClosestProgressOnPOVPath(cameraPosition);\n\n      // Move ghost along its path\n      const ghostPosition = path.getPointAt(closestProgress);\n      ghost.position.copy(ghostPosition);\n\n      // Make ghost look along its path\n      const tangent = path.getTangentAt(closestProgress).normalize();\n      const lookAtPoint = ghostPosition.clone().add(tangent);\n      ghost.lookAt(lookAtPoint);\n\n      // Trigger text animations if parent element exists\n      if (trigger.parent) {\n        updateGhostTextTrigger(trigger, cameraPosition, closestProgress);\n      }\n    } else {\n      ghost.visible = false;\n    }\n  } else {\n    // Default behavior for ghosts without triggers\n    const closestProgress = findClosestProgressOnPOVPath(cameraPosition);\n    const ghostPosition = path.getPointAt(closestProgress);\n    ghost.position.copy(ghostPosition);\n\n    const tangent = path.getTangentAt(closestProgress).normalize();\n    const lookAtPoint = ghostPosition.clone().add(tangent);\n    ghost.lookAt(lookAtPoint);\n\n    ghost.visible = true;\n  }\n}\n\n// Update ghost text triggers (from backup.js)\nfunction updateGhostTextTrigger(\n  trigger: any,\n  cameraPosition: THREE.Vector3,\n  progress: number\n) {\n  if (!trigger.parent) return;\n\n  const { triggerPos, ghostTextPos, camTextPos, endPosition } = trigger;\n\n  // Calculate if camera is in trigger range\n  const distanceToTrigger = cameraPosition.distanceTo(triggerPos);\n  const distanceToEnd = cameraPosition.distanceTo(endPosition);\n\n  if (\n    distanceToTrigger <= TRIGGER_DISTANCE &&\n    distanceToEnd <= TRIGGER_DISTANCE * 2\n  ) {\n    // Show ghost text\n    const ghostText = trigger.parent.querySelector(\".cmp--pov-ghost\");\n    if (ghostText) {\n      ghostText.classList.remove(\"hidden\");\n      ghostText.style.opacity = \"1\";\n    }\n\n    // Show cam text after a delay\n    const distanceToCamText = cameraPosition.distanceTo(camTextPos);\n    if (distanceToCamText <= TRIGGER_DISTANCE) {\n      const camText = trigger.parent.querySelector(\".cmp--pov-cam\");\n      if (camText) {\n        camText.classList.remove(\"hidden\");\n        camText.style.opacity = \"1\";\n      }\n    }\n  } else {\n    // Hide texts\n    const ghostText = trigger.parent.querySelector(\".cmp--pov-ghost\");\n    const camText = trigger.parent.querySelector(\".cmp--pov-cam\");\n\n    if (ghostText) {\n      ghostText.classList.add(\"hidden\");\n      ghostText.style.opacity = \"0\";\n    }\n\n    if (camText) {\n      camText.classList.add(\"hidden\");\n      camText.style.opacity = \"0\";\n    }\n  }\n}\n","import { initRenderer, setupLighting, renderer, scene } from \"./scene\";\nimport { initCamera, setupCameraResize, camera } from \"./camera\";\nimport { loadModel } from \"./objects\";\nimport { initAnimationSystem } from \"./animation-system\";\n\n// Initialize everything\nasync function init() {\n  console.log(\"Starting CAM 3D Animation...\");\n\n  try {\n    initRenderer();\n    console.log(\"Renderer initialized\");\n\n    setupLighting();\n    console.log(\"Lighting setup complete\");\n\n    initCamera();\n    console.log(\"Camera initialized\");\n\n    setupCameraResize();\n    console.log(\"Camera resize setup complete\");\n\n    console.log(\"Loading 3D model...\");\n    await loadModel();\n    console.log(\"Model loading complete\");\n\n    // Initialize animation system (handles rendering and animations)\n    console.log(\"Initializing animation system...\");\n    initAnimationSystem();\n    console.log(\"Animation system initialized\");\n\n    // Debug scene contents\n    console.log(\"Scene children count:\", scene.children.length);\n    scene.children.forEach((child, index) => {\n      console.log(`Child ${index}:`, child.type, child.name || \"unnamed\");\n    });\n  } catch (error) {\n    console.error(\"Initialization error:\", error);\n  }\n}\n\n// Start when DOM is ready\nif (document.readyState === \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", init);\n} else {\n  init();\n}\n"],"names":["THREE","isMobile","window","innerWidth","CAMERA_POSITIONS","startMobile","startDesktop","secondMobile","secondDesktop","mobileLookAt","desktopLookAt","startPosition","lookAtPosition","ASSETS","scene","renderer","antialias","alpha","powerPreference","precision","container","document","querySelector","console","error","clock","setPixelRatio","pixelRatio","Math","min","devicePixelRatio","setSize","clientWidth","clientHeight","finalSection","camera","querySelectorAll","innerHeight","quaternion","clone","endQuaternion","setFromEuler","setCamera","lookAt","x","y","z","split","map","Number","updateProjectionMatrix","updateMatrix","updateMatrixWorld","mazeTexture","load","mazeMaterial","matcap","topMaterial","color","metalness","roughness","envMapIntensity","ghostMaterial","opacity","transparent","depthWrite","depthTest","blending","side","transmission","floorMaterial","pacmanMaterials","blue","white","default","materialMap","CAM_Pacman_Backframe","CAM_Pacman_Logo_1","CAM_Pacman_Logo_2","loader","Array","fill","pacmanMixer","pacman","add","ghosts","ghost1","ghost2","ghost3","ghost4","ghost5","ghostContainers","Ghost_EUR","Ghost_CHF","Ghost_YEN","Ghost_USD","Ghost_GBP","Object","values","forEach","ghost","pacmanHomePathPoints","pos","type","curveType","ghost1HomePathPoints","ghost2HomePathPoints","ghost3HomePathPoints","ghost4HomePathPoints","ghost5HomePathPoints","cameraPOVPathPoints","ghost1POVPathPoints","ghost2POVPathPoints","ghost3POVPathPoints","ghost4POVPathPoints","ghost5POVPathPoints","cameraStartPosition","cameraSecondPosition","pathsData","pacmanHomePath","points","ghost1HomePath","ghost2HomePath","ghost3HomePath","ghost4HomePath","ghost5HomePath","cameraPOVPath","ghost1POVPath","ghost2POVPath","ghost3POVPath","ghost4POVPath","ghost5POVPath","paths","entries","key","data","pathPoints","path","i","length","current","next","line","midPoint","curve","createPath","pathsMap","currentAnimationState","capturedPositions","capturedRotations","bezierCurves","timeOffset","pauseTime","initialCameraPosition","initialCameraTarget","initialCameraQuaternion","animationStartTime","Date","now","resetToHomeState","position","copy","keys","ghostKey","log","rotation","material","isArray","mat","traverse","child","animationDebugInfo","state","scrollProgress","handleScroll","homeSection","warn","rect","getBoundingClientRect","windowHeight","isInHomeSection","top","bottom","animationRange","currentPosition","abs","startPos","endPos","controlPoint","start","control","end","direction","applyQuaternion","multiplyScalar","targetSecondPositionMobile","targetSecondPositionDesktop","targetSecondPosition","secondPosition","lerpVectors","toFixed","createCameraPath","ghostProgress","getPoint","originalRotation","targetRotation","PI","currentRotation","max","moveGhostOnCurve","progress","fov","getPointAt","currentQuaternion","slerpQuaternions","animateCamera","scrollY","handleIntroScroll","introSection","sectionTop","sectionHeight","height","animationBuffer","totalAnimationHeight","scrolledIntoSection","introHeader","style","display","scale","localProgress","transform","toString","animateIntroHeader","introBody","animateIntroBody","animate","targetFOV","updateCameraFOV","delta","getDelta","update","t","tangent","getTangentAt","normalize","zRotation","atan2","undefined","previousZRotation","rotationDiff","smoothFactor","smoothedRotation","set","animationLoop","render","requestAnimationFrame","initAnimationSystem","povAnimationActive","visible","allElements","from","el","className","setupIntroAnimations","addEventListener","handlePOVScroll","povAnimationState","createPOVPath","ghostPOVPaths","getLength","triggerPositions","triggerPos","ghostTextPos","camTextPos","endPosition","parent","active","isActive","previousCameraPosition","startRotationPoint","endRotationPoint","targetLookAt","finalLookAt","rotationStarted","cachedStartYAngle","previousCameraRotation","CAMERA_ROTATION_SMOOTHING","MAX_ROTATION_SPEED","LOOK_AHEAD_DISTANCE","FADE_OUT_START","applySmoothCameraRotation","tempMatrix","up","targetQuaternion","setFromRotationMatrix","angleDifference","angleTo","limitedQuaternion","smoothedQuaternion","findClosestProgressOnPOVPath","targetPoint","samples","closestProgress","closestDistance","Infinity","distance","distanceTo","povSection","cameraPosition","rotationStartingPoint","lookAtPoint","smoothedTangent","currentTangent","lookAheadProgress","lookAheadTangent","lookBehindProgress","lookBehindTangent","averageTangent","addVectors","divideScalar","dot","getSmoothCameraTangent","smoothProgress","updatePOVCamera","ghostPosition","updatePOVGhosts","trigger","currentCameraProgress","triggerCameraProgress","ghostTextCameraProgress","camTextCameraProgress","endCameraProgress","targetGhostOpacity","targetCamOpacity","ghostTextRange","ghostTextProgress","camTextRange","camTextProgress","ghostTextOpacity","camTextOpacity","ghostText","camText","ghostOpacity","classList","remove","camOpacity","updatePOVTextElements","updatePOVTexts","updatePOVAnimation","captured","async","init","shadowMap","enabled","appendChild","domElement","body","ambientLight","directionalLight","shadow","mapSize","width","left","right","near","far","bias","radius","castShadow","setupLighting","aspect","Promise","resolve","reject","gltf","model","name","children","subChild","isMesh","push","item","pacmanActions","animations","clip","action","clipAction","setEffectiveWeight","play","ghostContainer","ghostGroup","startsWith","includes","clonedChild","receiveShadow","node","loadModel","index","readyState"],"sourceRoot":""}